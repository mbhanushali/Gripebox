/*!
 * jQuery JavaScript Library v1.7.1
 * http://jquery.com/
 *
 * Copyright 2011, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2011, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Mon Nov 21 21:11:03 2011 -0500
 */
function AlertTimeClose(){setTimeout(function(){$(".alert-message").parent().remove()},6e3)}function CloseAlert(){$(".alert-message .close").live("click",function(){return $(this).parent().parent().parent().remove(),!1})}function ScrollAlert(){var a=$(".alert-message").offset();$(window).scroll(function(){$(window).scrollTop()>a.top?$(".alert-message").stop().css({marginTop:$(window).scrollTop()-a.top}):$(".alert-message").stop().css({marginTop:0})})}function ScrollAlertPosition(){$(window).scrollTop()>$(".alert-message").offset().top?$(".alert-message").stop().css({marginTop:$(window).scrollTop()-$(".alert-message").offset().top}):$(".alert-message").stop().css({marginTop:0})}function checkmail(a){var b=/^\w+([\.-]?\w+)*@(((([a-z0-9]{2,})|([a-z0-9][-][a-z0-9]+))[\.][a-z0-9])|([a-z0-9]+[-]?))+[a-z0-9]+\.([a-z]{2}|(com|net|org|edu|int|mil|gov|arpa|biz|aero|name|coop|info|pro|museum))$/i;return a.match(b)?!0:!1}function checkpass(a){var b=/^[a-zA-Z0-9_-]{6,18}$/;return a.match(b)?!0:!1}function FilterSearchAjax(){var a=new Array;$(".filter-media-content input:checked").each(function(){a.push($(this).val())}),a.length==0&&(a="");var b=$(".filter-power-content div.active span").text();if($(".filter-sort-content .arrow").is(".active"))var c="top";else var c="down";var d=new Array;$(".filter-sort-content input:checked").each(function(){d.push($(this).val())}),d.length==0&&(d="");var e=new Array;$(".filter-tags-content ul li").each(function(){e.push($.trim($(this).text()))}),e.length==0&&(e=""),$.ajax({type:"POST",url:"/gripe/filter",data:{search:$(".search-text").val(),"mediaids[]":a,power:b,sortdate:c,"sortids[]":d,"tagsids[]":e,"hidden-userid":$("#hidden-userid").val(),authenticity_token:$("meta[name=csrf-token]").attr("content")},success:function(a){$("#container #center").html(a),renderCheckboxAndInput(),$(function(){$(".widget-gripe-pics a").lightBox()}),renderPlayer(),boxVoteHover()},error:function(a){$("#container").before('<div class="main alerts"><div class="alert-message success" style="display: block;"><div><a href="#" class="close">×</a><p> Sorry there were no results with those filters. </p></div></div></div>'),CloseAlert(),AlertTimeClose(),renderPlayer()}})}function initialize(){function g(a,b){var c=document.getElementById(a);google.maps.event.addDomListener(c,"click",function(){d.setTypes(b)})}var a={center:new google.maps.LatLng(-33.8688,151.2195),zoom:13,mapTypeId:google.maps.MapTypeId.ROADMAP},b=new google.maps.Map(document.getElementById("map_canvas"),a),c=document.getElementById("user-location"),d=new google.maps.places.Autocomplete(c);d.bindTo("bounds",b);var e=new google.maps.InfoWindow,f=new google.maps.Marker({map:b});google.maps.event.addListener(d,"place_changed",function(){e.close();var a=d.getPlace();a.geometry.viewport?b.fitBounds(a.geometry.viewport):(b.setCenter(a.geometry.location),b.setZoom(17));var c=new google.maps.MarkerImage(a.icon,new google.maps.Size(71,71),new google.maps.Point(0,0),new google.maps.Point(17,34),new google.maps.Size(35,35));f.setIcon(c),f.setPosition(a.geometry.location);var g="";a.address_components&&(g=[a.address_components[0]&&a.address_components[0].short_name||"",a.address_components[1]&&a.address_components[1].short_name||"",a.address_components[2]&&a.address_components[2].short_name||""].join(" ")),e.setContent("<div><strong>"+a.name+"</strong><br>"+g),e.open(b,f)}),g("changetype-all",[]),g("changetype-establishment",["establishment"]),g("changetype-geocode",["geocode"])}function btnEditGripe(a){var b=$(".box-gripe#"+a),c=b.find(".form-edit-gripe .tips[value!='']").length,d=b.find(".form-edit-gripe .tips").length;c==d?$(".form-edit-gripe .save-sett").removeClass("submitOff"):$(".form-edit-gripe .save-sett").addClass("submitOff")}function playerInit(a,b){$("#"+a).each(function(){jwplayer(a).setup({id:"playerID",width:"641",height:"364",file:b,skin:"/assets/ccn_skin.xml",modes:[{type:"flash",src:"/assets/player.swf"}]})})}function renderPlayer(){$(".media-content").each(function(){playerInit($(this).attr("id"),$(this).attr("source"))})}function boxVoteHover(){$(".box-vote").hover(function(){$(this).is(".active")?$(this).find(".popup-griper-subscriptions span").text("Click here to Unsubscribe to this Gripe.").parent().fadeIn("slow"):$(this).find(".popup-griper-subscriptions span").text("Click here to subscribe to this Gripe.").parent().fadeIn("slow")},function(){$(this).find(".popup-griper-subscriptions").hide()})}function close_overlay(){$("#overlay").remove(),$(".bl-popup").hide()}function overlay(){$("body").find("#overlay").is("div")||$("body").append("<div id='overlay'></div>")}function filter_input(a){regexp=/\d/,a=a||window.event;var b=a.target||a.srcElement,c=document.all;if(b.tagName.toUpperCase()=="INPUT"){var d=c?a.keyCode:a.which;if(d<32||a.ctrlKey||a.altKey)return!0;var e=String.fromCharCode(d);if(!regexp.test(e))return!1}return!0}function renderCheckboxAndInput(){$(".tips").each(function(a){defVal=$(this).attr("default"),$(this).val()==""?$(this).prev().is(".span_val")||$(this).before("<span class='span_val'>"+defVal+"</span>"):$(this).prev().is(".span_val")||($(this).before("<span class='span_val'>"+defVal+"</span>"),$(this).prev().hide())}),$(".span_val").click(function(a){$(this).parent().find("input.tips").focus(),$(this).parent().find("textarea.tips").focus()}),$(".tips").keyup(function(a){$(this).val().length==0&&$(this).parent().find(".span_val").css({display:"block"})}),$(".tips").keydown(function(a){$(this).parent().find(".span_val").css({display:"none"})}),$(".checkbox").each(function(a){var b=$(this).parent().parent();if(!b.children(".checkboxOn").is("div")&&!b.children(".checkboxOff").is("div")){var c=$(this).attr("checked");c?$(this).wrap("<div class='checkboxOn checkboxDiv'></div>"):$(this).wrap("<div class='checkboxOff checkboxDiv'></div>")}}),$("input[type=checkbox].checkbox:checked").live("click",function(){$(this).parent().removeClass("checkboxOff").addClass("checkboxOn")}),$("input[type=checkbox].checkbox:not(:checked)").live("click",function(){$(this).parent().removeClass("checkboxOn").addClass("checkboxOff")}),$("input[type=radio].checkbox").live("click",function(a){var b=$(this).attr("checked"),c=$(this).attr("name");b?($(this).closest("form").find(".checkboxDiv input[name="+c+"]").parent().removeClass("checkboxOn").addClass("checkboxOff"),$(this).parent().removeClass("checkboxOff").addClass("checkboxOn")):$(this).parent().removeClass("checkboxOn").addClass("checkboxOff")}),$(".gender #gender-m").before('<label class="lbl" for="gender-m">m</label>'),$(".gender #gender-f").before('<label class="lbl" for="gender-f">f</label>')}function parseIframe(){var a=$("#file-upload-iframe").contents().text(),b=jQuery.parseJSON(a),c=$("#file-upload-panel").attr("status");a.trim().length>0&&(b.created_at?($(".block-edit-image:last .bl-loading").after('<div class="bl-delete">x delete</div>'),$(".block-edit-image:last .bl-loading").text(""),c=="img"&&$.ajax({type:"POST",url:"/uploader/image?id="+b.id,success:function(a){$(".block-edit-image:last .bl-img img").attr("src",a).attr("original",b.id).css({margin:"0"}),$("#new_gripe .btn-gripe").removeClass("submitNo")}}),c=="video"&&$.ajax({type:"POST",url:"/uploader/image?id="+b.id,success:function(a){$(".block-edit-image:last .bl-img img").attr("src",a).attr("original",b.id).css({margin:"0"}),$("#new_gripe .btn-gripe").removeClass("submitNo")}})):($(".gripe_master_list_error").val(a),$(".block-edit-image:last").html("<div class='error'>"+$(".gripe_master_list_error").val()+"</div>"),$(".block-edit-image:last").append('<div class="bl-delete">x delete</div>')),$(".gripe_master .disabled").remove(),$("#file-upload-panel").removeClass("disabledBtn"))}function fileUpload(a){var b=["jpg","jpeg","gif","png","ico","bmp"],c=["mov","mp4","avi","mpeg","m4v"],d=$(".file-upload-source[status='"+a+"']").val(),e=d.match(/\.([^\.]+)$/);if(a=="img"&&$.inArray(e[1],b)==-1)return alert("No file img pls 'jpg','jpeg','gif','png','ico','bmp' !"),!1;if(a=="video"&&$.inArray(e[1],c)==-1)return alert("No file video pls 'mov','mp4','avi','mpeg','m4v'!"),!1;var f='<div class="block-edit-image"><div class="bl-img"><img src="/assets/loading.gif" alt=""></div><div class="bl-content"><textarea default="Add are description." class="tips ed-text"></textarea><div class="bl-loading">loading ...</div><div class="clear"></div></div><div class="clear"></div></div>';$(".gripe_master_list").prepend(f),renderCheckboxAndInput(),$(".block-edit-image").removeClass("nobg"),$(".block-edit-image:last").addClass("nobg"),$("#new_gripe .btn-gripe").addClass("submitNo"),$("#file-upload-panel").before("<div class ='disabled'> </div>"),$("#file-upload-panel").addClass("disabledBtn"),$("#file-upload-panel").attr("status",a),$("#file-upload-panel").submit()}function embed_gripes(){var a='<div class="block-edit-image nobg"><div class="embed-text">embed</div><div class="bl-content"><span class="span_val" style="display: none; ">Paste your link here.</span><textarea class="tips ed-embed-text" default="Paste your link here." name="embed_text"></textarea></div><span class="gray_embed"><img alt="Gray_arrows" src="/assets/gray_arrows.png"></span><div class="bl-content" style="margin-left: 22px;width:448px;"><div class="bl-loading"></div><div class="bl-delete">x delete</div><div class="clear"></div></div><div class="clear"></div></div>';$(".gripe_master_list").prepend(a);var b=$("div.block-edit-image, rootOfList").last();$(".gripe_master_list .block-edit-image").length>1&&($(".block-edit-image").removeClass("nobg"),$(".block-edit-image:last").addClass("nobg")),b.find("textarea").val(""),b.find(".span_val").show()}function openFile(a){var b=a.substr(a.lastIndexOf(".")+1);switch(b){case"jpg":case"png":case"gif":case"jpeg":case"ico":case"bmp":return"image";case"mov":case"swf":case"wma":case"mp4":case"avi":case"mpeg":case"m4v":return"video";default:return get_embed_details(a)}}function get_embed_details(a,b){var c=$.ajax({url:"/embed_details.js",type:"POST",dataType:"JSON",data:{embed_url:a},success:function(a){file_type=a.type;if(file_type=="video")thumbnail_url=a.thumbnail_url,file_html=a.html,embed_success=!0;else if(file_type=="photo"){image_url=a.src,file_html=a.html,embed_success=!0,$(".gripe_master_list").prepend(file_html),$(".block-edit-image:last .bl-img img").attr("src",a.src).attr("original",a.id).css({margin:"0"}),$("div.block-edit-image").each(function(){$(this).removeClass("nobg")}),$("#new_gripe .btn-gripe").removeClass("submitNo");var c=$("div.block-edit-image, rootOfList").last();$(c).find("textarea").val(""),$(c).find(".span_val").show(),$(c).addClass("nobg"),$(b).removeAttr("disabled"),$(b).parent().parent().remove()}},error:function(a,c,d){$(b).removeAttr("disabled"),console.log("The following error occured: "+c,d)},complete:function(){}});return embed_success}function StyleButtonAvatar(){$(".settings-user #user_avatar").each(function(){$(".settings-user #user_avatar").filestyle({image:"/assets/one.png",imageheight:26,imagewidth:130,width:130,pathClass:"fileImg"})})}function parseIframeAvatar(){var a=$("#file-upload-iframe").contents().text();a.length>0&&$.ajax({type:"POST",url:"/account/avatar",data:{authenticity_token:$("meta[name=csrf-token]").attr("content")},success:function(a){$(".settings-user .img-box").html(a).removeClass("ldng")}})}function fileUploadAvatar(){var a=["jpg","jpeg","gif","png"];path=$(".settings-user .file-upload-source").val(),expansion=path.match(/\.([^\.]+)$/);if(status=="image"&&$.inArray(expansion[1],a)==-1)return alert("No file img pls 'jpg','jpeg','gif','png','ico','bmp' !"),!1;$(".settings-user .img-box").html('<img src="/assets/loading.gif" class="ldng" alt="">'),$("#file-upload-panel").submit()}function StyleButton(){$(".box-gripe #file_image").each(function(){$(".box-gripe #file_image").filestyle({image:"/assets/one.png",imageheight:24,imagewidth:56,width:56,pathClass:"fileImg"})}),$(".box-gripe .fileImg").live("click",function(){var a=$(this).closest(".box-gripe").find(".btn-browse");a.addClass("btn-browse-act"),setTimeout(function(){a.removeClass("btn-browse-act")},500)})}function parseIframeEdit(){var a=$("#file-upload-iframe").contents().text(),b=jQuery.parseJSON(a),c=$("#file-upload-panel").attr("status");if(a.length>0){var d=$(".btn-gripe-update.active").parent().attr("id"),e=$(".box-gripe#"+d);b.created_at?(e.find(".block-edit-image:last .bl-loading").after('<div class="bl-delete">x delete</div>'),e.find(".block-edit-image:last .bl-loading").text(""),c=="image"&&$.ajax({type:"POST",url:"/uploader/image?id="+b.id,success:function(a){e.find(".list-edit-image .block-edit-image:last .bl-img img").attr("src",a).attr("original",b.id).css({margin:"0"}).removeClass("ldng").addClass("newI"),$(".block-form-action .save-sett").removeClass("submitOff2")}}),c=="video"&&$.ajax({type:"POST",url:"/uploader/image?id="+b.id,success:function(a){$(".list-edit-video .block-edit-image.nobg .bl-img img").attr("src",a).attr("original",b.id).css({margin:"0"}).removeClass("ldng").addClass("newV"),$(".block-form-action .save-sett").removeClass("submitOff2")}})):($(".gripe_master_list_error").val(a),$(".block-edit-image:last").html("<div class='error'>"+$(".gripe_master_list_error").val()+"</div>"),$(".block-edit-image:last").append('<div class="bl-delete">x delete</div>')),e.find(".disabled").remove(),e.find(".block-form-action .btn-browse, .edit-video, .edit-photo").removeClass("disabledBtn")}}function fileUploadEdit(a,b){var c=["jpg","jpeg","gif","png","ico","bmp"],d=["mov","mp4","avi","mpeg","m4v"],e=$(".file-upload-source[status='"+a+"']").val(),f=e.match(/\.([^\.]+)$/);if(a=="image"&&$.inArray(f[1],c)==-1)return alert("No file img pls 'jpg','jpeg','gif','png','ico','bmp' !"),!1;if(a=="video"&&$.inArray(f[1],d)==-1)return alert("No file video pls 'mov','mp4','avi','mpeg','m4v' !"),!1;var g=$(".box-gripe#"+b);block_upload='<div class="block-edit-image"><div class="bl-img"><img src="/assets/loading.gif" class="ldng" alt=""></div><div class="bl-content"><textarea default="Add are description." class="tips ed-text"></textarea><div class="bl-loading">loading ...</div><div class="clear"></div></div><div class="clear"></div></div>',$(".block-form-action .save-sett").addClass("submitOff2"),g.find(".list-edit-"+a).append(block_upload),renderCheckboxAndInput(),g.find(".block-edit-image").removeClass("nobg"),g.find(".block-edit-image:last").addClass("nobg"),g.find("#file-upload-panel").before("<div class ='disabled'> </div>"),g.find(".block-form-action .btn-browse, .edit-video, .edit-photo").addClass("disabledBtn"),$("#file-upload-panel").attr("status",a),$("#file-upload-panel").submit(),btnEditGripe(b)}function showImgNews(a){$(".viewer-info, .viewer-media").hide(),$(".viewer-preview li").removeClass("active"),$(".viewer-preview li img[rel='"+a+"']").parent().addClass("active"),$(".viewer-info[rel='"+a+"'], .viewer-media[rel='"+a+"']").fadeIn()}function initNewsPlayer(a,b,c){$(".newsvideo").each(function(){jwplayer(a).setup({id:"playerID",width:"411",height:"255",file:b,image:c,skin:"/assets/ccn_skin.xml",modes:[{type:"flash",src:"/assets/player.swf"}],autostart:"false"})})}function countGripes(){$(".result-griper-header").each(function(){$(this).html($(".box-gripe").size()+" results!"+"<span></span>")})}(function(a,b){function h(a){var b=g[a]={},c,d;a=a.split(/\s+/);for(c=0,d=a.length;c<d;c++)b[a[c]]=!0;return b}function l(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(k,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNumeric(d)?parseFloat(d):j.test(d)?f.parseJSON(d):d}catch(g){}f.data(a,c,d)}else d=b}return d}function m(a){for(var b in a){if(b==="data"&&f.isEmptyObject(a[b]))continue;if(b!=="toJSON")return!1}return!0}function n(a,b,c){var d=b+"defer",e=b+"queue",g=b+"mark",h=f._data(a,d);h&&(c==="queue"||!f._data(a,e))&&(c==="mark"||!f._data(a,g))&&setTimeout(function(){!f._data(a,e)&&!f._data(a,g)&&(f.removeData(a,d,!0),h.fire())},0)}function J(){return!1}function K(){return!0}function S(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function T(a,b,c){b=b||0;if(f.isFunction(b))return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return f.grep(a,function(a,d){return a===b===c});if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1});if(O.test(b))return f.filter(b,d,!c);b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function U(a){var b=V.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}function bi(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function bj(a,b){if(b.nodeType!==1||!f.hasData(a))return;var c,d,e,g=f._data(a),h=f._data(b,g),i=g.events;if(i){delete h.handle,h.events={};for(c in i)for(d=0,e=i[c].length;d<e;d++)f.event.add(b,c+(i[c][d].namespace?".":"")+i[c][d].namespace,i[c][d],i[c][d].data)}h.data&&(h.data=f.extend({},h.data))}function bk(a,b){var c;if(b.nodeType!==1)return;b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase();if(c==="object")b.outerHTML=a.outerHTML;else if(c!=="input"||a.type!=="checkbox"&&a.type!=="radio"){if(c==="option")b.selected=a.defaultSelected;else if(c==="input"||c==="textarea")b.defaultValue=a.defaultValue}else a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value);b.removeAttribute(f.expando)}function bl(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function bm(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function bn(a){var b=(a.nodeName||"").toLowerCase();b==="input"?bm(a):b!=="script"&&typeof a.getElementsByTagName!="undefined"&&f.grep(a.getElementsByTagName("input"),bm)}function bo(a){var b=c.createElement("div");return bh.appendChild(b),b.innerHTML=a.outerHTML,b.firstChild}function bp(a,b){b.src?f.ajax({url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bf,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)}function bC(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?bx:by,g=0,h=e.length;if(d>0){if(c!=="border")for(;g<h;g++)c||(d-=parseFloat(f.css(a,"padding"+e[g]))||0),c==="margin"?d+=parseFloat(f.css(a,c+e[g]))||0:d-=parseFloat(f.css(a,"border"+e[g]+"Width"))||0;return d+"px"}d=bz(a,b,b);if(d<0||d==null)d=a.style[b]||0;d=parseFloat(d)||0;if(c)for(;g<h;g++)d+=parseFloat(f.css(a,"padding"+e[g]))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+e[g]+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+e[g]))||0);return d+"px"}function bZ(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bP),e=0,g=d.length,h,i,j;for(;e<g;e++)h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}}function b$(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bT,l;for(;i<j&&(k||!l);i++)l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=b$(a,c,d,e,l,g)));return(k||!l)&&!g["*"]&&(l=b$(a,c,d,e,"*",g)),l}function b_(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d]);e&&f.extend(!0,a,e)}function ca(a,b,c,d){if(f.isArray(b))f.each(b,function(b,e){c||bE.test(a)?d(a,e):ca(a+"["+(typeof e=="object"||f.isArray(e)?b:"")+"]",e,c,d)});else if(!c&&b!=null&&typeof b=="object")for(var e in b)ca(a+"["+e+"]",b[e],c,d);else d(a,b)}function cb(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g)i in d&&(c[g[i]]=d[i]);while(f[0]==="*")f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"));if(h)for(i in e)if(e[i]&&e[i].test(h)){f.unshift(i);break}if(f[0]in d)j=f[0];else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j)return j!==f[0]&&f.unshift(j),d[j]}function cc(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1)for(h in a.converters)typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h]);l=k,k=d[g];if(k==="*")k=l;else if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}return c}function ci(){try{return new a.XMLHttpRequest}catch(b){}}function cj(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function cs(){return setTimeout(ct,0),cr=f.now()}function ct(){cr=b}function cu(a,b){var c={};return f.each(cq.concat.apply([],cq.slice(0,b)),function(){c[this]=a}),c}function cv(a){if(!ck[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove();if(e==="none"||e===""){cl||(cl=c.createElement("iframe"),cl.frameBorder=cl.width=cl.height=0),b.appendChild(cl);if(!cm||!cl.createElement)cm=(cl.contentWindow||cl.contentDocument).document,cm.write((c.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),cm.close();d=cm.createElement(a),cm.body.appendChild(d),e=f.css(d,"display"),b.removeChild(cl)}ck[a]=e}return ck[a]}function cy(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}var c=a.document,d=a.navigator,e=a.location,f=function(){function J(){if(e.isReady)return;try{c.documentElement.doScroll("left")}catch(a){setTimeout(J,1);return}e.ready()}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,q=/(?:^|:|,)(?:\s*\[)+/g,r=/(webkit)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,t=/(msie) ([\w.]+)/,u=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/-([a-z]|[0-9])/ig,w=/^-ms-/,x=function(a,b){return(b+"").toUpperCase()},y=d.userAgent,z,A,B,C=Object.prototype.toString,D=Object.prototype.hasOwnProperty,E=Array.prototype.push,F=Array.prototype.slice,G=String.prototype.trim,H=Array.prototype.indexOf,I={};return e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(a==="body"&&!d&&c.body)return this.context=c,this[0]=c.body,this.selector=a,this.length=1,this;if(typeof a=="string"){a.charAt(0)==="<"&&a.charAt(a.length-1)===">"&&a.length>=3?g=[null,a,null]:g=i.exec(a);if(g&&(g[1]||!d)){if(g[1])return d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=m.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes),e.merge(this,a);h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2])return f.find(a);this.length=1,this[0]=h}return this.context=c,this.selector=a,this}return!d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}return e.isFunction(a)?f.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),e.makeArray(a,this))},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return F.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();return e.isArray(a)?E.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")"),d},each:function(a,b){return e.each(this,a,b)},ready:function(a){return e.bindReady(),A.add(a),this},eq:function(a){return a=+a,a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(F.apply(this,arguments),"slice",F.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++)if((a=arguments[j])!=null)for(c in a){d=i[c],f=a[c];if(i===f)continue;l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)}return i},e.extend({noConflict:function(b){return a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f),e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body)return setTimeout(e.ready,1);e.isReady=!0;if(a!==!0&&--e.readyWait>0)return;A.fireWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").off("ready")}},bindReady:function(){if(A)return;A=e.Callbacks("once memory");if(c.readyState==="complete")return setTimeout(e.ready,1);if(c.addEventListener)c.addEventListener("DOMContentLoaded",B,!1),a.addEventListener("load",e.ready,!1);else if(c.attachEvent){c.attachEvent("onreadystatechange",B),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&J()}},isFunction:function(a){return e.type(a)==="function"},isArray:Array.isArray||function(a){return e.type(a)==="array"},isWindow:function(a){return a&&typeof a=="object"&&"setInterval"in a},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):I[C.call(a)]||"object"},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a))return!1;try{if(a.constructor&&!D.call(a,"constructor")&&!D.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||D.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw new Error(a)},parseJSON:function(b){if(typeof b!="string"||!b)return null;b=e.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(n.test(b.replace(o,"@").replace(p,"]").replace(q,"")))return(new Function("return "+b))();e.error("Invalid JSON: "+b)},parseXML:function(c){var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(g){d=b}return(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(w,"ms-").replace(v,x)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a)if(c.apply(a[f],d)===!1)break}else for(;g<h;)if(c.apply(a[g++],d)===!1)break}else if(i){for(f in a)if(c.call(a[f],f,a[f])===!1)break}else for(;g<h;)if(c.call(a[g],g,a[g++])===!1)break;return a},trim:G?function(a){return a==null?"":G.call(a)}:function(a){return a==null?"":a.toString().replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?E.call(c,a):e.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(H)return H.call(b,a,c);d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number")for(var f=c.length;e<f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];return a.length=d,a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k)for(;i<j;i++)f=c(a[i],i,d),f!=null&&(h[h.length]=f);else for(g in a)f=c(a[g],g,d),f!=null&&(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];c=a,a=d}if(!e.isFunction(a))return b;var f=F.call(arguments,2),g=function(){return a.apply(c,f.concat(F.call(arguments)))};return g.guid=a.guid=a.guid||g.guid||e.guid++,g},access:function(a,c,d,f,g,h){var i=a.length;if(typeof c=="object"){for(var j in c)e.access(a,j,c[j],f,g,d);return a}if(d!==b){f=!h&&f&&e.isFunction(d);for(var k=0;k<i;k++)g(a[k],c,f?d.call(a[k],k,g(a[k],c)):d,h);return a}return i?g(a[0],c):b},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=r.exec(a)||s.exec(a)||t.exec(a)||a.indexOf("compatible")<0&&u.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){return f&&f instanceof e&&!(f instanceof a)&&(f=a(f)),e.fn.init.call(this,d,f,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){I["[object "+b+"]"]=b.toLowerCase()}),z=e.uaMatch(y),z.browser&&(e.browser[z.browser]=!0,e.browser.version=z.version),e.browser.webkit&&(e.browser.safari=!0),j.test(" ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?B=function(){c.removeEventListener("DOMContentLoaded",B,!1),e.ready()}:c.attachEvent&&(B=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",B),e.ready())}),e}(),g={};f.Callbacks=function(a){a=a?g[a]||h(a):{};var c=[],d=[],e,i,j,k,l,m=function(b){var d,e,g,h,i;for(d=0,e=b.length;d<e;d++)g=b[d],h=f.type(g),h==="array"?m(g):h==="function"&&(!a.unique||!o.has(g))&&c.push(g)},n=function(b,f){f=f||[],e=!a.memory||[b,f],i=!0,l=j||0,j=0,k=c.length;for(;c&&l<k;l++)if(c[l].apply(b,f)===!1&&a.stopOnFalse){e=!0;break}i=!1,c&&(a.once?e===!0?o.disable():c=[]:d&&d.length&&(e=d.shift(),o.fireWith(e[0],e[1])))},o={add:function(){if(c){var a=c.length;m(arguments),i?k=c.length:e&&e!==!0&&(j=a,n(e[0],e[1]))}return this},remove:function(){if(c){var b=arguments,d=0,e=b.length;for(;d<e;d++)for(var f=0;f<c.length;f++)if(b[d]===c[f]){i&&f<=k&&(k--,f<=l&&l--),c.splice(f--,1);if(a.unique)break}}return this},has:function(a){if(c){var b=0,d=c.length;for(;b<d;b++)if(a===c[b])return!0}return!1},empty:function(){return c=[],this},disable:function(){return c=d=e=b,this},disabled:function(){return!c},lock:function(){return d=b,(!e||e===!0)&&o.disable(),this},locked:function(){return!d},fireWith:function(b,c){return d&&(i?a.once||d.push([b,c]):(!a.once||!e)&&n(b,c)),this},fire:function(){return o.fireWith(this,arguments),this},fired:function(){return!!e}};return o};var i=[].slice;f.extend({Deferred:function(a){var b=f.Callbacks("once memory"),c=f.Callbacks("once memory"),d=f.Callbacks("memory"),e="pending",g={resolve:b,reject:c,notify:d},h={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){return i.done(a).fail(b).progress(c),this},always:function(){return i.done.apply(i,arguments).fail.apply(i,arguments),this},pipe:function(a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])}):i[a](d[e])})}).promise()},promise:function(a){if(a==null)a=h;else for(var b in h)a[b]=h[b];return a}},i=h.promise({}),j;for(j in g)i[j]=g[j].fire,i[j+"With"]=g[j].fireWith;return i.done(function(){e="resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock),a&&a.call(i,i),i},when:function(a){function l(a){return function(c){b[a]=arguments.length>1?i.call(arguments,0):c,--g||j.resolveWith(j,b)}}function m(a){return function(b){e[a]=arguments.length>1?i.call(arguments,0):b,j.notifyWith(k,e)}}var b=i.call(arguments,0),c=0,d=b.length,e=new Array(d),g=d,h=d,j=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred(),k=j.promise();if(d>1){for(;c<d;c++)b[c]&&b[c].promise&&f.isFunction(b[
c].promise)?b[c].promise().then(l(c),j.reject,m(c)):--g;g||j.resolveWith(j,b)}else j!==a&&j.resolveWith(j,d?[a]:[]);return k}}),f.support=function(){var b,d,e,g,h,i,j,k,l,m,n,o,p,q=c.createElement("div"),r=c.documentElement;q.setAttribute("className","t"),q.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=q.getElementsByTagName("*"),e=q.getElementsByTagName("a")[0];if(!d||!d.length||!e)return{};g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=q.getElementsByTagName("input")[0],b={leadingWhitespace:q.firstChild.nodeType===3,tbody:!q.getElementsByTagName("tbody").length,htmlSerialize:!!q.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:q.className!=="t",enctype:!!c.createElement("form").enctype,html5Clone:c.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},i.checked=!0,b.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,b.optDisabled=!h.disabled;try{delete q.test}catch(s){b.deleteExpando=!1}!q.addEventListener&&q.attachEvent&&q.fireEvent&&(q.attachEvent("onclick",function(){b.noCloneEvent=!1}),q.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),b.radioValue=i.value==="t",i.setAttribute("checked","checked"),q.appendChild(i),k=c.createDocumentFragment(),k.appendChild(q.lastChild),b.checkClone=k.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=i.checked,k.removeChild(i),k.appendChild(q),q.innerHTML="",a.getComputedStyle&&(j=c.createElement("div"),j.style.width="0",j.style.marginRight="0",q.style.width="2px",q.appendChild(j),b.reliableMarginRight=(parseInt((a.getComputedStyle(j,null)||{marginRight:0}).marginRight,10)||0)===0);if(q.attachEvent)for(o in{submit:1,change:1,focusin:1})n="on"+o,p=n in q,p||(q.setAttribute(n,"return;"),p=typeof q[n]=="function"),b[o+"Bubbles"]=p;return k.removeChild(q),k=g=h=j=q=i=null,f(function(){var a,d,e,g,h,i,j,k,m,n,o,r=c.getElementsByTagName("body")[0];if(!r)return;j=1,k="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",m="visibility:hidden;border:0;",n="style='"+k+"border:5px solid #000;padding:0;'",o="<div "+n+"><div></div></div>"+"<table "+n+" cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",a=c.createElement("div"),a.style.cssText=m+"width:0;height:0;position:static;top:0;margin-top:"+j+"px",r.insertBefore(a,r.firstChild),q=c.createElement("div"),a.appendChild(q),q.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",l=q.getElementsByTagName("td"),p=l[0].offsetHeight===0,l[0].style.display="",l[1].style.display="none",b.reliableHiddenOffsets=p&&l[0].offsetHeight===0,q.innerHTML="",q.style.width=q.style.paddingLeft="1px",f.boxModel=b.boxModel=q.offsetWidth===2,typeof q.style.zoom!="undefined"&&(q.style.display="inline",q.style.zoom=1,b.inlineBlockNeedsLayout=q.offsetWidth===2,q.style.display="",q.innerHTML="<div style='width:4px;'></div>",b.shrinkWrapBlocks=q.offsetWidth!==2),q.style.cssText=k+m,q.innerHTML=o,d=q.firstChild,e=d.firstChild,h=d.nextSibling.firstChild.firstChild,i={doesNotAddBorder:e.offsetTop!==5,doesAddBorderForTableAndCells:h.offsetTop===5},e.style.position="fixed",e.style.top="20px",i.fixedPosition=e.offsetTop===20||e.offsetTop===15,e.style.position=e.style.top="",d.style.overflow="hidden",d.style.position="relative",i.subtractsBorderForOverflowNotVisible=e.offsetTop===-5,i.doesNotIncludeMarginInBodyOffset=r.offsetTop!==j,r.removeChild(a),q=a=null,f.extend(b,i)}),b}();var j=/^(?:\{.*\}|\[.*\])$/,k=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?f.cache[a[f.expando]]:a[f.expando],!!a&&!m(a)},data:function(a,c,d,e){if(!f.acceptData(a))return;var g,h,i,j=f.expando,k=typeof c=="string",l=a.nodeType,m=l?f.cache:a,n=l?a[j]:a[j]&&j,o=c==="events";if((!n||!m[n]||!o&&!e&&!m[n].data)&&k&&d===b)return;n||(l?a[j]=n=++f.uuid:n=j),m[n]||(m[n]={},l||(m[n].toJSON=f.noop));if(typeof c=="object"||typeof c=="function")e?m[n]=f.extend(m[n],c):m[n].data=f.extend(m[n].data,c);return g=h=m[n],e||(h.data||(h.data={}),h=h.data),d!==b&&(h[f.camelCase(c)]=d),o&&!h[c]?g.events:(k?(i=h[c],i==null&&(i=h[f.camelCase(c)])):i=h,i)},removeData:function(a,b,c){if(!f.acceptData(a))return;var d,e,g,h=f.expando,i=a.nodeType,j=i?f.cache:a,k=i?a[h]:h;if(!j[k])return;if(b){d=c?j[k]:j[k].data;if(d){f.isArray(b)||(b in d?b=[b]:(b=f.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,g=b.length;e<g;e++)delete d[b[e]];if(!(c?m:f.isEmptyObject)(d))return}}if(!c){delete j[k].data;if(!m(j[k]))return}f.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(f.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null)},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&&a.getAttribute("classid")===b}return!0}}),f.fn.extend({data:function(a,c){var d,e,g,h=null;if(typeof a=="undefined"){if(this.length){h=f.data(this[0]);if(this[0].nodeType===1&&!f._data(this[0],"parsedAttrs")){e=this[0].attributes;for(var i=0,j=e.length;i<j;i++)g=e[i].name,g.indexOf("data-")===0&&(g=f.camelCase(g.substring(5)),l(this[0],g,h[g]));f._data(this[0],"parsedAttrs",!0)}}return h}return typeof a=="object"?this.each(function(){f.data(this,a)}):(d=a.split("."),d[1]=d[1]?"."+d[1]:"",c===b?(h=this.triggerHandler("getData"+d[1]+"!",[d[0]]),h===b&&this.length&&(h=f.data(this[0],a),h=l(this[0],a,h)),h===b&&d[1]?this.data(d[0]):h):this.each(function(){var b=f(this),e=[d[0],c];b.triggerHandler("setData"+d[1]+"!",e),f.data(this,a,c),b.triggerHandler("changeData"+d[1]+"!",e)}))},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",f._data(a,b,(f._data(a,b)||0)+1))},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark",e=a?0:(f._data(b,d)||1)-1;e?f._data(b,d,e):(f.removeData(b,d,!0),n(b,c,"mark"))}},queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=f._data(a,b),c&&(!d||f.isArray(c)?d=f._data(a,b,f.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e={};d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),f._data(a,b+".run",e),d.call(a,function(){f.dequeue(a,b)},e)),c.length||(f.removeData(a,b+"queue "+b+".run",!0),n(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){return typeof a!="string"&&(c=a,a="fx"),c===b?f.queue(this[0],a):this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){return a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--)if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f.Callbacks("once memory"),!0))h++,l.add(m);return m(),d.promise()}});var o=/[\n\t\r]/g,p=/\s+/,q=/\r/g,r=/^(?:button|input)$/i,s=/^(?:button|input|object|select|textarea)$/i,t=/^a(?:rea)?$/i,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,v=f.support.getSetAttribute,w,x,y;f.fn.extend({attr:function(a,b){return f.access(this,a,b,!0,f.attr)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,a,b,!0,f.prop)},removeProp:function(a){return a=f.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a))return this.each(function(b){f(this).addClass(a.call(this,b,this.className))});if(a&&typeof a=="string"){b=a.split(p);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{g=" "+e.className+" ";for(h=0,i=b.length;h<i;h++)~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ");e.className=f.trim(g)}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a))return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a=="string"||a===b){c=(a||"").split(p);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className)if(a){h=(" "+g.className+" ").replace(o," ");for(i=0,j=c.length;i<j;i++)h=h.replace(" "+c[i]+" "," ");g.className=f.trim(h)}else g.className=""}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";return f.isFunction(a)?this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(p);while(e=j[g++])i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)}else if(c==="undefined"||c==="boolean")this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(o," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e,g=this[0];if(!arguments.length){if(g)return c=f.valHooks[g.nodeName.toLowerCase()]||f.valHooks[g.type],c&&"get"in c&&(d=c.get(g,"value"))!==b?d:(d=g.value,typeof d=="string"?d.replace(q,""):d==null?"":d);return}return e=f.isFunction(a),this.each(function(d){var g=f(this),h;if(this.nodeType!==1)return;e?h=a.call(this,d,g.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""})),c=f.valHooks[this.nodeName.toLowerCase()]||f.valHooks[this.type];if(!c||!("set"in c)||c.set(this,h,"value")===b)this.value=h})}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,g=a.selectedIndex,h=[],i=a.options,j=a.type==="select-one";if(g<0)return null;c=j?g:0,d=j?g+1:i.length;for(;c<d;c++){e=i[c];if(e.selected&&(f.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!f.nodeName(e.parentNode,"optgroup"))){b=f(e).val();if(j)return b;h.push(b)}}return j&&!h.length&&i.length?f(i[g]).val():h},set:function(a,b){var c=f.makeArray(b);return f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var g,h,i,j=a.nodeType;if(!a||j===3||j===8||j===2)return;if(e&&c in f.attrFn)return f(a)[c](d);if(typeof a.getAttribute=="undefined")return f.prop(a,c,d);i=j!==1||!f.isXMLDoc(a),i&&(c=c.toLowerCase(),h=f.attrHooks[c]||(u.test(c)?x:w));if(d!==b){if(d===null){f.removeAttr(a,c);return}return h&&"set"in h&&i&&(g=h.set(a,d,c))!==b?g:(a.setAttribute(c,""+d),d)}return h&&"get"in h&&i&&(g=h.get(a,c))!==null?g:(g=a.getAttribute(c),g===null?b:g)},removeAttr:function(a,b){var c,d,e,g,h=0;if(b&&a.nodeType===1){d=b.toLowerCase().split(p),g=d.length;for(;h<g;h++)e=d[h],e&&(c=f.propFix[e]||e,f.attr(a,e,""),a.removeAttribute(v?e:c),u.test(e)&&c in a&&(a[c]=!1))}},attrHooks:{type:{set:function(a,b){if(r.test(a.nodeName)&&a.parentNode)f.error("type property can't be changed");else if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}},value:{get:function(a,b){return w&&f.nodeName(a,"button")?w.get(a,b):b in a?a.value:null},set:function(a,b,c){if(w&&f.nodeName(a,"button"))return w.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,g,h,i=a.nodeType;if(!a||i===3||i===8||i===2)return;return h=i!==1||!f.isXMLDoc(a),h&&(c=f.propFix[c]||c,g=f.propHooks[c]),d!==b?g&&"set"in g&&(e=g.set(a,d,c))!==b?e:a[c]=d:g&&"get"in g&&(e=g.get(a,c))!==null?e:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):s.test(a.nodeName)||t.test(a.nodeName)&&a.href?0:b}}}}),f.attrHooks.tabindex=f.propHooks.tabIndex,x={get:function(a,c){var d,e=f.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;return b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase())),c}},v||(y={name:!0,id:!0},w=f.valHooks.button={get:function(a,c){var d;return d=a.getAttributeNode(c),d&&(y[c]?d.nodeValue!=="":d.specified)?d.nodeValue:b},set:function(a,b,d){var e=a.getAttributeNode(d);return e||(e=c.createAttribute(d),a.setAttributeNode(e)),e.nodeValue=b+""}},f.attrHooks.tabindex.set=w.set,f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c==="")return a.setAttribute(b,"auto"),c}})}),f.attrHooks.contenteditable={get:w.get,set:function(a,b,c){b===""&&(b="false"),w.set(a,b,c)}}),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}})),f.support.enctype||(f.propFix.enctype="encoding"),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b))return a.checked=f.inArray(f(a).val(),b)>=0}})});var z=/^(?:textarea|input|select)$/i,A=/^([^\.]*)?(?:\.(.+))?$/,B=/\bhover(\.\S+)?\b/,C=/^key/,D=/^(?:mouse|contextmenu)|click/,E=/^(?:focusinfocus|focusoutblur)$/,F=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,G=function(a){var b=F.exec(a);return b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)")),b},H=function(a,b){var c=a.attributes||{};return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||(c.id||{}).value===b[2])&&(!b[3]||b[3].test((c["class"]||{}).value))},I=function(a){return f.event.special.hover?a:a.replace(B,"mouseenter$1 mouseleave$1")};f.event={add:function(a,c,d,e,g){var h,i,j,k,l,m,n,o,p,q,r,s;if(a.nodeType===3||a.nodeType===8||!c||!d||!(h=f._data(a)))return;d.handler&&(p=d,d=p.handler),d.guid||(d.guid=f.guid++),j=h.events,j||(h.events=j={}),i=h.handle,i||(h.handle=i=function(a){return typeof f=="undefined"||!!a&&f.event.triggered===a.type?b:f.event.dispatch.apply(i.elem,arguments)},i.elem=a),c=f.trim(I(c)).split(" ");for(k=0;k<c.length;k++){l=A.exec(c[k])||[],m=l[1],n=(l[2]||"").split(".").sort(),s=f.event.special[m]||{},m=(g?s.delegateType:s.bindType)||m,s=f.event.special[m]||{},o=f.extend({type:m,origType:l[1],data:e,handler:d,guid:d.guid,selector:g,quick:G(g),namespace:n.join(".")},p),r=j[m];if(!r){r=j[m]=[],r.delegateCount=0;if(!s.setup||s.setup.call(a,e,n,i)===!1)a.addEventListener?a.addEventListener(m,i,!1):a.attachEvent&&a.attachEvent("on"+m,i)}s.add&&(s.add.call(a,o),o.handler.guid||(o.handler.guid=d.guid)),g?r.splice(r.delegateCount++,0,o):r.push(o),f.event.global[m]=!0}a=null},global:{},remove:function(a,b,c,d,e){var g=f.hasData(a)&&f._data(a),h,i,j,k,l,m,n,o,p,q,r,s;if(!g||!(o=g.events))return;b=f.trim(I(b||"")).split(" ");for(h=0;h<b.length;h++){i=A.exec(b[h])||[],j=k=i[1],l=i[2];if(!j){for(j in o)f.event.remove(a,j+b[h],c,d,!0);continue}p=f.event.special[j]||{},j=(d?p.delegateType:p.bindType)||j,r=o[j]||[],m=r.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(n=0;n<r.length;n++)s=r[n],(e||k===s.origType)&&(!c||c.guid===s.guid)&&(!l||l.test(s.namespace))&&(!d||d===s.selector||d==="**"&&s.selector)&&(r.splice(n--,1),s.selector&&r.delegateCount--,p.remove&&p.remove.call(a,s));r.length===0&&m!==r.length&&((!p.teardown||p.teardown.call(a,l)===!1)&&f.removeEvent(a,j,g.handle),delete o[j])}f.isEmptyObject(o)&&(q=g.handle,q&&(q.elem=null),f.removeData(a,["events","handle"],!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){if(!e||e.nodeType!==3&&e.nodeType!==8){var h=c.type||c,i=[],j,k,l,m,n,o,p,q,r,s;if(E.test(h+f.event.triggered))return;h.indexOf("!")>=0&&(h=h.slice(0,-1),k=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());if((!e||f.event.customEvent[h])&&!f.event.global[h])return;c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.isTrigger=!0,c.exclusive=k,c.namespace=i.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,o=h.indexOf(":")<0?"on"+h:"";if(!e){j=f.cache;for(l in j)j[l].events&&j[l].events[h]&&f.event.trigger(c,d,j[l].handle.elem,!0);return}c.result=b,c.target||(c.target=e),d=d!=null?f.makeArray(d):[],d.unshift(c),p=f.event.special[h]||{};if(p.trigger&&p.trigger.apply(e,d)===!1)return;r=[[e,p.bindType||h]];if(!g&&!p.noBubble&&!f.isWindow(e)){s=p.delegateType||h,m=E.test(s+h)?e:e.parentNode,n=null;for(;m;m=m.parentNode)r.push([m,s]),n=m;n&&n===e.ownerDocument&&r.push([n.defaultView||n.parentWindow||a,s])}for(l=0;l<r.length&&!c.isPropagationStopped();l++)m=r[l][0],c.type=r[l][1],q=(f._data(m,"events")||{})[c.type]&&f._data(m,"handle"),q&&q.apply(m,d),q=o&&m[o],q&&f.acceptData(m)&&q.apply(m,d)===!1&&c.preventDefault();return c.type=h,!g&&!c.isDefaultPrevented()&&(!p._default||p._default.apply(e.ownerDocument,d)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)&&o&&e[h]&&(h!=="focus"&&h!=="blur"||c.target.offsetWidth!==0)&&!f.isWindow(e)&&(n=e[o],n&&(e[o]=null),f.event.triggered=h,e[h](),f.event.triggered=b,n&&(e[o]=n)),c.result}return},dispatch:function(c){c=f.event.fix(c||a.event);var d=(f._data(this,"events")||{})[c.type]||[],e=d.delegateCount,g=[].slice.call(arguments,0),h=!c.exclusive&&!c.namespace,i=[],j,k,l,m,n,o,p,q,r,s,t;g[0]=c,c.delegateTarget=this;if(e&&!c.target.disabled&&(!c.button||c.type!=="click")){m=f(this),m.context=this.ownerDocument||this;for(l=c.target;l!=this;l=l.parentNode||this){o={},q=[],m[0]=l;for(j=0;j<e;j++)r=d[j],s=r.selector,o[s]===b&&(o[s]=r.quick?H(l,r.quick):m.is(s)),o[s]&&q.push(r);q.length&&i.push({elem:l,matches:q})}}d.length>e&&i.push({elem:this,matches:d.slice(e)});for(j=0;j<i.length&&!c.isPropagationStopped();j++){p=i[j],c.currentTarget=p.elem;for(k=0;k<p.matches.length&&!c.isImmediatePropagationStopped();k++){r=p.matches[k];if(h||!c.namespace&&!r.namespace||c.namespace_re&&c.namespace_re.test(r.namespace))c.data=r.data,c.handleObj=r,n=((f.event.special[r.origType]||{}).handle||r.handler).apply(p.elem,g),n!==b&&(c.result=n,n===!1&&(c.preventDefault(),c.stopPropagation()))}}return c.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,d){var e,f,g,h=d.button,i=d.fromElement;return a.pageX==null&&d.clientX!=null&&(e=a.target.ownerDocument||c,f=e.documentElement,g=e.body,a.pageX=d.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=d.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?d.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0),a}},fix:function(a){if(a[f.expando])return a;var d,e,g=a,h=f.event.fixHooks[a.type]||{},i=h.props?this.props.concat(h.props):this.props;a=f.Event(g);for(d=i.length;d;)e=i[--d],a[e]=g[e];return a.target||(a.target=g.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey),h.filter?h.filter(a,g):a},special:{ready:{setup:f.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?f.event.trigger(e,null,b):f.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},f.event.handle=f.event.dispatch,f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){if(!(this instanceof f.Event))return new f.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?K:J):this.type=a,b&&f.extend(this,b),this.timeStamp=a&&a.timeStamp||f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=K;var a=this.originalEvent;if(!a)return;a.preventDefault?a.preventDefault():a.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=K;var a=this.originalEvent;if(!a)return;a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=K,this.stopPropagation()},isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J},f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=this,d=a.relatedTarget,e=a.handleObj,g=e.selector,h;if(!d||d!==c&&!f.contains(c,d))a.type=e.origType,h=e.handler.apply(this,arguments),a.type=b;return h}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form"))return!1;f.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=f.nodeName(c,"input")||f.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(f.event.add(d,"submit._submit",function(a){this.parentNode&&!a.isTrigger&&f.event.simulate("submit",this.parentNode,a,!0)}),d._submit_attached=!0)})},teardown:function(){if(f.nodeName(this,"form"))return!1;f.event.remove(this,"._submit")}}),f.support.changeBubbles||(f.event.special.change={setup:function(){if(z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")f.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),f.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,f.event.simulate("change",this,a,!0))});return!1}f.event.add(this,"beforeactivate._change",function(a){var b=a.target;z.test(b.nodeName)&&!b._change_attached&&(f.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&f.event.simulate("change",this.parentNode,a,!0)}),b._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox")return a.handleObj.handler.apply(this,arguments)},teardown:function(){return f.event.remove(this,"._change"),z.test(this.nodeName)}}),f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0)};f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)}}}),f.fn.extend({on:function(a,c,d,e,g){var h,i;if(typeof a=="object"){typeof c!="string"&&(d=c,c=b);for(i in a)this.on(i,c,d,a[i],g);return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1)e=J;else if(!e)return this;return g===1&&(h=e,e=function(a){return f().off(a),h.apply(this,arguments)},e.guid=h.guid||(h.guid=f.guid++)),this.each(function(){f.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on.call(this,a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;return f(a.delegateTarget).off(e.namespace?e.type+"."+e.namespace:e.type,e.selector,e.handler),this}if(typeof a=="object"){for(var g in a)this.off(g,c,a[g]);return this}if(c===!1||typeof c=="function")d=c,c=b;return d===!1&&(d=J),this.each(function(){f.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){return f(this.context).on(a,this.selector,b,c),this},die:function(a,b){return f(this.context).off(a,this.selector||"**",b),this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return f.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f._data(this,"lastToggle"+a.guid)||0)%d;return f._data(this,"lastToggle"+a.guid,e+1),c.preventDefault(),b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){f.fn[b]=function(a,c){return c==null&&(c=a,a=null),arguments.length>0?this.on(b,null,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0),C.test(b)&&(f.event.fixHooks[b]=f.event.keyHooks),D.test(b)&&(f.event.fixHooks[b]=f.event.mouseHooks)}),function(){function w(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}j.nodeType===1&&!g&&(j[d]=c,j.sizset=h);if(j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}e[h]=k}}}function x(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}if(j.nodeType===1){g||(j[d]=c,j.sizset=h);if(typeof b!="string"){if(j===b){k=!0;break}}else if(m.filter(b,[j]).length>0){k=j;break}}j=j[a]}e[h]=k}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),e=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){return i=!1,0});var m=function(b,d,e,f){e=e||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9)return[];if(!b||typeof b!="string")return e;var i,j,k,l,n,q,r,t,u=!0,v=m.isXML(d),w=[],x=b;do{a.exec(""),i=a.exec(x);if(i){x=i[3],w.push(i[1]);if(i[2]){l=i[3];break}}}while(i);if(w.length>1&&p.exec(b))if(w.length===2&&o.relative[w[0]])j=y(w[0]+w[1],d,f);else{j=o.relative[w[0]]?[d]:m(w.shift(),d);while(w.length)b=w.shift(),o.relative[b]&&(b+=w.shift()),j=y(b,j,f)}else{!f&&w.length>1&&d.nodeType===9&&!v&&o.match.ID.test(w[0])&&!o.match.ID.test(w[w.length-1])&&(n=m.find(w.shift(),d,v),d=n.expr?m.filter(n.expr,n.set)[0]:n.set[0]);if(d){n=f?{expr:w.pop(),set:s(f)}:m.find(w.pop(),w.length!==1||w[0]!=="~"&&w[0]!=="+"||!d.parentNode?d:d.parentNode,v),j=n.expr?m.filter(n.expr,n.set):n.set,w.length>0?k=s(j):u=!1;while(w.length)q=w.pop(),r=q,o.relative[q]?r=w.pop():q="",r==null&&(r=d),o.relative[q](k,r,v)}else k=w=[]}k||(k=j),k||m.error(q||b);if(g.call(k)==="[object Array]")if(!u)e.push.apply(e,k);else if(d&&d.nodeType===1)for(t=0;k[t]!=null;t++)k[t]&&(k[t]===!0||k[t].nodeType===1&&m.contains(d,k[t]))&&e.push(j[t]);else for(t=0;k[t]!=null;t++)k[t]&&k[t].nodeType===1&&e.push(j[t]);else s(k,e);return l&&(m(l,h,e,f),m.uniqueSort(e)),e};m.uniqueSort=function(a){if(u){h=i,a.sort(u);if(h)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a)return[];for(e=0,f=o.order.length;e<f;e++){h=o.order[e];if(g=o.leftMatch[h].exec(a)){i=g[1],g.splice(1,1);if(i.substr(i.length-1)!=="\\"){g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c);if(d!=null){a=a.replace(o.match[h],"");break}}}}return d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]),{set:d,expr:a}},m.filter=function(a,c,d,e){var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);while(a&&c.length){for(h in o.filter)if((f=o.leftMatch[h].exec(a))!=null&&f[2]){k=o.filter[h],l=f[1],g=!1,f.splice(1,1);if(l.substr(l.length-1)==="\\")continue;s===r&&(r=[]);if(o.preFilter[h]){f=o.preFilter[h](f,s,d,r,e,t);if(!f)g=i=!0;else if(f===!0)continue}if(f)for(n=0;(j=s[n])!=null;n++)j&&(i=k(j,f,n,s),p=e^i,d&&i!=null?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0));if(i!==b){d||(s=r),a=a.replace(o.match[h],"");if(!g)return[];break}}if(a===q){if(g!=null)break;m.error(a)}q=a}return s},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(d===1||d===9){if(typeof a.textContent=="string")return a.textContent;if(typeof a.innerText=="string")return a.innerText.replace(k,"");for(a=a.firstChild;a;a=a.nextSibling)e+=n(a)}else if(d===3||d===4)return a.nodeValue}else for(b=0;c=a[b];b++)c.nodeType!==8&&(e+=n(c));return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++)if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1);a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}e&&m.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!l.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&m.filter(b,a,!0)}},"":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("parentNode",b,f,a,d,c)},"~":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("previousSibling",b,f,a,d,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(j,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(j,"")},TAG:function(a,b){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/
.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&m.error(a[0]);return a[0]=e++,a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");return!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),a[2]==="~="&&(a[4]=" "+a[4]+" "),a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not"){if(!((a.exec(b[3])||"").length>1||/^\w/.test(b[3]))){var g=m.filter(b[3],c,d,!0^f);return d||e.push.apply(e,g),!1}b[3]=m(b[3],null,null,c)}else if(o.match.POS.test(b[0])||o.match.CHILD.test(b[0]))return!0;return b},POS:function(a){return a.unshift(!0),a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++)if(g[h]===a)return!1;return!0}m.error(e)},CHILD:function(a,b){var c,e,f,g,h,i,j,k=b[1],l=a;switch(k){case"only":case"first":while(l=l.previousSibling)if(l.nodeType===1)return!1;if(k==="first")return!0;l=a;case"last":while(l=l.nextSibling)if(l.nodeType===1)return!1;return!0;case"nth":c=b[2],e=b[3];if(c===1&&e===0)return!0;f=b[0],g=a.parentNode;if(g&&(g[d]!==f||!a.nodeIndex)){i=0;for(l=g.firstChild;l;l=l.nextSibling)l.nodeType===1&&(l.nodeIndex=++i);g[d]=f}return j=a.nodeIndex-e,c===0?j===0:j%c===0&&j/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":!f&&m.attr?d!=null:f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f)return f(a,c,b,d)}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)};for(var r in o.match)o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q));var s=function(a,b){return a=Array.prototype.slice.call(a,0),b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(t){s=function(a,b){var c=0,d=b||[];if(g.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length=="number")for(var e=a.length;c<e;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var u,v;c.documentElement.compareDocumentPosition?u=function(a,b){return a===b?(h=!0,0):!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition?-1:1:a.compareDocumentPosition(b)&4?-1:1}:(u=function(a,b){if(a===b)return h=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i)return v(a,b);if(!g)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return v(e[k],f[k]);return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(o.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=m,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(b.querySelectorAll&&b.querySelectorAll(".TEST").length===0)return;m=function(b,e,f,g){e=e||c;if(!g&&!m.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1])return s(e.getElementsByTagName(b),f);if(h[2]&&o.find.CLASS&&e.getElementsByClassName)return s(e.getElementsByClassName(h[2]),f)}if(e.nodeType===9){if(b==="body"&&e.body)return s([e.body],f);if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode)return s([],f);if(i.id===h[3])return s([i],f)}try{return s(e.querySelectorAll(b),f)}catch(j){}}else if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var k=e,l=e.getAttribute("id"),n=l||d,p=e.parentNode,q=/^\s*[+~]/.test(b);l?n=n.replace(/'/g,"\\$&"):e.setAttribute("id",n),q&&p&&(e=e.parentNode);try{if(!q||p)return s(e.querySelectorAll("[id='"+n+"'] "+b),f)}catch(r){}finally{l||k.removeAttribute("id")}}}return a(b,e,f,g)};for(var e in a)m[e]=a[e];b=null}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}m.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!m.isXML(a))try{if(e||!o.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11)return f}}catch(g){}return m(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!a.getElementsByClassName||a.getElementsByClassName("e").length===0)return;a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}(),c.documentElement.contains?m.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?m.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:m.contains=function(){return!1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var y=function(a,b,c){var d,e=[],f="",g=b.nodeType?[b]:b;while(d=o.match.PSEUDO.exec(a))f+=d[0],a=a.replace(o.match.PSEUDO,"");a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++)m(a,g[h],e,c);return m.filter(f,e)};m.attr=f.attr,m.selectors.attrMap={},f.find=m,f.expr=m.selectors,f.expr[":"]=f.expr.filters,f.unique=m.uniqueSort,f.text=m.getText,f.isXMLDoc=m.isXML,f.contains=m.contains}();var L=/Until$/,M=/^(?:parents|prevUntil|prevAll)/,N=/,/,O=/^.[^:#\[\.,]*$/,P=Array.prototype.slice,Q=f.expr.match.POS,R={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string")return f(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(f.contains(b[c],this))return!0});var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0)for(h=g;h<e.length;h++)for(i=0;i<g;i++)if(e[i]===e[h]){e.splice(h--,1);break}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(f.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(T(this,a,!1),"not",a)},filter:function(a){return this.pushStack(T(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?Q.test(a)?f(a,this.context).index(this[0])>=0:f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h=1;while(g&&g.ownerDocument&&g!==b){for(d=0;d<a.length;d++)f(g).is(a[d])&&c.push({selector:a[d],elem:g,level:h});g=g.parentNode,h++}return c}var i=Q.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(i?i.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11)break}}return c=c.length>1?f.unique(c):c,this.pushStack(c,"closest",a)},index:function(a){return a?typeof a=="string"?f.inArray(this[0],f(a)):f.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(S(c[0])||S(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling(a.parentNode.firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c);return L.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!R[a]?f.unique(e):e,(this.length>1||N.test(d))&&M.test(a)&&(e=e.reverse()),this.pushStack(e,a,P.call(arguments).join(","))}}),f.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d)))g.nodeType===1&&e.push(g),g=g[c];return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var V="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",W=/ jQuery\d+="(?:\d+|null)"/g,X=/^\s+/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Z=/<([\w:]+)/,$=/<tbody/i,_=/<|&#?\w+;/,ba=/<(?:script|style)/i,bb=/<(?:script|object|embed|option|style)/i,bc=new RegExp("<(?:"+V+")","i"),bd=/checked\s*(?:[^=]|=\s*.checked.)/i,be=/\/(java|ecma)script/i,bf=/^\s*<!(?:\[CDATA\[|\-\-)/,bg={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bh=U(c);bg.optgroup=bg.option,bg.tbody=bg.tfoot=bg.colgroup=bg.caption=bg.thead,bg.th=bg.td,f.support.htmlSerialize||(bg._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){return f.isFunction(a)?this.each(function(b){var c=f(this);c.text(a.call(this,b,c.text()))}):typeof a!="object"&&a!==b?this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a)):f.text(this)},wrapAll:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapAll(a.call(this,b))});if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return f.isFunction(a)?this.each(function(b){f(this).wrapInner(a.call(this,b))}):this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=f.isFunction(a);return this.each(function(c){f(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=f.clean(arguments);return a.push.apply(a,this.toArray()),this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);return a.push.apply(a,f.clean(arguments)),a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++)if(!a||f.filter(a,[d]).length)!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild)b.removeChild(b.firstChild)}return this},clone:function(a,b){return a=a==null?!1:a,b=b==null?a:b,this.map(function(){return f.clone(this,a,b)})},html:function(a){if(a===b)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(W,""):null;if(typeof a=="string"&&!ba.test(a)&&(f.support.leadingWhitespace||!X.test(a))&&!bg[(Z.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Y,"<$1></$2>");try{for(var c=0,d=this.length;c<d;c++)this[c].nodeType===1&&(f.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)}catch(e){this.empty().append(a)}}else f.isFunction(a)?this.each(function(b){var c=f(this);c.html(a.call(this,b,c.html()))}):this.empty().append(a);return this},replaceWith:function(a){return this[0]&&this[0].parentNode?f.isFunction(a)?this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))}):(typeof a!="string"&&(a=f(a).detach()),this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})):this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bd.test(j))return this.each(function(){f(this).domManip(a,c,d,!0)});if(f.isFunction(j))return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)});if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++)d.call(c?bi(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}k.length&&f.each(k,bp)}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i,j=a[0];return b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof j=="string"&&j.length<512&&i===c&&j.charAt(0)==="<"&&!bb.test(j)&&(f.support.checkClone||!bd.test(j))&&(f.support.html5Clone||!bc.test(j))&&(g=!0,h=f.fragments[j],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[j]=h?e:1),{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1)return e[b](this[0]),this;for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d,e,g,h=f.support.html5Clone||!bc.test("<"+a.nodeName)?a.cloneNode(!0):bo(a);if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bk(a,h),d=bl(a),e=bl(h);for(g=0;d[g];++g)e[g]&&bk(d[g],e[g])}if(b){bj(a,h);if(c){d=bl(a),e=bl(h);for(g=0;d[g];++g)bj(d[g],e[g])}}return d=e=null,h},clean:function(a,b,d,e){var g;b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);var h=[],i;for(var j=0,k;(k=a[j])!=null;j++){typeof k=="number"&&(k+="");if(!k)continue;if(typeof k=="string")if(!_.test(k))k=b.createTextNode(k);else{k=k.replace(Y,"<$1></$2>");var l=(Z.exec(k)||["",""])[1].toLowerCase(),m=bg[l]||bg._default,n=m[0],o=b.createElement("div");b===c?bh.appendChild(o):U(b).appendChild(o),o.innerHTML=m[1]+k+m[2];while(n--)o=o.lastChild;if(!f.support.tbody){var p=$.test(k),q=l==="table"&&!p?o.firstChild&&o.firstChild.childNodes:m[1]==="<table>"&&!p?o.childNodes:[];for(i=q.length-1;i>=0;--i)f.nodeName(q[i],"tbody")&&!q[i].childNodes.length&&q[i].parentNode.removeChild(q[i])}!f.support.leadingWhitespace&&X.test(k)&&o.insertBefore(b.createTextNode(X.exec(k)[0]),o.firstChild),k=o.childNodes}var r;if(!f.support.appendChecked)if(k[0]&&typeof (r=k.length)=="number")for(i=0;i<r;i++)bn(k[i]);else bn(k);k.nodeType?h.push(k):h=f.merge(h,k)}if(d){g=function(a){return!a.type||be.test(a.type)};for(j=0;h[j];j++)if(e&&f.nodeName(h[j],"script")&&(!h[j].type||h[j].type.toLowerCase()==="text/javascript"))e.push(h[j].parentNode?h[j].parentNode.removeChild(h[j]):h[j]);else{if(h[j].nodeType===1){var s=f.grep(h[j].getElementsByTagName("script"),g);h.splice.apply(h,[j+1,0].concat(s))}d.appendChild(h[j])}}return h},cleanData:function(a){var b,c,d=f.cache,e=f.event.special,g=f.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){if(i.nodeName&&f.noData[i.nodeName.toLowerCase()])continue;c=i[f.expando];if(c){b=d[c];if(b&&b.events){for(var j in b.events)e[j]?f.event.remove(i,j):f.removeEvent(i,j,b.handle);b.handle&&(b.handle.elem=null)}g?delete i[f.expando]:i.removeAttribute&&i.removeAttribute(f.expando),delete d[c]}}}});var bq=/alpha\([^)]*\)/i,br=/opacity=([^)]*)/,bs=/([A-Z]|^ms)/g,bt=/^-?\d+(?:px)?$/i,bu=/^-?\d/,bv=/^([\-+])=([\-+.\de]+)/,bw={position:"absolute",visibility:"hidden",display:"block"},bx=["Left","Right"],by=["Top","Bottom"],bz,bA,bB;f.fn.css=function(a,c){return arguments.length===2&&c===b?this:f.access(this,a,c,!0,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)})},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bz(a,"opacity","opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!a||a.nodeType===3||a.nodeType===8||!a.style)return;var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b)return k&&"get"in k&&(g=k.get(a,!1,e))!==b?g:j[c];h=typeof d,h==="string"&&(g=bv.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number");if(d==null||h==="number"&&isNaN(d))return;h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set"in k)||(d=k.set(a,d))!==b)try{j[c]=d}catch(l){}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get"in g&&(e=g.get(a,!0,d))!==b)return e;if(bz)return bz(a,c)},swap:function(a,b,c){var d={};for(var e in b)d[e]=a.style[e],a.style[e]=b[e];c.call(a);for(e in b)a.style[e]=d[e]}}),f.curCSS=f.css,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){var e;if(c)return a.offsetWidth!==0?bC(a,b,d):(f.swap(a,bw,function(){e=bC(a,b,d)}),e)},set:function(a,b){if(!bt.test(b))return b;b=parseFloat(b);if(b>=0)return b+"px"}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return br.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNumeric(b)?"alpha(opacity="+b*100+")":"",g=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&f.trim(g.replace(bq,""))===""){c.removeAttribute("filter");if(d&&!d.filter)return}c.filter=bq.test(g)?g.replace(bq,e):g+" "+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){var c;return f.swap(a,{display:"inline-block"},function(){b?c=bz(a,"margin-right","marginRight"):c=a.style.marginRight}),c}})}),c.defaultView&&c.defaultView.getComputedStyle&&(bA=function(a,b){var c,d,e;return b=b.replace(bs,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),c===""&&!f.contains(a.ownerDocument.documentElement,a)&&(c=f.style(a,b))),c}),c.documentElement.currentStyle&&(bB=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;return f===null&&g&&(e=g[b])&&(f=e),!bt.test(f)&&bu.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left=b==="fontSize"?"1em":f||0,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d)),f===""?"auto":f}),bz=bA||bB,f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style&&a.style.display||f.css(a,"display"))==="none"},f.expr.filters.visible=function(a){return!f.expr.filters.hidden(a)});var bD=/%20/g,bE=/\[\]$/,bF=/\r?\n/g,bG=/#.*$/,bH=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bI=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bJ=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bK=/^(?:GET|HEAD)$/,bL=/^\/\//,bM=/\?/,bN=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bO=/^(?:select|textarea)/i,bP=/\s+/,bQ=/([?&])_=[^&]*/,bR=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bS=f.fn.load,bT={},bU={},bV,bW,bX=["*/"]+["*"];try{bV=e.href}catch(bY){bV=c.createElement("a"),bV.href="",bV=bV.href}bW=bR.exec(bV.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bS)return bS.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;return f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bN,"")).find(g):c)),d&&i.each(d,[c,b,a])}}),this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bO.test(this.nodeName)||bI.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bF,"\r\n")}}):{name:b.name,value:c.replace(bF,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.on(b,a)}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){return f.isFunction(d)&&(g=g||e,e=d,d=b),f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){return b?b_(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),b_(a,b),a},ajaxSettings:{url:bV,isLocal:bJ.test(bW[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bX},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:bZ(bT),ajaxTransport:bZ(bU),ajax:function(a,c){function w(a,c,l,m){if(s===2)return;s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;var o,r,u,w=c,x=l?cb(d,v,l):b,y,z;if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader("Last-Modified"))f.lastModified[k]=y;if(z=v.getResponseHeader("Etag"))f.etag[k]=z}if(a===304)w="notmodified",o=!0;else try{r=cc(d,x),w="success",o=!0}catch(A){w="parsererror",u=A}}else{u=w;if(!w||a)w="error",a<0&&(a=0)}v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.fireWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))}typeof a=="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f.Callbacks("once memory"),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bH.exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){return s||(d.mimeType=a),this},abort:function(a){return a=a||"abort",p&&p.abort(a),w(0,a),this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.add,v.statusCode=function(a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then(b,b)}return this},d.url=((a||d.url)+"").replace(bG,"").replace(bL,bW[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bP),d.crossDomain==null&&(r=bR.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bW[1]&&r[2]==bW[2]&&(r[3]||(r[1]==="http:"?80:443))==(bW[3]||(bW[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),b$(bT,d,c,v);if(s===2)return!1;t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bK.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bM.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bQ,"$1_="+x);d.url=y+(y===d.url?(bM.test(d.url)?"&":"?")+"_="+x:"")}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+bX+"; q=0.01":""):d.accepts["*"]);for(u in d.headers)v.setRequestHeader(u,d.headers[u]);if(!d.beforeSend||d.beforeSend.call(e,v,d)!==!1&&s!==2){for(u in{success:1,error:1,complete:1})v[u](d[u]);p=b$(bU,d,c,v);if(!p)w(-1,"No Transport");else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")},d.timeout));try{s=1,p.send(l,w)}catch(z){if(!(s<2))throw z;w(-1,z)}}return v}return v.abort(),!1},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a))f.each(a,function(){e(this.name,this.value)});else for(var g in a)ca(g,a[g],c,e);return d.join("&").replace(bD,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var cd=f.now(),ce=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+cd++}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=b.contentType==="application/x-www-form-urlencoded"&&typeof b.data=="string";if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(ce.test(b.url)||e&&ce.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";return b.jsonp!==!1&&(j=j.replace(ce,l),b.url===j&&(e&&(k=k.replace(ce,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){return g||f.error(h+" was not called"),g[0]},b.dataTypes[0]="json","script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){return f.globalEval(a),a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState))d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var cf=a.ActiveXObject?function(){for(var a in ch)ch[a](0,1)}:!1,cg=0,ch;f.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&ci()||cj()}:ci,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields)for(j in c.xhrFields)h[j]=c.xhrFields[j];c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e)h.setRequestHeader(j,e[j])}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,cf&&delete ch[i]);if(e)h.readyState!==4&&h.abort();else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n),m.text=h.responseText;try{k=h.statusText}catch(o){k=""}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++cg,cf&&(ch||(ch={},f(a).unload(cf)),ch[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var ck={},cl,cm,cn=/^(?:toggle|show|hide)$/,co=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,cp,cq=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cr;f.fn.extend({show:function(
a,b,c){var d,e;if(a||a===0)return this.animate(cu("show",3),a,b,c);for(var g=0,h=this.length;g<h;g++)d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),e===""&&f.css(d,"display")==="none"&&f._data(d,"olddisplay",cv(d.nodeName)));for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none")d.style.display=f._data(d,"olddisplay")||""}}return this},hide:function(a,b,c){if(a||a===0)return this.animate(cu("hide",3),a,b,c);var d,e,g=0,h=this.length;for(;g<h;g++)d=this[g],d.style&&(e=f.css(d,"display"),e!=="none"&&!f._data(d,"olddisplay")&&f._data(d,"olddisplay",e));for(g=0;g<h;g++)this[g].style&&(this[g].style.display="none");return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";return f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(cu("toggle",3),a,b,c),this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function g(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]),h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d)return b.complete.call(this);c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(!f.support.inlineBlockNeedsLayout||cv(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a)j=new f.fx(this,b,i),h=a[i],cn.test(h)?(o=f._data(this,"toggle"+i)||(h==="toggle"?d?"show":"hide":0),o?(f._data(this,"toggle"+i,o==="show"?"hide":"show"),j[o]()):j[h]()):(k=co.exec(h),l=j.cur(),k?(m=parseFloat(k[2]),n=k[3]||(f.cssNumber[i]?"":"px"),n!=="px"&&(f.style(this,i,(m||1)+n),l=(m||1)/j.cur()*l,f.style(this,i,l+n)),k[1]&&(m=(k[1]==="-="?-1:1)*m+l),j.custom(l,m,n)):j.custom(l,h,""));return!0}var e=f.speed(b,c,d);return f.isEmptyObject(a)?this.each(e.complete,[!1]):(a=f.extend({},a),e.queue===!1?this.each(g):this.queue(e.queue,g))},stop:function(a,c,d){return typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){function h(a,b,c){var e=b[c];f.removeData(a,c,!0),e.stop(d)}var b,c=!1,e=f.timers,g=f._data(this);d||f._unmark(!0,this);if(a==null)for(b in g)g[b]&&g[b].stop&&b.indexOf(".run")===b.length-4&&h(this,g,b);else g[b=a+".run"]&&g[b].stop&&h(this,g,b);for(b=e.length;b--;)e[b].elem===this&&(a==null||e[b].queue===a)&&(d?e[b](!0):e[b].saveState(),c=!0,e.splice(b,1));(!d||!c)&&f.dequeue(this,a)})}}),f.each({slideDown:cu("show",1),slideUp:cu("hide",1),slideToggle:cu("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default;if(d.queue==null||d.queue===!0)d.queue="fx";return d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue?f.dequeue(this,d.queue):a!==!1&&f._unmark(this)},d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]==null||!!this.elem.style&&this.elem.style[this.prop]!=null){var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a}return this.elem[this.prop]},custom:function(a,c,d){function h(a){return e.step(a)}var e=this,g=f.fx;this.startTime=cr||cs(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(f.cssNumber[this.prop]?"":"px"),h.queue=this.options.queue,h.elem=this.elem,h.saveState=function(){e.options.hide&&f._data(e.elem,"fxshow"+e.prop)===b&&f._data(e.elem,"fxshow"+e.prop,e.start)},h()&&f.timers.push(h)&&!cp&&(cp=setInterval(g.tick,g.interval))},show:function(){var a=f._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||f.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f._data(this.elem,"fxshow"+this.prop)||f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=cr||cs(),g=!0,h=this.elem,i=this.options;if(a||e>=i.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),i.animatedProperties[this.prop]=!0;for(b in i.animatedProperties)i.animatedProperties[b]!==!0&&(g=!1);if(g){i.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){h.style["overflow"+b]=i.overflow[a]}),i.hide&&f(h).hide();if(i.hide||i.show)for(b in i.animatedProperties)f.style(h,b,i.orig[b]),f.removeData(h,"fxshow"+b,!0),f.removeData(h,"toggle"+b,!0);d=i.complete,d&&(i.complete=!1,d.call(h))}return!1}return i.duration==Infinity?this.now=e:(c=e-this.startTime,this.state=c/i.duration,this.pos=f.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},f.extend(f.fx,{tick:function(){var a,b=f.timers,c=0;for(;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||f.fx.stop()},interval:13,stop:function(){clearInterval(cp),cp=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),f.each(["width","height"],function(a,b){f.fx.step[b]=function(a){f.style(a.elem,b,Math.max(0,a.now)+a.unit)}}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var cw=/^t(?:able|d|h)$/i,cx=/^(?:body|html)$/i;"getBoundingClientRect"in c.documentElement?f.fn.offset=function(a){var b=this[0],c;if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);try{c=b.getBoundingClientRect()}catch(d){}var e=b.ownerDocument,g=e.documentElement;if(!c||!f.contains(g,b))return c?{top:c.top,left:c.left}:{top:0,left:0};var h=e.body,i=cy(e),j=g.clientTop||h.clientTop||0,k=g.clientLeft||h.clientLeft||0,l=i.pageYOffset||f.support.boxModel&&g.scrollTop||h.scrollTop,m=i.pageXOffset||f.support.boxModel&&g.scrollLeft||h.scrollLeft,n=c.top+l-j,o=c.left+m-k;return{top:n,left:o}}:f.fn.offset=function(a){var b=this[0];if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);var c,d=b.offsetParent,e=b,g=b.ownerDocument,h=g.documentElement,i=g.body,j=g.defaultView,k=j?j.getComputedStyle(b,null):b.currentStyle,l=b.offsetTop,m=b.offsetLeft;while((b=b.parentNode)&&b!==i&&b!==h){if(f.support.fixedPosition&&k.position==="fixed")break;c=j?j.getComputedStyle(b,null):b.currentStyle,l-=b.scrollTop,m-=b.scrollLeft,b===d&&(l+=b.offsetTop,m+=b.offsetLeft,f.support.doesNotAddBorder&&(!f.support.doesAddBorderForTableAndCells||!cw.test(b.nodeName))&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),e=d,d=b.offsetParent),f.support.subtractsBorderForOverflowNotVisible&&c.overflow!=="visible"&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),k=c}if(k.position==="relative"||k.position==="static")l+=i.offsetTop,m+=i.offsetLeft;return f.support.fixedPosition&&k.position==="fixed"&&(l+=Math.max(h.scrollTop,i.scrollTop),m+=Math.max(h.scrollLeft,i.scrollLeft)),{top:l,left:m}},f.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;return f.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0),{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using"in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=cx.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0,{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!cx.test(a.nodeName)&&f.css(a,"position")==="static")a=a.offsetParent;return a})}}),f.each(["Left","Top"],function(a,c){var d="scroll"+c;f.fn[d]=function(c){var e,g;return c===b?(e=this[0],e?(g=cy(e),g?"pageXOffset"in g?g[a?"pageYOffset":"pageXOffset"]:f.support.boxModel&&g.document.documentElement[d]||g.document.body[d]:e[d]):null):this.each(function(){g=cy(this),g?g.scrollTo(a?f(g).scrollLeft():c,a?c:f(g).scrollTop()):this[d]=c})}}),f.each(["Height","Width"],function(a,c){var d=c.toLowerCase();f.fn["inner"+c]=function(){var a=this[0];return a?a.style?parseFloat(f.css(a,d,"padding")):this[d]():null},f.fn["outer"+c]=function(a){var b=this[0];return b?b.style?parseFloat(f.css(b,d,a?"margin":"border")):this[d]():null},f.fn[d]=function(a){var e=this[0];if(!e)return a==null?null:this;if(f.isFunction(a))return this.each(function(b){var c=f(this);c[d](a.call(this,b,c[d]()))});if(f.isWindow(e)){var g=e.document.documentElement["client"+c],h=e.document.body;return e.document.compatMode==="CSS1Compat"&&g||h&&h["client"+c]||g}if(e.nodeType===9)return Math.max(e.documentElement["client"+c],e.body["scroll"+c],e.documentElement["scroll"+c],e.body["offset"+c],e.documentElement["offset"+c]);if(a===b){var i=f.css(e,d),j=parseFloat(i);return f.isNumeric(j)?j:i}return this.css(d,typeof a=="string"?a:a+"px")}}),a.jQuery=a.$=f,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return f})})(window),function(a,b){var c;a.rails=c={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not(button[type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(b){var c=a('meta[name="csrf-token"]').attr("content");c&&b.setRequestHeader("X-CSRF-Token",c)},fire:function(b,c,d){var e=a.Event(c);return b.trigger(e,d),e.result!==!1},confirm:function(a){return confirm(a)},ajax:function(b){return a.ajax(b)},handleRemote:function(d){var e,f,g,h=d.data("cross-domain")||null,i=d.data("type")||a.ajaxSettings&&a.ajaxSettings.dataType,j;if(c.fire(d,"ajax:before")){if(d.is("form")){e=d.attr("method"),f=d.attr("action"),g=d.serializeArray();var k=d.data("ujs:submit-button");k&&(g.push(k),d.data("ujs:submit-button",null))}else d.is(c.inputChangeSelector)?(e=d.data("method"),f=d.data("url"),g=d.serialize(),d.data("params")&&(g=g+"&"+d.data("params"))):(e=d.data("method"),f=d.attr("href"),g=d.data("params")||null);return j={type:e||"GET",data:g,dataType:i,crossDomain:h,beforeSend:function(a,e){return e.dataType===b&&a.setRequestHeader("accept","*/*;q=0.5, "+e.accepts.script),c.fire(d,"ajax:beforeSend",[a,e])},success:function(a,b,c){d.trigger("ajax:success",[a,b,c])},complete:function(a,b){d.trigger("ajax:complete",[a,b])},error:function(a,b,c){d.trigger("ajax:error",[a,b,c])}},f&&(j.url=f),c.ajax(j)}return!1},handleMethod:function(c){var d=c.attr("href"),e=c.data("method"),f=c.attr("target"),g=a("meta[name=csrf-token]").attr("content"),h=a("meta[name=csrf-param]").attr("content"),i=a('<form method="post" action="'+d+'"></form>'),j='<input name="_method" value="'+e+'" type="hidden" />';h!==b&&g!==b&&(j+='<input name="'+h+'" value="'+g+'" type="hidden" />'),f&&i.attr("target",f),i.hide().append(j).appendTo("body"),i.submit()},disableFormElements:function(b){b.find(c.disableSelector).each(function(){var b=a(this),c=b.is("button")?"html":"val";b.data("ujs:enable-with",b[c]()),b[c](b.data("disable-with")),b.prop("disabled",!0)})},enableFormElements:function(b){b.find(c.enableSelector).each(function(){var b=a(this),c=b.is("button")?"html":"val";b.data("ujs:enable-with")&&b[c](b.data("ujs:enable-with")),b.prop("disabled",!1)})},allowAction:function(a){var b=a.data("confirm"),d=!1,e;return b?(c.fire(a,"confirm")&&(d=c.confirm(b),e=c.fire(a,"confirm:complete",[d])),d&&e):!0},blankInputs:function(b,c,d){var e=a(),f,g=c||"input,textarea";return b.find(g).each(function(){f=a(this);if(d?f.val():!f.val())e=e.add(f)}),e.length?e:!1},nonBlankInputs:function(a,b){return c.blankInputs(a,b,!0)},stopEverything:function(b){return a(b.target).trigger("ujs:everythingStopped"),b.stopImmediatePropagation(),!1},callFormSubmitBindings:function(c,d){var e=c.data("events"),f=!0;return e!==b&&e.submit!==b&&a.each(e.submit,function(a,b){if(typeof b.handler=="function")return f=b.handler(d)}),f},disableElement:function(a){a.data("ujs:enable-with",a.html()),a.html(a.data("disable-with")),a.bind("click.railsDisable",function(a){return c.stopEverything(a)})},enableElement:function(a){a.data("ujs:enable-with")!==b&&(a.html(a.data("ujs:enable-with")),a.data("ujs:enable-with",!1)),a.unbind("click.railsDisable")}},a.ajaxPrefilter(function(a,b,d){a.crossDomain||c.CSRFProtection(d)}),a(document).delegate(c.linkDisableSelector,"ajax:complete",function(){c.enableElement(a(this))}),a(document).delegate(c.linkClickSelector,"click.rails",function(d){var e=a(this),f=e.data("method"),g=e.data("params");if(!c.allowAction(e))return c.stopEverything(d);e.is(c.linkDisableSelector)&&c.disableElement(e);if(e.data("remote")!==b)return(d.metaKey||d.ctrlKey)&&(!f||f==="GET")&&!g?!0:(c.handleRemote(e)===!1&&c.enableElement(e),!1);if(e.data("method"))return c.handleMethod(e),!1}),a(document).delegate(c.inputChangeSelector,"change.rails",function(b){var d=a(this);return c.allowAction(d)?(c.handleRemote(d),!1):c.stopEverything(b)}),a(document).delegate(c.formSubmitSelector,"submit.rails",function(d){var e=a(this),f=e.data("remote")!==b,g=c.blankInputs(e,c.requiredInputSelector),h=c.nonBlankInputs(e,c.fileInputSelector);if(!c.allowAction(e))return c.stopEverything(d);if(g&&e.attr("novalidate")==b&&c.fire(e,"ajax:aborted:required",[g]))return c.stopEverything(d);if(f)return h?c.fire(e,"ajax:aborted:file",[h]):!a.support.submitBubbles&&a().jquery<"1.7"&&c.callFormSubmitBindings(e,d)===!1?c.stopEverything(d):(c.handleRemote(e),!1);setTimeout(function(){c.disableFormElements(e)},13)}),a(document).delegate(c.formInputClickSelector,"click.rails",function(b){var d=a(this);if(!c.allowAction(d))return c.stopEverything(b);var e=d.attr("name"),f=e?{name:e,value:d.val()}:null;d.closest("form").data("ujs:submit-button",f)}),a(document).delegate(c.formSubmitSelector,"ajax:beforeSend.rails",function(b){this==b.target&&c.disableFormElements(a(this))}),a(document).delegate(c.formSubmitSelector,"ajax:complete.rails",function(b){this==b.target&&c.enableFormElements(a(this))})}(jQuery),$(document).ready(function(){$(".alert-message").each(function(){CloseAlert(),AlertTimeClose(),ScrollAlert(),setTimeout(function(){$(".main.alerts.cl .close").click()},1e3)})}),$(document).ready(function(){$(".tabs-block-sign .btn.small").click(function(){var a=$("body").find(".popup-sign-link #user_login"),b=$("body").find(".popup-sign-link #user_password"),c=$("body").find(".popup-sign-link #user_username"),d=$("body").find(".popup-sign-link #user_email");return $(".sign-form").prev().hide(),$.ajax({type:"POST",url:"/check_user_login_param",data:{user_login:a.val(),user_password:b.val()},success:function(){$(".tabs-block-sign .sign-form").submit()},error:function(){$(".sign-form").prev().text("Please enter a valid password or email.").fadeIn("slow")}}),!1}),$(".tabs-block-register .btn.small").click(function(){var a=$("body").find(".tabs-block-register #user_password"),b=$("body").find(".tabs-block-register #user_username"),c=$("body").find(".tabs-block-register #user_email");if(checkmail(c.val())==0)return c.addClass("field-error"),c.closest(".sign-form").prev().text("Oops, please enter a valid Email.").fadeIn("slow"),!1;c.removeClass("field-error"),c.closest(".sign-form").prev().hide();if(checkpass(a.val())==0)return a.addClass("field-error"),a.closest(".sign-form").prev().text("Oops, please enter a valid password.").fadeIn("slow"),!1;a.removeClass("field-error"),a.closest(".sign-form").prev().hide();if(checkpass(a.val()))return $.ajax({type:"POST",url:"/check_user_reg_param",data:{user_email:c.val(),username:b.val()},success:function(a){a=="email"&&$(".sign-form").prev().text("Oops, please enter a valid Email.").fadeIn("slow"),a=="username"&&$(".sign-form").prev().text("Oops, please enter a valid Username.").fadeIn("slow"),!a&&c.val()&&$(".tabs-block-register .sign-form").submit()},error:function(){}}),a.removeClass("field-error"),a.closest(".sign-form").prev().hide(),!1})}),$(document).ready(function(){$(".filter-media-content input").change(function(){FilterSearchAjax()}),$(".widget-filter-media .bl-clear").live("click",function(){$(".filter-media-content .checkboxDiv").removeClass("checkboxOn").addClass("checkboxOff"),$(".filter-media-content .checkboxDiv input").attr("checked",!1),FilterSearchAjax()})}),$(document).ready(function(){$(".weak-content-btn, .strong-content-btn").click(function(){$(".filter-power-content div").removeClass("active"),$(this).addClass("active"),FilterSearchAjax()}),$(".widget-filter-power .bl-clear").click(function(){$(".weak-content-btn, .strong-content-btn, ").removeClass("active"),FilterSearchAjax()})}),$(document).ready(function(){$(".filter-sort-content .arrow .s-top").click(function(){$(".arrow .s-top").parent().addClass("active"),FilterSearchAjax()}),$(".filter-sort-content .arrow .s-down").click(function(){$(".arrow .s-down").parent().removeClass("active"),FilterSearchAjax()}),$(".filter-sort-content input").change(function(){FilterSearchAjax()}),$(".widget-filter-sort .bl-clear").click(function(){$(".filter-sort-content .arrow").removeClass("active"),$(".filter-sort-content .checkboxDiv").removeClass("checkboxOn").addClass("checkboxOff").find("input").attr("checked",!1),FilterSearchAjax()})}),$(document).ready(function(){function a(a){var b=new Array,c=new Array;$(".filter-tags-content ul li").each(function(){var a=$.trim($(this).text());b.push(a)});for(var d=0;d<a.length;d++)$.trim(a[d]).length>0&&$.inArray(a[d],b)==-1&&$(".filter-tags-content ul").prepend('<li> <em class="close"> </em> <span>'+a[d]+"</span> </li>");FilterSearchAjax(),$(".filter-tags-content form input").val("")}$(".filter-tags-content ul .close").live("click",function(){$(this).parent().fadeOut(function(){$(this).remove(),FilterSearchAjax()})}),$(".filter-tags-content form").submit(function(){var b=$(".filter-tags-content form input").val();return b.length>0&&(b=b.split(","),a(b)),!1}),$(".widget-filter-tags .bl-clear").click(function(){$(".filter-tags-content ul li").remove(),FilterSearchAjax()})}),$(document).ready(function(){$("#map_canvas").each(function(a){google.maps.event.addDomListener(window,"load",initialize)})}),$(document).ready(function(){$(function(){$(".widget-gripe-pics a").lightBox()})}),$(document).ready(function(){}),$(document).ready(function(){function a(){$(".block-edit-image:last-child").addClass("nobg")}function b(){$("#file-upload-panel").remove(),$(".box-gripe").find(".list-edit-content").html(""),$(".box-gripe").find(".list-edit-image .newI, .list-edit-video .newV").parent().parent().remove(),$(".form-edit-gripe .block, .block-btn-media").hide(),$(".edit-text, .edit-photo, .edit-video").removeClass("active")}countGripes(),renderPlayer(),boxVoteHover(),$(".box-gripe .expand").live("click",function(){var a=$(this).closest(".box-gripe");$(this).toggleClass("active"),a.find(".gripe-content .gripe-preview").toggleClass("dn").next().toggleClass("db"),a.find(".gripe-content").toggleClass("db"),a.find(".gripe-expand").toggleClass("no"),$(this).is(".active")?$(this).html("<em>◄ </em> less"):$(this).html("more <em> ►</em> ")}),$(".widget-gripe-btns .btn-gripe, .widget-gripe-btns .btn-about-gripebox").live("click",function(){if($(".widget-social-sign-in a").is(".sign-link"))return $(".sign-link").click(),$(".sign-form").prev().text("You must be signed in to do that.").show(),!1}),$(".box-icons em:not(.active), .box-comments span:not(.active), .box-gripe .expand:not(.active)").live("click",function(){var a=$(this).closest(".box-gripe").attr("id"),b=$("#"+a).find(".views em").text();$.ajax({type:"POST",url:"/gripe_view",data:{authenticity_token:$("meta[name=csrf-token]").attr("content"),id:a},success:function(c){$("#"+a).find(".views em").text(parseInt(b)+1)}})}),$(".box-content-info a, .gripe-comment-img a").live("click",function(){var a=$(this).text();return window.location="/search?search-keywords="+a,!1}),$(".gripe-comment-desc a.flag").live("click",function(){var a=$(this).closest(".box-gripe").attr("id");return $.ajax({type:"POST",url:"/",data:{authenticity_token:$("meta[name=csrf-token]").attr("content"),id:a},success:function(a){$("#container").before('<div class="main alerts"><div class="alert-message success" style="display: block;"><div><a href="#" class="close">×</a><p> Thank you for your concern. We will review this immediately. </p></div></div></div>'),CloseAlert(),ScrollAlertPosition(),AlertTimeClose()}}),!1}),window.location.search=="?gripes=about"&&($("#gripe_title").val("Why Gripebox...Why?!"),$("#gripe_tag_list").val("Gripebox")),$(".box-comments span").live("click",function(){$(this).toggleClass("active");if($(".widget-social-sign-in a").is(".sign-link")&&$(this).find("em").text()==0)return $(".sign-link").click(),$(".sign-form").prev().text("You must be signed in to do that.").show(),!1;$(".gripe-list-comment").fadeOut("slow");var a=$(this).closest(".box-gripe").find(".gripe-list-comment");a.is(":visible")?a.hide():a.show()}),$(".load-next-comment").live("click",function(){$.ajax({type:"GET",url:"/",data:"add",success:function(a){},beforeSend:function(a){$(this).prev().show()},complete:function(a){$(this).prev().hide()}})}),$(".form-new-comment").live("submit",function(){var a=$(this).find("textarea").val(),b=$(this).attr("gripe_id"),c=$(this).find(".comm-reply").attr("gripe_id"),d=$(this).attr("reply_id");status=$(this).attr("gripe_status"),root=$(this),root_reply=$(this).closest(".gripe-comment");var e='<div class="gripe-comment"><div class="gripe-comment-img"><img src="/assets/img/i1.png" alt=""><span></span><a href="#">NEW</a></div><div class="gripe-comment-content"><div class="gripe-comment-text">'+a+'</div><div class="gripe-comment-desc"><span>1 day ago </span><a href="#" class="flag">flag</a><a href="#" class="comm-reply">reply</a></div></div><div class="clear"></div></div>',f='<div class="gripe-comment reply"><div class="gripe-comment-img"><img src="/assets/img/i1.png" alt=""><span></span><a href="#">Reply</a></div><div class="gripe-comment-content"><div class="gripe-comment-text">'+a+'</div><div class="gripe-comment-desc"><span>1 day ago </span><a href="#" class="flag">flag</a></div></div><div class="clear"></div></div>';return a.length>0&&$.ajax({type:"POST",url:"/gripe/comment",data:{id:b,comment:a,authenticity_token:$("meta[name=csrf-token]").attr("content"),status:status,reply_id:d},success:function(a){status=="reply"?(root_reply.find("form").remove(),root_reply.append(a),root_reply.find(".gripe-comment.reply:last")):(root.after(a),root.next().hide().show());var c=$("#"+b).find(".box-comments span em").text();$("#"+b).find(".box-comments span em").text(parseInt(c)+1),root.find("textarea").val(""),root.find(".span_val").show()}}),!1}),$(".comm-reply").live("click",function(){if($(".widget-social-sign-in a").is(".sign-link"))return $(".sign-link").click(),$(".sign-form").prev().text("You must be signed in to do that.").show(),!1;$(this).closest(".gripe-list-comment").find(".gripe-comment .form-new-comment").remove();var a=$(this).closest(".gripe-list-comment").find(".form-new-comment").attr("gripe_id"),b=$(this).attr("reply_id");return $(this).parent().parent().append('<form gripe_id="'+a+'" reply_id="'+b+'" class="form-new-comment" gripe_status="reply"><textarea default="Don’t hold back.  Comment away!" class="tips"></textarea><input type="submit" value="post comment"><div class="clear"></div></form>'),renderCheckboxAndInput(),!1}),$(".box-rate .negative, .box-rate .positive").live("click",function(){var a=$(this).attr("class"),b=$(this).closest(".box-gripe").attr("id"),c=$(this).closest(".box-gripe").find(".box-power strong").text(),d=$(this).closest(".box-gripe").find(".box-power strong");if($(".widget-social-sign-in a").is(".sign-link"))return $(".sign-link").click(),$(".sign-form").prev().text("You must be signed in to do that.").show(),!1;$.ajax({type:"POST",url:"/gripe/rate",data:{authenticity_token:$("meta[name=csrf-token]").attr("content"),mode:a,id:b},success:function(a){$("#rate-panel-"+b).html(a)},error:function(a){$("#container").before('<div class="main alerts"><div class="alert-message success" style="display: block;"><div><a href="#" class="close">×</a><p> You&#8217;ve already amped / muted </p></div></div></div>'),CloseAlert(),ScrollAlertPosition(),AlertTimeClose()}}),$.ajax({type:"POST",url:"/gripe/power",data:{authenticity_token:$("meta[name=csrf-token]").attr("content"),id:b},success:function(a){a>0&&d.removeClass("v-red").addClass("v-green"),d.text(Math.abs(a))}})}),$(".box-vote").live("click",function(){var a=$(this).attr("gripe_id"),b=$(this);$(this).find(".popup-griper-subscriptions").hide();if($(".widget-social-sign-in a").is(".sign-link"))return $(".sign-link").click(),$(".sign-form").prev().text("You must be signed in to do that.").show(),!1;b.is(".active")?$.ajax({type:"POST",url:"/gripe/subscription",data:{id:a,authenticity_token:$("meta[name=csrf-token]").attr("content")},success:function(a){b.removeClass("active")}}):$.ajax({type:"POST",url:"/gripe/subscription",data:{id:a,authenticity_token:$("meta[name=csrf-token]").attr("content")},success:function(a){b.addClass("active")}})}),$(".delete-gripe").live("click",function(){if(confirm("Delete gripe ?")){var a=$(this).closest(".box-gripe").attr("id");$.ajax({type:"POST",url:"/gripes/"+a,data:{authenticity_token:$("meta[name=csrf-token]").attr("content"),_method:"delete"},success:function(b){$("#"+a).fadeOut("slow")}})}}),$(".btn-gripe-update").live("click",function(){$(this).is(".active")?($("#file-upload-panel").remove(),$(this).removeClass("active").next().next().removeClass("active"),$(this).closest(".box-gripe").find(".form-edit-gripe").hide(),$(".form-edit-gripe .block").html("")):$(".btn-gripe-update").is(".active")||($(this).addClass("active").next().next().addClass("active"),$(".block-edit-gripe div").removeClass("active"))}),$(".list-edit-image .tips, .list-edit-video .tips, .list-edit-content #val-text").live("keyup",function(a){var b=$(this).closest(".box-gripe").attr("id");btnEditGripe(b)}),$(".form-edit-gripe .cancel").live("click",function(){root=$(this).closest(".box-gripe"),root.find(".form-edit-gripe").hide(),root.find(".btn-gripe-update, .block-gripe-update").removeClass("active"),b()}),$(".edit-text").live("click",function(){if(!$(this).is(".active")){b(),$(this).addClass("active");var a=$(this).closest(".box-gripe"),c=a.attr("id");a.find(".form-edit-gripe, .list-edit-content").show(),a.find(".list-edit-content").html('<textarea default="Add your update." class="tips ed-text" id="val-text"></textarea>'),renderCheckboxAndInput(),btnEditGripe(c)}}),$(".form-edit-gripe .save-sett").live("click",function(){var a=$(this).closest(".box-gripe"),b=a.attr("id"),c=a.find("#val-text").val();$(".block-gripe-update").is(".active")&&$(".edit-text").is(".active")&&a.find(".save-sett").is(":not(.submitOff)")&&$.ajax({type:"POST",url:"/gripe/update/text",data:{id:b,update:c,authenticity_token:$("meta[name=csrf-token]").attr("content")},success:function(b){a.find(".expand.active").click(),a.find(".gripe-content:last").after(b),a.find(".btn-gripe-update").removeClass("active").next().next().removeClass("active"),a.find(".form-edit-gripe").hide(),a.find(".expand").click(),$.scrollTo(a.find(".gripe-content:last"),1200)}})}),$(".edit-photo").live("click",function(){if(!$(this).is(".active")&&!$(this).is(".disabledBtn")){b();var c=$("meta[name=csrf-token]").attr("content"),d=$(this).parent().attr("id"),e=$(this).closest(".box-gripe");IframeForm='<form target="file-upload-iframe" name="file-upload-panel" method="post" id="file-upload-panel" enctype="multipart/form-data" action="/uploader" accept-charset="UTF-8"><input type="hidden" value="'+$("meta[name=csrf-token]").attr("content")+'" name="authenticity_token"><div style="margin:0;padding:0;display:inline"><input type="hidden" value="✓" name="utf8"><input type="hidden" value="'+c+'" name="authenticity_token"></div><input type="file" status="image" name="file[image]" id="file_image" class="file-upload-source"><input type="hidden" value="'+d+'" name="file[user_id]" id="file_user_id"><input type="submit" value="Save File" name="commit" class="file-upload-submit"><iframe width="500px" frameborder="0" src="about:blank" onload="parseIframeEdit();" name="file-upload-iframe" id="file-upload-iframe" heigth="300px" border="0"></iframe></form>',e.find(".gripe-details").before(IframeForm),StyleButton(),$(this).addClass("active"),e.find(".form-edit-gripe, .list-edit-image").show(),e.find(".block-form-action .save-sett").before('<div class="block-btn-media"><div class="btn-browse">browse</div><div class="btn-embed">embed</div></div>'),a(),renderCheckboxAndInput(),btnEditGripe(d)}}),$(".edit-video").live("click",function(){if(!$(this).is(".active")&&!$(this).is(".disabledBtn")){b();var c=$("meta[name=csrf-token]").attr("content"),d=$(this).parent().attr("id"),e=$(this).closest(".box-gripe");IframeForm='<form target="file-upload-iframe" name="file-upload-panel" method="post" id="file-upload-panel" enctype="multipart/form-data" action="/uploader" accept-charset="UTF-8"><input type="hidden" value="'+$("meta[name=csrf-token]").attr("content")+'" name="authenticity_token"><div style="margin:0;padding:0;display:inline"><input type="hidden" value="✓" name="utf8"><input type="hidden" value="'+c+'" name="authenticity_token"></div><input type="file" status="video" name="file[source]" id="file_image" class="file-upload-source"><input type="hidden" value="'+d+'" name="file[user_id]" id="file_user_id"><input type="submit" value="Save File" name="commit" class="file-upload-submit"><iframe width="500px" frameborder="0" src="about:blank" onload="parseIframeEdit();" name="file-upload-iframe" id="file-upload-iframe" heigth="300px" border="0"></iframe></form>',e.find(".gripe-details").before(IframeForm),StyleButton(),$(this).addClass("active"),e.find(".form-edit-gripe, .list-edit-video").show(),e.find(".block-form-action .save-sett").before('<div class="block-btn-media"><div class="btn-browse">browse</div><div class="btn-embed">embed</div></div>'),a(),renderCheckboxAndInput(),btnEditGripe(d)}}),$(".form-edit-gripe .bl-delete").live("click",function(){var a=$(this).closest(".block-edit-image");a.remove()}),$(".ico-img").live("click",function(){$(this).closest(".box-gripe").find(".widget-gripe-video").removeClass("db"
),$(this).parent().next().removeClass("active"),$(this).parent().toggleClass("active"),$(this).closest(".box-gripe").find(".widget-gripe-pics").toggleClass("db")}),$(".ico-video").live("click",function(){$(this).closest(".box-gripe").find(".widget-gripe-pics").removeClass("db"),$(this).parent().prev().removeClass("active"),$(this).parent().toggleClass("active"),$(this).closest(".box-gripe").find(".widget-gripe-video").toggleClass("db")})}),function(a){a.fn.filestyle=function(b){var c={width:250};return b&&a.extend(c,b),this.each(function(){var b=this,d=a("<div>").css({width:c.imagewidth+"px",height:c.imageheight+"px",background:"url("+c.image+") 0 0 no-repeat","background-position":"left top",display:"inline",position:"absolute",overflow:"hidden"}).addClass(c.pathClass),e=a('<input class="file">').addClass(a(b).attr("class")).css({display:"inline",width:c.width+"px"});a(b).before(e),a(b).wrap(d),a(b).css({position:"relative",height:c.imageheight+"px",width:c.width+"px",display:"inline",cursor:"pointer",opacity:"0.0"}),a.browser.mozilla?/Win/.test(navigator.platform)?a(b).css("margin-left","-142px"):a(b).css("margin-left","-168px"):a(b).css("margin-left",c.imagewidth-c.width+"px"),a(b).bind("change",function(){e.val(a(b).val())})})}}(jQuery),function(a){a.fn.lightBox=function(b){function d(){return e(this,c),!1}function e(c,d){a("embed, object, select").css({visibility:"hidden"}),f(),b.imageArray.length=0,b.activeImage=0;if(d.length==1)b.imageArray.push(new Array(c.getAttribute("href"),c.getAttribute("title")));else for(var e=0;e<d.length;e++)d[e].getAttribute("rel")==c.getAttribute("rel")&&b.imageArray.push(new Array(d[e].getAttribute("href"),d[e].getAttribute("title")));while(b.imageArray[b.activeImage][0]!=c.getAttribute("href"))b.activeImage++;g()}function f(){a("body").append('<div id="jquery-overlay"></div><div id="jquery-lightbox"><div id="wrapper-img"><div id="lightbox-container-image-box"><div id="lightbox-secNav"><a href="#" id="lightbox-secNav-btnClose"><img src="'+b.imageBtnClose+'"></a></div><div class="clear"> </div><div id="lightbox-container-image"><img id="lightbox-image"><div style="" id="lightbox-nav"><a href="#" id="lightbox-nav-btnPrev"></a><a href="#" id="lightbox-nav-btnNext"></a></div><div id="lightbox-loading"><a href="#" id="lightbox-loading-link"><img src="'+b.imageLoading+'"></a></div></div></div><div id="lightbox-container-image-data-box"><div id="lightbox-container-image-data"><div id="lightbox-image-details"><span id="lightbox-image-details-caption"></span><span id="lightbox-image-details-currentNumber"></span></div></div></div></div></div>');var c=q();a("#jquery-overlay").css({backgroundColor:b.overlayBgColor,opacity:b.overlayOpacity,width:c[0],height:"100%",position:"fixed"}).fadeIn();var d=r();a("#jquery-lightbox").css({top:d[1]+c[3]/10,left:d[0]}).show(),a("#jquery-overlay,#jquery-lightbox").click(function(){p()}),a("#lightbox-loading-link,#lightbox-secNav-btnClose").click(function(){return p(),!1}),a(window).resize(function(){var b=q();a("#jquery-overlay").css({width:b[0],height:b[1]});var c=r();a("#jquery-lightbox").css({top:c[1]+b[3]/10,left:c[0]})})}function g(){a("#lightbox-loading").show(),b.fixedNavigation?a("#lightbox-image,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber").hide():a("#lightbox-image,#lightbox-nav,#lightbox-nav-btnPrev,#lightbox-nav-btnNext,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber").hide();var c=new Image;c.onload=function(){a("#lightbox-image").attr("src",b.imageArray[b.activeImage][0]),h(c.width,c.height),c.onload=function(){}},c.src=b.imageArray[b.activeImage][0]}function h(c,d){var e=a("#lightbox-container-image-box").width(),f=a("#lightbox-container-image-box").height(),g=c+b.containerBorderSize*2,h=d+b.containerBorderSize*2,j=e-g,k=f-h;a("#lightbox-container-image-box").animate({width:g+50,height:h+100},b.containerResizeSpeed,function(){i()}),j==0&&k==0&&(a.browser.msie?s(250):s(100)),a("#lightbox-container-image-data-box").css({width:c+20}),a("#lightbox-nav-btnPrev,#lightbox-nav-btnNext").css({height:d+b.containerBorderSize*2})}function i(){a("#lightbox-loading").hide(),a("#lightbox-image").fadeIn(function(){k(),j()}),o()}function j(){a("#lightbox-container-image-data-box").slideDown("fast"),a("#lightbox-image-details-caption").hide(),b.imageArray[b.activeImage][1]&&a("#lightbox-image-details-caption").html(b.imageArray[b.activeImage][1]).show(),b.imageArray.length>1&&a("#lightbox-image-details-currentNumber").html(b.txtImage+" "+(b.activeImage+1)+" "+b.txtOf+" "+b.imageArray.length).show()}function k(){a("#lightbox-nav").show(),a("#lightbox-nav-btnPrev,#lightbox-nav-btnNext").css({background:"transparent url("+b.imageBlank+") no-repeat"}),b.activeImage!=0&&(b.fixedNavigation?a("#lightbox-nav-btnPrev").css({background:"url("+b.imageBtnPrev+") left center no-repeat"}).unbind().bind("click",function(){return b.activeImage=b.activeImage-1,g(),!1}):a("#lightbox-nav-btnPrev").unbind().hover(function(){a(this).css({background:"url("+b.imageBtnPrev+") left cennter no-repeat"})},function(){a(this).css({background:"transparent url("+b.imageBlank+") no-repeat"})}).show().bind("click",function(){return b.activeImage=b.activeImage-1,g(),!1})),b.activeImage!=b.imageArray.length-1&&(b.fixedNavigation?a("#lightbox-nav-btnNext").css({background:"url("+b.imageBtnNext+") right center no-repeat"}).unbind().bind("click",function(){return b.activeImage=b.activeImage+1,g(),!1}):a("#lightbox-nav-btnNext").unbind().hover(function(){a(this).css({background:"url("+b.imageBtnNext+") right center no-repeat"})},function(){a(this).css({background:"transparent url("+b.imageBlank+") no-repeat"})}).show().bind("click",function(){return b.activeImage=b.activeImage+1,g(),!1})),l()}function l(){a(document).keydown(function(a){n(a)})}function m(){a(document).unbind()}function n(a){a==null?(keycode=event.keyCode,escapeKey=27):(keycode=a.keyCode,escapeKey=a.DOM_VK_ESCAPE),key=String.fromCharCode(keycode).toLowerCase(),(key==b.keyToClose||key=="x"||keycode==escapeKey)&&p(),(key==b.keyToPrev||keycode==37)&&b.activeImage!=0&&(b.activeImage=b.activeImage-1,g(),m()),(key==b.keyToNext||keycode==39)&&b.activeImage!=b.imageArray.length-1&&(b.activeImage=b.activeImage+1,g(),m())}function o(){b.imageArray.length-1>b.activeImage&&(objNext=new Image,objNext.src=b.imageArray[b.activeImage+1][0]),b.activeImage>0&&(objPrev=new Image,objPrev.src=b.imageArray[b.activeImage-1][0])}function p(){a("#jquery-lightbox").remove(),a("#jquery-overlay").fadeOut(function(){a("#jquery-overlay").remove()}),a("embed, object, select").css({visibility:"visible"})}function q(){var a,b;window.innerHeight&&window.scrollMaxY?(a=window.innerWidth+window.scrollMaxX,b=window.innerHeight+window.scrollMaxY):document.body.scrollHeight>document.body.offsetHeight?(a=document.body.scrollWidth,b=document.body.scrollHeight):(a=document.body.offsetWidth,b=document.body.offsetHeight);var c,d;return self.innerHeight?(document.documentElement.clientWidth?c=document.documentElement.clientWidth:c=self.innerWidth,d=self.innerHeight):document.documentElement&&document.documentElement.clientHeight?(c=document.documentElement.clientWidth,d=document.documentElement.clientHeight):document.body&&(c=document.body.clientWidth,d=document.body.clientHeight),b<d?pageHeight=d:pageHeight=b,a<c?pageWidth=a:pageWidth=c,arrayPageSize=new Array(pageWidth,pageHeight,c,d),arrayPageSize}function r(){var a,b;return self.pageYOffset?(b=self.pageYOffset,a=self.pageXOffset):document.documentElement&&document.documentElement.scrollTop?(b=document.documentElement.scrollTop,a=document.documentElement.scrollLeft):document.body&&(b=document.body.scrollTop,a=document.body.scrollLeft),arrayPageScroll=new Array(a,b),arrayPageScroll}function s(a){var b=new Date;c=null;do var c=new Date;while(c-b<a)}b=jQuery.extend({overlayBgColor:"#000",overlayOpacity:.8,fixedNavigation:!0,imageLoading:"assets/lightbox-ico-loading.gif",imageBtnPrev:"assets/lightbox-btn-prev.gif",imageBtnNext:"assets/lightbox-btn-next.gif",imageBtnClose:"assets/lightbox-btn-close.gif",imageBlank:"assets/lightbox-blank.gif",containerBorderSize:10,containerResizeSpeed:400,txtImage:"Image",txtOf:"of",keyToClose:"c",keyToPrev:"p",keyToNext:"n",imageArray:[],activeImage:0},b);var c=this;return this.unbind("click").click(d)}}(jQuery),function(a){function c(a){return typeof a=="object"?a:{top:a,left:a}}var b=a.scrollTo=function(b,c,e){a(window).scrollTo(b,c,e)};b.defaults={axis:"xy",duration:parseFloat(a.fn.jquery)>=1.3?0:1},b.window=function(b){return a(window)._scrollable()},a.fn._scrollable=function(){return this.map(function(){var b=this,c=!b.nodeName||a.inArray(b.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;if(!c)return b;var e=(b.contentWindow||b).document||b.ownerDocument||b;return a.browser.safari||e.compatMode=="BackCompat"?e.body:e.documentElement})},a.fn.scrollTo=function(e,f,g){return typeof f=="object"&&(g=f,f=0),typeof g=="function"&&(g={onAfter:g}),e=="max"&&(e=9e9),g=a.extend({},b.defaults,g),f=f||g.speed||g.duration,g.queue=g.queue&&g.axis.length>1,g.queue&&(f/=2),g.offset=c(g.offset),g.over=c(g.over),this._scrollable().each(function(){function r(a){i.animate(o,f,g.easing,a&&function(){a.call(this,e,g)})}var h=this,i=a(h),l=e,m,o={},q=i.is("html,body");switch(typeof l){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(l)){l=c(l);break}l=a(l,this);case"object":if(l.is||l.style)m=(l=a(l)).offset()}a.each(g.axis.split(""),function(a,c){var d=c=="x"?"Left":"Top",e=d.toLowerCase(),f="scroll"+d,j=h[f],n=b.max(h,c);if(m)o[f]=m[e]+(q?0:j-i.offset()[e]),g.margin&&(o[f]-=parseInt(l.css("margin"+d))||0,o[f]-=parseInt(l.css("border"+d+"Width"))||0),o[f]+=g.offset[e]||0,g.over[e]&&(o[f]+=l[c=="x"?"width":"height"]()*g.over[e]);else{var p=l[e];o[f]=p.slice&&p.slice(-1)=="%"?parseFloat(p)/100*n:p}/^\d+$/.test(o[f])&&(o[f]=o[f]<=0?0:Math.min(o[f],n)),!a&&g.queue&&(j!=o[f]&&r(g.onAfterFirst),delete o[f])}),r(g.onAfter)}).end()},b.max=function(b,c){var e=c=="x"?"Width":"Height",f="scroll"+e;if(!a(b).is("html,body"))return b[f]-a(b)[e.toLowerCase()]();var g="client"+e,h=b.ownerDocument.documentElement,i=b.ownerDocument.body;return Math.max(h[f],i[f])-Math.min(h[g],i[g])}}(jQuery);if(typeof jwplayer=="undefined"){var jwplayer=function(a){if(jwplayer.api)return jwplayer.api.selectPlayer(a)},$jw=jwplayer;jwplayer.version="5.7.1896 (Licensed version)",jwplayer.vid=document.createElement("video"),jwplayer.audio=document.createElement("audio"),jwplayer.source=document.createElement("source"),function(a){function b(b){if(!a.utils.exists(b))return;var c=b.indexOf("://"),d=b.indexOf("?");return c>0&&(d<0||d>c)}a.utils=function(){},a.utils.typeOf=function(a){var b=typeof a;return b==="object"&&(a?a instanceof Array&&(b="array"):b="null"),b},a.utils.extend=function(){var b=a.utils.extend.arguments;if(b.length>1){for(var c=1;c<b.length;c++)for(var d in b[c])b[0][d]=b[c][d];return b[0]}return null},a.utils.clone=function(b){var c,d=a.utils.clone.arguments;if(d.length==1)switch(a.utils.typeOf(d[0])){case"object":c={};for(var e in d[0])c[e]=a.utils.clone(d[0][e]);break;case"array":c=[];for(var e in d[0])c[e]=a.utils.clone(d[0][e]);break;default:return d[0]}return c},a.utils.extension=function(a){if(!a)return"";a=a.substring(a.lastIndexOf("/")+1,a.length),a=a.split("?")[0];if(a.lastIndexOf(".")>-1)return a.substr(a.lastIndexOf(".")+1,a.length).toLowerCase();return},a.utils.html=function(a,b){a.innerHTML=b},a.utils.wrap=function(a,b){a.parentNode&&a.parentNode.replaceChild(b,a),b.appendChild(a)},a.utils.ajax=function(a,b,c){var d;window.XMLHttpRequest?d=new XMLHttpRequest:d=new ActiveXObject("Microsoft.XMLHTTP"),d.onreadystatechange=function(){d.readyState===4&&(d.status===200?b&&b(d):c&&c(a))};try{d.open("GET",a,!0),d.send(null)}catch(e){c&&c(a)}return d},a.utils.load=function(a,b,c){a.onreadystatechange=function(){a.readyState===4&&(a.status===200?b&&b():c&&c())}},a.utils.find=function(a,b){return a.getElementsByTagName(b)},a.utils.append=function(a,b){a.appendChild(b)},a.utils.isIE=function(){return typeof window.ActiveXObject!="undefined"},a.utils.isLegacyAndroid=function(){var a=navigator.userAgent.toLowerCase();return a.match(/android 2.[012]/i)!==null},a.utils.isIOS=function(a){typeof a=="undefined"&&(a=/iP(hone|ad|od)/i);var b=navigator.userAgent.toLowerCase();return b.match(a)!==null},a.utils.isIPad=function(){return a.utils.isIOS(/iPad/i)},a.utils.isIPod=function(){return a.utils.isIOS(/iP(hone|od)/i)},a.utils.getFirstPlaylistItemFromConfig=function(a){var b={},c;return a.playlist&&a.playlist.length?c=a.playlist[0]:c=a,b.file=c.file,b.levels=c.levels,b.streamer=c.streamer,b.playlistfile=c.playlistfile,b.provider=c.provider,b.provider||(b.file&&(b.file.toLowerCase().indexOf("youtube.com")>-1||b.file.toLowerCase().indexOf("youtu.be")>-1)&&(b.provider="youtube"),b.streamer&&b.streamer.toLowerCase().indexOf("rtmp://")==0&&(b.provider="rtmp"),c.type&&(b.provider=c.type.toLowerCase())),b.provider=="audio"&&(b.provider="sound"),b},a.utils.getOuterHTML=function(a){if(a.outerHTML)return a.outerHTML;try{return(new XMLSerializer).serializeToString(a)}catch(b){return""}},a.utils.setOuterHTML=function(a,b){if(a.outerHTML)a.outerHTML=b;else{var c=document.createElement("div");c.innerHTML=b;var d=document.createRange();d.selectNodeContents(c);var e=d.extractContents();a.parentNode.insertBefore(e,a),a.parentNode.removeChild(a)}},a.utils.hasFlash=function(){if(typeof navigator.plugins!="undefined"&&typeof navigator.plugins["Shockwave Flash"]!="undefined")return!0;if(typeof window.ActiveXObject!="undefined")try{return new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),!0}catch(a){}return!1},a.utils.getPluginName=function(a){return a.lastIndexOf("/")>=0&&(a=a.substring(a.lastIndexOf("/")+1,a.length)),a.lastIndexOf("-")>=0&&(a=a.substring(0,a.lastIndexOf("-"))),a.lastIndexOf(".swf")>=0&&(a=a.substring(0,a.lastIndexOf(".swf"))),a.lastIndexOf(".js")>=0&&(a=a.substring(0,a.lastIndexOf(".js"))),a},a.utils.getPluginVersion=function(a){return a.lastIndexOf("-")>=0?a.lastIndexOf(".js")>=0?a.substring(a.lastIndexOf("-")+1,a.lastIndexOf(".js")):a.lastIndexOf(".swf")>=0?a.substring(a.lastIndexOf("-")+1,a.lastIndexOf(".swf")):a.substring(a.lastIndexOf("-")+1):""},a.utils.getAbsolutePath=function(c,d){a.utils.exists(d)||(d=document.location.href);if(!a.utils.exists(c))return undefined;if(b(c))return c;var e=d.substring(0,d.indexOf("://")+3),f=d.substring(e.length,d.indexOf("/",e.length+1)),g;if(c.indexOf("/")===0)g=c.split("/");else{var h=d.split("?")[0];h=h.substring(e.length+f.length+1,h.lastIndexOf("/")),g=h.split("/").concat(c.split("/"))}var i=[];for(var j=0;j<g.length;j++){if(!g[j]||!a.utils.exists(g[j])||g[j]==".")continue;g[j]==".."?i.pop():i.push(g[j])}return e+f+"/"+i.join("/")},a.utils.pluginPathType={ABSOLUTE:"ABSOLUTE",RELATIVE:"RELATIVE",CDN:"CDN"},a.utils.getPluginPathType=function(b){if(typeof b!="string")return;b=b.split("?")[0];var c=b.indexOf("://");if(c>0)return a.utils.pluginPathType.ABSOLUTE;var d=b.indexOf("/"),e=a.utils.extension(b);return c<0&&d<0&&(!e||!isNaN(e))?a.utils.pluginPathType.CDN:a.utils.pluginPathType.RELATIVE},a.utils.mapEmpty=function(a){for(var b in a)return!1;return!0},a.utils.mapLength=function(a){var b=0;for(var c in a)b++;return b},a.utils.log=function(a,b){typeof console!="undefined"&&typeof console.log!="undefined"&&(b?console.log(a,b):console.log(a))},a.utils.css=function(b,c,d){if(a.utils.exists(b))for(var e in c)try{if(typeof c[e]=="undefined")continue;if(typeof c[e]=="number"&&e!="zIndex"&&e!="opacity"){if(isNaN(c[e]))continue;e.match(/color/i)?c[e]="#"+a.utils.strings.pad(c[e].toString(16),6):c[e]=Math.ceil(c[e])+"px"}b.style[e]=c[e]}catch(f){}},a.utils.isYouTube=function(a){return a.indexOf("youtube.com")>-1||a.indexOf("youtu.be")>-1},a.utils.transform=function(a,b){a.style.webkitTransform=b,a.style.MozTransform=b,a.style.OTransform=b},a.utils.stretch=function(b,c,d,e,f,g){if(typeof d=="undefined"||typeof e=="undefined"||typeof f=="undefined"||typeof g=="undefined")return;var h=d/f,i=e/g,j=0,k=0;c.style.overflow="hidden",a.utils.transform(c,"");var l={};switch(b.toUpperCase()){case a.utils.stretching.NONE:l.width=f,l.height=g;break;case a.utils.stretching.UNIFORM:h>i?(l.width=f*i,l.height=g*i):(l.width=f*h,l.height=g*h);break;case a.utils.stretching.FILL:h>i?(l.width=f*h,l.height=g*h):(l.width=f*i,l.height=g*i);break;case a.utils.stretching.EXACTFIT:a.utils.transform(c,["scale(",h,",",i,")"," translate(0px,0px)"].join("")),l.width=f,l.height=g;break;default:}l.top=(e-l.height)/2,l.left=(d-l.width)/2,a.utils.css(c,l)},a.utils.stretching={NONE:"NONE",FILL:"FILL",UNIFORM:"UNIFORM",EXACTFIT:"EXACTFIT"},a.utils.deepReplaceKeyName=function(b,c,d){switch(a.utils.typeOf(b)){case"array":for(var e=0;e<b.length;e++)b[e]=a.utils.deepReplaceKeyName(b[e],c,d);break;case"object":for(var f in b){var g=f.replace(new RegExp(c,"g"),d);b[g]=a.utils.deepReplaceKeyName(b[f],c,d),f!=g&&delete b[f]}}return b},a.utils.isInArray=function(a,b){if(!!a&&a instanceof Array){for(var c=0;c<a.length;c++)if(b===a[c])return!0;return!1}return!1},a.utils.exists=function(a){switch(typeof a){case"string":return a.length>0;case"object":return a!==null;case"undefined":return!1}return!0},a.utils.empty=function(a){if(typeof a.hasChildNodes=="function")while(a.hasChildNodes())a.removeChild(a.firstChild)},a.utils.parseDimension=function(a){return typeof a=="string"?a===""?0:a.lastIndexOf("%")>-1?a:parseInt(a.replace("px",""),10):a},a.utils.getDimensions=function(b){return b&&b.style?{x:a.utils.parseDimension(b.style.left),y:a.utils.parseDimension(b.style.top),width:a.utils.parseDimension(b.style.width),height:a.utils.parseDimension(b.style.height)}:{}},a.utils.timeFormat=function(a){return str="00:00",a>0&&(str=Math.floor(a/60)<10?"0"+Math.floor(a/60)+":":Math.floor(a/60)+":",str+=Math.floor(a%60)<10?"0"+Math.floor(a%60):Math.floor(a%60)),str}}(jwplayer),function(a){a.events=function(){},a.events.COMPLETE="COMPLETE",a.events.ERROR="ERROR"}(jwplayer),function(jwplayer){jwplayer.events.eventdispatcher=function(debug){var _debug=debug,_listeners,_globallisteners;this.resetEventListeners=function(){_listeners={},_globallisteners=[]},this.resetEventListeners(),this.addEventListener=function(type,listener,count){try{jwplayer.utils.exists(_listeners[type])||(_listeners[type]=[]),typeof listener=="string"&&eval("listener = "+listener),_listeners[type].push({listener:listener,count:count})}catch(err){jwplayer.utils.log("error",err)}return!1},this.removeEventListener=function(a,b){if(!_listeners[a])return;try{for(var c=0;c<_listeners[a].length;c++)if(_listeners[a][c].listener.toString()==b.toString()){_listeners[a].splice(c,1);break}}catch(d){jwplayer.utils.log("error",d)}return!1},this.addGlobalListener=function(listener,count){try{typeof listener=="string"&&eval("listener = "+listener),_globallisteners.push({listener:listener,count:count})}catch(err){jwplayer.utils.log("error",err)}return!1},this.removeGlobalListener=function(a){if(!_globallisteners[type])return;try{for(var b=0;b<_globallisteners.length;b++)if(_globallisteners[b].listener.toString()==a.toString()){_globallisteners.splice(b,1);break}}catch(c){jwplayer.utils.log("error",c)}return!1},this.sendEvent=function(a,b){jwplayer.utils.exists(b)||(b={}),_debug&&jwplayer.utils.log(a,b);if(typeof _listeners[a]!="undefined")for(var c=0;c<_listeners[a].length;c++){try{_listeners[a][c].listener(b)}catch(d){jwplayer.utils.log("There was an error while handling a listener: "+d.toString(),_listeners[a][c].listener)}_listeners[a][c]&&(_listeners[a][c].count===1?delete _listeners[a][c]:_listeners[a][c].count>0&&(_listeners[a][c].count=_listeners[a][c].count-1))}for(var e=0;e<_globallisteners.length;e++){try{_globallisteners[e].listener(b)}catch(d){jwplayer.utils.log("There was an error while handling a listener: "+d.toString(),_globallisteners[e].listener)}_globallisteners[e]&&(_globallisteners[e].count===1?delete _globallisteners[e]:_globallisteners[e].count>0&&(_globallisteners[e].count=_globallisteners[e].count-1))}}}}(jwplayer),function(a){var b={};a.utils.animations=function(){},a.utils.animations.transform=function(a,b){a.style.webkitTransform=b,a.style.MozTransform=b,a.style.OTransform=b,a.style.msTransform=b},a.utils.animations.transformOrigin=function(a,b){a.style.webkitTransformOrigin=b,a.style.MozTransformOrigin=b,a.style.OTransformOrigin=b,a.style.msTransformOrigin=b},a.utils.animations.rotate=function(b,c){a.utils.animations.transform(b,["rotate(",c,"deg)"].join(""))},a.utils.cancelAnimation=function(a){delete b[a.id]},a.utils.fadeTo=function(c,d,e,f,g,h){if(b[c.id]!=h&&a.utils.exists(h))return;if(c.style.opacity==d)return;var i=(new Date).getTime();h>i&&setTimeout(function(){a.utils.fadeTo(c,d,e,f,0,h)},h-i),c.style.display=="none"&&(c.style.display="block"),a.utils.exists(f)||(f=c.style.opacity===""?1:c.style.opacity);if(c.style.opacity==d&&c.style.opacity!==""&&a.utils.exists(h)){d===0&&(c.style.display="none");return}a.utils.exists(h)||(h=i,b[c.id]=h),a.utils.exists(g)||(g=0);var j=e>0?(i-h)/(e*1e3):0;j=j>1?1:j;var k=d-f,l=f+j*k;l>1?l=1:l<0&&(l=0),c.style.opacity=l;if(g>0){b[c.id]=h+g*1e3,a.utils.fadeTo(c,d,e,f,0,b[c.id]);return}setTimeout(function(){a.utils.fadeTo(c,d,e,f,0,h)},10)}}(jwplayer),function(a){a.utils.arrays=function(){},a.utils.arrays.indexOf=function(a,b){for(var c=0;c<a.length;c++)if(a[c]==b)return c;return-1},a.utils.arrays.remove=function(b,c){var d=a.utils.arrays.indexOf(b,c);d>-1&&b.splice(d,1)}}(jwplayer),function(a){a.utils.extensionmap={"3gp":{html5:"video/3gpp",flash:"video"},"3gpp":{html5:"video/3gpp"},"3g2":{html5:"video/3gpp2",flash:"video"},"3gpp2":{html5:"video/3gpp2"},flv:{flash:"video"},f4a:{html5:"audio/mp4"},f4b:{html5:"audio/mp4",flash:"video"},f4v:{html5:"video/mp4",flash:"video"},mov:{html5:"video/quicktime",flash:"video"},m4a:{html5:"audio/mp4",flash:"video"},m4b:{html5:"audio/mp4"},m4p:{html5:"audio/mp4"},m4v:{html5:"video/mp4",flash:"video"},mp4:{html5:"video/mp4",flash:"video"},rbs:{flash:"sound"},aac:{html5:"audio/aac",flash:"video"},mp3:{html5:"audio/mp3",flash:"sound"},ogg:{html5:"audio/ogg"},oga:{html5:"audio/ogg"},ogv:{html5:"video/ogg"},webm:{html5:"video/webm"},m3u8:{html5:"audio/x-mpegurl"},gif:{flash:"image"},jpeg:{flash:"image"},jpg:{flash:"image"},swf:{flash:"image"},png:{flash:"image"},wav:{html5:"audio/x-wav"}}}(jwplayer),function(a){function d(c,d){return a.utils.exists(d)?a.utils.extend(d,b[c]):d=b[c],d}function e(b,e){if(c[b.tagName.toLowerCase()]&&!a.utils.exists(e))return c[b.tagName.toLowerCase()](b);e=d("element",e);var f={};for(var g in e)if(g!="length"){var h=b.getAttribute(g);a.utils.exists(h)&&(f[e[g]]=h)}var i=b.style["#background-color"];return i&&i!="transparent"&&i!="rgba(0, 0, 0, 0)"&&(f.screencolor=i),f}function f(b,c){c=d("media",c);var f=[],h=a.utils.selectors("source",b);for(var i in h)isNaN(i)||f.push(g(h[i]));var j=e(b,c);return a.utils.exists(j.file)&&(f[0]={file:j.file}),j.levels=f,j}function g(a,b){b=d("source",b);var c=e(a,b);return c.width=c.width?c.width:0,c.bitrate=c.bitrate?c.bitrate:0,c}function h(a,b){b=d("video",b);var c=f(a,b);return c}a.utils.mediaparser=function(){};var b={element:{width:"width",height:"height",id:"id","class":"className",name:"name"},media:{src:"file",preload:"preload",autoplay:"autostart",loop:"repeat",controls:"controls"},source:{src:"file",type:"type",media:"media","data-jw-width":"width","data-jw-bitrate":"bitrate"},video:{poster:"image"}},c={};a.utils.mediaparser.parseMedia=function(a){return e(a)},c.media=f,c.audio=f,c.source=g,c.video=h}(jwplayer),function(a){a.utils.loaderstatus={NEW:"NEW",LOADING:"LOADING",ERROR:"ERROR",COMPLETE:"COMPLETE"},a.utils.scriptloader=function(b){var c=a.utils.loaderstatus.NEW,d=new a.events.eventdispatcher;a.utils.extend(this,d),this.load=function(){if(c==a.utils.loaderstatus.NEW){c=a.utils.loaderstatus.LOADING;var e=document.createElement("script");e.onload=function(b){c=a.utils.loaderstatus.COMPLETE,d.sendEvent(a.events.COMPLETE)},e.onerror=function(b){c=a.utils.loaderstatus.ERROR,d.sendEvent(a.events.ERROR)},e.onreadystatechange=function(){if(e.readyState=="loaded"||e.readyState=="complete")c=a.utils.loaderstatus.COMPLETE,d.sendEvent(a.events.COMPLETE)},document.getElementsByTagName("head")[0].appendChild(e),e.src=b}},this.getStatus=function(){return c}}}(jwplayer),function(a){a.utils.selectors=function(b,c){a.utils.exists(c)||(c=document),b=a.utils.strings.trim(b);var d=b.charAt(0);if(d=="#")return c.getElementById(b.substr(1));if(d==".")return c.getElementsByClassName?c.getElementsByClassName(b.substr(1)):a.utils.selectors.getElementsByTagAndClass("*",b.substr(1));if(b.indexOf(".")>0){var e=b.split(".");return a.utils.selectors.getElementsByTagAndClass(e[0],e[1])}return c.getElementsByTagName(b)},a.utils.selectors.getElementsByTagAndClass=function(b,c,d){var e=[];a.utils.exists(d)||(d=document);var f=d.getElementsByTagName(b);for(var g=0;g<f.length;g++)if(a.utils.exists(f[g].className)){var h=f[g].className.split(" ");for(var i=0;i<h.length;i++)h[i]==c&&e.push(f[g])}return e}}(jwplayer),function(a){a.utils.strings=function(){},a.utils.strings.trim=function(a){return a.replace(/^\s*/,"").replace(/\s*$/,"")},a.utils.strings.pad=function(a,b,c){c||(c="0");while(a.length<b)a=c+a;return a},a.utils.strings.serialize=function(a){return a==null?null:a=="true"?!0:a=="false"?!1:isNaN(Number(a))||a.length>5||a.length==0?a:Number(a)},a.utils.strings.seconds=function(a){a=a.replace(",",".");var b=a.split(":"),c=0;return a.substr(-1)=="s"?c=Number(a.substr(0,a.length-1)):a.substr(-1)=="m"?c=Number(a.substr(0,a.length-1))*60:a.substr(-1)=="h"?c=Number(a.substr(0,a.length-1))*3600:b.length>1?(c=Number(b[b.length-1]),c+=Number(b[b.length-2])*60,b.length==3&&(c+=Number(b[b.length-3])*3600)):c=Number(a),c},a.utils.strings.xmlAttribute=function(a,b){for(var c=0;c<a.attributes.length;c++)if(a.attributes[c].name&&a.attributes[c].name.toLowerCase()==b.toLowerCase())return a.attributes[c].value.toString();return""},a.utils.strings.jsonToString=function(b){var c=c||{};if(c&&c.stringify)return c.stringify(b);var d=typeof b;if(d=="object"&&b!==null){var e=[],f=b&&b.constructor==Array;for(var g in b){var h=b[g];switch(typeof h){case"string":h='"'+h+'"';break;case"object":a.utils.exists(h)&&(h=a.utils.strings.jsonToString(h))}f?typeof h!="function"&&e.push(String(h)):typeof h!="function"&&e.push('"'+g+'":'+String(h))}return f?"["+String(e)+"]":"{"+String(e)+"}"}if(d!="string")return String(b);b='"'+b+'"'}}(jwplayer),function(a){function c(a){var c=["true","false","t","f"];return c.toString().indexOf(a.toLowerCase().replace(" ",""))>=0?"boolean":b.test(a)?"color":!isNaN(parseInt(a,10))&&parseInt(a,10).toString().length==a.length?"integer":!isNaN(parseFloat(a))&&parseFloat(a).toString().length==a.length?"float":"string"}function d(b,c){if(!a.utils.exists(c))return b;switch(c){case"color":if(b.length>0)return e(b);return null;case"integer":return parseInt(b,10);case"float":return parseFloat(b);case"boolean":if(b.toLowerCase()=="true")return!0;if(b=="1")return!0;return!1}return b}function e(a){switch(a.toLowerCase()){case"blue":return parseInt("0000FF",16);case"green":return parseInt("00FF00",16);case"red":return parseInt("FF0000",16);case"cyan":return parseInt("00FFFF",16);case"magenta":return parseInt("FF00FF",16);case"yellow":return parseInt("FFFF00",16);case"black":return parseInt("000000",16);case"white":return parseInt("FFFFFF",16);default:return a=a.replace(/(#|0x)?([0-9A-F]{3,6})$/gi,"$2"),a.length==3&&(a=a.charAt(0)+a.charAt(0)+a.charAt(1)+a.charAt(1)+a.charAt(2)+a.charAt(2)),parseInt(a,16)}return parseInt("000000",16)}var b=new RegExp(/^(#|0x)[0-9a-fA-F]{3,6}/);a.utils.typechecker=function(b,e){return e=a.utils.exists(e)?e:c(b),d(b,e)}}(jwplayer),function(a){a.utils.parsers=function(){},a.utils.parsers.localName=function(a){return a?a.localName?a.localName:a.baseName?a.baseName:"":""},a.utils.parsers.textContent=function(a){return a?a.textContent?a.textContent:a.text?a.text:"":""}}(jwplayer),function(a){a.utils.parsers.jwparser=function(){},a.utils.parsers.jwparser.PREFIX="jwplayer",a.utils.parsers.jwparser.parseEntry=function(b,c){for(var d=0;d<b.childNodes.length;d++)b.childNodes[d].prefix==a.utils.parsers.jwparser.PREFIX&&(c[a.utils.parsers.localName(b.childNodes[d])]=a.utils.strings.serialize(a.utils.parsers.textContent(b.childNodes[d]))),!c.file&&String(c.link).toLowerCase().indexOf("youtube")>-1&&(c.file=c.link);return c},a.utils.parsers.jwparser.getProvider=function(b){if(b.type)return b.type;if(b.file.indexOf("youtube.com/w")>-1||b.file.indexOf("youtube.com/v")>-1||b.file.indexOf("youtu.be/")>-1)return"youtube";if(b.streamer&&b.streamer.indexOf("rtmp")==0)return"rtmp";if(b.streamer&&b.streamer.indexOf("http")==0)return"http";var c=a.utils.strings.extension(b.file);return extensions.hasOwnProperty(c)?extensions[c]:""}}(jwplayer),function(a){a.utils.parsers.mediaparser=function(){},a.utils.parsers.mediaparser.PREFIX="media",a.utils.parsers.mediaparser.parseGroup=function(b,c){var d=!1;for(var e=0;e<b.childNodes.length;e++)if(b.childNodes[e].prefix==a.utils.parsers.mediaparser.PREFIX){if(!a.utils.parsers.localName(b.childNodes[e]))continue;switch(a.utils.parsers.localName(b.childNodes[e]).toLowerCase()){case"content":d||(c.file=a.utils.strings.xmlAttribute(b.childNodes[e],"url")),a.utils.strings.xmlAttribute(b.childNodes[e],"duration")&&(c.duration=a.utils.strings.seconds(a.utils.strings.xmlAttribute(b.childNodes[e],"duration"))),a.utils.strings.xmlAttribute(b.childNodes[e],"start")&&(c.start=a.utils.strings.seconds(a.utils.strings.xmlAttribute(b.childNodes[e],"start"))),b.childNodes[e].childNodes&&b.childNodes[e].childNodes.length>0&&(c=a.utils.parsers.mediaparser.parseGroup(b.childNodes[e],c));if(a.utils.strings.xmlAttribute(b.childNodes[e],"width")||a.utils.strings.xmlAttribute(b.childNodes[e],"bitrate")||a.utils.strings.xmlAttribute(b.childNodes[e],"url"))c.levels||(c.levels=[]),c.levels.push({width:a.utils.strings.xmlAttribute(b.childNodes[e],"width"),bitrate:a.utils.strings.xmlAttribute(b.childNodes[e],"bitrate"),file:a.utils.strings.xmlAttribute(b.childNodes[e],"url")});break;case"title":c.title=a.utils.parsers.textContent(b.childNodes[e]);break;case"description":c.description=a.utils.parsers.textContent(b.childNodes[e]);break;case"keywords":c.tags=a.utils.parsers.textContent(b.childNodes[e]);break;case"thumbnail":c.image=a.utils.strings.xmlAttribute(b.childNodes[e],"url");break;case"credit":c.author=a.utils.parsers.textContent(b.childNodes[e]);break;case"player":var f=b.childNodes[e].url;if(f.indexOf("youtube.com")>=0||f.indexOf("youtu.be")>=0)d=!0,c.file=a.utils.strings.xmlAttribute(b.childNodes[e],"url");break;case"group":a.utils.parsers.mediaparser.parseGroup(b.childNodes[e],c)}}return c}}(jwplayer),function(a){function b(b){var c={};for(var d=0;d<b.childNodes.length;d++){if(!a.utils.parsers.localName(b.childNodes[d]))continue;switch(a.utils.parsers.localName(b.childNodes[d]).toLowerCase()){case"enclosure":c.file=a.utils.strings.xmlAttribute(b.childNodes[d],"url");break;case"title":c.title=a.utils.parsers.textContent(b.childNodes[d]);break;case"pubdate":c.date=a.utils.parsers.textContent(b.childNodes[d]);break;case"description":c.description=a.utils.parsers.textContent(b.childNodes[d]);break;case"link":c.link=a.utils.parsers.textContent(b.childNodes[d]);break;case"category":c.tags?c.tags+=a.utils.parsers.textContent(b.childNodes[d]):c.tags=a.utils.parsers.textContent(b.childNodes[d])}}return c=a.utils.parsers.mediaparser.parseGroup(b,c),c=a.utils.parsers.jwparser.parseEntry(b,c),new a.html5.playlistitem(c)}a.utils.parsers.rssparser=function(){},a.utils.parsers.rssparser.parse=function(c){var d=[];for(var e=0;e<c.childNodes.length;e++)if(a.utils.parsers.localName(c.childNodes[e]).toLowerCase()=="channel")for(var f=0;f<c.childNodes[e].childNodes.length;f++)a.utils.parsers.localName(c.childNodes[e].childNodes[f]).toLowerCase()=="item"&&d.push(b(c.childNodes[e].childNodes[f]));return d}}(jwplayer),function(a){var b={},c={};a.plugins=function(){},a.plugins.loadPlugins=function(d,e){return c[d]=new a.plugins.pluginloader(new a.plugins.model(b),e),c[d]},a.plugins.registerPlugin=function(d,e,f){var g=a.utils.getPluginName(d);if(b[g])b[g].registerPlugin(d,e,f);else{a.utils.log("A plugin ("+d+") was registered with the player that was not loaded. Please check your configuration.");for(var h in c)c[h].pluginFailed()}}}(jwplayer),function(a){a.plugins.model=function(b){this.addPlugin=function(c){var d=a.utils.getPluginName(c);return b[d]||(b[d]=new a.plugins.plugin(c)),b[d]}}}(jwplayer),function(a){a.plugins.pluginmodes={FLASH:"FLASH",JAVASCRIPT:"JAVASCRIPT",HYBRID:"HYBRID"},a.plugins.plugin=function(
b){function i(){switch(a.utils.getPluginPathType(b)){case a.utils.pluginPathType.ABSOLUTE:return b;case a.utils.pluginPathType.RELATIVE:return a.utils.getAbsolutePath(b,window.location.href);case a.utils.pluginPathType.CDN:var d=a.utils.getPluginName(b),e=a.utils.getPluginVersion(b);return c+"/"+a.version.split(".")[0]+"/"+d+"/"+d+(e!==""?"-"+e:"")+".js"}}function j(b){g=setTimeout(function(){d=a.utils.loaderstatus.COMPLETE,h.sendEvent(a.events.COMPLETE)},1e3)}function k(b){d=a.utils.loaderstatus.ERROR,h.sendEvent(a.events.ERROR)}var c="http://lp.longtailvideo.com",d=a.utils.loaderstatus.NEW,e,f,g,h=new a.events.eventdispatcher;a.utils.extend(this,h),this.load=function(){if(d==a.utils.loaderstatus.NEW){if(b.lastIndexOf(".swf")>0){e=b,d=a.utils.loaderstatus.COMPLETE,h.sendEvent(a.events.COMPLETE);return}d=a.utils.loaderstatus.LOADING;var c=new a.utils.scriptloader(i());c.addEventListener(a.events.COMPLETE,j),c.addEventListener(a.events.ERROR,k),c.load()}},this.registerPlugin=function(b,c,i){g&&(clearTimeout(g),g=undefined),c&&i?(e=i,f=c):typeof c=="string"?e=c:typeof c=="function"?f=c:!c&&!i&&(e=b),d=a.utils.loaderstatus.COMPLETE,h.sendEvent(a.events.COMPLETE)},this.getStatus=function(){return d},this.getPluginName=function(){return a.utils.getPluginName(b)},this.getFlashPath=function(){if(e)switch(a.utils.getPluginPathType(e)){case a.utils.pluginPathType.ABSOLUTE:return e;case a.utils.pluginPathType.RELATIVE:if(b.lastIndexOf(".swf")>0)return a.utils.getAbsolutePath(e,window.location.href);return a.utils.getAbsolutePath(e,i());case a.utils.pluginPathType.CDN:if(e.indexOf("-")>-1)return e+"h";return e+"-h"}return null},this.getJS=function(){return f},this.getPluginmode=function(){if(typeof e!="undefined"&&typeof f!="undefined")return a.plugins.pluginmodes.HYBRID;if(typeof e!="undefined")return a.plugins.pluginmodes.FLASH;if(typeof f!="undefined")return a.plugins.pluginmodes.JAVASCRIPT},this.getNewInstance=function(a,b,c){return new f(a,b,c)},this.getURL=function(){return b}}}(jwplayer),function(a){a.plugins.pluginloader=function(b,c){function i(){g||(g=!0,e=a.utils.loaderstatus.COMPLETE,h.sendEvent(a.events.COMPLETE))}function j(){if(!g){var b=0;for(plugin in d){var c=d[plugin].getStatus();(c==a.utils.loaderstatus.LOADING||c==a.utils.loaderstatus.NEW)&&b++}b==0&&i()}}var d={},e=a.utils.loaderstatus.NEW,f=!1,g=!1,h=new a.events.eventdispatcher;a.utils.extend(this,h),this.setupPlugins=function(a,b,c){var e={length:0,plugins:{}},f={length:0,plugins:{}};for(var g in d){var h=d[g].getPluginName();d[g].getFlashPath()&&(e.plugins[d[g].getFlashPath()]=b.plugins[g],e.plugins[d[g].getFlashPath()].pluginmode=d[g].getPluginmode(),e.length++);if(d[g].getJS()){var i=document.createElement("div");i.id=a.id+"_"+h,i.style.position="absolute",i.style.zIndex=f.length+10,f.plugins[h]=d[g].getNewInstance(a,b.plugins[g],i),f.length++,typeof f.plugins[h].resize!="undefined"&&(a.onReady(c(f.plugins[h],i,!0)),a.onResize(c(f.plugins[h],i)))}}return a.plugins=f.plugins,e},this.load=function(){e=a.utils.loaderstatus.LOADING,f=!0;for(var g in c)a.utils.exists(g)&&(d[g]=b.addPlugin(g),d[g].addEventListener(a.events.COMPLETE,j),d[g].addEventListener(a.events.ERROR,j));for(g in d)d[g].load();f=!1,j()},this.pluginFailed=function(){i()},this.getStatus=function(){return e}}}(jwplayer),function(a){var b=[];a.api=function(b){function m(a,b){return function(c,d,e,f){if(a.renderingMode=="flash"||a.renderingMode=="html5"){var h;d?(l[c]=d,h="jwplayer('"+a.id+"').callback('"+c+"')"):!d&&l[c]&&delete l[c],g.jwDockSetButton(c,h,e,f)}return b}}function n(a){return function(b){var c=b.newstate,e=b.oldstate;if(c==a){var f=d[c];if(f)for(var g=0;g<f.length;g++)typeof f[g]=="function"&&f[g].call(this,{oldstate:e,newstate:c})}}}function o(a,b){return function(c){if(a==c.component){var d=e[a][b];if(d)for(var f=0;f<d.length;f++)typeof d[f]=="function"&&d[f].call(this,c)}}}function p(b,c){var d=a.utils.extend({},c);b==a.api.events.JWPLAYER_FULLSCREEN&&!d.fullscreen?(d.fullscreen=d.message=="true"?!0:!1,delete d.message):typeof d.data=="object"&&(d=a.utils.extend(d,d.data),delete d.data);var e=["position","duration","offset"];for(var f in e)d[e[f]]&&(d[e[f]]=Math.round(d[e[f]]*1e3)/1e3);return d}function q(a,b,c){var d=[];b||(b=0),c||(c=a.length-1);for(var e=b;e<=c;e++)d.push(a[e]);return d}this.container=b,this.id=b.id;var c={},d={},e={},f=[],g=undefined,h=!1,i=[],j=a.utils.getOuterHTML(b),k={},l={};return this.getBuffer=function(){return this.callInternal("jwGetBuffer")},this.getContainer=function(){return this.container},this.getPlugin=function(b){var c=this,d={};return b=="dock"?a.utils.extend(d,{setButton:m(c,d),show:function(){return c.callInternal("jwDockShow"),d},hide:function(){return c.callInternal("jwDockHide"),d},onShow:function(b){return c.componentListener("dock",a.api.events.JWPLAYER_COMPONENT_SHOW,b),d},onHide:function(b){return c.componentListener("dock",a.api.events.JWPLAYER_COMPONENT_HIDE,b),d}}):b=="controlbar"?a.utils.extend(d,{show:function(){return c.callInternal("jwControlbarShow"),d},hide:function(){return c.callInternal("jwControlbarHide"),d},onShow:function(b){return c.componentListener("controlbar",a.api.events.JWPLAYER_COMPONENT_SHOW,b),d},onHide:function(b){return c.componentListener("controlbar",a.api.events.JWPLAYER_COMPONENT_HIDE,b),d}}):b=="display"?a.utils.extend(d,{show:function(){return c.callInternal("jwDisplayShow"),d},hide:function(){return c.callInternal("jwDisplayHide"),d},onShow:function(b){return c.componentListener("display",a.api.events.JWPLAYER_COMPONENT_SHOW,b),d},onHide:function(b){return c.componentListener("display",a.api.events.JWPLAYER_COMPONENT_HIDE,b),d}}):this.plugins[b]},this.callback=function(a){if(l[a])return l[a]()},this.getDuration=function(){return this.callInternal("jwGetDuration")},this.getFullscreen=function(){return this.callInternal("jwGetFullscreen")},this.getHeight=function(){return this.callInternal("jwGetHeight")},this.getLockState=function(){return this.callInternal("jwGetLockState")},this.getMeta=function(){return this.getItemMeta()},this.getMute=function(){return this.callInternal("jwGetMute")},this.getPlaylist=function(){var b=this.callInternal("jwGetPlaylist");this.renderingMode=="flash"&&a.utils.deepReplaceKeyName(b,"__dot__",".");for(var c=0;c<b.length;c++)a.utils.exists(b[c].index)||(b[c].index=c);return b},this.getPlaylistItem=function(b){return a.utils.exists(b)||(b=this.getCurrentItem()),this.getPlaylist()[b]},this.getPosition=function(){return this.callInternal("jwGetPosition")},this.getRenderingMode=function(){return this.renderingMode},this.getState=function(){return this.callInternal("jwGetState")},this.getVolume=function(){return this.callInternal("jwGetVolume")},this.getWidth=function(){return this.callInternal("jwGetWidth")},this.setFullscreen=function(b){return a.utils.exists(b)?this.callInternal("jwSetFullscreen",b):this.callInternal("jwSetFullscreen",!this.callInternal("jwGetFullscreen")),this},this.setMute=function(b){return a.utils.exists(b)?this.callInternal("jwSetMute",b):this.callInternal("jwSetMute",!this.callInternal("jwGetMute")),this},this.lock=function(){return this},this.unlock=function(){return this},this.load=function(a){return this.callInternal("jwLoad",a),this},this.playlistItem=function(a){return this.callInternal("jwPlaylistItem",a),this},this.playlistPrev=function(){return this.callInternal("jwPlaylistPrev"),this},this.playlistNext=function(){return this.callInternal("jwPlaylistNext"),this},this.resize=function(a,b){return this.renderingMode=="html5"?g.jwResize(a,b):(this.container.width=a,this.container.height=b),this},this.play=function(b){return typeof b=="undefined"?(b=this.getState(),b==a.api.events.state.PLAYING||b==a.api.events.state.BUFFERING?this.callInternal("jwPause"):this.callInternal("jwPlay")):this.callInternal("jwPlay",b),this},this.pause=function(b){return typeof b=="undefined"?(b=this.getState(),b==a.api.events.state.PLAYING||b==a.api.events.state.BUFFERING?this.callInternal("jwPause"):this.callInternal("jwPlay")):this.callInternal("jwPause",b),this},this.stop=function(){return this.callInternal("jwStop"),this},this.seek=function(a){return this.callInternal("jwSeek",a),this},this.setVolume=function(a){return this.callInternal("jwSetVolume",a),this},this.onBufferChange=function(b){return this.eventListener(a.api.events.JWPLAYER_MEDIA_BUFFER,b)},this.onBufferFull=function(b){return this.eventListener(a.api.events.JWPLAYER_MEDIA_BUFFER_FULL,b)},this.onError=function(b){return this.eventListener(a.api.events.JWPLAYER_ERROR,b)},this.onFullscreen=function(b){return this.eventListener(a.api.events.JWPLAYER_FULLSCREEN,b)},this.onMeta=function(b){return this.eventListener(a.api.events.JWPLAYER_MEDIA_META,b)},this.onMute=function(b){return this.eventListener(a.api.events.JWPLAYER_MEDIA_MUTE,b)},this.onPlaylist=function(b){return this.eventListener(a.api.events.JWPLAYER_PLAYLIST_LOADED,b)},this.onPlaylistItem=function(b){return this.eventListener(a.api.events.JWPLAYER_PLAYLIST_ITEM,b)},this.onReady=function(b){return this.eventListener(a.api.events.API_READY,b)},this.onResize=function(b){return this.eventListener(a.api.events.JWPLAYER_RESIZE,b)},this.onComplete=function(b){return this.eventListener(a.api.events.JWPLAYER_MEDIA_COMPLETE,b)},this.onSeek=function(b){return this.eventListener(a.api.events.JWPLAYER_MEDIA_SEEK,b)},this.onTime=function(b){return this.eventListener(a.api.events.JWPLAYER_MEDIA_TIME,b)},this.onVolume=function(b){return this.eventListener(a.api.events.JWPLAYER_MEDIA_VOLUME,b)},this.onBuffer=function(b){return this.stateListener(a.api.events.state.BUFFERING,b)},this.onPause=function(b){return this.stateListener(a.api.events.state.PAUSED,b)},this.onPlay=function(b){return this.stateListener(a.api.events.state.PLAYING,b)},this.onIdle=function(b){return this.stateListener(a.api.events.state.IDLE,b)},this.remove=function(){c={},i=[],a.utils.getOuterHTML(this.container)!=j&&a.api.destroyPlayer(this.id,j)},this.setup=function(b){if(a.embed){var c=this.id;this.remove();var d=a(c);return d.config=b,new a.embed(d)}return this},this.registerPlugin=function(b,c,d){a.plugins.registerPlugin(b,c,d)},this.setPlayer=function(a,b){g=a,this.renderingMode=b},this.stateListener=function(b,c){return d[b]||(d[b]=[],this.eventListener(a.api.events.JWPLAYER_PLAYER_STATE,n(b))),d[b].push(c),this},this.componentListener=function(a,b,c){return e[a]||(e[a]={}),e[a][b]||(e[a][b]=[],this.eventListener(b,o(a,b))),e[a][b].push(c),this},this.addInternalListener=function(a,b){a.jwAddEventListener(b,'function(dat) { jwplayer("'+this.id+'").dispatchEvent("'+b+'", dat); }')},this.eventListener=function(a,b){return c[a]||(c[a]=[],g&&h&&this.addInternalListener(g,a)),c[a].push(b),this},this.dispatchEvent=function(a){if(c[a]){var b=p(a,arguments[1]);for(var d=0;d<c[a].length;d++)typeof c[a][d]=="function"&&c[a][d].call(this,b)}},this.callInternal=function(b,c){if(h)return typeof g!="undefined"&&typeof g[b]=="function"?a.utils.exists(c)?g[b](c):g[b]():null;i.push({method:b,parameters:c})},this.playerReady=function(b){h=!0,g||this.setPlayer(document.getElementById(b.id)),this.container=document.getElementById(this.id);for(var d in c)this.addInternalListener(g,d);this.eventListener(a.api.events.JWPLAYER_PLAYLIST_ITEM,function(a){k={}}),this.eventListener(a.api.events.JWPLAYER_MEDIA_META,function(b){a.utils.extend(k,b.metadata)}),this.dispatchEvent(a.api.events.API_READY);while(i.length>0){var e=i.shift();this.callInternal(e.method,e.parameters)}},this.getItemMeta=function(){return k},this.getCurrentItem=function(){return this.callInternal("jwGetPlaylistIndex")},this},a.api.selectPlayer=function(b){var c;a.utils.exists(b)||(b=0),b.nodeType?c=b:typeof b=="string"&&(c=document.getElementById(b));if(c){var d=a.api.playerById(c.id);return d?d:a.api.addPlayer(new a.api(c))}return typeof b=="number"?a.getPlayers()[b]:null},a.api.events={API_READY:"jwplayerAPIReady",JWPLAYER_READY:"jwplayerReady",JWPLAYER_FULLSCREEN:"jwplayerFullscreen",JWPLAYER_RESIZE:"jwplayerResize",JWPLAYER_ERROR:"jwplayerError",JWPLAYER_COMPONENT_SHOW:"jwplayerComponentShow",JWPLAYER_COMPONENT_HIDE:"jwplayerComponentHide",JWPLAYER_MEDIA_BUFFER:"jwplayerMediaBuffer",JWPLAYER_MEDIA_BUFFER_FULL:"jwplayerMediaBufferFull",JWPLAYER_MEDIA_ERROR:"jwplayerMediaError",JWPLAYER_MEDIA_LOADED:"jwplayerMediaLoaded",JWPLAYER_MEDIA_COMPLETE:"jwplayerMediaComplete",JWPLAYER_MEDIA_SEEK:"jwplayerMediaSeek",JWPLAYER_MEDIA_TIME:"jwplayerMediaTime",JWPLAYER_MEDIA_VOLUME:"jwplayerMediaVolume",JWPLAYER_MEDIA_META:"jwplayerMediaMeta",JWPLAYER_MEDIA_MUTE:"jwplayerMediaMute",JWPLAYER_PLAYER_STATE:"jwplayerPlayerState",JWPLAYER_PLAYLIST_LOADED:"jwplayerPlaylistLoaded",JWPLAYER_PLAYLIST_ITEM:"jwplayerPlaylistItem"},a.api.events.state={BUFFERING:"BUFFERING",IDLE:"IDLE",PAUSED:"PAUSED",PLAYING:"PLAYING"},a.api.playerById=function(a){for(var c=0;c<b.length;c++)if(b[c].id==a)return b[c];return null},a.api.addPlayer=function(a){for(var c=0;c<b.length;c++)if(b[c]==a)return a;return b.push(a),a},a.api.destroyPlayer=function(c,d){var e=-1;for(var f=0;f<b.length;f++)if(b[f].id==c){e=f;continue}if(e>=0){var g=document.getElementById(b[e].id);document.getElementById(b[e].id+"_wrapper")&&(g=document.getElementById(b[e].id+"_wrapper"));if(g)if(d)a.utils.setOuterHTML(g,d);else{var h=document.createElement("div"),i=g.id;g.id.indexOf("_wrapper")==g.id.length-8&&(newID=g.id.substring(0,g.id.length-8)),h.setAttribute("id",i),g.parentNode.replaceChild(h,g)}b.splice(e,1)}return null},a.getPlayers=function(){return b.slice(0)}}(jwplayer);var _userPlayerReady=typeof playerReady=="function"?playerReady:undefined;playerReady=function(a){var b=jwplayer.api.playerById(a.id);b?b.playerReady(a):jwplayer.api.selectPlayer(a.id).playerReady(a),_userPlayerReady&&_userPlayerReady.call(this,a)},function(a){function b(){if(!document.body)return setTimeout(b,15);var c=a.utils.selectors.getElementsByTagAndClass("video","jwplayer");for(var d=0;d<c.length;d++){var e=c[d];a(e.id).setup({})}}a.embed=function(b){function g(a,b){for(var c in b)typeof a[c]=="function"&&a[c].call(a,b[c])}function h(){if(f.getStatus()==a.utils.loaderstatus.COMPLETE){for(var c=0;c<e.modes.length;c++)if(e.modes[c].type&&a.embed[e.modes[c].type]){var d=e;e.modes[c].config&&(d=a.utils.extend(a.utils.clone(e),e.modes[c].config));var h=new a.embed[e.modes[c].type](document.getElementById(b.id),e.modes[c],d,f,b);if(h.supportsConfig())return h.embed(),g(b,e.events),b}a.utils.log("No suitable players found"),new a.embed.logo(a.utils.extend({hide:!0},e.components.logo),"none",b.id)}}var c={width:400,height:300,components:{controlbar:{position:"over"}}},d=a.utils.mediaparser.parseMedia(b.container),e=new a.embed.config(a.utils.extend(c,d,b.config),this),f=a.plugins.loadPlugins(b.id,e.plugins);return f.addEventListener(a.events.COMPLETE,h),f.addEventListener(a.events.ERROR,h),f.load(),b},b()}(jwplayer),function(a){function b(){return[{type:"flash",src:"/jwplayer/player.swf"},{type:"html5"},{type:"download"}]}function d(a){var b=a.toLowerCase(),c=["left","right","top","bottom"];for(var d=0;d<c.length;d++)if(b==c[d])return!0;return!1}function e(a){var b=!1;return b=a instanceof Array||typeof a=="object"&&!a.position&&!a.size,b}function f(a){if(typeof a=="string")if(parseInt(a).toString()==a||a.toLowerCase().indexOf("px")>-1)return parseInt(a);return a}function h(b){var c={};switch(a.utils.typeOf(b.plugins)){case"object":for(var d in b.plugins)c[a.utils.getPluginName(d)]=d;break;case"string":var e=b.plugins.split(",");for(var f=0;f<e.length;f++)c[a.utils.getPluginName(e[f])]=e[f]}return c}function i(b,c,d,e){a.utils.typeOf(b[c])!="object"&&(b[c]={});var f=b[c][d];a.utils.typeOf(f)!="object"&&(b[c][d]=f={});if(e)if(c=="plugins"){var g=a.utils.getPluginName(d);f[e]=b[g+"."+e],delete b[g+"."+e]}else f[e]=b[d+"."+e],delete b[d+"."+e]}var c={players:"modes",autoplay:"autostart"},g=["playlist","dock","controlbar","logo","display"];a.embed.deserialize=function(b){var c=h(b);for(var d in c)i(b,"plugins",c[d]);for(var e in b)if(e.indexOf(".")>-1){var f=e.split("."),j=f[0],e=f[1];a.utils.isInArray(g,j)?i(b,"components",j,e):c[j]&&i(b,"plugins",c[j],e)}return b},a.embed.config=function(d,h){var i=a.utils.extend({},d),k;e(i.playlist)&&(k=i.playlist,delete i.playlist),i=a.embed.deserialize(i),i.height=f(i.height),i.width=f(i.width);if(typeof i.plugins=="string"){var l=i.plugins.split(",");typeof i.plugins!="object"&&(i.plugins={});for(var m=0;m<l.length;m++){var n=a.utils.getPluginName(l[m]);typeof i[n]=="object"?(i.plugins[l[m]]=i[n],delete i[n]):i.plugins[l[m]]={}}}for(var o=0;o<g.length;o++){var p=g[o];a.utils.exists(i[p])&&(typeof i[p]!="object"?(i.components[p]||(i.components[p]={}),p=="logo"?i.components[p].file=i[p]:i.components[p].position=i[p],delete i[p]):(i.components[p]||(i.components[p]={}),a.utils.extend(i.components[p],i[p]),delete i[p])),typeof i[p+"size"]!="undefined"&&(i.components[p]||(i.components[p]={}),i.components[p].size=i[p+"size"],delete i[p+"size"])}typeof i.icons!="undefined"&&(i.components.display||(i.components.display={}),i.components.display.icons=i.icons,delete i.icons);for(var q in c)i[q]&&(i[c[q]]||(i[c[q]]=i[q]),delete i[q]);var r;return i.flashplayer&&!i.modes?(r=b(),r[0].src=i.flashplayer,delete i.flashplayer):i.modes?(typeof i.modes=="string"?(r=b(),r[0].src=i.modes):i.modes instanceof Array?r=i.modes:typeof i.modes=="object"&&i.modes.type&&(r=[i.modes]),delete i.modes):r=b(),i.modes=r,k&&(i.playlist=k),i}}(jwplayer),function(a){a.embed.download=function(b,c,d,e,f){function g(b,c,d){if(d)return!1;var e=["image","sound","youtube","http"];if(c&&e.toString().indexOf(c)>-1)return!0;if(!c||c&&c=="video"){var f=a.utils.extension(b);if(f&&a.utils.extensionmap[f])return!0}return!1}this.embed=function(){function o(a){_imageWidth=e.display_image.naturalWidth,_imageHeight=e.display_image.naturalHeight,p()}function p(){a.utils.stretch(a.utils.stretching.UNIFORM,e.display_image,g,h,_imageWidth,_imageHeight)}var c=a.utils.extend({},d),e={},g=d.width?d.width:480;typeof g!="number"&&(g=parseInt(g,10));var h=d.height?d.height:320;typeof h!="number"&&(h=parseInt(h,10));var i,j,k,l={};d.playlist&&d.playlist.length?(l.file=d.playlist[0].file,j=d.playlist[0].image,l.levels=d.playlist[0].levels):(l.file=d.file,j=d.image,l.levels=d.levels),l.file?i=l.file:l.levels&&l.levels.length&&(i=l.levels[0].file),k=i?"pointer":"auto";var m={display:{style:{cursor:k,width:g,height:h,backgroundColor:"#000",position:"relative",textDecoration:"none",border:"none",display:"block"}},display_icon:{style:{cursor:k,position:"absolute",display:i?"block":"none",top:0,left:0,border:0,margin:0,padding:0,zIndex:3,width:50,height:50,backgroundImage:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAALdJREFUeNrs18ENgjAYhmFouDOCcQJGcARHgE10BDcgTOIosAGwQOuPwaQeuFRi2p/3Sb6EC5L3QCxZBgAAAOCorLW1zMn65TrlkH4NcV7QNcUQt7Gn7KIhxA+qNIR81spOGkL8oFJDyLJRdosqKDDkK+iX5+d7huzwM40xptMQMkjIOeRGo+VkEVvIPfTGIpKASfYIfT9iCHkHrBEzf4gcUQ56aEzuGK/mw0rHpy4AAACAf3kJMACBxjAQNRckhwAAAABJRU5ErkJggg==)"}},display_iconBackground:{style:{cursor:k,position:"absolute",display:i?"block":"none",top:(h-50)/2,left:(g-50)/2,border:0,width:50,height:50,margin:0,padding:0,zIndex:2,backgroundImage:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAEpJREFUeNrszwENADAIA7DhX8ENoBMZ5KR10EryckCJiIiIiIiIiIiIiIiIiIiIiIh8GmkRERERERERERERERERERERERGRHSPAAPlXH1phYpYaAAAAAElFTkSuQmCC)"}},display_image:{style:{width:g,height:h,display:j?"block":"none",position:"absolute",cursor:k,left:0,top:0,margin:0,padding:0,textDecoration:"none",zIndex:1,border:"none"}}},n=function(c,d,e){var f=document.createElement(c);return e?f.id=e:f.id=b.id+"_jwplayer_"+d,a.utils.css(f,m[d].style),f};e.display=n("a","display",b.id),i&&e.display.setAttribute("href",a.utils.getAbsolutePath(i)),e.display_image=n("img","display_image"),e.display_image.setAttribute("alt","Click to download..."),j&&e.display_image.setAttribute("src",a.utils.getAbsolutePath(j)),e.display_icon=n("div","display_icon"),e.display_iconBackground=n("div","display_iconBackground"),e.display.appendChild(e.display_image),e.display_iconBackground.appendChild(e.display_icon),e.display.appendChild(e.display_iconBackground),_css=a.utils.css,_hide=function(a){_css(a,{display:"none"})},e.display_image.onerror=function(a){_hide(e.display_image)},e.display_image.onload=o,b.parentNode.replaceChild(e.display,b);var q=d.plugins&&d.plugins.logo?d.plugins.logo:{};e.display.appendChild(new a.embed.logo(d.components.logo,"download",b.id)),f.container=document.getElementById(f.id),f.setPlayer(e.display,"download")},this.supportsConfig=function(){if(!d)return!0;var b=a.utils.getFirstPlaylistItemFromConfig(d);if(typeof b.file=="undefined"&&typeof b.levels=="undefined")return!0;if(b.file)return g(b.file,b.provider,b.playlistfile);if(b.levels&&b.levels.length)for(var c=0;c<b.levels.length;c++)if(b.levels[c].file&&g(b.levels[c].file,b.provider,b.playlistfile))return!0}}}(jwplayer),function(a){a.embed.flash=function(b,c,d,e,f){function g(a,b,c){var d=document.createElement("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function h(b,c,d){return function(e){d&&document.getElementById(f.id+"_wrapper").appendChild(c);var g=document.getElementById(f.id).getPluginConfig("display");b.resize(g.width,g.height);var h={left:g.x,top:g.y};a.utils.css(c,h)}}function i(a){if(!a)return{};var b={};for(var c in a){var d=a[c];for(var e in d)b[c+"."+e]=d[e]}return b}function j(a,b){if(a[b]){var c=a[b];for(var d in c){var e=c[d];if(typeof e=="string")a[d]||(a[d]=e);else for(var f in e)a[d+"."+f]||(a[d+"."+f]=e[f])}delete a[b]}}function k(b){if(!b)return{};var c={},d=[];for(var e in b){var f=a.utils.getPluginName(e),g=b[e];d.push(e);for(var h in g)c[f+"."+h]=g[h]}return c.plugins=d.join(","),c}function l(b){var c=b.netstreambasepath?"":"netstreambasepath="+encodeURIComponent(window.location.href.split("#")[0])+"&";for(var d in b)typeof b[d]=="object"?c+=d+"="+encodeURIComponent("[[JSON]]"+a.utils.strings.jsonToString(b[d]))+"&":c+=d+"="+encodeURIComponent(b[d])+"&";return c.substring(0,c.length-1)}this.embed=function(){d.id=f.id;var i,n=a.utils.extend({},d),o=n.width,p=n.height;b.id+"_wrapper"==b.parentNode.id?i=document.getElementById(b.id+"_wrapper"):(i=document.createElement("div"),i.id=b.id+"_wrapper",a.utils.wrap(b,i),a.utils.css(i,{position:"relative",width:o,height:p}));var q=e.setupPlugins(f,n,h);q.length>0?a.utils.extend(n,k(q.plugins)):delete n.plugins;var r=["height","width","modes","events"];for(var s=0;s<r.length;s++)delete n[r[s]];var t="opaque";n.wmode&&(t=n.wmode),j(n,"components"),j(n,"providers"),typeof n["dock.position"]!="undefined"&&n["dock.position"].toString().toLowerCase()=="false"&&(n.dock=n["dock.position"],delete n["dock.position"]);var u="#000000",v;if(a.utils.isIE()){var w='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" bgcolor="'+u+'" width="100%" height="100%" id="'+b.id+'" name="'+b.id+'" tabindex=0"">';w+='<param name="movie" value="'+c.src+'">',w+='<param name="allowfullscreen" value="true">',w+='<param name="allowscriptaccess" value="always">',w+='<param name="seamlesstabbing" value="true">',w+='<param name="wmode" value="'+t+'">',w+='<param name="flashvars" value="'+l(n)+'">',w+="</object>",a.utils.setOuterHTML(b,w),v=document.getElementById(b.id)}else{var x=document.createElement("object");x.setAttribute("type","application/x-shockwave-flash"),x.setAttribute("data",c.src),x.setAttribute("width","100%"),x.setAttribute("height","100%"),x.setAttribute("bgcolor","#000000"),x.setAttribute("id",b.id),x.setAttribute("name",b.id),x.setAttribute("tabindex",0),g(x,"allowfullscreen","true"),g(x,"allowscriptaccess","always"),g(x,"seamlesstabbing","true"),g(x,"wmode",t),g(x,"flashvars",l(n)),b.parentNode.replaceChild(x,b),v=x}f.container=v,f.setPlayer(v,"flash")},this.supportsConfig=function(){if(a.utils.hasFlash()){if(!d)return!0;var b=a.utils.getFirstPlaylistItemFromConfig(d);if(typeof b.file=="undefined"&&typeof b.levels=="undefined")return!0;if(b.file)return flashCanPlay(b.file,b.provider);if(b.levels&&b.levels.length)for(var c=0;c<b.levels.length;c++)if(b.levels[c].file&&flashCanPlay(b.levels[c].file,b.provider))return!0}return!1},flashCanPlay=function(b,c){var d=["video","http","sound","image"];if(c&&d.toString().indexOf(c<0))return!0;var e=a.utils.extension(b);return e?a.utils.exists(a.utils.extensionmap[e])&&!a.utils.exists(a.utils.extensionmap[e].flash)?!1:!0:!0}}}(jwplayer),function(a){a.embed.html5=function(b,c,d,e,f){function g(a,c,d){return function(e){var f=document.getElementById(b.id+"_displayarea");d&&f.appendChild(c);var g=f.style;a.resize(parseInt(g.width.replace("px","")),parseInt(g.height.replace("px",""))),c.left=g.left,c.top=g.top}}this.embed=function(){if(!a.html5)return null;e.setupPlugins(f,d,g),b.innerHTML="";var c=a.utils.extend({screencolor:"0x000000"},d),h=["plugins","modes","events"];for(var i=0;i<h.length;i++)delete c[h[i]];c.levels&&!c.sources&&(c.sources=d.levels),c.skin&&c.skin.toLowerCase().indexOf(".zip")>0&&(c.skin=c.skin.replace(/\.zip/i,".xml"));var j=new(a.html5(b).setup)(c);f.container=document.getElementById(f.id),f.setPlayer(j,"html5")},this.supportsConfig=function(){if(!!a.vid.canPlayType){if(!d)return!0;var b=a.utils.getFirstPlaylistItemFromConfig(d);if(typeof b.file=="undefined"&&typeof b.levels=="undefined")return!0;if(b.file)return html5CanPlay(a.vid,b.file,b.provider,b.playlistfile);if(b.levels&&b.levels.length)for(var c=0;c<b.levels.length;c++)if(b.levels[c].file&&html5CanPlay(a.vid,b.levels[c].file,b.provider,b.playlistfile))return!0}return!1},html5CanPlay=function(b,c,d,e){if(e)return!1;if(d&&d=="youtube")return!0;if(d&&d!="video"&&d!="http"&&d!="sound")return!1;var f=a.utils.extension(c);return!a.utils.exists(f)||!a.utils.exists(a.utils.extensionmap[f])?!0:a.utils.exists(a.utils.extensionmap[f].html5)?a.utils.isLegacyAndroid()&&f.match(/m4v|mp4/)?!0:browserCanPlay(b,a.utils.extensionmap[f].html5):!1},browserCanPlay=function(a,b){return b?a.canPlayType(b)?!0:b=="audio/mp3"&&navigator.userAgent.match(/safari/i)?a.canPlayType("audio/mpeg"):!1:!0}}}(jwplayer),function(a){a.embed.logo=function(b,c,d){function h(){i(),k(),l()}function i(){if(e.prefix){var c=a.version.split(/\W/).splice(0,2).join("/");e.prefix.indexOf(c)<0&&(e.prefix+=c+"/")}g=a.utils.extend({},e,b)}function j(){var a={border:"none",textDecoration:"none",position:"absolute",cursor:"pointer",zIndex:10};a.display=g.hide?"none":"block";var b=g.position.toLowerCase().split("-");for(var c in b)a[b[c]]=g.margin;return a}function k(){f=document.createElement("img"),f.id=d+"_jwplayer_logo",f.style.display="none",f.onload=function(a){_css(f,j()),n()};if(!g.file)return;g.file.indexOf("http://")===0?f.src=g.file:f.src=g.prefix+g.file}function l(){g.link?(f.onmouseover=o,f.onmouseout=n,f.onclick=m):this.mouseEnabled=!1}function m(a){typeof a!="undefined"&&(a.preventDefault(),a.stopPropagation()),g.link&&window.open(g.link,"_blank");return}function n(a){g.link&&(f.style.opacity=g.out);return}function o(a){g.hide&&(f.style.opacity=g.over);return}var e={prefix:"http://l.longtailvideo.com/"+c+"/",file:"",link:"",margin:8,out:.5,over:1,timeout:5,hide:!1,position:"bottom-left"};_css=a.utils.css;var f,g;h();if(!g.file)return;return f}}(jwplayer),function(a){a.html5=function(b){var c=b;return this.setup=function(b){return a.utils.extend(this,new a.html5.api(c,b)),this},this}}(jwplayer),function(a){function d(b){return[a.html5.view.positions.TOP,a.html5.view.positions.RIGHT,a.html5.view.positions.BOTTOM,a.html5.view.positions.LEFT].toString().indexOf(b.toUpperCase())>-1}var b=a.utils,c=b.css;a.html5.view=function(e,f,g){function r(){function a(){return h.skin.getComponentSettings("display")&&h.skin.getComponentSettings("display").backgroundcolor?h.skin.getComponentSettings("display").backgroundcolor:parseInt("000000",16)}k=document.createElement("div"),k.id=i.id,k.className=i.className,_videowrapper=document.createElement("div"),_videowrapper.id=k.id+"_video_wrapper",i.id=k.id+"_video",c(k,{position:"relative",height:j.height,width:j.width,padding:0,backgroundColor:a(),zIndex:0}),c(i,{width:j.width,height:j.height,top:0,left:0,zIndex:1,margin:"auto",display:"block"}),c(_videowrapper,{overflow:"hidden",position:"absolute",top:0,left:0,bottom:0,right:0}),b.wrap(i,k),b.wrap(i,_videowrapper),n=document.createElement("div"),n.id=k.id+"_displayarea",k.appendChild(n)}function s(){for(var a=0;a<j.plugins.order.length;a++){var c=j.plugins.order[a];b.exists(j.plugins.object[c].getDisplayElement)&&(j.plugins.object[c].height=b.parseDimension(j.plugins.object[c].getDisplayElement().style.height),j.plugins.object[c].width=b.parseDimension(j.plugins.object[c].getDisplayElement().style.width),j.plugins.config[c].currentPosition=j.plugins.config[c].position)}u()}function t(a){c(n,{display:j.getMedia().hasChrome()?"none":"block"})}function u(a){var c=j.getMedia()?j.getMedia().getDisplayElement():null;if(b.exists(c)){q!=c&&(q&&q.parentNode&&q.parentNode.replaceChild(c,q),q=c);for(var d=0;d<j.plugins.order.length;d++){var e=j.plugins.order[d];b.exists(j.plugins.object[e].getDisplayElement)&&(j.plugins.config[e].currentPosition=j.plugins.config[e].position)}}w(j.width,j.height)}function v(b){switch(b.keyCode){case 27:h.jwGetFullscreen()&&h.jwSetFullscreen(!1);break;case 32:h.jwGetState()!=a.api.events.state.IDLE&&h.jwGetState()!=a.api.events.state.PAUSED?h.jwPause():h.jwPlay()}}function w(a,b){if(k.style.display=="none")return;var d=[].concat(j.plugins.order);d.reverse(),o=d.length+2;if(!j.fullscreen){j.width=a,j.height=b,l=a,m=b,c(n,{top:0,bottom:0,left:0,right:0,width:a,height:b,position:"relative"}),c(k,{height:m,width:l});var e=x(y,d);if(e.length>0){o+=e.length;var f=e.indexOf("playlist"),g=e.indexOf("controlbar");f>=0&&g>=0&&(e[f]=e.splice(g,1,e[f])[0]),x(z,e,!0)}}else(!navigator||!navigator.vendor||navigator.vendor.indexOf("Apple")!=0)&&x(A,d,!0);B()}function x(d,e,f){var g=[];for(var h=0;h<e.length;h++){var i=e[h];if(b.exists(j.plugins.object[i].getDisplayElement))if(j.plugins.config[i].currentPosition!=a.html5.view.positions.NONE){var k=d(i,o--);k?(j.plugins.object[i].resize(k.width,k.height),f&&(delete k.width,delete k.height),c(j.plugins.object[i].getDisplayElement(),k)):g.push(i)}else c(j.plugins.object[i].getDisplayElement(),{display:"none"})}return g}function y(a,c){if(b.exists(j.plugins.object[a].getDisplayElement)&&j.plugins.config[a].position&&d(j.plugins.config[a].position)){b.exists(j.plugins.object[a].getDisplayElement().parentNode)||k.appendChild(j.plugins.object[a].getDisplayElement());var e=C(a);return e.zIndex=c,e}return!1}function z(a,c){b.exists(j.plugins.object[a].getDisplayElement().parentNode)||n.appendChild(j.plugins.object[a].getDisplayElement());var d=j.width,e=j.height;return typeof j.width=="string"&&j.width.lastIndexOf("%")>-1&&(percentage=parseFloat(j.width.substring(0,j.width.lastIndexOf("%")))/100,d=Math.round(window.innerWidth*percentage)),typeof j.height=="string"&&j.height.lastIndexOf("%")>-1&&(percentage=parseFloat(j.height.substring(0,j.height.lastIndexOf("%")))/100,e=Math.round(window.innerHeight*percentage)),{position:"absolute",width:d-b.parseDimension(n.style.left)-b.parseDimension(n.style.right),height:e-b.parseDimension(n.style.top)-b.parseDimension(n.style.bottom),zIndex:c}}function A(a,b){return{position:"fixed",width:j.width,height:j.height,zIndex:b}}function B(){if(!b.exists(j.getMedia()))return;n.style.position="absolute";var a=j.getMedia().getDisplayElement();if(a&&a.tagName.toLowerCase()=="video"){a.style.position="absolute";var c,d;if(n.style.width.toString().lastIndexOf("%")>-1||n.style.width.toString().lastIndexOf("%")>-1){var e=n.getBoundingClientRect();c=Math.abs(e.left)+Math.abs(e.right),d=Math.abs(e.top)+Math.abs(e.bottom)}else c=b.parseDimension(n.style.width),d=b.parseDimension(n.style.height);a.parentNode&&(a.parentNode.style.left=n.style.left,a.parentNode.style.top=n.style.top),b.stretch(h.jwGetStretching(),a,c,d,a.videoWidth?a.videoWidth:400,a.videoHeight?a.videoHeight:300)}else{var f=j.plugins.object.display.getDisplayElement();f?j.getMedia().resize(b.parseDimension(f.style.width),b.parseDimension(f.style.height)):j.getMedia().resize(b.parseDimension(n.style.width),b.parseDimension(n.style.height))}}function C(c){var d={position:"absolute",margin:0,padding:0,top:null},e=j.plugins.config[c].currentPosition.toLowerCase();switch(e.toUpperCase()){case a.html5.view.positions.TOP:d.top=b.parseDimension(n.style.top),d.left=b.parseDimension(n.style.left),d.width=l-b.parseDimension(n.style.left)-b.parseDimension(n.style.right),d.height=j.plugins.object[c].height,n.style[e]=b
.parseDimension(n.style[e])+j.plugins.object[c].height+"px",n.style.height=b.parseDimension(n.style.height)-d.height+"px";break;case a.html5.view.positions.RIGHT:d.top=b.parseDimension(n.style.top),d.right=b.parseDimension(n.style.right),d.width=j.plugins.object[c].width,d.height=m-b.parseDimension(n.style.top)-b.parseDimension(n.style.bottom),n.style[e]=b.parseDimension(n.style[e])+j.plugins.object[c].width+"px",n.style.width=b.parseDimension(n.style.width)-d.width+"px";break;case a.html5.view.positions.BOTTOM:d.bottom=b.parseDimension(n.style.bottom),d.left=b.parseDimension(n.style.left),d.width=l-b.parseDimension(n.style.left)-b.parseDimension(n.style.right),d.height=j.plugins.object[c].height,n.style[e]=b.parseDimension(n.style[e])+j.plugins.object[c].height+"px",n.style.height=b.parseDimension(n.style.height)-d.height+"px";break;case a.html5.view.positions.LEFT:d.top=b.parseDimension(n.style.top),d.left=b.parseDimension(n.style.left),d.width=j.plugins.object[c].width,d.height=m-b.parseDimension(n.style.top)-b.parseDimension(n.style.bottom),n.style[e]=b.parseDimension(n.style[e])+j.plugins.object[c].width+"px",n.style.width=b.parseDimension(n.style.width)-d.width+"px";break;default:}return d}var h=e,i=f,j=g,k,l,m,n,o,p,q;this.setup=function(){j&&j.getMedia()&&(i=j.getMedia().getDisplayElement()),r(),s(),h.jwAddEventListener(a.api.events.JWPLAYER_PLAYER_STATE,t),h.jwAddEventListener(a.api.events.JWPLAYER_MEDIA_LOADED,u),h.jwAddEventListener(a.api.events.JWPLAYER_MEDIA_META,function(){B()});var c;b.exists(window.onresize)&&(c=window.onresize),window.onresize=function(a){if(b.exists(c))try{c(a)}catch(d){}if(h.jwGetFullscreen()){var e=document.body.getBoundingClientRect();j.width=Math.abs(e.left)+Math.abs(e.right),j.height=window.innerHeight}w(j.width,j.height)}},this.resize=w,this.fullscreen=function(a){if(navigator&&navigator.vendor&&navigator.vendor.indexOf("Apple")===0){if(j.getMedia().getDisplayElement().webkitSupportsFullscreen)if(a)try{j.getMedia().getDisplayElement().webkitEnterFullscreen()}catch(b){}else try{j.getMedia().getDisplayElement().webkitExitFullscreen()}catch(b){}}else{if(a){document.onkeydown=v,clearInterval(p);var d=document.body.getBoundingClientRect();j.width=Math.abs(d.left)+Math.abs(d.right),j.height=window.innerHeight;var e={position:"fixed",width:"100%",height:"100%",top:0,left:0,zIndex:2147483e3};c(k,e),e.zIndex=1,j.getMedia()&&j.getMedia().getDisplayElement()&&c(j.getMedia().getDisplayElement(),e),e.zIndex=2,c(n,e)}else document.onkeydown="",j.width=l,j.height=m,c(k,{position:"relative",height:j.height,width:j.width,zIndex:0});w(j.width,j.height)}}},a.html5.view.positions={TOP:"TOP",RIGHT:"RIGHT",BOTTOM:"BOTTOM",LEFT:"LEFT",OVER:"OVER",NONE:"NONE"}}(jwplayer),function(a){var b={backgroundcolor:"",margin:10,font:"Arial,sans-serif",fontsize:10,fontcolor:parseInt("000000",16),fontstyle:"normal",fontweight:"bold",buttoncolor:parseInt("ffffff",16),position:a.html5.view.positions.BOTTOM,idlehide:!1,layout:{left:{position:"left",elements:[{name:"play",type:"button"},{name:"divider",type:"divider"},{name:"prev",type:"button"},{name:"divider",type:"divider"},{name:"next",type:"button"},{name:"divider",type:"divider"},{name:"elapsed",type:"text"}]},center:{position:"center",elements:[{name:"time",type:"slider"}]},right:{position:"right",elements:[{name:"duration",type:"text"},{name:"blank",type:"button"},{name:"divider",type:"divider"},{name:"mute",type:"button"},{name:"volume",type:"slider"},{name:"divider",type:"divider"},{name:"fullscreen",type:"button"}]}}};_utils=a.utils,_css=_utils.css,_hide=function(a){_css(a,{display:"none"})},_show=function(a){_css(a,{display:"block"})},a.html5.controlbar=function(c,d){function B(){return u||(u=e.skin.getSkinElement("controlbar","background"),u||(u={width:0,height:0,src:null})),u}function C(){i=0,j=0,h=0;if(!s){var a={height:B().height,backgroundColor:f.backgroundcolor};g=document.createElement("div"),g.id=e.id+"_jwplayer_controlbar",_css(g,a)}var b=e.skin.getSkinElement("controlbar","capLeft"),c=e.skin.getSkinElement("controlbar","capRight");b&&Q("capLeft","left",!1,g);var d={position:"absolute",height:B().height,left:b?b.width:0,zIndex:0};L("background",g,d,"img"),B().src&&(r.background.src=B().src),d.zIndex=1,L("elements",g,d),c&&Q("capRight","right",!1,g)}function D(){var a=["timeSlider","volumeSlider","timeSliderRail","volumeSliderRail"];for(var b in a){var c=a[b];typeof r[c]!="undefined"&&(t[c]=r[c].getBoundingClientRect())}}function E(b){if(v)return;if(f.position==a.html5.view.positions.OVER||e.jwGetFullscreen()){clearTimeout(w);switch(e.jwGetState()){case a.api.events.state.PAUSED:case a.api.events.state.IDLE:(!f.idlehide||_utils.exists(b))&&G(),f.idlehide&&(w=setTimeout(function(){F()},2e3));break;default:b&&G(),w=setTimeout(function(){F()},2e3)}}}function F(a){J(),_utils.cancelAnimation(g),_utils.fadeTo(g,0,.1,1,0)}function G(){I(),_utils.cancelAnimation(g),_utils.fadeTo(g,1,0,1,0)}function H(a){return function(){y&&x!=a&&(x=a,A.sendEvent(a,{component:"controlbar",boundingRect:K()}))}}function K(){return f.position==a.html5.view.positions.OVER||e.jwGetFullscreen()?_utils.getDimensions(g):{x:0,y:0,width:0,height:0}}function L(a,b,c,d){var e;return s?e=document.getElementById(g.id+"_"+a):(d||(d="div"),e=document.createElement(d),r[a]=e,e.id=g.id+"_"+a,b.appendChild(e)),_utils.exists(c)&&_css(e,c),e}function M(){N(f.layout.left),N(f.layout.right,-1),N(f.layout.center)}function N(a,b){var c=a.position=="right"?"right":"left",d=_utils.extend([],a.elements);_utils.exists(b)&&d.reverse();for(var e=0;e<d.length;e++)P(d[e],c)}function O(){return h++}function P(a,b){var c,d,f,g,h;if(a.type=="divider"){Q("divider"+O(),b,!0,undefined,undefined,a.width,a.element);return}switch(a.name){case"play":Q("playButton",b,!1),Q("pauseButton",b,!0),V("playButton","jwPlay"),V("pauseButton","jwPause");break;case"prev":Q("prevButton",b,!0),V("prevButton","jwPlaylistPrev");break;case"stop":Q("stopButton",b,!0),V("stopButton","jwStop");break;case"next":Q("nextButton",b,!0),V("nextButton","jwPlaylistNext");break;case"elapsed":Q("elapsedText",b,!0);break;case"time":d=_utils.exists(e.skin.getSkinElement("controlbar","timeSliderCapLeft"))?e.skin.getSkinElement("controlbar","timeSliderCapLeft").width:0,f=_utils.exists(e.skin.getSkinElement("controlbar","timeSliderCapRight"))?e.skin.getSkinElement("controlbar","timeSliderCapRight").width:0,c=b=="left"?d:f,g=e.skin.getSkinElement("controlbar","timeSliderRail").width+d+f,h={height:B().height,position:"absolute",top:0,width:g},h[b]=b=="left"?i:j;var k=L("timeSlider",r.elements,h);Q("timeSliderCapLeft",b,!0,k,b=="left"?0:c),Q("timeSliderRail",b,!1,k,c),Q("timeSliderBuffer",b,!1,k,c),Q("timeSliderProgress",b,!1,k,c),Q("timeSliderThumb",b,!1,k,c),Q("timeSliderCapRight",b,!0,k,b=="right"?0:c),W("time");break;case"fullscreen":Q("fullscreenButton",b,!1),Q("normalscreenButton",b,!0),V("fullscreenButton","jwSetFullscreen",!0),V("normalscreenButton","jwSetFullscreen",!1);break;case"volume":d=_utils.exists(e.skin.getSkinElement("controlbar","volumeSliderCapLeft"))?e.skin.getSkinElement("controlbar","volumeSliderCapLeft").width:0,f=_utils.exists(e.skin.getSkinElement("controlbar","volumeSliderCapRight"))?e.skin.getSkinElement("controlbar","volumeSliderCapRight").width:0,c=b=="left"?d:f,g=e.skin.getSkinElement("controlbar","volumeSliderRail").width+d+f,h={height:B().height,position:"absolute",top:0,width:g},h[b]=b=="left"?i:j;var l=L("volumeSlider",r.elements,h);Q("volumeSliderCapLeft",b,!0,l,b=="left"?0:c),Q("volumeSliderRail",b,!0,l,c),Q("volumeSliderProgress",b,!1,l,c),Q("volumeSliderCapRight",b,!0,l,b=="right"?0:c),W("volume");break;case"mute":Q("muteButton",b,!1),Q("unmuteButton",b,!0),V("muteButton","jwSetMute",!0),V("unmuteButton","jwSetMute",!1);break;case"duration":Q("durationText",b,!0)}}function Q(a,b,c,d,g,h,k){if(_utils.exists(e.skin.getSkinElement("controlbar",a))||a.indexOf("Text")>0||a.indexOf("divider")===0){var l={height:B().height,position:"absolute",display:"block",top:0};(a.indexOf("next")===0||a.indexOf("prev")===0)&&e.jwGetPlaylist().length<2&&(c=!1,l.display="none");var m;if(a.indexOf("Text")>0)a.innerhtml="00:00",l.font=f.fontsize+"px/"+(B().height+1)+"px "+f.font,l.color=f.fontcolor,l.textAlign="center",l.fontWeight=f.fontweight,l.fontStyle=f.fontstyle,l.cursor="default",m=14+3*f.fontsize;else if(a.indexOf("divider")===0)if(h)isNaN(parseInt(h))||(m=parseInt(h));else if(k){var n=e.skin.getSkinElement("controlbar",k);n&&(l.background="url("+n.src+") repeat-x center left",m=n.width)}else l.background="url("+e.skin.getSkinElement("controlbar","divider").src+") repeat-x center left",m=e.skin.getSkinElement("controlbar","divider").width;else l.background="url("+e.skin.getSkinElement("controlbar",a).src+") repeat-x center left",m=e.skin.getSkinElement("controlbar",a).width;b=="left"?(l.left=isNaN(g)?i:g,c&&(i+=m)):b=="right"&&(l.right=isNaN(g)?j:g,c&&(j+=m)),_utils.typeOf(d)=="undefined"&&(d=r.elements),l.width=m;if(s)_css(r[a],l);else{var o=L(a,d,l);_utils.exists(e.skin.getSkinElement("controlbar",a+"Over"))&&(o.onmouseover=function(b){o.style.backgroundImage=["url(",e.skin.getSkinElement("controlbar",a+"Over").src,")"].join("")},o.onmouseout=function(b){o.style.backgroundImage=["url(",e.skin.getSkinElement("controlbar",a).src,")"].join("")})}}}function R(){e.jwAddEventListener(a.api.events.JWPLAYER_PLAYLIST_LOADED,S),e.jwAddEventListener(a.api.events.JWPLAYER_PLAYLIST_ITEM,T),e.jwAddEventListener(a.api.events.JWPLAYER_MEDIA_BUFFER,Y),e.jwAddEventListener(a.api.events.JWPLAYER_PLAYER_STATE,$),e.jwAddEventListener(a.api.events.JWPLAYER_MEDIA_TIME,ba),e.jwAddEventListener(a.api.events.JWPLAYER_MEDIA_MUTE,Z),e.jwAddEventListener(a.api.events.JWPLAYER_MEDIA_VOLUME,bd),e.jwAddEventListener(a.api.events.JWPLAYER_MEDIA_COMPLETE,_)}function S(){C(),M(),bc(),U()}function T(a){n=e.jwGetPlaylist()[a.index].duration,ba({id:e.id,duration:n,position:0}),Y({id:e.id,bufferProgress:0})}function U(){ba({id:e.id,duration:e.jwGetDuration(),position:0}),Y({id:e.id,bufferProgress:0}),Z({id:e.id,mute:e.jwGetMute()}),$({id:e.id,newstate:a.api.events.state.IDLE}),bd({id:e.id,volume:e.jwGetVolume()})}function V(a,b,c){if(s)return;if(_utils.exists(e.skin.getSkinElement("controlbar",a))){var d=r[a];_utils.exists(d)&&(_css(d,{cursor:"pointer"}),b=="fullscreen"?d.onmouseup=function(a){a.stopPropagation(),e.jwSetFullscreen(!e.jwGetFullscreen())}:d.onmouseup=function(a){a.stopPropagation(),_utils.exists(c)?e[b](c):e[b]()})}}function W(a){if(s)return;var b=r[a+"Slider"];_css(r.elements,{cursor:"pointer"}),_css(b,{cursor:"pointer"}),b.onmousedown=function(b){k=a},b.onmouseup=function(a){a.stopPropagation(),X(a.pageX)},b.onmousemove=function(b){if(k=="time"){l=!0;var c=b.pageX-t[a+"Slider"].left-window.pageXOffset;_css(r.timeSliderThumb,{left:c})}}}function X(b){l=!1;var c;if(k=="time"){c=b-t.timeSliderRail.left+window.pageXOffset;var d=c/t.timeSliderRail.width*n;d<0?d=0:d>n&&(d=n-3),(e.jwGetState()==a.api.events.state.PAUSED||e.jwGetState()==a.api.events.state.IDLE)&&e.jwPlay(),e.jwSeek(d)}else if(k=="volume"){c=b-t.volumeSliderRail.left-window.pageXOffset;var f=Math.round(c/t.volumeSliderRail.width*100);f<0?f=0:f>100&&(f=100),e.jwGetMute()&&e.jwSetMute(!1),e.jwSetVolume(f)}k="none"}function Y(a){_utils.exists(a.bufferPercent)&&(o=a.bufferPercent);if(t.timeSliderRail){var b=t.timeSliderRail.width,c=isNaN(Math.round(b*o/100))?0:Math.round(b*o/100);_css(r.timeSliderBuffer,{width:c})}}function Z(a){a.mute?(_hide(r.muteButton),_show(r.unmuteButton),_hide(r.volumeSliderProgress)):(_show(r.muteButton),_hide(r.unmuteButton),_show(r.volumeSliderProgress))}function $(b){b.newstate==a.api.events.state.BUFFERING||b.newstate==a.api.events.state.PLAYING?(_show(r.pauseButton),_hide(r.playButton)):(_hide(r.pauseButton),_show(r.playButton)),E(),b.newstate==a.api.events.state.IDLE?(_hide(r.timeSliderBuffer),_hide(r.timeSliderProgress),_hide(r.timeSliderThumb),ba({id:e.id,duration:e.jwGetDuration(),position:0})):(_show(r.timeSliderBuffer),b.newstate!=a.api.events.state.BUFFERING&&(_show(r.timeSliderProgress),_show(r.timeSliderThumb)))}function _(a){Y({bufferPercent:0}),ba(_utils.extend(a,{position:0,duration:n}))}function ba(a){_utils.exists(a.position)&&(m=a.position),_utils.exists(a.duration)&&(n=a.duration);var b=m===n===0?0:m/n,c=t.timeSliderRail;if(c){var d=isNaN(Math.round(c.width*b))?0:Math.round(c.width*b),e=d;r.timeSliderProgress&&(r.timeSliderProgress.style.width=d+"px",l||r.timeSliderThumb&&(r.timeSliderThumb.style.left=e+"px"))}r.durationText&&(r.durationText.innerHTML=_utils.timeFormat(n)),r.elapsedText&&(r.elapsedText.innerHTML=_utils.timeFormat(m))}function bb(){var a,b,c=document.getElementById(g.id+"_elements");if(!c)return;var d=c.childNodes;for(var e in c.childNodes){if(isNaN(parseInt(e,10)))continue;d[e].id.indexOf(g.id+"_divider")===0&&b&&b.id.indexOf(g.id+"_divider")===0&&d[e].style.backgroundImage==b.style.backgroundImage?d[e].style.display="none":d[e].id.indexOf(g.id+"_divider")===0&&a&&a.style.display!="none"&&(d[e].style.display="block"),d[e].style.display!="none"&&(b=d[e]),a=d[e]}}function bc(){bb(),e.jwGetFullscreen()?(_show(r.normalscreenButton),_hide(r.fullscreenButton)):(_hide(r.normalscreenButton),_show(r.fullscreenButton));var b={width:p},c={};if(f.position==a.html5.view.positions.OVER||e.jwGetFullscreen())b.left=f.margin,b.width-=2*f.margin,b.top=q-B().height-f.margin,b.height=B().height;var d=e.skin.getSkinElement("controlbar","capLeft"),h=e.skin.getSkinElement("controlbar","capRight");c.left=d?d.width:0,c.width=b.width-c.left-(h?h.width:0);var k=_utils.exists(e.skin.getSkinElement("controlbar","timeSliderCapLeft"))?e.skin.getSkinElement("controlbar","timeSliderCapLeft").width:0;return _css(r.timeSliderRail,{width:c.width-i-j,left:k}),_utils.exists(r.timeSliderCapRight)&&_css(r.timeSliderCapRight,{left:k+(c.width-i-j)}),_css(g,b),_css(r.elements,c),_css(r.background,c),D(),b}function bd(a){if(_utils.exists(r.volumeSliderRail)){var b=isNaN(a.volume/100)?1:a.volume/100,c=_utils.parseDimension(r.volumeSliderRail.style.width),d=isNaN(Math.round(c*b))?0:Math.round(c*b),f=_utils.parseDimension(r.volumeSliderRail.style.right),g=_utils.exists(e.skin.getSkinElement("controlbar","volumeSliderCapLeft"))?e.skin.getSkinElement("controlbar","volumeSliderCapLeft").width:0;_css(r.volumeSliderProgress,{width:d,left:g}),_utils.exists(r.volumeSliderCapLeft)&&_css(r.volumeSliderCapLeft,{left:0})}}function be(){C(),M(),D(),s=!0,R(),f.idlehide=f.idlehide.toString().toLowerCase()=="true",f.position==a.html5.view.positions.OVER&&f.idlehide?(g.style.opacity=0,y=!0):setTimeout(function(){y=!0,I()},1),U()}var e=c,f=_utils.extend({},b,e.skin.getComponentSettings("controlbar"),d);if(f.position==a.html5.view.positions.NONE||typeof a.html5.view.positions[f.position]=="undefined")return;_utils.mapLength(e.skin.getComponentLayout("controlbar"))>0&&(f.layout=e.skin.getComponentLayout("controlbar"));var g,h,i,j,k="none",l,m,n,o,p,q,r={},s=!1,t={},u,v=!1,w,x,y=!1,z=!1,A=new a.html5.eventdispatcher;_utils.extend(this,A),this.getDisplayElement=function(){return g},this.resize=function(a,b){_utils.cancelAnimation(g),document.getElementById(e.id).onmousemove=E,p=a,q=b,z!=e.jwGetFullscreen()&&(z=e.jwGetFullscreen(),x=undefined);var c=bc();return E(),ba({id:e.id,duration:n,position:m}),Y({id:e.id,bufferPercent:o}),c},this.show=function(){v&&(v=!1,_show(g),I())},this.hide=function(){v||(v=!0,_hide(g),J())};var I=H(a.api.events.JWPLAYER_COMPONENT_SHOW),J=H(a.api.events.JWPLAYER_COMPONENT_HIDE);return be(),this}}(jwplayer),function(a){var b=["width","height","state","playlist","item","position","buffer","duration","volume","mute","fullscreen"],c=a.utils;a.html5.controller=function(b,d,e,f){function r(a){q?o.sendEvent(a.type,a):p.push(a)}function s(b){if(!q){o.sendEvent(a.api.events.JWPLAYER_READY,b),a.utils.exists(window.playerReady)&&playerReady(b),a.utils.exists(window[e.config.playerReady])&&window[e.config.playerReady](b);while(p.length>0){var c=p.shift();o.sendEvent(c.type,c)}e.config.autostart&&!a.utils.isIOS()&&A(h.item);while(I.length>0){var d=I.shift();K(d.method,d.arguments)}q=!0}}function t(){try{return B(h.item),h.playlist[h.item].levels[0].file.length>0&&(l||h.state==a.api.events.state.IDLE?(h.getMedia().load(h.playlist[h.item]),l=!1):h.state==a.api.events.state.PAUSED&&h.getMedia().play()),!0}catch(b){o.sendEvent(a.api.events.JWPLAYER_ERROR,b)}return!1}function u(){try{if(h.playlist[h.item].levels[0].file.length>0)switch(h.state){case a.api.events.state.PLAYING:case a.api.events.state.BUFFERING:h.getMedia().pause()}return!0}catch(b){o.sendEvent(a.api.events.JWPLAYER_ERROR,b)}return!1}function v(b){try{if(h.playlist[h.item].levels[0].file.length>0){typeof b!="number"&&(b=parseFloat(b));switch(h.state){case a.api.events.state.IDLE:m<0&&(m=h.playlist[h.item].start,h.playlist[h.item].start=b),t();break;case a.api.events.state.PLAYING:case a.api.events.state.PAUSED:case a.api.events.state.BUFFERING:h.seek(b)}}return!0}catch(c){o.sendEvent(a.api.events.JWPLAYER_ERROR,c)}return!1}function w(b){c.exists(b)||(b=!0);try{return h.getMedia().stop(b),!0}catch(d){o.sendEvent(a.api.events.JWPLAYER_ERROR,d)}return!1}function x(){try{h.playlist[h.item].levels[0].file.length>0&&(h.config.shuffle?B(z()):h.item+1==h.playlist.length?B(0):B(h.item+1));if(h.state!=a.api.events.state.IDLE){var b=h.state;h.state=a.api.events.state.IDLE,o.sendEvent(a.api.events.JWPLAYER_PLAYER_STATE,{oldstate:b,newstate:a.api.events.state.IDLE})}return t(),!0}catch(c){o.sendEvent(a.api.events.JWPLAYER_ERROR,c)}return!1}function y(){try{h.playlist[h.item].levels[0].file.length>0&&(h.config.shuffle?B(z()):h.item===0?B(h.playlist.length-1):B(h.item-1));if(h.state!=a.api.events.state.IDLE){var b=h.state;h.state=a.api.events.state.IDLE,o.sendEvent(a.api.events.JWPLAYER_PLAYER_STATE,{oldstate:b,newstate:a.api.events.state.IDLE})}return t(),!0}catch(c){o.sendEvent(a.api.events.JWPLAYER_ERROR,c)}return!1}function z(){var a=null;if(h.playlist.length>1)while(!c.exists(a))a=Math.floor(Math.random()*h.playlist.length),a==h.item&&(a=null);else a=0;return a}function A(b){if(!h.playlist||!h.playlist[b])return!1;try{if(h.playlist[b].levels[0].file.length>0){var c=h.state;c!==a.api.events.state.IDLE&&(h.playlist[h.item].provider==h.playlist[b].provider?w(!1):w()),B(b),t()}return!0}catch(d){o.sendEvent(a.api.events.JWPLAYER_ERROR,d)}return!1}function B(b){if(!h.playlist[b])return;h.setActiveMediaProvider(h.playlist[b]),h.item!=b&&(h.item=b,l=!0,o.sendEvent(a.api.events.JWPLAYER_PLAYLIST_ITEM,{index:b}))}function C(b){try{B(h.item);var c=h.getMedia();switch(typeof b){case"number":c.volume(b);break;case"string":c.volume(parseInt(b,10))}return!0}catch(d){o.sendEvent(a.api.events.JWPLAYER_ERROR,d)}return!1}function D(b){try{B(h.item);var c=h.getMedia();return typeof b=="undefined"?c.mute(!h.mute):b.toString().toLowerCase()=="true"?c.mute(!0):c.mute(!1),!0}catch(d){o.sendEvent(a.api.events.JWPLAYER_ERROR,d)}return!1}function E(b,c){try{return h.width=b,h.height=c,j.resize(b,c),o.sendEvent(a.api.events.JWPLAYER_RESIZE,{width:h.width,height:h.height}),!0}catch(d){o.sendEvent(a.api.events.JWPLAYER_ERROR,d)}return!1}function F(b){try{return typeof b=="undefined"?(h.fullscreen=!h.fullscreen,j.fullscreen(!h.fullscreen)):b.toString().toLowerCase()=="true"?(h.fullscreen=!0,j.fullscreen(!0)):(h.fullscreen=!1,j.fullscreen(!1)),o.sendEvent(a.api.events.JWPLAYER_RESIZE,{width:h.width,height:h.height}),o.sendEvent(a.api.events.JWPLAYER_FULLSCREEN,{fullscreen:b}),!0}catch(c){o.sendEvent(a.api.events.JWPLAYER_ERROR,c)}return!1}function G(b){try{return w(),h.loadPlaylist(b),B(h.item),!0}catch(c){o.sendEvent(a.api.events.JWPLAYER_ERROR,c)}return!1}function H(){switch(h.config.repeat.toUpperCase()){case a.html5.controller.repeatoptions.SINGLE:t();break;case a.html5.controller.repeatoptions.ALWAYS:h.item==h.playlist.length-1&&!h.config.shuffle?A(0):x();break;case a.html5.controller.repeatoptions.LIST:h.item==h.playlist.length-1&&!h.config.shuffle?(w(),B(0)):x();break;default:w()}}function J(a){return function(){q?K(a,arguments):I.push({method:a,arguments:arguments})}}function K(a,b){var c=[];for(i=0;i<b.length;i++)c.push(b[i]);a.apply(this,c)}var g=b,h=e,j=f,k=d,l=!0,m=-1,n=c.exists(h.config.debug)&&h.config.debug.toString().toLowerCase()=="console",o=new a.html5.eventdispatcher(k.id,n);c.extend(this,o);var p=[],q=!1;h.addGlobalListener(r),h.addEventListener(a.api.events.JWPLAYER_MEDIA_BUFFER_FULL,function(){h.getMedia().play()}),h.addEventListener(a.api.events.JWPLAYER_MEDIA_TIME,function(a){a.position>=h.playlist[h.item].start&&m>=0&&(h.playlist[h.item].start=m,m=-1)}),h.addEventListener(a.api.events.JWPLAYER_MEDIA_COMPLETE,function(a){setTimeout(H,25)}),a.html5.controller.repeatoptions={LIST:"LIST",ALWAYS:"ALWAYS",SINGLE:"SINGLE",NONE:"NONE"};var I=[];this.play=J(t),this.pause=J(u),this.seek=J(v),this.stop=J(w),this.next=J(x),this.prev=J(y),this.item=J(A),this.setVolume=J(C),this.setMute=J(D),this.resize=J(E),this.setFullscreen=J(F),this.load=J(G),this.playerReady=s}}(jwplayer),function(a){a.html5.defaultSkin=function(){return this.text='<?xml version="1.0" ?><skin author="LongTail Video" name="Five" version="1.0"><settings><setting name="backcolor" value="0xFFFFFF"/><setting name="frontcolor" value="0x000000"/><setting name="lightcolor" value="0x000000"/><setting name="screencolor" value="0x000000"/></settings><components><component name="controlbar"><settings><setting name="margin" value="20"/><setting name="fontsize" value="11"/></settings><elements><element name="background" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAIAAABvFaqvAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFJJREFUeNrslLENwAAIwxLU/09j5AiOgD5hVQzNAVY8JK4qEfHMIKBnd2+BQlBINaiRtL/aV2rdzYBsM6CIONbI1NZENTr3RwdB2PlnJgJ6BRgA4hwu5Qg5iswAAAAASUVORK5CYII="/><element name="capLeft" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAYCAIAAAC0rgCNAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAD5JREFUeNosi8ENACAMAgnuv14H0Z8asI19XEjhOiKCMmibVgJTUt7V6fe9KXOtSQCfctJHu2q3/ot79hNgANc2OTz9uTCCAAAAAElFTkSuQmCC"/><element name="capRight" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAYCAIAAAC0rgCNAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAD5JREFUeNosi8ENACAMAgnuv14H0Z8asI19XEjhOiKCMmibVgJTUt7V6fe9KXOtSQCfctJHu2q3/ot79hNgANc2OTz9uTCCAAAAAElFTkSuQmCC"/><element name="divider" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAYCAIAAAC0rgCNAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAD5JREFUeNosi8ENACAMAgnuv14H0Z8asI19XEjhOiKCMmibVgJTUt7V6fe9KXOtSQCfctJHu2q3/ot79hNgANc2OTz9uTCCAAAAAElFTkSuQmCC"/><element name="playButton" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAYCAYAAAAVibZIAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAEhJREFUeNpiYqABYBo1dNRQ+hr6H4jvA3E8NS39j4SpZvh/LJig4YxEGEqy3kET+w+AOGFQRhTJhrEQkGcczfujhg4CQwECDADpTRWU/B3wHQAAAABJRU5ErkJggg=="/><element name="pauseButton" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAYCAYAAAAVibZIAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAChJREFUeNpiYBgFo2DwA0YC8v/R1P4nRu+ooaOGUtnQUTAKhgIACDAAFCwQCfAJ4gwAAAAASUVORK5CYII="/><element name="prevButton" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAYCAYAAAAVibZIAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAEtJREFUeNpiYBgFo2Dog/9QDAPyQHweTYwiQ/2B+D0Wi8g2tB+JTdBQRiIMJVkvEy0iglhDF9Aq9uOpHVEwoE+NJDUKRsFgAAABBgDe2hqZcNNL0AAAAABJRU5ErkJggg=="/><element name="nextButton" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAYCAYAAAAVibZIAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAElJREFUeNpiYBgFo2Dog/9AfB6I5dHE/lNqKAi/B2J/ahsKw/3EGMpIhKEk66WJoaR6fz61IyqemhEFSlL61ExSo2AUDAYAEGAAiG4hj+5t7M8AAAAASUVORK5CYII="/><element name="timeSliderRail" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADxJREFUeNpiYBgFo2AU0Bwwzluw+D8tLWARFhKiqQ9YuLg4aWsBGxs7bS1gZ6e5BWyjSX0UjIKhDgACDABlYQOGh5pYywAAAABJRU5ErkJggg=="/><element name="timeSliderBuffer" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAD1JREFUeNpiYBgFo2AU0Bww1jc0/aelBSz8/Pw09QELOzs7bS1gY2OjrQWsrKy09gHraFIfBaNgqAOAAAMAvy0DChXHsZMAAAAASUVORK5CYII="/><element name="timeSliderProgress" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAClJREFUeNpiYBgFo2AU0BwwAvF/WlrARGsfjFow8BaMglEwCugAAAIMAOHfAQunR+XzAAAAAElFTkSuQmCC"/><element name="timeSliderThumb" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAICAYAAAA870V8AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABZJREFUeNpiZICA/yCCiQEJUJcDEGAAY0gBD1/m7Q0AAAAASUVORK5CYII="/><element name="muteButton" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAYCAYAAADKx8xXAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADFJREFUeNpiYBgFIw3MB+L/5Gj8j6yRiRTFyICJXHfTXyMLAXlGati4YDRFDj8AEGAABk8GSqqS4CoAAAAASUVORK5CYII="/><element name="unmuteButton" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAYCAYAAADKx8xXAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAD1JREFUeNpiYBgFgxz8p7bm+cQa+h8LHy7GhEcjIz4bmAjYykiun/8j0fakGPIfTfPgiSr6aB4FVAcAAQYAWdwR1G1Wd2gAAAAASUVORK5CYII="/><element name="volumeSliderRail" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAYCAYAAADkgu3FAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAGpJREFUeNpi/P//PwM9ABMDncCoRYPfIqqDZcuW1UPp/6AUDcNM1DQYKtRAlaAj1mCSLSLXYIIWUctgDItoZfDA5aOoqKhGEANIM9LVR7SymGDQUctikuOIXkFNdhHEOFrDjlpEd4sAAgwAriRMub95fu8AAAAASUVORK5CYII="/><element name="volumeSliderProgress" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAYCAYAAADkgu3FAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFtJREFUeNpi/P//PwM9ABMDncCoRYPfIlqAeij9H5SiYZiqBqPTlFqE02BKLSLaYFItIttgQhZRzWB8FjENiuRJ7aAbsMQwYMl7wDIsWUUQ42gNO2oR3S0CCDAAKhKq6MLLn8oAAAAASUVORK5CYII="/><element name="fullscreenButton" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAE5JREFUeNpiYBgFo2DQA0YC8v/xqP1PjDlMRDrEgUgxkgHIlfZoriVGjmzLsLFHAW2D6D8eA/9Tw7L/BAwgJE90PvhPpNgoGAVDEQAEGAAMdhTyXcPKcAAAAABJRU5ErkJggg=="/><element name="normalscreenButton" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAEZJREFUeNpiYBgFo2DIg/9UUkOUAf8JiFFsyX88fJyAkcQgYMQjNkzBoAgiezyRbE+tFGSPxQJ7auYBmma0UTAKBhgABBgAJAEY6zON61sAAAAASUVORK5CYII="/></elements></component><component name="display"><elements><element name="background" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAEpJREFUeNrszwENADAIA7DhX8ENoBMZ5KR10EryckCJiIiIiIiIiIiIiIiIiIiIiIh8GmkRERERERERERERERERERERERGRHSPAAPlXH1phYpYaAAAAAElFTkSuQmCC"/><element name="playIcon" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAALdJREFUeNrs18ENgjAYhmFouDOCcQJGcARHgE10BDcgTOIosAGwQOuPwaQeuFRi2p/3Sb6EC5L3QCxZBgAAAOCorLW1zMn65TrlkH4NcV7QNcUQt7Gn7KIhxA+qNIR81spOGkL8oFJDyLJRdosqKDDkK+iX5+d7huzwM40xptMQMkjIOeRGo+VkEVvIPfTGIpKASfYIfT9iCHkHrBEzf4gcUQ56aEzuGK/mw0rHpy4AAACAf3kJMACBxjAQNRckhwAAAABJRU5ErkJggg=="/><element name="muteIcon" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHJJREFUeNrs1jEOgCAMBVAg7t5/8qaoIy4uoobyXsLCxA+0NCUAAADGUWvdQoQ41x4ixNBB2hBvBskdD3w5ZCkl3+33VqI0kjBBlh9rp+uTcyOP33TnolfsU85XX3yIRpQph8ZQY3wTZtU5AACASA4BBgDHoVuY1/fvOQAAAABJRU5ErkJggg=="/><element name="errorIcon" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAWlJREFUeNrsl+1twjAQhsHq/7BBYQLYIBmBDcoGMAIjtBPQTcII2SDtBDBBwrU6pGsUO7YbO470PtKJkz9iH++d4ywWAAAAAABgljRNsyWr2bZzDuJG1rLdZhcMbTjrBCGDyUKsqQLFciJb9bSvuG/WagRVRUVUI6gqy5HVeKWfSgRyJruKIU//TrZTSn2nmlaXThrloi/v9F2STC1W4+Aw5cBzkquRc09bofFNc6YLxEON0VUZS5FPTftO49vMjRsIF3RhOGr7/D/pJw+FKU+q0vDyq8W42jCunDqI3LC5XxNj2wHLU1XjaRnb0Lhykhqhhd8MtSF5J9tbjCv4mXGvKJz/65FF/qJryyaaIvzP2QRxZTX2nTuXjvV/VPFSwyLnW7mpH99yTh1FEVro6JBSd40/pMrRdV8vPtcKl28T2pT8TnFZ4yNosct3Q0io6JfBiz1FlGdqVQH3VHnepAEAAAAAADDzEGAAcTwB10jWgxcAAAAASUVORK5CYII="/><element name="bufferIcon" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAuhJREFUeNrsWr9rU1EUznuNGqvFQh1ULOhiBx0KDtIuioO4pJuik3FxFfUPaAV1FTdx0Q5d2g4FFxehTnEpZHFoBy20tCIWtGq0TZP4HfkeHB5N8m6Sl/sa74XDybvv3vvOd8/Pe4lXrVZT3dD8VJc0B8QBcUAcEAfESktHGeR5XtMfqFQq/f92zPe/NbtGlKTdCY30kuxrpMGO94BlQCXs+rbh3ONgA6BlzP1p20d80gEI5hmA2A92Qua1Q2PtAFISM+bvjMG8U+Q7oA3rQGASwrYCU6WpNdLGYbA+Pq5jjXIiwi8EEa2UDbQSaKOIuV+SlkcCrfjY8XTI9EpKGwP0C2kru2hLtHqa4zoXtZRWyvi4CLwv9Opr6Hkn6A9HKgEANsQ1iqC3Ub/vRUk2JgmRkatK36kVrnt0qObunwUdUUMXMWYpakJsO5Am8tAw2GBIgwWA+G2S2dMpiw0gDioQRQJoKhRb1QiDwlHZUABYbaXWsm5ae6loTE4ZDxN4CZar8foVzOJ2iyZ2kWF3t7YIevffaMT5yJ70kQb2fQ1sE5SHr2wazs2wgMxgbsEKEAgxAvZUJbQLBGTSBMgNrncJbA6AljtS/eKDJ0Ez+DmrQEzXS2h1Ck25kAg0IZcUOaydCy4sYnN2fOA+2AP16gNoHALlQ+fwH7XO4CxLenUpgj4xr6ugY2roPMbMx+Xs18m/E8CVEIhxsNeg83XWOAN6grG3lGbk8uE5fr4B/WH3cJw+co/l9nTYsSGYCJ/lY5/qv0thn6nrIWmjeJcPSnWOeY++AkF8tpJHIMAUs/MaBBpj3znZfQo5psY+ZrG4gv5HickjEOymKjEeRpgyST6IuZcTcWbnjcgdPi5ghxciRKsl1lDSsgwA1i8fssonJgzmTSqfGUkCENndNdAL7PS6QQ7ZYISTo+1qq0LEWjTWcvY4isa4z+yfQB+7ooyHVg5RI7/i1Ijn/vnggDggDogD4oC00P4KMACd/juEHOrS4AAAAABJRU5ErkJggg=="/></elements></component><component name="dock"><elements><element name="button" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFBJREFUeNrs0cEJACAQA8Eofu0fu/W6EM5ZSAFDRpKTBs00CQQEBAQEBAQEBAQEBAQEBATkK8iqbY+AgICAgICAgICAgICAgICAgIC86QowAG5PAQzEJ0lKAAAAAElFTkSuQmCC"/></elements></component><component name="playlist"><elements><element name="item" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAIAAAC1nk4lAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHhJREFUeNrs2NEJwCAMBcBYuv/CFuIE9VN47WWCR7iocXR3pdWdGPqqwIoMjYfQeAiNh9B4JHc6MHQVHnjggQceeOCBBx77TifyeOY0iHi8DqIdEY8dD5cL094eePzINB5CO/LwcOTptNB4CP25L4TIbZzpU7UEGAA5wz1uF5rF9AAAAABJRU5ErkJggg=="/><element name="sliderRail" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAA8CAIAAADpFA0BAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADhJREFUeNrsy6ENACAMAMHClp2wYxZLAg5Fcu9e3OjuOKqqfTMzbs14CIZhGIZhGIZhGP4VLwEGAK/BBnVFpB0oAAAAAElFTkSuQmCC"/><element name="sliderThumb" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAA8CAIAAADpFA0BAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADRJREFUeNrsy7ENACAMBLE8++8caFFKKiRffU53112SGs3ttOohGIZhGIZhGIZh+Fe8BRgAiaUGde6NOSEAAAAASUVORK5CYII="/></elements></component></components></skin>',this.xml=null,window.DOMParser?(parser=new DOMParser,this.xml=parser.parseFromString(this.text,"text/xml")):(this.xml=new ActiveXObject("Microsoft.XMLDOM"),this.xml.async="false",this.xml.loadXML(this.text)),this}}(jwplayer),function(a){_utils=a.utils,_css=_utils.css,_hide=function(a){_css(a,{display:"none"})},_show=function(a){_css(a,{display:"block"})},a.html5.display=function(b,c){function y(){g.display=B("div","display"),g.display_text=B("div","display_text"),g.display.appendChild(g.display_text),g.display_image=B("img","display_image"),g.display_image.onerror=function(a){_hide(g.display_image)},g.display_image.onload=z,g.display_icon=B("div","display_icon"),g.display_iconBackground=B("div","display_iconBackground"),g.display.appendChild(g.display_image),g.display_iconBackground.appendChild(g.display_icon),g.display.appendChild(g.display_iconBackground),C(),setTimeout(function(){v=!0,e.icons.toString()=="true"&&O()},1)}function z(a){j=g.display_image.naturalWidth,k=g.display_image.naturalHeight,A()}function A(){_utils.stretch(f.jwGetStretching(),g.display_image,h,i,j,k)}function B(a,b){var c=document.createElement(a);return c.id=f.id+"_jwplayer_"+b,_css(c,x[b].style),c}function C(){for(var a in g)_utils.exists(x[a].click)&&(g[a].onclick=x[a].click)}function D(b){typeof b.preventDefault!="undefined"?b.preventDefault():b.returnValue=!1,f.jwGetState()!=a.api.events.state.PLAYING?f.jwPlay():f.jwPause()}function E(a){if(n){F();return}g.display_icon.style.backgroundImage=["url(",f.skin.getSkinElement("display",a).src,")"].join(""),_css(g.display_icon,{width:f.skin.getSkinElement("display",a).width,height:f.skin.getSkinElement("display",a).height,top:(f.skin.getSkinElement("display","background").height-f.skin.getSkinElement("display",a).height)/2,left:(f.skin.getSkinElement("display","background").width-f.skin.getSkinElement("display",a).width)/2}),G(),_utils.exists(f.skin.getSkinElement("display",a+"Over"))?(g.display_icon.onmouseover=function(b){g.display_icon.style.backgroundImage=["url(",f.skin.getSkinElement("display",a+"Over").src,")"].join("")},
g.display_icon.onmouseout=function(b){g.display_icon.style.backgroundImage=["url(",f.skin.getSkinElement("display",a).src,")"].join("")}):(g.display_icon.onmouseover=null,g.display_icon.onmouseout=null)}function F(){e.icons.toString()=="true"&&(_hide(g.display_icon),_hide(g.display_iconBackground),P())}function G(){!u&&e.icons.toString()=="true"&&(_show(g.display_icon),_show(g.display_iconBackground),O())}function H(a){n=!0,F(),g.display_text.innerHTML=a.error,_show(g.display_text),g.display_text.style.top=(i-g.display_text.getBoundingClientRect().height)/2+"px"}function I(){g.display_image.style.display="none"}function J(b){(b.type==a.api.events.JWPLAYER_PLAYER_STATE||b.type==a.api.events.JWPLAYER_PLAYLIST_ITEM)&&n&&(n=!1,_hide(g.display_text));var c=f.jwGetState();if(c==r)return;r=c,q>=0&&clearTimeout(q),s||f.jwGetState()==a.api.events.state.PLAYING||f.jwGetState()==a.api.events.state.PAUSED?L(f.jwGetState()):q=setTimeout(K(f.jwGetState()),500)}function K(a){return function(){L(a)}}function L(b){_utils.exists(m)&&(clearInterval(m),m=null,_utils.animations.rotate(g.display_icon,0));switch(b){case a.api.events.state.BUFFERING:_utils.isIOS()?(I(),F()):(f.jwGetPlaylist()[f.jwGetItem()].provider=="sound"&&M(),l=0,m=setInterval(function(){l+=o,_utils.animations.rotate(g.display_icon,l%360)},p),E("bufferIcon"),s=!0);break;case a.api.events.state.PAUSED:_utils.isIOS()||(f.jwGetPlaylist()[f.jwGetItem()].provider!="sound"&&_css(g.display_image,{background:"transparent no-repeat center center"}),E("playIcon"),s=!0);break;case a.api.events.state.IDLE:f.jwGetPlaylist()[f.jwGetItem()]&&f.jwGetPlaylist()[f.jwGetItem()].image?M():I(),E("playIcon"),s=!0;break;default:f.jwGetPlaylist()[f.jwGetItem()]&&f.jwGetPlaylist()[f.jwGetItem()].provider=="sound"?_utils.isIOS()?(I(),s=!1):M():(I(),s=!1),f.jwGetMute()&&e.showmute?E("muteIcon"):F()}q=-1}function M(){f.jwGetPlaylist()[f.jwGetItem()]&&f.jwGetPlaylist()[f.jwGetItem()].image&&(_css(g.display_image,{display:"block"}),g.display_image.src=_utils.getAbsolutePath(f.jwGetPlaylist()[f.jwGetItem()].image))}function N(a){return function(){if(!v)return;!u&&t!=a&&(t=a,w.sendEvent(a,{component:"display",boundingRect:_utils.getDimensions(g.display_iconBackground)}))}}var d={icons:!0,showmute:!1},e=_utils.extend({},d,c),f=b,g={},h,i,j,k,l,m,n,o=_utils.exists(f.skin.getComponentSettings("display").bufferrotation)?parseInt(f.skin.getComponentSettings("display").bufferrotation,10):15,p=_utils.exists(f.skin.getComponentSettings("display").bufferinterval)?parseInt(f.skin.getComponentSettings("display").bufferinterval,10):100,q=-1,r="",s=!0,t,u=!1,v=!1,w=new a.html5.eventdispatcher;_utils.extend(this,w);var x={display:{style:{cursor:"pointer",top:0,left:0,overflow:"hidden"},click:D},display_icon:{style:{cursor:"pointer",position:"absolute",top:(f.skin.getSkinElement("display","background").height-f.skin.getSkinElement("display","playIcon").height)/2,left:(f.skin.getSkinElement("display","background").width-f.skin.getSkinElement("display","playIcon").width)/2,border:0,margin:0,padding:0,zIndex:3,display:"none"}},display_iconBackground:{style:{cursor:"pointer",position:"absolute",top:(i-f.skin.getSkinElement("display","background").height)/2,left:(h-f.skin.getSkinElement("display","background").width)/2,border:0,backgroundImage:["url(",f.skin.getSkinElement("display","background").src,")"].join(""),width:f.skin.getSkinElement("display","background").width,height:f.skin.getSkinElement("display","background").height,margin:0,padding:0,zIndex:2,display:"none"}},display_image:{style:{display:"none",width:h,height:i,position:"absolute",cursor:"pointer",left:0,top:0,margin:0,padding:0,textDecoration:"none",zIndex:1}},display_text:{style:{zIndex:4,position:"relative",opacity:.8,backgroundColor:parseInt("000000",16),color:parseInt("ffffff",16),textAlign:"center",fontFamily:"Arial,sans-serif",padding:"0 5px",fontSize:14}}};f.jwAddEventListener(a.api.events.JWPLAYER_PLAYER_STATE,J),f.jwAddEventListener(a.api.events.JWPLAYER_MEDIA_MUTE,J),f.jwAddEventListener(a.api.events.JWPLAYER_PLAYLIST_ITEM,J),f.jwAddEventListener(a.api.events.JWPLAYER_ERROR,H),y(),this.getDisplayElement=function(){return g.display},this.resize=function(a,b){_css(g.display,{width:a,height:b}),_css(g.display_text,{width:a-10,top:(b-g.display_text.getBoundingClientRect().height)/2}),_css(g.display_iconBackground,{top:(b-f.skin.getSkinElement("display","background").height)/2,left:(a-f.skin.getSkinElement("display","background").width)/2});if(h!=a||i!=b)h=a,i=b,t=undefined,O();A(),J({})},this.show=function(){u&&(u=!1,L(f.jwGetState()))},this.hide=function(){u||(F(),u=!0)};var O=N(a.api.events.JWPLAYER_COMPONENT_SHOW),P=N(a.api.events.JWPLAYER_COMPONENT_HIDE);return this}}(jwplayer),function(a){_css=a.utils.css,a.html5.dock=function(b,c){function d(){return{align:a.html5.view.positions.RIGHT}}function p(c,d){if(g.length>0){var j=10,n=j,o=-1,p=b.skin.getSkinElement("dock","button").height,q=b.skin.getSkinElement("dock","button").width,r=c-q-j,t,u;e.align==a.html5.view.positions.LEFT&&(o=1,r=j);for(var v=0;v<g.length;v++){var w=Math.floor(n/d);n+p+j>(w+1)*d&&(n=(w+1)*d+j,w=Math.floor(n/d));var x=f[g[v]].div;x.style.top=n%d+"px",x.style.left=r+(b.skin.getSkinElement("dock","button").width+j)*w*o+"px";var y={x:a.utils.parseDimension(x.style.left),y:a.utils.parseDimension(x.style.top),width:q,height:p};if(!t||y.x<=t.x&&y.y<=t.y)t=y;if(!u||y.x>=u.x&&y.y>=u.y)u=y;n+=b.skin.getSkinElement("dock","button").height+j}l={x:t.x,y:t.y,width:u.x-t.x+u.width,height:t.y-u.y+u.height}}if(k!=b.jwGetFullscreen()||h!=c||i!=d)h=c,i=d,k=b.jwGetFullscreen(),m=undefined,setTimeout(s,1)}function q(a){return function(){!j&&m!=a&&g.length>0&&(m=a,n.sendEvent(a,{component:"dock",boundingRect:l}))}}function r(b){if(a.utils.isIOS())switch(b.newstate){case a.api.events.state.IDLE:u();break;default:v()}}var e=a.utils.extend({},d(),c);if(e.align=="FALSE")return;var f={},g=[],h,i,j=!1,k=!1,l={x:0,y:0,width:0,height:0},m,n=new a.html5.eventdispatcher;_utils.extend(this,n);var o=document.createElement("div");o.id=b.id+"_jwplayer_dock",b.jwAddEventListener(a.api.events.JWPLAYER_PLAYER_STATE,r),this.getDisplayElement=function(){return o},this.setButton=function(c,d,e,j){!d&&f[c]?(a.utils.arrays.remove(g,c),o.removeChild(f[c].div),delete f[c]):d&&(f[c]||(f[c]={}),f[c].handler=d,f[c].outGraphic=e,f[c].overGraphic=j,f[c].div||(g.push(c),f[c].div=document.createElement("div"),f[c].div.style.position="relative",o.appendChild(f[c].div),f[c].div.appendChild(document.createElement("img")),f[c].div.childNodes[0].style.position="absolute",f[c].div.childNodes[0].style.left=0,f[c].div.childNodes[0].style.top=0,f[c].div.childNodes[0].style.zIndex=10,f[c].div.childNodes[0].style.cursor="pointer",f[c].div.appendChild(document.createElement("img")),f[c].div.childNodes[1].style.position="absolute",f[c].div.childNodes[1].style.left=0,f[c].div.childNodes[1].style.top=0,b.skin.getSkinElement("dock","button")&&(f[c].div.childNodes[1].src=b.skin.getSkinElement("dock","button").src),f[c].div.childNodes[1].style.zIndex=9,f[c].div.childNodes[1].style.cursor="pointer",f[c].div.onmouseover=function(){f[c].overGraphic&&(f[c].div.childNodes[0].src=f[c].overGraphic),b.skin.getSkinElement("dock","buttonOver")&&(f[c].div.childNodes[1].src=b.skin.getSkinElement("dock","buttonOver").src)},f[c].div.onmouseout=function(){f[c].outGraphic&&(f[c].div.childNodes[0].src=f[c].outGraphic),b.skin.getSkinElement("dock","button")&&(f[c].div.childNodes[1].src=b.skin.getSkinElement("dock","button").src)},f[c].overGraphic&&(f[c].div.childNodes[0].src=f[c].overGraphic),f[c].outGraphic&&(f[c].div.childNodes[0].src=f[c].outGraphic),b.skin.getSkinElement("dock","button")&&(f[c].div.childNodes[1].src=b.skin.getSkinElement("dock","button").src)),d&&(f[c].div.onclick=function(d){d.preventDefault(),a(b.id).callback(c),f[c].overGraphic&&(f[c].div.childNodes[0].src=f[c].overGraphic),b.skin.getSkinElement("dock","button")&&(f[c].div.childNodes[1].src=b.skin.getSkinElement("dock","button").src)})),p(h,i)};var s=q(a.api.events.JWPLAYER_COMPONENT_SHOW),t=q(a.api.events.JWPLAYER_COMPONENT_HIDE);this.resize=p;var u=function(){_css(o,{display:"block"}),j&&(j=!1,s())},v=function(){_css(o,{display:"none"}),j||(t(),j=!0)};return this.hide=v,this.show=u,this}}(jwplayer),function(a){a.html5.eventdispatcher=function(b,c){var d=new a.events.eventdispatcher(c);a.utils.extend(this,d),this.sendEvent=function(c,e){a.utils.exists(e)||(e={}),a.utils.extend(e,{id:b,version:a.version,type:c}),d.sendEvent(c,e)}}}(jwplayer),function(a){var b={prefix:"",file:"",link:"",margin:8,out:.5,over:1,timeout:5,hide:!0,position:"bottom-left"};_css=a.utils.css,a.html5.logo=function(c,d){function j(){k(),l(),m()}function k(){if(b.prefix){var e=c.version.split(/\W/).splice(0,2).join("/");b.prefix.indexOf(e)<0&&(b.prefix+=e+"/")}d.position==a.html5.view.positions.OVER&&(d.position=b.position),g=a.utils.extend({},b,d)}function l(){h=document.createElement("img"),h.id=e.id+"_jwplayer_logo",h.style.display="none",h.onload=function(b){_css(h,q()),e.jwAddEventListener(a.api.events.JWPLAYER_PLAYER_STATE,t),o()};if(!g.file)return;g.file.indexOf("http://")===0?h.src=g.file:h.src=g.prefix+g.file}function m(){g.link?(h.onmouseover=p,h.onmouseout=o,h.onclick=n):this.mouseEnabled=!1}function n(a){typeof a!="undefined"&&a.stopPropagation();if(!i)return;e.jwPause(),e.jwSetFullscreen(!1),g.link&&window.open(g.link,"_top");return}function o(a){g.link&&i&&(h.style.opacity=g.out);return}function p(a){g.hide.toString()=="true"&&i&&(h.style.opacity=g.over);return}function q(){var a={textDecoration:"none",position:"absolute",cursor:"pointer"};a.display=g.hide.toString()=="true"?"none":"block";var b=g.position.toLowerCase().split("-");for(var c in b)a[b[c]]=g.margin;return a}function r(){g.hide.toString()=="true"&&(h.style.display="block",h.style.opacity=0,a.utils.fadeTo(h,g.out,.1,parseFloat(h.style.opacity)),f=setTimeout(function(){s()},g.timeout*1e3)),i=!0}function s(){i=!1,g.hide.toString()=="true"&&a.utils.fadeTo(h,0,.1,parseFloat(h.style.opacity))}function t(b){b.newstate==a.api.events.state.BUFFERING&&(clearTimeout(f),r())}var e=c,f,g,h,i=!1;j();if(!g.file)return;return this.resize=function(a,b){},this.getDisplayElement=function(){return h},this}}(jwplayer),function(a){var b={ended:a.api.events.state.IDLE,playing:a.api.events.state.PLAYING,pause:a.api.events.state.PAUSED,buffering:a.api.events.state.BUFFERING},c=a.utils,d=c.css,e=c.isIOS();a.html5.mediavideo=function(f,g){function u(){l=document.createElement("video"),m=a.api.events.state.IDLE;for(var b in h)l.addEventListener(b,function(a){c.exists(a.target.parentNode)&&h[a.type](a)},!0);l.setAttribute("x-webkit-airplay","allow"),k.parentNode&&k.parentNode.replaceChild(l,k),l.id||(l.id=k.id)}function v(b){if(b==a.api.events.state.PAUSED&&m==a.api.events.state.IDLE)return;if(m!=b){var c=m;j.state=m=b,i.sendEvent(a.api.events.JWPLAYER_PLAYER_STATE,{oldstate:c,newstate:b})}}function w(a){}function x(b){var d;if(c.exists(b)&&b.lengthComputable&&b.total)d=b.loaded/b.total*100;else if(c.exists(l.buffered)&&l.buffered.length>0){var e=l.buffered.length-1;e>=0&&(d=l.buffered.end(e)/l.duration*100)}s===!1&&m==a.api.events.state.BUFFERING&&(i.sendEvent(a.api.events.JWPLAYER_MEDIA_BUFFER_FULL),s=!0),r||(d==100&&(r=!0),c.exists(d)&&d>j.buffer&&(j.buffer=Math.round(d),i.sendEvent(a.api.events.JWPLAYER_MEDIA_BUFFER,{bufferPercent:Math.round(d)})))}function y(b){if(c.exists(b)&&c.exists(b.target)){!isNaN(b.target.duration)&&(isNaN(j.duration)||j.duration<1)&&(b.target.duration==Infinity?j.duration=0:j.duration=Math.round(b.target.duration*10)/10),!n&&l.readyState>0&&(l.style.display="block",v(a.api.events.state.PLAYING));if(m==a.api.events.state.PLAYING){if(!n&&l.readyState>0){n=!0;try{l.currentTime<o.start&&(l.currentTime=o.start)}catch(d){}l.volume=j.volume/100,l.muted=j.mute}j.position=j.duration>0?Math.round(b.target.currentTime*10)/10:0,i.sendEvent(a.api.events.JWPLAYER_MEDIA_TIME,{position:j.position,duration:j.duration}),j.position>=j.duration&&(j.position>0||j.duration>0)&&G()}}x(b)}function z(a){}function A(a){b[a.type]&&(a.type=="ended"?G():v(b[a.type]))}function B(b){var c={height:b.target.videoHeight,width:b.target.videoWidth,duration:Math.round(b.target.duration*10)/10};(j.duration===0||isNaN(j.duration))&&b.target.duration!=Infinity&&(j.duration=Math.round(b.target.duration*10)/10),i.sendEvent(a.api.events.JWPLAYER_MEDIA_META,{metadata:c})}function C(b){if(m==a.api.events.state.IDLE)return;var d="There was an error: ";if(b.target.error&&b.target.tagName.toLowerCase()=="video"||b.target.parentNode.error&&b.target.parentNode.tagName.toLowerCase()=="video"){var e=c.exists(b.target.error)?b.target.error:b.target.parentNode.error;switch(e.code){case e.MEDIA_ERR_ABORTED:d="You aborted the video playback: ";break;case e.MEDIA_ERR_NETWORK:d="A network error caused the video download to fail part-way: ";break;case e.MEDIA_ERR_DECODE:d="The video playback was aborted due to a corruption problem or because the video used features your browser did not support: ";break;case e.MEDIA_ERR_SRC_NOT_SUPPORTED:d="The video could not be loaded, either because the server or network failed or because the format is not supported: ";break;default:d="An unknown error occurred: "}}else{if(b.target.tagName.toLowerCase()!="source"){c.log("An unknown error occurred.  Continuing...");return}t--;if(t>0)return;d="The video could not be loaded, either because the server or network failed or because the format is not supported: "}_stop(!1),d+=D(),_error=!0,i.sendEvent(a.api.events.JWPLAYER_ERROR,{error:d});return}function D(){var b="";for(var c in o.levels){var d=o.levels[c],e=k.ownerDocument.createElement("source");b+=a.utils.getAbsolutePath(d.file),c<o.levels.length-1&&(b+=", ")}return b}function E(){c.exists(p)||(p=setInterval(function(){x()},100))}function F(){clearInterval(p),p=null}function G(){m!=a.api.events.state.IDLE&&(_stop(!1),i.sendEvent(a.api.events.JWPLAYER_MEDIA_COMPLETE))}var h={abort:w,canplay:A,canplaythrough:A,durationchange:B,emptied:w,ended:A,error:C,loadeddata:B,loadedmetadata:B,loadstart:A,pause:A,play:w,playing:A,progress:x,ratechange:w,seeked:A,seeking:A,stalled:A,suspend:A,timeupdate:y,volumechange:w,waiting:A,canshowcurrentframe:w,dataunavailable:w,empty:w,load:z,loadedfirstframe:w},i=new a.html5.eventdispatcher;c.extend(this,i);var j=f,k=g,l,m,n,o,p,q=!1,r,s,t;u(),this.load=function(b,d){typeof d=="undefined"&&(d=!0),o=b,c.empty(l),t=0;if(b.levels&&b.levels.length>0)if(b.levels.length==1)l.src=b.levels[0].file;else{l.src&&l.removeAttribute("src");for(var f=0;f<b.levels.length;f++){var g=l.ownerDocument.createElement("source");g.src=b.levels[f].file,l.appendChild(g),t++}}else l.src=b.file;e&&(b.image&&(l.poster=b.image),l.controls="controls",l.style.display="block"),r=s=n=!1,j.buffer=0,c.exists(b.start)||(b.start=0),j.duration=b.duration,i.sendEvent(a.api.events.JWPLAYER_MEDIA_LOADED),(!e&&b.levels.length==1||!q)&&l.load(),q=!1,d&&(v(a.api.events.state.BUFFERING),i.sendEvent(a.api.events.JWPLAYER_MEDIA_BUFFER,{bufferPercent:0}),this.play())},this.play=function(){m!=a.api.events.state.PLAYING&&(E(),s?v(a.api.events.state.PLAYING):v(a.api.events.state.BUFFERING),l.play())},this.pause=function(){l.pause(),v(a.api.events.state.PAUSED)},this.seek=function(a){!(j.duration<=0||isNaN(j.duration))&&!(j.position<=0||isNaN(j.position))&&(l.currentTime=a,l.play())},_stop=this.stop=function(b){c.exists(b)||(b=!0),F();if(b){l.style.display="none",s=!1;var d=navigator.userAgent;d.match(/chrome/i)?l.src=undefined:d.match(/safari/i)?l.removeAttribute("src"):l.src="",l.removeAttribute("controls"),l.removeAttribute("poster"),c.empty(l),l.load(),q=!0;if(l.webkitSupportsFullscreen)try{l.webkitExitFullscreen()}catch(e){}}v(a.api.events.state.IDLE)},this.fullscreen=function(a){a===!0?this.resize("100%","100%"):this.resize(j.config.width,j.config.height)},this.resize=function(b,c){i.sendEvent(a.api.events.JWPLAYER_MEDIA_RESIZE,{fullscreen:j.fullscreen,width:b,hieght:c})},this.volume=function(b){e||(l.volume=b/100,j.volume=b,i.sendEvent(a.api.events.JWPLAYER_MEDIA_VOLUME,{volume:Math.round(b)}))},this.mute=function(b){e||(l.muted=b,j.mute=b,i.sendEvent(a.api.events.JWPLAYER_MEDIA_MUTE,{mute:b}))},this.getDisplayElement=function(){return l},this.hasChrome=function(){return!1}}}(jwplayer),function(a){var b={ended:a.api.events.state.IDLE,playing:a.api.events.state.PLAYING,pause:a.api.events.state.PAUSED,buffering:a.api.events.state.BUFFERING},c=a.utils.css;a.html5.mediayoutube=function(b,d){function k(b){if(h!=b){var c=h;f.state=b,h=b,e.sendEvent(a.api.events.JWPLAYER_PLAYER_STATE,{oldstate:c,newstate:b})}}function l(a){var b=a.levels[0].file;b=["http://www.youtube.com/v/",m(b),"&amp;hl=en_US&amp;fs=1&autoplay=1"].join(""),i=document.createElement("object"),i.id=g.id,i.style.position="absolute";var c={movie:b,allowfullscreen:"true",allowscriptaccess:"always"};for(var d in c){var e=document.createElement("param");e.name=d,e.value=c[d],i.appendChild(e)}j=document.createElement("embed"),i.appendChild(j);var f={src:b,type:"application/x-shockwave-flash",allowfullscreen:"true",allowscriptaccess:"always",width:i.width,height:i.height};for(var h in f)j.setAttribute(h,f[h]);i.appendChild(j),i.style.zIndex=2147483e3,g!=i&&g.parentNode&&g.parentNode.replaceChild(i,g),g=i}function m(a){var b=a.split(/\?|\#\!/),c="";for(var d=0;d<b.length;d++)b[d].substr(0,2)=="v="&&(c=b[d].substr(2));return c==""&&(a.indexOf("/v/")>=0?c=a.substr(a.indexOf("/v/")+3):a.indexOf("youtu.be")>=0?c=a.substr(a.indexOf("youtu.be/")+9):c=a),c.indexOf("?")>-1&&(c=c.substr(0,c.indexOf("?"))),c.indexOf("&")>-1&&(c=c.substr(0,c.indexOf("&"))),c}var e=new a.html5.eventdispatcher;a.utils.extend(this,e);var f=b,g=document.getElementById(d.id),h=a.api.events.state.IDLE,i,j;return this.getDisplayElement=function(){return g},this.play=function(){h==a.api.events.state.IDLE?(e.sendEvent(a.api.events.JWPLAYER_MEDIA_BUFFER,{bufferPercent:100}),e.sendEvent(a.api.events.JWPLAYER_MEDIA_BUFFER_FULL),k(a.api.events.state.PLAYING)):h==a.api.events.state.PAUSED&&k(a.api.events.state.PLAYING)},this.pause=function(){k(a.api.events.state.PAUSED)},this.seek=function(a){},this.stop=function(b){_utils.exists(b)||(b=!0),f.position=0,k(a.api.events.state.IDLE),b&&c(g,{display:"none"})},this.volume=function(b){f.volume=b,e.sendEvent(a.api.events.JWPLAYER_MEDIA_VOLUME,{volume:Math.round(b)})},this.mute=function(b){g.muted=b,f.mute=b,e.sendEvent(a.api.events.JWPLAYER_MEDIA_MUTE,{mute:b})},this.resize=function(b,c){b*c>0&&i&&(i.width=j.width=b,i.height=j.height=c),e.sendEvent(a.api.events.JWPLAYER_MEDIA_RESIZE,{fullscreen:f.fullscreen,width:b,height:c})},this.fullscreen=function(a){a===!0?this.resize("100%","100%"):this.resize(f.config.width,f.config.height)},this.load=function(b){l(b),c(i,{display:"block"}),k(a.api.events.state.BUFFERING),e.sendEvent(a.api.events.JWPLAYER_MEDIA_BUFFER,{bufferPercent:0}),e.sendEvent(a.api.events.JWPLAYER_MEDIA_LOADED),this.play()},this.hasChrome=function(){return h!=a.api.events.state.IDLE},this.embed=j,this}}(jwplayer),function(jwplayer){var _configurableStateVariables=["width","height","start","duration","volume","mute","fullscreen","item","plugins","stretching"];jwplayer.html5.model=function(api,container,options){function _loadExternal(a){var b=new jwplayer.html5.playlistloader;b.addEventListener(jwplayer.api.events.JWPLAYER_PLAYLIST_LOADED,function(a){_model.playlist=new jwplayer.html5.playlist(a),_loadComplete(!0)}),b.addEventListener(jwplayer.api.events.JWPLAYER_ERROR,function(a){_model.playlist=new jwplayer.html5.playlist({playlist:[]}),_loadComplete(!1)}),b.load(a)}function _loadComplete(){_model.config.shuffle?_model.item=_getShuffleItem():(_model.config.item>=_model.playlist.length?_model.config.item=_model.playlist.length-1:_model.config.item<0&&(_model.config.item=0),_model.item=_model.config.item),_eventDispatcher.sendEvent(jwplayer.api.events.JWPLAYER_PLAYLIST_LOADED,{playlist:_model.playlist}),_eventDispatcher.sendEvent(jwplayer.api.events.JWPLAYER_PLAYLIST_ITEM,{index:_model.item})}function _getShuffleItem(){var a=null;if(_model.playlist.length>1)while(!jwplayer.utils.exists(a))a=Math.floor(Math.random()*_model.playlist.length),a==_model.item&&(a=null);else a=0;return a}function forward(a){a.type==jwplayer.api.events.JWPLAYER_MEDIA_LOADED&&(_container=_media.getDisplayElement()),_eventDispatcher.sendEvent(a.type,a)}var _api=api,_container=container,_model={id:_container.id,playlist:[],state:jwplayer.api.events.state.IDLE,position:0,buffer:0,config:{width:480,height:320,item:-1,skin:undefined,file:undefined,image:undefined,start:0,duration:0,bufferlength:5,volume:90,mute:!1,fullscreen:!1,repeat:"",stretching:jwplayer.utils.stretching.UNIFORM,autostart:!1,debug:undefined,screencolor:undefined}},_media,_eventDispatcher=new jwplayer.html5.eventdispatcher,_components=["display","logo","controlbar","playlist","dock"];jwplayer.utils.extend(_model,_eventDispatcher);for(var option in options){if(typeof options[option]=="string"){var type=/color$/.test(option)?"color":null;options[option]=jwplayer.utils.typechecker(options[option],type)}var config=_model.config,path=option.split(".");for(var edge in path)edge==path.length-1?config[path[edge]]=options[option]:(jwplayer.utils.exists(config[path[edge]])||(config[path[edge]]={}),config=config[path[edge]])}for(var index in _configurableStateVariables){var configurableStateVariable=_configurableStateVariables[index];_model[configurableStateVariable]=_model.config[configurableStateVariable]}var pluginorder=_components.concat([]);if(jwplayer.utils.exists(_model.plugins)&&typeof _model.plugins=="string"){var userplugins=_model.plugins.split(",");for(var userplugin in userplugins)typeof userplugins[userplugin]=="string"&&pluginorder.push(userplugins[userplugin].replace(/^\s+|\s+$/g,""))}jwplayer.utils.isIOS()?(pluginorder=["display","logo","dock","playlist"],jwplayer.utils.exists(_model.config.repeat)||(_model.config.repeat="list")):_model.config.chromeless&&(pluginorder=["logo","dock","playlist"],jwplayer.utils.exists(_model.config.repeat)||(_model.config.repeat="list")),_model.plugins={order:pluginorder,config:{},object:{}};if(typeof _model.config.components!="undefined")for(var component in _model.config.components)_model.plugins.config[component]=_model.config.components[component];for(var pluginIndex in _model.plugins.order){var pluginName=_model.plugins.order[pluginIndex],pluginConfig=jwplayer.utils.exists(_model.plugins.config[pluginName])?_model.plugins.config[pluginName]:{};_model.plugins.config[pluginName]=jwplayer.utils.exists(_model.plugins.config[pluginName])?jwplayer.utils.extend(_model.plugins.config[pluginName],pluginConfig):pluginConfig,jwplayer.utils.exists(_model.plugins.config[pluginName].position)?_model.plugins.config[pluginName].position=_model.plugins.config[pluginName].position.toString().toUpperCase():pluginName=="playlist"?_model.plugins.config[pluginName].position=jwplayer.html5.view.positions.NONE:_model.plugins.config[pluginName].position=jwplayer.html5.view.positions.OVER}if(typeof _model.plugins.config.dock!="undefined"){if(typeof _model.plugins.config.dock!="object"){var position=_model.plugins.config.dock.toString().toUpperCase();_model.plugins.config.dock={position:position}}typeof _model.plugins.config.dock.position!="undefined"&&(_model.plugins.config.dock.align=_model.plugins.config.dock.position,_model.plugins.config.dock.position=jwplayer.html5.view.positions.OVER)}_model.loadPlaylist=function(arg){var input;if(typeof arg=="string")if(arg.indexOf("[")==0||arg.indexOf("{")=="0")try{input=eval(arg)}catch(err){input=arg}else input=arg;else input=arg;var config;switch(jwplayer.utils.typeOf(input)){case"object":config=input;break;case"array":config={playlist:input};break;default:_loadExternal(input);return}_model.playlist=new jwplayer.html5.playlist(config),jwplayer.utils.extension(_model.playlist[0].file)=="xml"?_loadExternal(_model.playlist[0].file):_loadComplete()};var _mediaProviders={};return _model.setActiveMediaProvider=function(a){a.provider=="audio"&&(a.provider="sound");var b=a.provider,c=_media?_media.getDisplayElement():null;if(b=="sound"||b=="http"||b=="")b="video";if(!jwplayer.utils.exists(_mediaProviders[b])){switch(b){case"video":_media=new jwplayer.html5.mediavideo(_model,c?c:_container);break;case"youtube":_media=new jwplayer.html5.mediayoutube(_model,c?c:_container)}if(!jwplayer.utils.exists(_media))return!1;_media.addGlobalListener(forward),_mediaProviders[b]=_media}else _media!=_mediaProviders[b]&&(_media&&_media.stop(),_media=_mediaProviders[b]);return!0},_model.getMedia=function(){return _media},_model.seek=function(a){return _eventDispatcher.sendEvent(jwplayer.api.events.JWPLAYER_MEDIA_SEEK,{position:_model.position,offset:a}),_media.seek(a)},_model.setupPlugins=function(){if(!jwplayer.utils.exists(_model.plugins)||!jwplayer.utils.exists(_model.plugins.order)||_model.plugins.order.length==0)return jwplayer.utils.log("No plugins to set up"),_model;for(var a=0;a<_model.plugins.order.length;a++)try{var b=_model.plugins.order[a];jwplayer.utils.exists(jwplayer.html5[b])?b=="playlist"?_model.plugins.object[b]=new jwplayer.html5.playlistcomponent(_api,_model.plugins.config[b]):_model.plugins.object[b]=new jwplayer.html5[b](_api,_model.plugins.config[b]):_model.plugins.order.splice(plugin,plugin+1),typeof _model.plugins.object[b].addGlobalListener=="function"&&_model.plugins.object[b].addGlobalListener(forward)}catch(c){jwplayer.utils.log("Could not setup "+b)}},_model}}(jwplayer),function(a){a.html5.playlist=function(b){var c=[];if(b.playlist&&b.playlist instanceof Array&&b.playlist.length>0)for(var d in b.playlist)isNaN(parseInt(d))||c.push(new a.html5.playlistitem(b.playlist[d]));else c.push(new a.html5.playlistitem(b));return c}}(jwplayer),function(a){var b={size:180,position:a.html5.view.positions.NONE,itemheight:60,thumbs:!0,fontcolor:"#000000",overcolor:"",activecolor:"",backgroundcolor:"#f8f8f8",font:"_sans",fontsize:"",fontstyle:"",fontweight:""},c={_sans:"Arial, Helvetica, sans-serif",_serif:"Times, Times New Roman, serif",_typewriter:"Courier New, Courier, monospace"};_utils=a.utils,_css=_utils.css,_hide=function(a){_css(a,{display:"none"})},_show=function(a){_css(a,{display:"block"})},a.html5.playlistcomponent=function(d,e){function p(){h=document.createElement("div"),h.id=f.id+"_jwplayer_playlistcomponent";switch(g.position){case a.html5.view.positions.RIGHT:case a.html5.view.positions.LEFT:h.style.width=g.size+"px";break;case a.html5.view.positions.TOP:case a.html5.view.positions.BOTTOM:h.style.height=g.size+"px"}A(),o.item&&(g.itemheight=o.item.height),h.style.backgroundColor="#C6C6C6",f.jwAddEventListener(a.api.events.JWPLAYER_PLAYLIST_LOADED,u),f.jwAddEventListener(a.api.events.JWPLAYER_PLAYLIST_ITEM,y),f.jwAddEventListener(a.api.events.JWPLAYER_PLAYER_STATE,z)}function q(){var a=document.createElement("ul");return _css(a,{width:h.style.width,minWidth:h.style.width,height:h.style.height,backgroundColor:g.backgroundcolor,backgroundImage:o.background?"url("+o.background.src+")":"",color:g.fontcolor,listStyle:"none",margin:0,padding:0,fontFamily:c[g.font]?c[g.font]:c._sans,fontSize:(g.fontsize?g.fontsize:11)+"px",fontStyle:g.fontstyle,fontWeight:g.fontweight,overflowY:"auto"}),a}function r(a){return function(){var b=m.getElementsByClassName("item")[a],c=g.fontcolor,d=o.item?"url("+o.item.src+")":"";a==f.jwGetPlaylistIndex()&&(g.activecolor!==""&&(c=g.activecolor),o.itemActive&&(d="url("+o.itemActive.src+")")),_css(b,{color:g.overcolor!==""?g.overcolor:c,backgroundImage:o.itemOver?"url("+o.itemOver.src+")":d})}}function s(a){return function(){var b=m.getElementsByClassName("item")[a],c=g.fontcolor,d=o.item?"url("+o.item.src+")":"";a==f.jwGetPlaylistIndex()&&(g.activecolor!==""&&(c=g.activecolor),o.itemActive&&(d="url("+o.itemActive.src+")")),_css(b,{color:c,backgroundImage:d})}}function t(b){var c=k[b],d=document.createElement("li");d.className="item",_css(d,{height:g.itemheight,display:"block",cursor:"pointer",backgroundImage:o.item?"url("+o.item.src+")":"",backgroundSize:"100% "+g.itemheight+"px"}),d.onmouseover=r(b),d.onmouseout=s(b);var e=document.createElement("div"),f=new Image,h=0,l=0,m=0;x()&&(c.image||c["playlist.image"]||o.itemImage)&&(f.className="image",o.itemImage?(h=(g.itemheight-o.itemImage.height)/2,l=o.itemImage.width,m=o.itemImage.height):(l=g.itemheight*4/3,m=g.itemheight),_css(e,{height:m,width:l,"float":"left",styleFloat:"left",cssFloat:"left",margin:"0 5px 0 0",background:"black",overflow:"hidden",margin:h+"px",position:"relative"}),_css(f,{position:"relative"}),e.appendChild(f),f.onload=function(){a.utils.stretch(a.utils.stretching.FILL,f,l,m,this.naturalWidth,this.naturalHeight)},c["playlist.image"]?f.src=c["playlist.image"]:c.image?f.src=c.image:o.itemImage&&(f.src=o.itemImage.src),d.appendChild(e));var n=i-l-h*2;j<g.itemheight*k.length&&(n-=15);var p=document.createElement("div");_css(p,{position:"relative",height:"100%",overflow:"hidden"});var q=document.createElement("span");c.duration>0&&(q.className="duration",_css(q,{fontSize:(g.fontsize?g.fontsize:11)+"px",fontWeight:g.fontweight?g.fontweight:"bold",width:"40px",height:g.fontsize?g.fontsize+10:20,lineHeight:24,"float":"right",styleFloat:"right",cssFloat:"right"}),q.innerHTML=_utils.timeFormat(c.duration),p.appendChild(q));var t=document.createElement("span");t.className="title",_css(t,{padding:"5px 5px 0 "+(h?0:"5px"),height:g.fontsize?g.fontsize+10:20,lineHeight:g.fontsize?g.fontsize+10:20,overflow:"hidden","float":"left",styleFloat:"left",cssFloat:"left",width:(c.duration>0?n-50:n)-10+"px",fontSize:(g.fontsize?g.fontsize:13)+"px",fontWeight:g.fontweight?g.fontweight:"bold"}),t.innerHTML=c?c.title:"",p.appendChild(t);if(c.description){var u=document.createElement("span");u.className="description",_css(u,{display:"block","float":"left",styleFloat:"left",cssFloat:"left",margin:0,paddingLeft:t.style.paddingLeft,paddingRight:t.style.paddingRight,lineHeight:(g.fontsize?g.fontsize+4:16)+"px",overflow:"hidden",position:"relative"}),u.innerHTML=c.description,p.appendChild(u)}return d.appendChild(p),d}function u(a){h.innerHTML="",k=f.jwGetPlaylist();if(!k)return;items=[],m=q();for(var b=0;b<k.length;b++){var c=t(b);c.onclick=v(b),m.appendChild(c),items.push(c)}n=f.jwGetPlaylistIndex(),s(n)(),h.appendChild(m);if(_utils.isIOS()&&window.iScroll){m.style.height=g.itemheight*k.length+"px";var d=new iScroll(h.id)}}function v(a){return function(){f.jwPlaylistItem(a),f.jwPlay(!0)}}function w(){m.scrollTop=f.jwGetPlaylistIndex()*g.itemheight}function x(){return g.thumbs.toString().toLowerCase()=="true"}function y(a){n>=0&&(s(n)(),n=a.index),s(a.index)(),w()}function z(){if(g.position==a.html5.view.positions.OVER)switch(f.jwGetState()){case a.api.events.state.IDLE:_show(h);break;default:_hide(h)}}function A(){for(var a in o)o[a]=B(a)}function B(a){return f.skin.getSkinElement("playlist",a)}var f=d,g=a.utils.extend({},b,f.skin.getComponentSettings("playlist"),e);if(g.position==a.html5.view.positions.NONE||typeof a.html5.view.positions[g.position]=="undefined")return;var h,i,j,k,l,m,n=-1,o={background:undefined,item:undefined,itemOver:undefined,itemImage:undefined,itemActive:undefined};return this.getDisplayElement=function(){return h},this.resize=function(a,b){i=a,j=b;if(f.jwGetFullscreen())_hide(h);else{var c={display:"block",width:i,height:j};_css(h,c)}},this.show=function(){_show(h)},this.hide=function(){_hide(h)},p(),this}}(jwplayer),function(a){function b(b){if(a.utils.isYouTube(b.file))return"youtube";var c=a.utils.extension(b.file),d;if(c&&a.utils.extensionmap[c]){if(c=="m3u8")return"video";d=a.utils.extensionmap[c].html5}else b.type&&(d=b.type);if(d){var e=d.split("/")[0];if(e=="audio")return"sound";if(e=="video")return e}return""}a.html5.playlistitem=function(c){var d={author:"",date:"",description:"",image:"",link:"",mediaid:"",tags:"",title:"",provider:"",file:"",streamer:"",duration:-1,start:0,currentLevel:-1,levels:[]},e=a.utils.extend({},d,c);return e.type&&(e.provider=e.type,delete e.type),e.levels.length===0&&(e.levels[0]=new a.html5.playlistitemlevel(e)),e.provider?e.provider=e.provider.toLowerCase():e.provider=b(e.levels[0]),e}}(jwplayer),function(a){a.html5.playlistitemlevel=function(b){var c={file:"",streamer:"",bitrate:0,width:0};for(var d in c)a.utils.exists(b[d])&&(c[d]=b[d]);return c}}(jwplayer),function(a){a.html5.playlistloader=function(){function c(c){var e=[];try{var e=a.utils.parsers.rssparser.parse(c.responseXML.firstChild);b.sendEvent(a.api.events.JWPLAYER_PLAYLIST_LOADED,{playlist:new a.html5.playlist({playlist:e})})}catch(f){d("Could not parse the playlist")}}function d(c){b.sendEvent(a.api.events.JWPLAYER_ERROR,{error:c?c:"could not load playlist for whatever reason.  too bad"
})}var b=new a.html5.eventdispatcher;a.utils.extend(this,b),this.load=function(b){a.utils.ajax(b,c,d)}}}(jwplayer),function(a){a.html5.skin=function(){var b={},c=!1;this.load=function(d,e){new a.html5.skinloader(d,function(a){c=!0,b=a,e()},function(){new a.html5.skinloader("",function(a){c=!0,b=a,e()})})},this.getSkinElement=function(d,e){if(c)try{return b[d].elements[e]}catch(f){a.utils.log("No such skin component / element: ",[d,e])}return null},this.getComponentSettings=function(a){return c?b[a].settings:null},this.getComponentLayout=function(a){return c?b[a].layout:null}}}(jwplayer),function(a){a.html5.skinloader=function(b,c,d){function l(){typeof j!="string"||j===""?m(a.html5.defaultSkin().xml):a.utils.ajax(a.utils.getAbsolutePath(j),function(b){try{if(a.utils.exists(b.responseXML)){m(b.responseXML);return}}catch(c){p()}m(a.html5.defaultSkin().xml)},function(b){m(a.html5.defaultSkin().xml)})}function m(b){var c=b.getElementsByTagName("component");if(c.length===0)return;for(var d=0;d<c.length;d++){var f=c[d].getAttribute("name"),g={settings:{},elements:{},layout:{}};e[f]=g;var i=c[d].getElementsByTagName("elements")[0].getElementsByTagName("element");for(var j=0;j<i.length;j++)o(i[j],f);var k=c[d].getElementsByTagName("settings")[0];if(k&&k.childNodes.length>0){var l=k.getElementsByTagName("setting");for(var m=0;m<l.length;m++){var p=l[m].getAttribute("name"),q=l[m].getAttribute("value"),r=/color$/.test(p)?"color":null;e[f].settings[p]=a.utils.typechecker(q,r)}}var s=c[d].getElementsByTagName("layout")[0];if(s&&s.childNodes.length>0){var t=s.getElementsByTagName("group");for(var u=0;u<t.length;u++){var v=t[u];e[f].layout[v.getAttribute("position")]={elements:[]};for(var w=0;w<v.attributes.length;w++){var x=v.attributes[w];e[f].layout[v.getAttribute("position")][x.name]=x.value}var y=v.getElementsByTagName("*");for(var z=0;z<y.length;z++){var A=y[z];e[f].layout[v.getAttribute("position")].elements.push({type:A.tagName});for(var B=0;B<A.attributes.length;B++){var C=A.attributes[B];e[f].layout[v.getAttribute("position")].elements[z][C.name]=C.value}a.utils.exists(e[f].layout[v.getAttribute("position")].elements[z].name)||(e[f].layout[v.getAttribute("position")].elements[z].name=A.tagName)}}}h=!1,n()}}function n(){clearInterval(i),k||(i=setInterval(function(){q()},100))}function o(b,c){var d=new Image,f=b.getAttribute("name"),h=b.getAttribute("src"),i;if(h.indexOf("data:image/png;base64,")===0)i=h;else{var l=a.utils.getAbsolutePath(j),m=l.substr(0,l.lastIndexOf("/"));i=[m,c,h].join("/")}e[c].elements[f]={height:0,width:0,src:"",ready:!1,image:d},d.onload=function(a){r(d,f,c)},d.onerror=function(a){k=!0,n(),g()},d.src=i}function p(){for(var a in e){var b=e[a];for(var c in b.elements){var d=b.elements[c],f=d.image;f.onload=null,f.onerror=null,delete d.image,delete b.elements[c]}delete e[a]}}function q(){for(var a in e)if(a!="properties")for(var b in e[a].elements)if(!e[a].elements[b].ready)return;h===!1&&(clearInterval(i),f(e))}function r(b,c,d){e[d]&&e[d].elements[c]?(e[d].elements[c].height=b.height,e[d].elements[c].width=b.width,e[d].elements[c].src=b.src,e[d].elements[c].ready=!0,n()):a.utils.log("Loaded an image for a missing element: "+d+"."+c)}var e={},f=c,g=d,h=!0,i,j=b,k=!1;l()}}(jwplayer),function(a){a.html5.api=function(b,c){function i(){f.state==a.api.events.state.PLAYING||f.state==a.api.events.state.BUFFERING?h.pause():h.play()}function j(a){return function(){return f[a]}}function k(a,b,c){return function(){var d=f.plugins.object[a];d&&d[b]&&typeof d[b]=="function"&&d[b].apply(d,c)}}function l(){f.config.playlistfile?(f.addEventListener(a.api.events.JWPLAYER_PLAYLIST_LOADED,m),f.loadPlaylist(f.config.playlistfile)):typeof f.config.playlist=="string"?(f.addEventListener(a.api.events.JWPLAYER_PLAYLIST_LOADED,m),f.loadPlaylist(f.config.playlist)):(f.loadPlaylist(f.config),setTimeout(m,25))}function m(b){f.removeEventListener(a.api.events.JWPLAYER_PLAYLIST_LOADED,m),f.setupPlugins(),g.setup();var b={id:d.id,version:d.version};h.playerReady(b)}var d={},e=document.createElement("div");b.parentNode.replaceChild(e,b),e.id=b.id,d.version=a.version,d.id=e.id;var f=new a.html5.model(d,e,c),g=new a.html5.view(d,e,f),h=new a.html5.controller(d,e,f,g);return d.skin=new a.html5.skin,d.jwPlay=function(a){typeof a=="undefined"?i():a.toString().toLowerCase()=="true"?h.play():h.pause()},d.jwPause=function(a){typeof a=="undefined"?i():a.toString().toLowerCase()=="true"?h.pause():h.play()},d.jwStop=h.stop,d.jwSeek=h.seek,d.jwPlaylistItem=h.item,d.jwPlaylistNext=h.next,d.jwPlaylistPrev=h.prev,d.jwResize=h.resize,d.jwLoad=h.load,d.jwGetItem=j("item"),d.jwGetPosition=j("position"),d.jwGetDuration=j("duration"),d.jwGetBuffer=j("buffer"),d.jwGetWidth=j("width"),d.jwGetHeight=j("height"),d.jwGetFullscreen=j("fullscreen"),d.jwSetFullscreen=h.setFullscreen,d.jwGetVolume=j("volume"),d.jwSetVolume=h.setVolume,d.jwGetMute=j("mute"),d.jwSetMute=h.setMute,d.jwGetStretching=j("stretching"),d.jwGetState=j("state"),d.jwGetVersion=function(){return d.version},d.jwGetPlaylist=function(){return f.playlist},d.jwGetPlaylistIndex=d.jwGetItem,d.jwAddEventListener=h.addEventListener,d.jwRemoveEventListener=h.removeEventListener,d.jwSendEvent=h.sendEvent,d.jwDockSetButton=function(a,b,c,d){f.plugins.object.dock&&f.plugins.object.dock.setButton&&f.plugins.object.dock.setButton(a,b,c,d)},d.jwControlbarShow=k("controlbar","show"),d.jwControlbarHide=k("controlbar","hide"),d.jwDockShow=k("dock","show"),d.jwDockHide=k("dock","hide"),d.jwDisplayShow=k("display","show"),d.jwDisplayHide=k("display","hide"),d.jwGetLevel=function(){},d.jwGetBandwidth=function(){},d.jwGetLockState=function(){},d.jwLock=function(){},d.jwUnlock=function(){},f.config.chromeless&&!a.utils.isIOS()?l():d.skin.load(f.config.skin,l),d}}(jwplayer)}$(document).ready(function(){$(".load_older_posts").click(function(){var a=new Array;return $(this).parent().find("li").each(function(){a.push($(this).attr("id"))}),$.ajax({url:"/",data:a,success:function(a){}}),!1}),$(".notifications .text a").click(function(){var a=$(this).closest("li"),b=a.attr("msg_id");return $.ajax({url:"/check_read",data:{id:b,authenticity_token:$("meta[name=csrf-token]").attr("content")},success:function(b){a.addClass("read"),location.href="/gripes/"+a.attr("link")}}),!1})}),$(document).ready(function(){}),$(document).ready(function(){$(".sign-link").click(function(a){return $(".bl-popup").hide(),overlay(),$(".popup-warning-block").hide(),$(".popup-sign-link").parent().show(),!1}),$(".sign-form div").is(".field_with_errors")&&$(".sign-form .letters").addClass("fix"),$(".widget-gripe-video li a").live("click",function(a){$(".bl-popup").hide(),$(".block-video-gripe-display, .block-video-gripe-text").html(""),overlay(),$(".popup-video").parent().show();var b=$(this).next().text(),c=$(this).find(".code-video").html();return $(".block-video-gripe-display").html(c),$(".block-video-gripe-text").html(b),!1}),$(".thank-you").parent().is(".db")&&(overlay(),$(".main.alerts").remove()),$(".sign-form").is(".change_your_password")&&(overlay(),$(".change-pass").parent().show(),$(".change-pass").find(".popup-warning-block").show()),$(".btn-embed").live("click",function(){$(".bl-popup").hide(),overlay(),$(".popup-embed").parent().show();var a=$(".block-edit-gripe .active").text(),b="";$("div.embed-body").html(""),$(".popup-embed .popup-warning-block").remove(),$(".popup-embed .embed-ok").addClass("off");if(a=="photo")var b='<label>Url:</label> <input type="text" default="Enter url" class="tips">';if(a=="video")var b='<label>Code:</label> <input type="text" default="Enter embed video" class="tips">';$("div.embed-body").append(b),renderCheckboxAndInput()}),$.trim($(".popup-embed .tips").val()).length>0?$(".popup-embed .embed-ok").removeClass("off"):$(".popup-embed .embed-ok").addClass("off"),$(".popup-embed  .tips").live("keyup",function(a){$.trim($(".popup-embed .tips").val()).length>0?$(".popup-embed .embed-ok").removeClass("off"):$(".popup-embed .embed-ok").addClass("off")}),$(".embed-ok").live("click",function(){if($(this).is(":not(.off)")){var a=$(".block-edit-gripe .active").text(),b=$(".block-edit-gripe .active").closest(".box-gripe"),c=b.attr("id");if(a=="photo"){var d=$(".embed-body .tips").val();$.ajax({type:"POST",url:"/check_embed_image",data:{embed:d},success:function(a){var e='<div class="block-edit-image"><div class="bl-img"><img src="'+d+'" alt="" embed="img" class="newI"></div><div class="bl-content"><textarea default="Add are description." class="tips ed-text"></textarea><div class="bl-delete">x delete</div><div class="clear"></div></div><div class="clear"></div></div>';b.find(".list-edit-image").append(e),renderCheckboxAndInput(),b.find(".block-edit-image").removeClass("nobg"),b.find(".block-edit-image:last").addClass("nobg"),btnEditGripe(c),$("#overlay").remove(),$(".bl-popup").hide()},error:function(a){$(".popup-embed .popup-warning-block").remove(),$(".popup-embed form").before('<div class="popup-warning-block">URL no valid!<span></span></div>')}})}if(a=="video"){var e=$(".embed-body .tips").val(),f='<div class="block-edit-image"><div class="bl-img"><img src="/assets/ico/embed_video_tmb.png" alt="" embed="video" link="'+e+'"class="newV"></div><div class="bl-content"><textarea default="Add are description." class="tips ed-text"></textarea><div class="bl-delete">x delete</div><div class="clear"></div></div><div class="clear"></div></div>';b.find(".list-edit-video").append(f),renderCheckboxAndInput(),b.find(".block-edit-image").removeClass("nobg"),b.find(".block-edit-image:last").addClass("nobg"),btnEditGripe(c),$("#overlay").remove(),$(".bl-popup").hide()}}}),$("#overlay, .bl-popup .close, .btnClose, .embed-cancel").live("click",function(){close_overlay()}),$(".tabs-sign-link div").click(function(){$(".popup-warning-block").hide(),$(".tabs-block-bethink").hide(),$(".tabs-sign-link div").removeClass("active"),$(".content-sign-link").removeClass("l").removeClass("r"),$(".tabs-block-register, .tabs-block-sign").removeClass("db"),$(this).addClass("active"),$(this).is(".tabs-sign")?($(".tabs-block-sign").addClass("db"),$(".content-sign-link").addClass("l")):($(".tabs-block-register").addClass("db"),$(".content-sign-link").addClass("r"))}),$(".popup-sign-link .sign-form .bethink").click(function(){return $(".popup-warning-block").hide(),checkmail($(".popup-sign-link #user_login").val())?($(".sign-form").prev().text("Check your email for instructions.").fadeIn("slow"),$.ajax({type:"POST",url:"/users/password",data:{authenticity_token:$("meta[name=csrf-token]").attr("content"),"user[email]":$(".popup-sign-link #user_login").val()},success:function(a){}})):($(".tabs-block-sign, .tabs-block-register").removeClass("db"),$(".tabs-block-bethink").show()),!1}),$(".tabs-block-bethink .sign-form").submit(function(){return $(".popup-warning-block").hide(),checkmail($(".tabs-block-bethink #user_email").val())?$.ajax({type:"POST",url:"/users/password",data:{authenticity_token:$("meta[name=csrf-token]").attr("content"),"user[email]":$(".tabs-block-bethink #user_email").val()},success:function(a){a.indexOf("error_explanation")+1?$(".sign-form").prev().text("Email not found.").fadeIn("slow"):$(".sign-form").prev().text("Check your email for instructions.").fadeIn("slow")}}):$(".sign-form").prev().text("Oops, please enter a valid Email.").fadeIn("slow"),!1}),$(".change-pass .sign-form").submit(function(){$(".popup-warning-block").hide().addClass("nobg");var a=$(".change-pass #user_password"),b=$(".change-pass #user_password_confirmation");a.removeClass("field-error"),b.removeClass("field-error");if(checkpass(a.val())==0)return a.addClass("field-error"),a.closest(".sign-form").prev().removeClass("nobg").html("<em>Oops, please enter a valid password.</em> <span></span>").fadeIn("slow"),!1;if($.trim(b.val()).length==0)return b.addClass("field-error"),b.closest(".sign-form").prev().removeClass("nobg").html("<em>Please confirm your new password.</em> <span></span>").fadeIn("slow"),!1;if(checkpass(b.val())==0)return b.addClass("field-error"),b.closest(".sign-form").prev().removeClass("nobg").html("<em>Oops, please enter a valid password.</em> <span></span>").fadeIn("slow"),!1;if(a.val()!=b.val())return a.addClass("field-error"),a.closest(".sign-form").prev().removeClass("nobg").html("<em>Yoor passwords don't match.</em> <span></span>").fadeIn("slow"),!1})}),$(document).ready(function(){function a(){$.trim($("#user-name").val()).length>0&&$.trim($("#birthday-m").val()).length>0&&$.trim($("#birthday-d").val()).length>0&&$.trim($("#birthday-y").val()).length>0&&$(".gender div").is(".checkboxOn")&&checkmail($(".block-user-info #user-email").val())?$(".btn-save-settings").addClass("on"):$(".btn-save-settings").removeClass("on")}function b(){$.trim($("#current-password").val()).length>0&&$.trim($("#new-password").val()).length>0?$(".btn-change-password").addClass("on"):$(".btn-change-password").removeClass("on")}$(".btn-save-settings").click(function(){if($(this).is(".on")){var a=$("#user-name").val(),b=$("#user-email").val(),c=$("#birthday-m").val(),d=$("#birthday-d").val(),e=$("#birthday-y").val(),f=$("input[name=gender]:checked").val(),g=$("#user-occupation").val(),h=$("#user-location").val(),i=new Array;$("input[name=email-me]:checked").each(function(){i.push($(this).val())});var j=new Array;$("input[name=facebook]:checked").each(function(){j.push($(this).val())});var k=new Array;$("input[name=twitter]:checked").each(function(){k.push($(this).val())}),$(".status-barSett img").hide(),$.ajax({type:"POST",url:"/account/setting/save",data:{authenticity_token:$("meta[name=csrf-token]").attr("content"),username:a,email:b,birthday_m:c,birthday_d:d,birthday_y:e,gender:f,occupation:g,location:h},success:function(a){$("#user-email, #user-name").removeClass("inputError"),$(".status-barSett img").hide(),a=="error: username exist"&&($("#user-name").addClass("inputError"),$("#container").before('<div class="main alerts"><div class="alert-message error" style="display: block;"><div><a href="#" class="close">×</a><p> Error: username exist </p></div></div></div>'),CloseAlert(),ScrollAlertPosition(),AlertTimeClose()),a=="error: email exist"&&($("#user-email").addClass("inputError"),$("#container").before('<div class="main alerts"><div class="alert-message error" style="display: block;"><div><a href="#" class="close">×</a><p> Error: email exist </p></div></div></div>'),CloseAlert(),ScrollAlertPosition(),AlertTimeClose()),a||($("#container").before('<div class="main alerts"><div class="alert-message success" style="display: block;"><div><a href="#" class="close">×</a><p> Great success!  Your changes are saved.</p></div></div></div>'),CloseAlert(),ScrollAlertPosition(),AlertTimeClose())},beforeSend:function(a){$(".status-barSett .loadind").show()},complete:function(a){},error:function(a){$(".status-barSett img").hide()}})}return!1}),$(".btn-change-password").click(function(){$(".status-bar img").hide();var a=$("#current-password").val(),b=$("#new-password").val();return $(this).is(".on")&&$.ajax({type:"POST",url:"/account/password",data:{authenticity_token:$("meta[name=csrf-token]").attr("content"),current_password:a,new_password:b},success:function(a){$("#container").before('<div class="main alerts"><div class="alert-message success" style="display: block;"><div><a href="#" class="close">×</a><p> Great success!  Your changes are saved. </p></div></div></div>'),CloseAlert(),ScrollAlertPosition(),AlertTimeClose(),$(".status-bar img").hide()},beforeSend:function(a){$(".status-bar .loadind").show()},complete:function(a){},error:function(a){$(".status-bar img").hide(),$("#container").before('<div class="main alerts"><div class="alert-message success" style="display: block;"><div><a href="#" class="close">×</a><p> Error </p></div></div></div>'),CloseAlert(),ScrollAlertPosition(),AlertTimeClose()}}),!1}),$(".settings-socialNO input").click(function(){var a=new Array;$("input[name=facebook]:checked").each(function(){a.push($(this).val())}),a.length==0&&(a="");var b=new Array;$("input[name=twitter]:checked").each(function(){b.push($(this).val())}),b.length==0&&(b=""),$.ajax({type:"POST",url:"/",data:{"facebook[]":a,"twitter[]":b,"email_me[]":email_me},success:function(a){}})}),$(".settings-social .email-me input").click(function(){var a=$(this).val();$.ajax({type:"POST",url:"/account/email_me",data:{authenticity_token:$("meta[name=csrf-token]").attr("content"),params:a},success:function(a){}})}),$(".settings-social .twitter-form input").click(function(){var a=$(this).val();$.ajax({type:"POST",url:"/account/tw",data:{authenticity_token:$("meta[name=csrf-token]").attr("content"),evn:a},success:function(a){}})}),$(".settings-social .facebook-form input").click(function(){var a=$(this).val();$.ajax({type:"POST",url:"/account/fb",data:{authenticity_token:$("meta[name=csrf-token]").attr("content"),evn:a},success:function(a){}})}),$("button.delete-account").click(function(){if(confirm("Delete account?")){var a=$(this).closest("#account-settings").attr("account");$.ajax({type:"POST",url:"/account/remove",data:{authenticity_token:$("meta[name=csrf-token]").attr("content"),id:a},success:function(a){location.href="/"}})}}),$("#birthday-m").click(function(){$(this).next().show()}),$(".birthday ul").hover(function(){$(this).show()},function(){$(this).hide()}),$(".birthday li").click(function(){$("#birthday-m").val($(this).text()),$(".birthday ul").hide(),a()}),$(".block-user-info .gender input").live("change",function(b){a()}),$(".block-user-info #user-name, .block-user-info #user-email, .block-user-info #birthday-d, .block-user-info #birthday-y").live("keyup",function(b){a()}),$(".password input").live("keyup",function(a){b()}),a()}),$(document).ready(function(){$(".widget-block-share .box.gray").live("click",function(){$(this).prev().show()}),$(".widget-block-share .share").live("click",function(){$(this).closest(".list-share").hide()}),$(".addthis_button_compact").remove(),setTimeout(function(){$(".list-share a").each(function(){var a=$(this).attr("title");$(this).find("span").text(a)})},1e3),$(".list-share").hover(function(){$(this).show()},function(){$(this).hide()})}),$(document).ready(function(){renderCheckboxAndInput()}),$(document).ready(function(){$(".widget-top10-griped li:last-child").addClass("nobg"),$(".tabs-top-griped div").click(function(){$(".widget-top10-griped ul").hide();var a=$(this).attr("rel");$(".widget-top10-griped ul[rel='"+a+"']").fadeIn("slow"),$(".tabs-top-griped div").removeClass("active"),$(this).addClass("active")}),$(".ul-top-gripes li").click(function(){$(".ul-top-gripes li").removeClass("active"),$(this).addClass("active"),$.ajax({type:"POST",url:"/filter_gripe_view",data:{authenticity_token:$("meta[name=csrf-token]").attr("content"),sort:$(this).text()},success:function(a){$(".list-gripes").html(a)}})})});var file_type="",thumbnail_url="",file_html="",embed_success=!1,image_url="";$(document).ready(function(){function a(){CloseAlert(),ScrollAlertPosition(),AlertTimeClose()}$(".gripe_master .file-upload-source").live("change",function(){fileUpload($(this).attr("status"))}),$(".gripe_master .file-upload-source").click(function(){$(".file-upload-source").val("")}),$(".embed").click(function(){embed_gripes()}),$(".ed-embed-text").live("keypress",function(a){var b=$(this).val();$(this).prev(".span_val").hide()}),$(".ed-text").live("keypress",function(a){var b=$(this).val();$(this).prev(".span_val").hide()}),$(".ed-text").live("keyup",function(a){var b=$(this).val();ambed_value==""&&$(this).prev(".span_val").show()}),$(".ed-embed-text").live("keyup",function(a){var b=$(this).val(),c=$(this);$(this).attr("disabled","disabled"),setTimeout(function(){var a="",d="";if(b=="")$(this).prev(".span_val").show();else{$(this).prev(".span_val").hide(),b.toLowerCase().indexOf("src=")>0?(a=$(b).attr("src"),d="embed"):(a=b,d="url");var e=get_embed_details(a,c)}},600)}),$(".span_val").live("click",function(a){$(this).next().trigger("focus")}),$("body").delegate(".ed-embed-text","change",function(){$("this").val()==""&&$(this).prev(".span_val").show()}),$(".gripe_master #file_image").each(function(){$(".gripe_master #file_image").filestyle({image:"/assets/ico/input-upload-ico.png",imageheight:27,imagewidth:28,width:28,pathClass:"fileImg"})}),$(".gripe_master #file_source").each(function(){$(".gripe_master #file_source").filestyle({image:"/assets/ico/input-upload-ico.png",imageheight:27,imagewidth:32,width:32,pathClass:"fileVideo"})}),$(".gripe_master_list .bl-delete").live("click",function(){var a=$(this).closest(".block-edit-image");a.remove()}),$("#new_gripe").submit(function(){var b=$("#new_gripe .tips[value!='']").length,c=$(".gripe_master_list .tips[value!='']").length,d=$(".gripe_master_list .block-edit-image").length;if(b<2)return $("#container").before('<div class="main alerts"><div class="alert-message success" style="display: block;"><div><a href="#" class="close">×</a><p>Please fill out each text field before you continue</p></div></div></div>'),a(),!1;if($.trim($("#gripe_title").val()).length==0)return $("#container").before('<div class="main alerts"><div class="alert-message success" style="display: block;"><div><a href="#" class="close">×</a><p>Please title you gripe before you continue</p></div></div></div>'),a(),!1;if($.trim($("#gripe_overview").val()).length==0)return $("#container").before('<div class="main alerts"><div class="alert-message success" style="display: block;"><div><a href="#" class="close">×</a><p>You forgot to gripe!</p></div></div></div>'),a(),!1;if($.trim($("#gripe_tag_list").val()).length==0)return $("#container").before('<div class="main alerts"><div class="alert-message success" style="display: block;"><div><a href="#" class="close">×</a><p>Please tag your gripe before you continue</p></div></div></div>'),a(),!1;if(c!=d)return $("#container").before('<div class="main alerts"><div class="alert-message success" style="display: block;"><div><a href="#" class="close">×</a><p>Please add are description.</p></div></div></div>'),a(),!1;if($("#new_gripe .btn-gripe").is(".submitNo"))return!1;var e="",f=1;$(".block-edit-image img").each(function(){var a=$(this).attr("original"),b=$(this).attr("embed"),c=$(this).parent().parent().find(".ed-text").val(),d=a+"::"+b+"::"+c+":::";e+=d.toString(),$("#new_gripe .ResultArray").val(e.toString())})})}),$(document).ready(function(){StyleButtonAvatar(),$(".settings-user .file-upload-source").live("change",function(){fileUploadAvatar("image")})}),$(document).ready(function(){$(".box-gripe .file-upload-source").live("change",function(){var a=$(this).closest(".box-gripe").attr("id");fileUploadEdit($(this).attr("status"),a)}),$(".box-gripe .file-upload-source").live("click",function(){$(".box-gripe .file-upload-source").val("")}),$(".form-edit-gripe .save-sett").live("click",function(){var a=$(this).closest(".box-gripe");if($(".block-gripe-update").is(".active")&&$(".edit-photo").is(".active")&&a.find(".save-sett").is(":not(.submitOff)")&&a.find(".save-sett").is(":not(.submitOff2)")){var b="",c="",d=1,e=a.find(".list-edit-image .block-edit-image img").length;a.find(".list-edit-image .block-edit-image img[original]").each(function(){var a=$(this).attr("original"),c=$(this).parent().parent().find(".ed-text").val(),d=a+"::"+c+":::";b+=d.toString()}),a.find(".list-edit-image .block-edit-image img[embed]").each(function(){var a=$(this).attr("src"),b=$(this).parent().parent().find(".ed-text").val(),d=a+"::"+b+":::";c+=d.toString()});var f=a.attr("id");$.ajax({type:"POST",url:"/gripe/embed/save",data:{idE:f,authenticity_token:$("meta[name=csrf-token]").attr("content"),ResultArrayE:c,type:"image"},success:function(a){}}),$.ajax({type:"POST",url:"/gripe/image/update",data:{authenticity_token:$("meta[name=csrf-token]").attr("content"),id:f,ResultArray:b},success:function(b){a.find(".list-edit-image").hide(),a.find(".box-icons em").removeClass("active"),a.find(".widget-gripe-pics, .widget-gripe-video").removeClass("db"),a.find(".widget-gripe-pics ul").html(b),a.find(".ico-img").parent().addClass("active").find(".box").text(e),a.find(".form-edit-gripe").hide(),a.find(".widget-gripe-pics").addClass("db"),a.find(".btn-gripe-update, .block-gripe-update").removeClass("active"),$.scrollTo(a,1200),$(".widget-gripe-pics a").lightBox(),$(".media-content").each(function(){playerInit($(this).attr("id"))})}})}if($(".block-gripe-update").is(".active")&&$(".edit-video").is(".active")&&a.find(".save-sett").is(":not(.submitOff)")&&a.find(".save-sett").is(":not(.submitOff2)")){var b="",c="",d=1,e=a.find(".list-edit-video .block-edit-image img").length;a.find(".list-edit-video .block-edit-image img[original]").each(function(){var a=$(this).attr("original"),c=$(this).parent().parent().find(".ed-text").val(),d=a+"::"+c+":::";b+=d.toString()}),a.find(".list-edit-video .block-edit-image img[embed]").each(function(){var a=$(this).attr("link"),b=$(this).parent().parent().find(".ed-text").val(),d=a+"::"+b+":::";c+=d.toString()});var f=a.attr("id");$.ajax({type:"POST",url:"/gripe/embed/save",data:{idE:f,authenticity_token:$("meta[name=csrf-token]").attr("content"),ResultArrayE:c,type:"video"},success:function(a){}}),$.ajax({type:"POST",url:"/gripe/video/update",data:{authenticity_token:$("meta[name=csrf-token]").attr("content"),id:f,ResultArray:b},success:function(b){a.find(".list-edit-video").hide(),a.find(".box-icons em").removeClass("active"),a.find(".widget-gripe-pics, .widget-gripe-video").removeClass("db"),a.find(".widget-gripe-video ul").html(b),a.find(".ico-video").parent().addClass("active").find(".box").text(e),a.find(".form-edit-gripe").hide(),a.find(".widget-gripe-video").addClass("db"),a.find(".btn-gripe-update, .block-gripe-update").removeClass("active"),$.scrollTo(a,1200),renderPlayer()}})}})}),$(document).ready(function(){$("ul.viewer-preview li:first").addClass("active"),$(".viewer-info:first, .viewer-media:first").show(),$(".viewer-preview li img").click(function(){tab=$(this).attr("rel"),showImgNews(tab),initNewsPlayer($(this).attr("elem_id"),$(this).attr("source"),$(this).attr("image"))}),$(".viewer-preview li img:first").click()}),window.CKEDITOR_BASEPATH="/assets/ckeditor/",function(){if(window.CKEDITOR&&window.CKEDITOR.dom)return;window.CKEDITOR||(window.CKEDITOR=function(){var a={timestamp:"B8DJ5M3",version:"3.6.2",revision:"7275",_:{},status:"unloaded",basePath:function(){var a=window.CKEDITOR_BASEPATH||"";if(!a){var b=document.getElementsByTagName("script");for(var c=0;c<b.length;c++){var d=b[c].src.match(/(^|.*[\\\/])ckeditor(?:_basic)?(?:_source)?.js(?:\?.*)?$/i);if(d){a=d[1];break}}}a.indexOf(":/")==-1&&(a.indexOf("/")===0?a=location.href.match(/^.*?:\/\/[^\/]*/)[0]+a:a=location.href.match(/^[^\?]*\/(?:)/)[0]+a);if(!a)throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';return a}(),getUrl:function(a){return a.indexOf(":/")==-1&&a.indexOf("/")!==0&&(a=this.basePath+a),this.timestamp&&a.charAt(a.length-1)!="/"&&!/[&?]t=/.test(a)&&(a+=(a.indexOf("?")>=0?"&":"?")+"t="+this.timestamp),a}},b=window.CKEDITOR_GETURL;if(b){var c=a.getUrl;a.getUrl=function(d){return b.call(a,d)||c.call(a,d)}}return a}());var a=CKEDITOR;a.event||(a.event=function(){},a.event.implementOn=function(b){var c=a.event.prototype;for(var d in c)b[d]==undefined&&(b[d]=c[d])},a.event.prototype=function(){var a=function(a){var b=a.getPrivate&&a.getPrivate()||a._||(a._={});return b.events||(b.events={})},b=function(a){this.name=a,this.listeners=[]};return b.prototype={getListenerIndex:function(a){for(var b=0,c=this.listeners;b<c.length;b++)if(c[b].fn==a)return b;return-1}},{on:function(c,d,e,f,g){var h=a(this),i=h[c]||(h[c]=new b(c));if(i.getListenerIndex(d)<0){var j=i.listeners;e||(e=this),isNaN(g)&&(g=10);var k=this,l=function(a,b,g,h){var i={name:c,sender:this,editor:a,data:b,listenerData:f,stop:g,cancel:h,removeListener:function(){k.removeListener(c,d)}};return d.call(e,i),i.data};l.fn=d,l.priority=g;for(var m=j.length-1;m>=0;m--)if(j[m].priority<=g){j.splice(m+1,0,l);return}j.unshift(l)}},fire:function(){var b=!1,c=function(){b=!0},d=!1,e=function(){d=!0};return function(f,g,h){var i=a(this)[f],j=b,k=d;b=d=!1;if(i){var l=i.listeners;if(l.length){l=l.slice(0);for(var m=0;m<l.length;m++){var n=l[m].call(this,h,g,c,e);typeof n!="undefined"&&(g=n);if(b||d)break}}}var o=d||(typeof g=="undefined"?!1:g);return b=j,d=k,o}}(),fireOnce:function(b,c,d){var e=this.fire(b,c,d);return delete a(this)[b],e},removeListener:function(b,c){var d=a(this)[b];if(d){var e=d.getListenerIndex(c);e>=0&&d.listeners.splice(e,1)}},hasListeners:function(b){var c=a(this)[b];return c&&c.listeners.length>0}}}()),a.editor||(a.ELEMENT_MODE_NONE=0,a.ELEMENT_MODE_REPLACE=1,a.ELEMENT_MODE_APPENDTO=2,a.editor=function(b,c,d,e){var f=this;f._={instanceConfig:b,element:c,data:e},f.elementMode=d||0,a.event.call(f),f._init()},a.editor.replace=function(b,c){var d=b;if(typeof d!="object"){d=document.getElementById(b),d&&d.tagName.toLowerCase()in{style:1,script:1,base:1,link:1,meta:1,title:1}&&(d=null);if(!d){var e=0,f=document.getElementsByName(b);while((d=f[e++])&&d.tagName.toLowerCase()!="textarea");}if(!d)throw'[CKEDITOR.editor.replace] The element with id or name "'+b+'" was not found.'}return d.style.visibility="hidden",new a.editor(c,d,1)},a.editor.appendTo=function(b,c,d){var e=b;if(typeof e!="object"){e=document.getElementById(b);if(!e)throw'[CKEDITOR.editor.appendTo] The element with id "'+b+'" was not found.'}return new a.editor(c,e,2,d)},a.editor.prototype={_init:function(){var b=a.editor._pending||(a.editor._pending=[]);b.push(this)},fire:function(b,c){return a.event.prototype.fire.call(this,b,c,this)},fireOnce:function(b,c){return a.event.prototype.fireOnce.call(this,b,c,this)}},a.event.implementOn(a.editor.prototype,!0)),a.env||(a.env=function(){var a=navigator.userAgent.toLowerCase(),b=window.opera,c={ie:!1,opera:!!b&&b.version,webkit:a.indexOf(" applewebkit/")>-1,air:a.indexOf(" adobeair/")>-1,mac:a.indexOf("macintosh")>-1,quirks:document.compatMode=="BackCompat",mobile:a.indexOf("mobile")>-1,iOS:/(ipad|iphone|ipod)/.test(a),isCustomDomain:function(){if(!this.ie)return!1;var a=document.domain,b=window.location.hostname;return a!=b&&a!="["+b+"]"},secure:location.protocol=="https:"};c.gecko=navigator.product=="Gecko"&&!c.webkit&&!c.opera;var d=0;c.ie&&(d=parseFloat(a.match(/msie (\d+)/)[1]),c.ie8=!!document.documentMode,c.ie8Compat=document.documentMode==8,c.ie9Compat=document.documentMode==9,c.ie7Compat=d==7&&!document.documentMode||document.documentMode==7,c.ie6Compat=d<7||c.quirks);if(c.gecko){var e=a.match(/rv:([\d\.]+)/);e&&(e=e[1].split("."),d=e[0]*1e4+(e[1]||0)*100+ +(e[2]||0))}return c.opera&&(d=parseFloat(b.version())),c.air&&(d=parseFloat(a.match(/ adobeair\/(\d+)/)[1])),c.webkit&&(d=parseFloat(a.match(/ applewebkit\/(\d+)/)[1])),c.version=d,c.isCompatible=c.iOS&&d>=534||!c.mobile&&(c.ie&&d>=6||c.gecko&&d>=10801||c.opera&&d>=9.5||c.air&&d>=1||c.webkit&&d>=522||!1),c.cssClass="cke_browser_"+(c.ie?"ie":c.gecko?"gecko":c.opera?"opera":c.webkit?"webkit":"unknown"),c.quirks&&(c.cssClass+=" cke_browser_quirks"),c.ie&&(c.cssClass+=" cke_browser_ie"+(c.version<7?"6":c.version>=8?document.documentMode:"7"),c.quirks&&(c.cssClass+=" cke_browser_iequirks")),c.gecko&&d<10900&&(c.cssClass+=" cke_browser_gecko18"),c.air&&(c.cssClass+=" cke_browser_air"),c}());var b=a.env,c=b.ie;a.status=="unloaded"&&function(){a.event.implementOn(a),a.loadFullCore=function(){if(a.status!="basic_ready"){a.loadFullCore._load=1;return}delete a.loadFullCore;var b=document.createElement("script");b.type="text/javascript",b.src=a.basePath+"ckeditor.js",document.getElementsByTagName("head")[0].appendChild(b)},a.loadFullCoreTimeout=0,a.replaceClass="ckeditor",a.replaceByClassEnabled=1;var c=function(c,d,e,f){if(b.isCompatible){a.loadFullCore&&a.loadFullCore();var g=e(c,d,f);return a.add(g),g}return null};a.replace=function(b,d){return c(b,d,a.editor.replace)},a.appendTo=function(b,d,e){return c(b,d,a.editor.appendTo,e)},a.add=function(a){var b=this._.pending||(this._.pending=[]);b.push(a)},a.replaceAll=function(){var a=document.getElementsByTagName("textarea");for(var b=0;b<a.length;b++){var c=null,d=a[b];if(!d.name&&!d.id)continue;if(typeof arguments[0]=="string"){var e=new RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)");if(!e.test(d.className))continue}else if(typeof arguments[0]=="function"){c={};if(arguments[0](d,c)===!1)continue}this.replace(d,c)}},function(){var b=function(){var b=a.loadFullCore,c=a.loadFullCoreTimeout;a.replaceByClassEnabled&&a.replaceAll(a.replaceClass),a.status="basic_ready",b&&b._load?b():c&&setTimeout(function(){a.loadFullCore&&a.loadFullCore()},c*1e3)};window.addEventListener?window.addEventListener("load"
,b,!1):window.attachEvent&&window.attachEvent("onload",b)}(),a.status="basic_loaded"}(),a.dom={};var d=a.dom;(function(){var b=[];a.on("reset",function(){b=[]}),a.tools={arrayCompare:function(a,b){if(!a&&!b)return!0;if(!a||!b||a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!=b[c])return!1;return!0},clone:function(a){var b;if(a&&a instanceof Array){b=[];for(var c=0;c<a.length;c++)b[c]=this.clone(a[c]);return b}if(a===null||typeof a!="object"||a instanceof String||a instanceof Number||a instanceof Boolean||a instanceof Date||a instanceof RegExp)return a;b=new a.constructor;for(var d in a){var e=a[d];b[d]=this.clone(e)}return b},capitalize:function(a){return a.charAt(0).toUpperCase()+a.substring(1).toLowerCase()},extend:function(a){var b=arguments.length,c,d;typeof (c=arguments[b-1])=="boolean"?b--:typeof (c=arguments[b-2])=="boolean"&&(d=arguments[b-1],b-=2);for(var e=1;e<b;e++){var f=arguments[e];for(var g in f)if(c===!0||a[g]==undefined)if(!d||g in d)a[g]=f[g]}return a},prototypedCopy:function(a){var b=function(){};return b.prototype=a,new b},isArray:function(a){return!!a&&a instanceof Array},isEmpty:function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},cssStyleToDomStyle:function(){var a=document.createElement("div").style,b=typeof a.cssFloat!="undefined"?"cssFloat":typeof a.styleFloat!="undefined"?"styleFloat":"float";return function(a){return a=="float"?b:a.replace(/-./g,function(a){return a.substr(1).toUpperCase()})}}(),buildStyleHtml:function(a){a=[].concat(a);var b,c=[];for(var d=0;d<a.length;d++)b=a[d],/@import|[{}]/.test(b)?c.push("<style>"+b+"</style>"):c.push('<link type="text/css" rel=stylesheet href="'+b+'">');return c.join("")},htmlEncode:function(a){var b=function(a){var b=new d.element("span");return b.setText(a),b.getHtml()},c=b("\n").toLowerCase()=="<br>"?function(a){return b(a).replace(/<br>/gi,"\n")}:b,e=b(">")==">"?function(a){return c(a).replace(/>/g,"&gt;")}:c,f=b("  ")=="&nbsp; "?function(a){return e(a).replace(/&nbsp;/g," ")}:e;return this.htmlEncode=f,this.htmlEncode(a)},htmlEncodeAttr:function(a){return a.replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},getNextNumber:function(){var a=0;return function(){return++a}}(),getNextId:function(){return"cke_"+this.getNextNumber()},override:function(a,b){return b(a)},setTimeout:function(a,b,c,d,e){return e||(e=window),c||(c=e),e.setTimeout(function(){d?a.apply(c,[].concat(d)):a.apply(c)},b||0)},trim:function(){var a=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(b){return b.replace(a,"")}}(),ltrim:function(){var a=/^[ \t\n\r]+/g;return function(b){return b.replace(a,"")}}(),rtrim:function(){var a=/[ \t\n\r]+$/g;return function(b){return b.replace(a,"")}}(),indexOf:Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},bind:function(a,b){return function(){return a.apply(b,arguments)}},createClass:function(b){var c=b.$,d=b.base,e=b.privates||b._,f=b.proto,g=b.statics;if(e){var h=c;c=function(){var b=this,c=b._||(b._={});for(var d in e){var f=e[d];c[d]=typeof f=="function"?a.tools.bind(f,b):f}h.apply(b,arguments)}}return d&&(c.prototype=this.prototypedCopy(d.prototype),c.prototype.constructor=c,c.prototype.base=function(){this.base=d.prototype.base,d.apply(this,arguments),this.base=arguments.callee}),f&&this.extend(c.prototype,f,!0),g&&this.extend(c,g,!0),c},addFunction:function(a,c){return b.push(function(){return a.apply(c||this,arguments)})-1},removeFunction:function(a){b[a]=null},callFunction:function(a){var c=b[a];return c&&c.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){return function(a){return a+(!a||isNaN(Number(a))?"":"px")}}(),convertToPx:function(){var b;return function(c){return b||(b=d.element.createFromHtml('<div style="position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"></div>',a.document),a.document.getBody().append(b)),/%$/.test(c)?c:(b.setStyle("width",c),b.$.clientWidth)}}(),repeat:function(a,b){return(new Array(b+1)).join(a)},tryThese:function(){var a;for(var b=0,c=arguments.length;b<c;b++){var d=arguments[b];try{a=d();break}catch(e){}}return a},genKey:function(){return Array.prototype.slice.call(arguments).join("-")}}})();var e=a.tools;a.dtd=function(){var a=e.extend,b={isindex:1,fieldset:1},c={input:1,button:1,select:1,textarea:1,label:1},d=a({a:1},c),f=a({iframe:1},d),g={hr:1,ul:1,menu:1,div:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,mark:1,time:1,meter:1,command:1,keygen:1,output:1,progress:1,audio:1,video:1,details:1,datagrid:1,datalist:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1},h={ins:1,del:1,script:1,style:1},i=a({b:1,acronym:1,bdo:1,"var":1,"#":1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1,wbr:1},h),j=a({sub:1,img:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1,mark:1},i),k=a({p:1},j),l=a({iframe:1},j,c),m={img:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,"#":1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,"var":1,div:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,mark:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,audio:1,video:1,details:1,datagrid:1,datalist:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,address:1,q:1,pre:1,p:1,em:1,dfn:1},n=a({a:1},l),o={tr:1},p={"#":1},q=a({param:1},m),r=a({form:1},b,f,g,k),s={li:1},t={style:1,script:1},u={base:1,link:1,meta:1,title:1},v=a(u,t),w={head:1,body:1},x={html:1},y={address:1,blockquote:1,center:1,dir:1,div:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,audio:1,video:1,details:1,datagrid:1,datalist:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1};return{$nonBodyContent:a(x,w,u),$block:y,$blockLimit:{body:1,div:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,audio:1,video:1,details:1,datagrid:1,datalist:1,td:1,th:1,caption:1,form:1},$inline:n,$body:a({script:1,style:1},y),$cdata:{script:1,style:1},$empty:{area:1,base:1,br:1,col:1,hr:1,img:1,input:1,link:1,meta:1,param:1,wbr:1},$listItem:{dd:1,dt:1,li:1},$list:{ul:1,ol:1,dl:1},$nonEditable:{applet:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,script:1,textarea:1,param:1,audio:1,video:1},$captionBlock:{caption:1,legend:1},$removeEmpty:{abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1,mark:1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},html:w,head:v,style:p,script:p,body:r,base:{},link:{},meta:{},title:p,col:{},tr:{td:1,th:1},img:{},colgroup:{col:1},noscript:r,td:r,br:{},wbr:{},th:r,center:r,kbd:n,button:a(k,g),basefont:{},h5:n,h4:n,samp:n,h6:n,ol:s,h1:n,h3:n,option:p,h2:n,form:a(b,f,g,k),select:{optgroup:1,option:1},font:n,ins:n,menu:s,abbr:n,label:n,table:{thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1},code:n,tfoot:o,cite:n,li:r,input:{},iframe:r,strong:n,textarea:p,noframes:r,big:n,small:n,span:n,hr:{},dt:n,sub:n,optgroup:{option:1},param:{},bdo:n,"var":n,div:r,object:q,sup:n,dd:r,strike:n,area:{},dir:s,map:a({area:1,form:1,p:1},b,h,g),applet:q,dl:{dt:1,dd:1},del:n,isindex:{},fieldset:a({legend:1},m),thead:o,ul:s,acronym:n,b:n,a:l,blockquote:r,caption:n,i:n,u:n,tbody:o,s:n,address:a(f,k),tt:n,legend:n,q:n,pre:a(i,d),p:n,em:n,dfn:n,section:r,header:r,footer:r,nav:r,article:r,aside:r,figure:r,dialog:r,hgroup:r,mark:n,time:n,meter:n,menu:n,command:n,keygen:n,output:n,progress:q,audio:q,video:q,details:q,datagrid:q,datalist:q}}();var f=a.dtd;d.event=function(a){this.$=a},d.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var a=this,b=a.getKey();if(a.$.ctrlKey||a.$.metaKey)b+=1114112;return a.$.shiftKey&&(b+=2228224),a.$.altKey&&(b+=4456448),b},preventDefault:function(a){var b=this.$;b.preventDefault?b.preventDefault():b.returnValue=!1,a&&this.stopPropagation()},stopPropagation:function(){var a=this.$;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},getTarget:function(){var a=this.$.target||this.$.srcElement;return a?new d.node(a):null}},a.CTRL=1114112,a.SHIFT=2228224,a.ALT=4456448,d.domObject=function(a){a&&(this.$=a)},d.domObject.prototype=function(){var b=function(b,c){return function(e){typeof a!="undefined"&&b.fire(c,new d.event(e))}};return{getPrivate:function(){var a;return(a=this.getCustomData("_"))||this.setCustomData("_",a={}),a},on:function(c){var d=this,e=d.getCustomData("_cke_nativeListeners");e||(e={},d.setCustomData("_cke_nativeListeners",e));if(!e[c]){var f=e[c]=b(d,c);d.$.attachEvent?d.$.attachEvent("on"+c,f):d.$.addEventListener&&d.$.addEventListener(c,f,!!a.event.useCapture)}return a.event.prototype.on.apply(d,arguments)},removeListener:function(b){var c=this;a.event.prototype.removeListener.apply(c,arguments);if(!c.hasListeners(b)){var d=c.getCustomData("_cke_nativeListeners"),e=d&&d[b];e&&(c.$.detachEvent?c.$.detachEvent("on"+b,e):c.$.removeEventListener&&c.$.removeEventListener(b,e,!1),delete d[b])}},removeAllListeners:function(){var a=this,b=a.getCustomData("_cke_nativeListeners");for(var c in b){var d=b[c];a.$.detachEvent?a.$.detachEvent("on"+c,d):a.$.removeEventListener&&a.$.removeEventListener(c,d,!1),delete b[c]}}}}(),function(b){var c={};a.on("reset",function(){c={}}),b.equals=function(a){return a&&a.$===this.$},b.setCustomData=function(a,b){var d=this.getUniqueId(),e=c[d]||(c[d]={});return e[a]=b,this},b.getCustomData=function(a){var b=this.$["data-cke-expando"],d=b&&c[b];return d&&d[a]},b.removeCustomData=function(a){var b=this.$["data-cke-expando"],d=b&&c[b],e=d&&d[a];return typeof e!="undefined"&&delete d[a],e||null},b.clearCustomData=function(){this.removeAllListeners();var a=this.$["data-cke-expando"];a&&delete c[a]},b.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=e.getNextNumber())},a.event.implementOn(b)}(d.domObject.prototype),d.window=function(a){d.domObject.call(this,a)},d.window.prototype=new d.domObject,e.extend(d.window.prototype,{focus:function(){b.webkit&&this.$.parent&&this.$.parent.focus(),this.$.focus()},getViewPaneSize:function(){var a=this.$.document,b=a.compatMode=="CSS1Compat";return{width:(b?a.documentElement.clientWidth:a.body.clientWidth)||0,height:(b?a.documentElement.clientHeight:a.body.clientHeight)||0}},getScrollPosition:function(){var a=this.$;if("pageXOffset"in a)return{x:a.pageXOffset||0,y:a.pageYOffset||0};var b=a.document;return{x:b.documentElement.scrollLeft||b.body.scrollLeft||0,y:b.documentElement.scrollTop||b.body.scrollTop||0}}}),d.document=function(a){d.domObject.call(this,a)};var g=d.document;g.prototype=new d.domObject,e.extend(g.prototype,{appendStyleSheet:function(a){if(this.$.createStyleSheet)this.$.createStyleSheet(a);else{var b=new d.element("link");b.setAttributes({rel:"stylesheet",type:"text/css",href:a}),this.getHead().append(b)}},appendStyleText:function(a){var b=this;if(b.$.createStyleSheet){var c=b.$.createStyleSheet("");c.cssText=a}else{var e=new d.element("style",b);e.append(new d.text(a,b)),b.getHead().append(e)}},createElement:function(a,b){var c=new d.element(a,this);return b&&(b.attributes&&c.setAttributes(b.attributes),b.styles&&c.setStyles(b.styles)),c},createText:function(a){return new d.text(a,this)},focus:function(){this.getWindow().focus()},getById:function(a){var b=this.$.getElementById(a);return b?new d.element(b):null},getByAddress:function(a,b){var c=this.$.documentElement;for(var e=0;c&&e<a.length;e++){var f=a[e];if(!b){c=c.childNodes[f];continue}var g=-1;for(var h=0;h<c.childNodes.length;h++){var i=c.childNodes[h];if(b===!0&&i.nodeType==3&&i.previousSibling&&i.previousSibling.nodeType==3)continue;g++;if(g==f){c=i;break}}}return c?new d.node(c):null},getElementsByTag:function(a,b){return(!c||document.documentMode>8)&&b&&(a=b+":"+a),new d.nodeList(this.$.getElementsByTagName(a))},getHead:function(){var a=this.$.getElementsByTagName("head")[0];return a?a=new d.element(a):a=this.getDocumentElement().append(new d.element("head"),!0),(this.getHead=function(){return a})()},getBody:function(){var a=new d.element(this.$.body);return(this.getBody=function(){return a})()},getDocumentElement:function(){var a=new d.element(this.$.documentElement);return(this.getDocumentElement=function(){return a})()},getWindow:function(){var a=new d.window(this.$.parentWindow||this.$.defaultView);return(this.getWindow=function(){return a})()},write:function(a){var c=this;c.$.open("text/html","replace"),b.isCustomDomain()&&(c.$.domain=document.domain),c.$.write(a),c.$.close()}}),d.node=function(a){if(a){switch(a.nodeType){case 9:return new g(a);case 1:return new d.element(a);case 3:return new d.text(a)}d.domObject.call(this,a)}return this},d.node.prototype=new d.domObject,a.NODE_ELEMENT=1,a.NODE_DOCUMENT=9,a.NODE_TEXT=3,a.NODE_COMMENT=8,a.NODE_DOCUMENT_FRAGMENT=11,a.POSITION_IDENTICAL=0,a.POSITION_DISCONNECTED=1,a.POSITION_FOLLOWING=2,a.POSITION_PRECEDING=4,a.POSITION_IS_CONTAINED=8,a.POSITION_CONTAINS=16,e.extend(d.node.prototype,{appendTo:function(a,b){return a.append(this,b),a},clone:function(a,b){var c=this.$.cloneNode(a),e=function(c){if(c.nodeType!=1)return;b||c.removeAttribute("id",!1),c.removeAttribute("data-cke-expando",!1);if(a){var d=c.childNodes;for(var f=0;f<d.length;f++)e(d[f])}};return e(c),new d.node(c)},hasPrevious:function(){return!!this.$.previousSibling},hasNext:function(){return!!this.$.nextSibling},insertAfter:function(a){return a.$.parentNode.insertBefore(this.$,a.$.nextSibling),a},insertBefore:function(a){return a.$.parentNode.insertBefore(this.$,a.$),a},insertBeforeMe:function(a){return this.$.parentNode.insertBefore(a.$,this.$),a},getAddress:function(a){var b=[],c=this.getDocument().$.documentElement,d=this.$;while(d&&d!=c){var e=d.parentNode;e&&b.unshift(this.getIndex.call({$:d},a)),d=e}return b},getDocument:function(){return new g(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(a){var b=this.$,c=0;while(b=b.previousSibling){if(a&&b.nodeType==3&&(!b.nodeValue.length||b.previousSibling&&b.previousSibling.nodeType==3))continue;c++}return c},getNextSourceNode:function(a,b,c){if(c&&!c.call){var d=c;c=function(a){return!a.equals(d)}}var e=!a&&this.getFirst&&this.getFirst(),f;if(!e){if(this.type==1&&c&&c(this,!0)===!1)return null;e=this.getNext()}while(!e&&(f=(f||this).getParent())){if(c&&c(f,!0)===!1)return null;e=f.getNext()}return e?c&&c(e)===!1?null:b&&b!=e.type?e.getNextSourceNode(!1,b,c):e:null},getPreviousSourceNode:function(a,b,c){if(c&&!c.call){var d=c;c=function(a){return!a.equals(d)}}var e=!a&&this.getLast&&this.getLast(),f;if(!e){if(this.type==1&&c&&c(this,!0)===!1)return null;e=this.getPrevious()}while(!e&&(f=(f||this).getParent())){if(c&&c(f,!0)===!1)return null;e=f.getPrevious()}return e?c&&c(e)===!1?null:b&&e.type!=b?e.getPreviousSourceNode(!1,b,c):e:null},getPrevious:function(a){var b=this.$,c;do b=b.previousSibling,c=b&&new d.node(b);while(c&&a&&!a(c));return c},getNext:function(a){var b=this.$,c;do b=b.nextSibling,c=b&&new d.node(b);while(c&&a&&!a(c));return c},getParent:function(){var a=this.$.parentNode;return a&&a.nodeType==1?new d.node(a):null},getParents:function(a){var b=this,c=[];do c[a?"push":"unshift"](b);while(b=b.getParent());return c},getCommonAncestor:function(a){var b=this;if(a.equals(b))return b;if(a.contains&&a.contains(b))return a;var c=b.contains?b:b.getParent();do if(c.contains(a))return c;while(c=c.getParent());return null},getPosition:function(a){var b=this.$,c=a.$;if(b.compareDocumentPosition)return b.compareDocumentPosition(c);if(b==c)return 0;if(this.type==1&&a.type==1){if(b.contains){if(b.contains(c))return 20;if(c.contains(b))return 10}if("sourceIndex"in b)return b.sourceIndex<0||c.sourceIndex<0?1:b.sourceIndex<c.sourceIndex?4:2}var d=this.getAddress(),e=a.getAddress(),f=Math.min(d.length,e.length);for(var g=0;g<=f-1;g++)if(d[g]!=e[g]){if(g<f)return d[g]<e[g]?4:2;break}return d.length<e.length?20:10},getAscendant:function(a,b){var c=this.$,e;b||(c=c.parentNode);while(c){if(c.nodeName&&(e=c.nodeName.toLowerCase(),typeof a=="string"?e==a:e in a))return new d.node(c);c=c.parentNode}return null},hasAscendant:function(a,b){var c=this.$;b||(c=c.parentNode);while(c){if(c.nodeName&&c.nodeName.toLowerCase()==a)return!0;c=c.parentNode}return!1},move:function(a,b){a.append(this.remove(),b)},remove:function(a){var b=this.$,c=b.parentNode;if(c){if(a)for(var d;d=b.firstChild;)c.insertBefore(b.removeChild(d),b);c.removeChild(b)}return this},replace:function(a){this.insertBefore(a),a.remove()},trim:function(){this.ltrim(),this.rtrim()},ltrim:function(){var a=this,b;while(a.getFirst&&(b=a.getFirst())){if(b.type==3){var c=e.ltrim(b.getText()),d=b.getLength();if(!c){b.remove();continue}c.length<d&&(b.split(d-c.length),a.$.removeChild(a.$.firstChild))}break}},rtrim:function(){var a=this,d;while(a.getLast&&(d=a.getLast())){if(d.type==3){var f=e.rtrim(d.getText()),g=d.getLength();if(!f){d.remove();continue}f.length<g&&(d.split(f.length),a.$.lastChild.parentNode.removeChild(a.$.lastChild))}break}!c&&!b.opera&&(d=a.$.lastChild,d&&d.type==1&&d.nodeName.toLowerCase()=="br"&&d.parentNode.removeChild(d))},isReadOnly:function(){var a=this;this.type!=1&&(a=this.getParent());if(a&&typeof a.$.isContentEditable!="undefined")return!a.$.isContentEditable&&!a.data("cke-editable");var b=a;while(b){if(b.is("body")||!!b.data("cke-editable"))break;if(b.getAttribute("contentEditable")=="false")return!0;if(b.getAttribute("contentEditable")=="true")break;b=b.getParent()}return!1}}),d.nodeList=function(a){this.$=a},d.nodeList.prototype={count:function(){return this.$.length},getItem:function(a){var b=this.$[a];return b?new d.node(b):null}},d.element=function(a,b){typeof a=="string"&&(a=(b?b.$:document).createElement(a)),d.domObject.call(this,a)};var h=d.element;h.get=function(a){return a&&(a.$?a:new h(a))},h.prototype=new d.node,h.createFromHtml=function(a,b){var c=new h("div",b);return c.setHtml(a),c.getFirst().remove()},h.setMarker=function(a,b,c,d){var f=b.getCustomData("list_marker_id")||b.setCustomData("list_marker_id",e.getNextNumber()).getCustomData("list_marker_id"),g=b.getCustomData("list_marker_names")||b.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");return a[f]=b,g[c]=1,b.setCustomData(c,d)},h.clearAllMarkers=function(a){for(var b in a)h.clearMarkers(a,a[b],1)},h.clearMarkers=function(a,b,c){var d=b.getCustomData("list_marker_names"),e=b.getCustomData("list_marker_id");for(var f in d)b.removeCustomData(f);b.removeCustomData("list_marker_names"),c&&(b.removeCustomData("list_marker_id"),delete a[e])},e.extend(h.prototype,{type:1,addClass:function(a){var b=this.$.className;if(b){var c=new RegExp("(?:^|\\s)"+a+"(?:\\s|$)","");c.test(b)||(b+=" "+a)}this.$.className=b||a},removeClass:function(a){var b=this.getAttribute("class");if(b){var c=new RegExp("(?:^|\\s+)"+a+"(?=\\s|$)","i");c.test(b)&&(b=b.replace(c,"").replace(/^\s+/,""),b?this.setAttribute("class",b):this.removeAttribute("class"))}},hasClass:function(a){var b=new RegExp("(?:^|\\s+)"+a+"(?=\\s|$)","");return b.test(this.getAttribute("class"))},append:function(a,b){var c=this;return typeof a=="string"&&(a=c.getDocument().createElement(a)),b?c.$.insertBefore(a.$,c.$.firstChild):c.$.appendChild(a.$),a},appendHtml:function(a){var b=this;if(!b.$.childNodes.length)b.setHtml(a);else{var c=new h("div",b.getDocument());c.setHtml(a),c.moveChildren(b)}},appendText:function(a){this.$.text!=undefined?this.$.text+=a:this.append(new d.text(a))},appendBogus:function(){var a=this,c=a.getLast();while(c&&c.type==3&&!e.rtrim(c.getText()))c=c.getPrevious();if(!c||!c.is||!c.is("br")){var d=b.opera?a.getDocument().createText(""):a.getDocument().createElement("br");b.gecko&&d.setAttribute("type","_moz"),a.append(d)}},breakParent:function(a){var b=this,c=new d.range(b.getDocument());c.setStartAfter(b),c.setEndAfter(a);var e=c.extractContents();c.insertNode(b.remove()),e.insertAfterNode(b)},contains:c||b.webkit?function(a){var b=this.$;return a.type!=1?b.contains(a.getParent().$):b!=a.$&&b.contains(a.$)}:function(a){return!!(this.$.compareDocumentPosition(a.$)&16)},focus:function(){function a(){try{this.$.focus()}catch(a){}}return function(b){b?e.setTimeout(a,100,this):a.call(this)}}(),getHtml:function(){var a=this.$.innerHTML;return c?a.replace(/<\?[^>]*>/g,""):a},getOuterHtml:function(){var a=this;if(a.$.outerHTML)return a.$.outerHTML.replace(/<\?[^>]*>/,"");var b=a.$.ownerDocument.createElement("div");return b.appendChild(a.$.cloneNode(!0)),b.innerHTML},setHtml:function(a){return this.$.innerHTML=a},setText:function(a){return h.prototype.setText=this.$.innerText!=undefined?function(a){return this.$.innerText=a}:function(a){return this.$.textContent=a},this.setText(a)},getAttribute:function(){var a=function(a){return this.$.getAttribute(a,2)};return c&&(b.ie7Compat||b.ie6Compat)?function(b){var c=this;switch(b){case"class":b="className";break;case"http-equiv":b="httpEquiv";break;case"name":return c.$.name;case"tabindex":var d=a.call(c,b);return d!==0&&c.$.tabIndex===0&&(d=null),d;case"checked":var e=c.$.attributes.getNamedItem(b),f=e.specified?e.nodeValue:c.$.checked;return f?"checked":null;case"hspace":case"value":return c.$[b];case"style":return c.$.style.cssText}return a.call(c,b)}:a}(),getChildren:function(){return new d.nodeList(this.$.childNodes)},getComputedStyle:c?function(a){return this.$.currentStyle[e.cssStyleToDomStyle(a)]}:function(a){return this.getWindow().$.getComputedStyle(this.$,"").getPropertyValue(a)},getDtd:function(){var a=f[this.getName()];return this.getDtd=function(){return a},a},getElementsByTag:g.prototype.getElementsByTag,getTabIndex:c?function(){var a=this.$.tabIndex;return a===0&&!f.$tabIndex[this.getName()]&&parseInt(this.getAttribute("tabindex"),10)!==0&&(a=-1),a}:b.webkit?function(){var a=this.$.tabIndex;return a==undefined&&(a=parseInt(this.getAttribute("tabindex"),10),isNaN(a)&&(a=-1)),a}:function(){return this.$.tabIndex},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var a=this.$.nodeName.toLowerCase();if(c&&!(document.documentMode>8)){var b=this.$.scopeName;b!="HTML"&&(a=b.toLowerCase()+":"+a)}return(this.getName=function(){return a})()},getValue:function(){return this.$.value},getFirst:function(a){var b=this.$.firstChild,c=b&&new d.node(b);return c&&a&&!a(c)&&(c=c.getNext(a)),c},getLast:function(a){var b=this.$.lastChild,c=b&&new d.node(b);return c&&a&&!a(c)&&(c=c.getPrevious(a)),c},getStyle:function(a){return this.$.style[e.cssStyleToDomStyle(a)]},is:function(){var a=this.getName();for(var b=0;b<arguments.length;b++)if(arguments[b]==a)return!0;return!1},isEditable:function(a){var b=this,c=b.getName();if(b.isReadOnly()||b.getComputedStyle("display")=="none"||b.getComputedStyle("visibility")=="hidden"||f.$nonEditable[c])return!1;if(a!==!1){var d=f[c]||f.span;return d&&d["#"]}return!0},isIdentical:function(a){if(this.getName()!=a.getName())return!1;var b=this.$.attributes,d=a.$.attributes,e=b.length,f=d.length;for(var g=0;g<e;g++){var h=b[g];if(h.nodeName=="_moz_dirty")continue;if((!c||h.specified&&h.nodeName!="data-cke-expando")&&h.nodeValue!=a.getAttribute(h.nodeName))return!1}if(c)for(g=0;g<f;g++){h=d[g];if(h.specified&&h.nodeName!="data-cke-expando"&&h.nodeValue!=this.getAttribute(h.nodeName))return!1}return!0},isVisible:function(){var c=this,d=(c.$.offsetHeight||c.$.offsetWidth)&&c.getComputedStyle("visibility")!="hidden",e,f;return d&&(b.webkit||b.opera)&&(e=c.getWindow(),!e.equals(a.document.getWindow())&&(f=e.$.frameElement)&&(d=(new h(f)).isVisible())),!!d},isEmptyInlineRemoveable:function(){if(!f.$removeEmpty[this.getName()])return!1;var a=this.getChildren();for(var b=0,c=a.count();b<c;b++){var d=a.getItem(b);if(d.type==1&&d.data("cke-bookmark"))continue;if(d.type==1&&!d.isEmptyInlineRemoveable()||d.type==3&&e.trim(d.getText()))return!1}return!0},hasAttributes:c&&(b.ie7Compat||b.ie6Compat)?function(){var a=this.$.attributes;for(var b=0;b<a.length;b++){var c=a[b];switch(c.nodeName){case"class":if(this.getAttribute("class"))return!0;case"data-cke-expando":continue;default:if(c.specified)return!0}}return!1}:function(){var a=this.$.attributes,b=a.length,c={"data-cke-expando":1,_moz_dirty:1};return b>0&&(b>2||!c[a[0].nodeName]||b==2&&!c[a[1].nodeName])},hasAttribute:function(){function a(a){var b=this.$.attributes.getNamedItem(a);return!!b&&!!b.specified}return c&&b.version<8?function(b){return b=="name"?!!this.$.name:a.call(this,b)}:a}(),hide:function(){this.setStyle("display","none")},moveChildren:function(a,b){var c=this.$;a=a.$;if(c==a)return;var d;if(b)while(d=c.lastChild)a.insertBefore(c.removeChild(d),a.firstChild);else while(d=c.firstChild)a.appendChild(c.removeChild(d))},mergeSiblings:function(){function a(a,b,c){if(b&&b.type==1){var d=[];while(b.data("cke-bookmark")||b.isEmptyInlineRemoveable()){d.push(b),b=c?b.getNext():b.getPrevious();if(!b||b.type!=1)return}if(a.isIdentical(b)){var e=c?a.getLast():a.getFirst();while(d.length)d.shift().move(a,!c);b.moveChildren(a,!c),b.remove(),e&&e.type==1&&e.mergeSiblings()}}}return function(b){var c=this;if(b!==!1&&!f.$removeEmpty[c.getName()]&&!c.is("a"))return;a(c,c.getNext(),!0),a(c,c.getPrevious())}}(),show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var a=function(a,b){return this.$.setAttribute(a,b),this};return c&&(b.ie7Compat||b.ie6Compat)?function(b,c){var d=this;return b=="class"?d.$.className=c:b=="style"?d.$.style.cssText=c:b=="tabindex"?d.$.tabIndex=c:b=="checked"?d.$.checked=c:a.apply(d,arguments),d}:b.ie8Compat&&b.secure?function(b,c){if(b=="src"&&c.match(/^http:\/\//))try{a.apply(this,arguments)}catch(d){}else a.apply(this,arguments);return this}:a}(),setAttributes:function(a){for(var b in a)this.setAttribute(b,a[b]);return this},setValue:function(a){return this.$.value=a,this},removeAttribute:function(){var a=function(a){this.$.removeAttribute(a)};return c&&(b.ie7Compat||b.ie6Compat)?function(b){b=="class"?b="className":b=="tabindex"&&(b="tabIndex"),a.call(this,b)}:a}(),removeAttributes:function(a){if(e.isArray(a))for(var b=0;b<a.length;b++)this.removeAttribute(a[b]);else for(var c in a)a.hasOwnProperty(c)&&this.removeAttribute(c)},removeStyle:function(a){var b=this;b.setStyle(a,""),b.$.style.removeAttribute&&b.$.style.removeAttribute(e.cssStyleToDomStyle(a)),b.$.style.cssText||b.removeAttribute("style")},setStyle:function(a,b){return this.$.style[e.cssStyleToDomStyle(a)]=b,this},setStyles:function(a){for(var b in a)this.setStyle(b,a[b]);return this},setOpacity:function(a){c?(a=Math.round(a*100),this.setStyle("filter",a>=100?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+a+")")):this.setStyle("opacity",a)},unselectable:b.gecko?function(){this.$.style.MozUserSelect="none",this.on("dragstart",function(a){a.data.preventDefault()})}:b.webkit?function(){this.$.style.KhtmlUserSelect="none",this.on("dragstart",function(a){a.data.preventDefault()})}:function(){if(c||b.opera){var a=this.$,d,e=0;a.unselectable="on";while(d=a.all[e++])switch(d.tagName.toLowerCase()){case"iframe":case"textarea":case"input":case"select":break;default:d.unselectable="on"}}},getPositionedAncestor:function(){var a=this;while(a.getName()!="html"){if(a.getComputedStyle("position")!="static")return a;a=a.getParent()}return null},getDocumentPosition:function(a){var d=this,e=0,f=0,g=d.getDocument(),i=g.getBody(),j=g.$.compatMode=="BackCompat";if(document.documentElement.getBoundingClientRect){var k=d.$.getBoundingClientRect(),l=g.$,m=l.documentElement,n=m.clientTop||i.$.clientTop||0,o=m.clientLeft||i.$.clientLeft||0,p=!0;if(c){var q=g.getDocumentElement().contains(d),r=g.getBody().contains(d);p=j&&r||!j&&q}p&&(e=k.left+(!j&&m.scrollLeft||i.$.scrollLeft),e-=o,f=k.top+(!j&&m.scrollTop||i.$.scrollTop),f-=n)}else{var s=d,t=null,u;while(s&&s.getName()!="body"&&s.getName()!="html"){e+=s.$.offsetLeft-s.$.scrollLeft,f+=s.$.offsetTop-s.$.scrollTop,s.equals(d)||(e+=s.$.clientLeft||0,f+=s.$.clientTop||0);var v=t;while(v&&!v.equals(s))e-=v.$.scrollLeft,f-=v.$.scrollTop,v=v.getParent();t=s,s=(u=s.$.offsetParent)?new h(u):null}}if(a){var w=d.getWindow(),x=a.getWindow();if(!w.equals(x)&&w.$.frameElement){var y=(new h(w.$.frameElement)).getDocumentPosition(a);e+=y.x,f+=y.y}}return document.documentElement.getBoundingClientRect||b.gecko&&!j&&(e+=d.$.clientLeft?1:0,f+=d.$.clientTop?1:0),{x:e,y:f}},scrollIntoView:function(a){var b=this,c=b.getWindow(),d=c.getViewPaneSize().height,e=d*-1;a?e+=d:(e+=b.$.offsetHeight||0,e+=parseInt(b.getComputedStyle("marginBottom")||0,10)||0);var f=b.getDocumentPosition();e+=f.y,e=e<0?0:e;var g=c.getScrollPosition().y;(e>g||e<g-d)&&c.$.scrollTo(0,e)},setState:function(a){var b=this;switch(a){case 1:b.addClass("cke_on"),b.removeClass("cke_off"),b.removeClass("cke_disabled");break;case 0:b.addClass("cke_disabled"),b.removeClass("cke_off"),b.removeClass("cke_on");break;default:b.addClass("cke_off"),b.removeClass("cke_on"),b.removeClass("cke_disabled")}},getFrameDocument:function(){var a=this.$;try{a.contentWindow.document}catch(d){a.src=a.src,c&&b.version<7&&window.showModalDialog('javascript:document.write("<script>window.setTimeout(function(){window.close();},50);</script>")')}return a&&new g(a.contentWindow.document)},copyAttributes:function(a,b){var d=this,e=d.$.attributes;b=b||{};for(var f=0;f<e.length;f++){var g=e[f],h=g.nodeName.toLowerCase(),i;if(h in b)continue;if(h=="checked"&&(i=d.getAttribute(h)))a.setAttribute(h,i);else if(g.specified||c&&g.nodeValue&&h=="value")i=d.getAttribute(h),i===null&&(i=g.nodeValue),a.setAttribute(h,i)}d.$.style.cssText!==""&&(a.$.style.cssText=d.$.style.cssText)},renameNode:function(a){var b=this;if(b.getName()==a)return;var c=b.getDocument(),d=new h(a,c);b.copyAttributes(d),b.moveChildren(d),b.getParent()&&b.$.parentNode.replaceChild(d.$,b.$),d.$["data-cke-expando"]=b.$["data-cke-expando"],b.$=d.$},getChild:function(a){var b=this.$;if(!a.slice)b=b.childNodes[a];else while(a.length>0&&b)b=b.childNodes[a.shift()];return b?new d.node(b):null},getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){this.on("contextmenu",function(a){a.data.getTarget().hasClass("cke_enable_context_menu")||a.data.preventDefault()})},getDirection:function(a){var b=this;return a?b.getComputedStyle("direction")||b.getDirection()||b.getDocument().$.dir||b.getDocument().getBody().getDirection(1):b.getStyle("direction")||b.getAttribute("dir")},data:function(a,b){return a="data-"+a,b===undefined?this.getAttribute(a):(b===!1?this.removeAttribute(a):this.setAttribute(a,b),null)}}),function(){function d(b){var c=0;for(var d=0,e=a[b].length;d<e;d++)c+=parseInt(this.getComputedStyle(a[b][d])||0,10)||0;return c}var a={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};h.prototype.setSize=function(a,e,f){typeof e=="number"&&(f&&(!c||!b.quirks)&&(e-=d.call(this,a)),this.setStyle(a,e+"px"))},h.prototype.getSize=function(a,b){var c=Math.max(this.$["offset"+e.capitalize(a)],this.$["client"+e.capitalize(a)])||0;return b&&(c-=d.call(this,a)),c}}(),a.command=function(b,c){this.uiItems=[],this.exec=function(a){return this.state==0?!1:(this.editorFocus&&b.focus(),c.exec.call(this,b,a)!==!1)},e.extend(this,c,{modes:{wysiwyg:1},editorFocus:1,state:2}),a.event.call(this)},a.command.prototype={enable:function(){var a=this;a.state==0&&a.setState(!a.preserveState||typeof a.previousState=="undefined"?2:a.previousState)},disable:function(){this.setState(0)},setState:function(a){var b=this;return b.state==a?!1:(b.previousState=b.state,b.state=a,b.fire("state"),!0)},toggleState:function(){var a=this;a.state==2?a.setState(1):a.state==1&&a.setState(2)}},a.event.implementOn(a.command.prototype,!0),a.ENTER_P=1,a.ENTER_BR=2,a.ENTER_DIV=3,a.config={customConfig:"config.js",autoUpdateElement:!0,baseHref:"",contentsCss:a.basePath+"contents.css",contentsLangDirection:"ui",contentsLanguage:"",language
:"",defaultLanguage:"en",enterMode:1,forceEnterMode:!1,shiftEnterMode:2,corePlugins:"",docType:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">',bodyId:"",bodyClass:"",fullPage:!1,height:200,plugins:"about,a11yhelp,basicstyles,bidi,blockquote,button,clipboard,colorbutton,colordialog,contextmenu,dialogadvtab,div,elementspath,enterkey,entities,filebrowser,find,flash,font,format,forms,horizontalrule,htmldataprocessor,iframe,image,indent,justify,keystrokes,link,list,liststyle,maximize,newpage,pagebreak,pastefromword,pastetext,popup,preview,print,removeformat,resize,save,scayt,smiley,showblocks,showborders,sourcearea,stylescombo,table,tabletools,specialchar,tab,templates,toolbar,undo,wysiwygarea,wsc",extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,theme:"default",skin:"kama",width:"",baseFloatZIndex:1e4};var i=a.config;a.focusManager=function(a){return a.focusManager?a.focusManager:(this.hasFocus=!1,this._={editor:a},this)},a.focusManager.prototype={focus:function(){var b=this;b._.timer&&clearTimeout(b._.timer);if(!b.hasFocus){a.currentInstance&&a.currentInstance.focusManager.forceBlur();var c=b._.editor;c.container.getChild(1).addClass("cke_focus"),b.hasFocus=!0,c.fire("focus")}},blur:function(){var a=this;a._.timer&&clearTimeout(a._.timer),a._.timer=setTimeout(function(){delete a._.timer,a.forceBlur()},100)},forceBlur:function(){if(this.hasFocus){var a=this._.editor;a.container.getChild(1).removeClass("cke_focus"),this.hasFocus=!1,a.fire("blur")}}},function(){var b={};a.lang={languages:{af:1,ar:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,lt:1,lv:1,mn:1,ms:1,nb:1,nl:1,no:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,sk:1,sl:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,uk:1,vi:1,"zh-cn":1,zh:1},load:function(b,c,d){if(!b||!a.lang.languages[b])b=this.detect(c,b);this[b]?d(b,this[b]):a.scriptLoader.load(a.getUrl("lang/"+b+".js"),function(){d(b,this[b])},this)},detect:function(b,c){var d=this.languages;c=c||navigator.userLanguage||navigator.language||b;var e=c.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),f=e[1],g=e[2];return d[f+"-"+g]?f=f+"-"+g:d[f]||(f=null),a.lang.detect=f?function(){return f}:function(a){return a},f||b}}}(),a.scriptLoader=function(){var b={},d={};return{load:function(e,f,g,i){var j=typeof e=="string";j&&(e=[e]),g||(g=a);var k=e.length,l=[],m=[],n=function(a){f&&(j?f.call(g,a):f.call(g,l,m))};if(k===0){n(!0);return}var o=function(b,c){(c?l:m).push(b),--k<=0&&(i&&a.document.getDocumentElement().removeStyle("cursor"),n(c))},p=function(a,c){b[a]=1;var e=d[a];delete d[a];for(var f=0;f<e.length;f++)e[f](a,c)},q=function(e){if(b[e]){o(e,!0);return}var g=d[e]||(d[e]=[]);g.push(o);if(g.length>1)return;var i=new h("script");i.setAttributes({type:"text/javascript",src:e}),f&&(c?i.$.onreadystatechange=function(){if(i.$.readyState=="loaded"||i.$.readyState=="complete")i.$.onreadystatechange=null,p(e,!0)}:(i.$.onload=function(){setTimeout(function(){p(e,!0)},0)},i.$.onerror=function(){p(e,!1)})),i.appendTo(a.document.getHead())};i&&a.document.getDocumentElement().setStyle("cursor","wait");for(var r=0;r<k;r++)q(e[r])}}}(),a.resourceManager=function(a,b){var c=this;c.basePath=a,c.fileName=b,c.registered={},c.loaded={},c.externals={},c._={waitingList:{}}},a.resourceManager.prototype={add:function(b,c){if(this.registered[b])throw'[CKEDITOR.resourceManager.add] The resource name "'+b+'" is already registered.';a.fire(b+e.capitalize(this.fileName)+"Ready",this.registered[b]=c||{})},get:function(a){return this.registered[a]||null},getPath:function(b){var c=this.externals[b];return a.getUrl(c&&c.dir||this.basePath+b+"/")},getFilePath:function(b){var c=this.externals[b];return a.getUrl(this.getPath(b)+(c&&typeof c.file=="string"?c.file:this.fileName+".js"))},addExternal:function(a,b,c){a=a.split(",");for(var d=0;d<a.length;d++){var e=a[d];this.externals[e]={dir:b,file:c}}},load:function(b,c,d){e.isArray(b)||(b=b?[b]:[]);var f=this.loaded,g=this.registered,h=[],i={},j={};for(var k=0;k<b.length;k++){var l=b[k];if(!l)continue;if(!f[l]&&!g[l]){var m=this.getFilePath(l);h.push(m),m in i||(i[m]=[]),i[m].push(l)}else j[l]=this.get(l)}a.scriptLoader.load(h,function(a,b){if(b.length)throw'[CKEDITOR.resourceManager.load] Resource name "'+i[b[0]].join(",")+'" was not found at "'+b[0]+'".';for(var e=0;e<a.length;e++){var g=i[a[e]];for(var h=0;h<g.length;h++){var k=g[h];j[k]=this.get(k),f[k]=1}}c.call(d,j)},this)}},a.plugins=new a.resourceManager("plugins/","plugin");var j=a.plugins;j.load=e.override(j.load,function(a){return function(b,c,d){var f={},g=function(b){a.call(this,b,function(a){e.extend(f,a);var b=[];for(var h in a){var i=a[h],j=i&&i.requires;if(j)for(var k=0;k<j.length;k++)f[j[k]]||b.push(j[k])}if(b.length)g.call(this,b);else{for(h in f)i=f[h],i.onLoad&&!i.onLoad._called&&(i.onLoad(),i.onLoad._called=1);c&&c.call(d||window,f)}},this)};g.call(this,b)}}),j.setLang=function(a,b,c){var d=this.get(a),f=d.langEntries||(d.langEntries={}),g=d.lang||(d.lang=[]);e.indexOf(g,b)==-1&&g.push(b),f[b]=c},a.skins=function(){var b={},c={},d=function(d,f,g,h){function k(a,b){return a.replace(/url\s*\(([\s'"]*)(.*?)([\s"']*)\)/g,function(a,c,d,e){return/^\/|^\w?:/.test(d)?a:"url("+b+c+d+e+")"})}var i=b[f];d.skin||(d.skin=i,i.init&&i.init(d));var j=function(b){for(var d=0;d<b.length;d++)b[d]=a.getUrl(c[f]+b[d])};g=i[g];var l=!g||!!g._isLoaded;if(l)h&&h();else{var m=g._pending||(g._pending=[]);m.push(h);if(m.length>1)return;var n=!g.css||!g.css.length,o=!g.js||!g.js.length,p=function(){if(n&&o){g._isLoaded=1;for(var a=0;a<m.length;a++)m[a]&&m[a]()}};if(!n){var q=g.css;if(e.isArray(q)){j(q);for(var r=0;r<q.length;r++)a.document.appendStyleSheet(q[r])}else q=k(q,a.getUrl(c[f])),a.document.appendStyleText(q);g.css=q,n=1}o||(j(g.js),a.scriptLoader.load(g.js,function(){o=1,p()})),p()}};return{add:function(d,e){b[d]=e,e.skinPath=c[d]||(c[d]=a.getUrl("skins/"+d+"/"))},load:function(e,f,g){var h=e.skinName,i=e.skinPath;b[h]?d(e,h,f,g):(c[h]=i,a.scriptLoader.load(a.getUrl(i+"skin.js"),function(){d(e,h,f,g)}))}}}(),a.themes=new a.resourceManager("themes/","theme"),a.ui=function(a){return a.ui?a.ui:(this._={handlers:{},items:{},editor:a},this)};var k=a.ui;k.prototype={add:function(a,b,c){this._.items[a]={type:b,command:c.command||null,args:Array.prototype.slice.call(arguments,2)}},create:function(a){var b=this,c=b._.items[a],d=c&&b._.handlers[c.type],f=c&&c.command&&b._.editor.getCommand(c.command),g=d&&d.create.apply(b,c.args);return c&&(g=e.extend(g,b._.editor.skin[c.type],!0)),f&&f.uiItems.push(g),g},addHandler:function(a,b){this._.handlers[a]=b}},a.event.implementOn(k),function(){function s(){var a,b=this._.commands,c=this.mode;if(!c)return;for(var d in b)a=b[d],a[a.startDisabled?"disable":this.readOnly&&!a.readOnly?"disable":a.modes[c]?"enable":"disable"]()}var c=0,d=function(){var b="editor"+ ++c;return a.instances&&a.instances[b]?d():b},f={},g=function(b){var c=b.config.customConfig;if(!c)return!1;c=a.getUrl(c);var d=f[c]||(f[c]={});return d.fn?(d.fn.call(b,b.config),(a.getUrl(b.config.customConfig)==c||!g(b))&&b.fireOnce("customConfigLoaded")):a.scriptLoader.load(c,function(){a.editorConfig?d.fn=a.editorConfig:d.fn=function(){},g(b)}),!0},l=function(a,b){a.on("customConfigLoaded",function(){if(b){if(b.on)for(var c in b.on)a.on(c,b.on[c]);e.extend(a.config,b,!0),delete a.config.on}m(a)}),b&&b.customConfig!=undefined&&(a.config.customConfig=b.customConfig),g(a)||a.fireOnce("customConfigLoaded")},m=function(b){var c=b.config.skin.split(","),d=c[0],e=a.getUrl(c[1]||"skins/"+d+"/");b.skinName=d,b.skinPath=e,b.skinClass="cke_skin_"+d,b.tabIndex=b.config.tabIndex||b.element.getAttribute("tabindex")||0,b.readOnly=!!b.config.readOnly||!!b.element.getAttribute("disabled"),b.fireOnce("configLoaded"),p(b)},n=function(c){a.lang.load(c.config.language,c.config.defaultLanguage,function(a,d){c.langCode=a,c.lang=e.prototypedCopy(d),b.gecko&&b.version<10900&&c.lang.dir=="rtl"&&(c.lang.dir="ltr"),c.fire("langLoaded");var f=c.config;f.contentsLangDirection=="ui"&&(f.contentsLangDirection=c.lang.dir),o(c)})},o=function(c){var d=c.config,f=d.plugins,g=d.extraPlugins,h=d.removePlugins;if(g){var i=new RegExp("(?:^|,)(?:"+g.replace(/\s*,\s*/g,"|")+")(?=,|$)","g");f=f.replace(i,""),f+=","+g}h&&(i=new RegExp("(?:^|,)(?:"+h.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),f=f.replace(i,"")),b.air&&(f+=",adobeair"),j.load(f.split(","),function(b){var d=[],f=[],g=[];c.plugins=b;for(var h in b){var i=b[h],k=i.lang,l=j.getPath(h),m=null;i.path=l,k&&(m=e.indexOf(k,c.langCode)>=0?c.langCode:k[0],!i.langEntries||!i.langEntries[m]?g.push(a.getUrl(l+"lang/"+m+".js")):(e.extend(c.lang,i.langEntries[m]),m=null)),f.push(m),d.push(i)}a.scriptLoader.load(g,function(){var a=["beforeInit","init","afterInit"];for(var b=0;b<a.length;b++)for(var g=0;g<d.length;g++){var h=d[g];b===0&&f[g]&&h.lang&&e.extend(c.lang,h.langEntries[f[g]]),h[a[b]]&&h[a[b]](c)}c.fire("pluginsLoaded"),q(c)})})},p=function(b){a.skins.load(b,"editor",function(){n(b)})},q=function(b){var c=b.config.theme;a.themes.load(c,function(){var d=b.theme=a.themes.get(c);d.path=a.themes.getPath(c),d.build(b),b.config.autoUpdateElement&&r(b)})},r=function(a){var b=a.element;if(a.elementMode==1&&b.is("textarea")){var c=b.$.form&&new h(b.$.form);if(c){function d(){a.updateElement()}c.on("submit",d),!c.$.submit.nodeName&&!c.$.submit.length&&(c.$.submit=e.override(c.$.submit,function(b){return function(){a.updateElement(),b.apply?b.apply(this,arguments):b()}})),a.on("destroy",function(){c.removeListener("submit",d)})}}};a.editor.prototype._init=function(){var b=this,c=h.get(b._.element),f=b._.instanceConfig;delete b._.element,delete b._.instanceConfig,b._.commands={},b._.styles=[],b.element=c,b.name=c&&b.elementMode==1&&(c.getId()||c.getNameAtt())||d();if(b.name in a.instances)throw'[CKEDITOR.editor] The instance "'+b.name+'" already exists.';b.id=e.getNextId(),b.config=e.prototypedCopy(i),b.ui=new k(b),b.focusManager=new a.focusManager(b),a.fire("instanceCreated",null,b),b.on("mode",s,null,null,1),b.on("readOnly",s,null,null,1),l(b,f)}}(),e.extend(a.editor.prototype,{addCommand:function(b,c){return this._.commands[b]=new a.command(this,c)},addCss:function(a){this._.styles.push(a)},destroy:function(b){var c=this;b||c.updateElement(),c.fire("destroy"),c.theme&&c.theme.destroy(c),a.remove(c),a.fire("instanceDestroyed",null,c)},execCommand:function(a,b){var c=this.getCommand(a),d={name:a,commandData:b,command:c};if(c&&c.state!=0&&this.fire("beforeCommandExec",d)!==!0){d.returnValue=c.exec(d.commandData);if(!c.async&&this.fire("afterCommandExec",d)!==!0)return d.returnValue}return!1},getCommand:function(a){return this._.commands[a]},getData:function(){var a=this;a.fire("beforeGetData");var b=a._.data;if(typeof b!="string"){var c=a.element;c&&a.elementMode==1?b=c.is("textarea")?c.getValue():c.getHtml():b=""}return b={dataValue:b},a.fire("getData",b),b.dataValue},getSnapshot:function(){var a=this.fire("getSnapshot");if(typeof a!="string"){var b=this.element;b&&this.elementMode==1&&(a=b.is("textarea")?b.getValue():b.getHtml())}return a},loadSnapshot:function(a){this.fire("loadSnapshot",a)},setData:function(a,b,c){b&&this.on("dataReady",function(a){a.removeListener(),b.call(a.editor)});var d={dataValue:a};!c&&this.fire("setData",d),this._.data=d.dataValue,!c&&this.fire("afterSetData",d)},setReadOnly:function(a){a=a==undefined||a,this.readOnly!=a&&(this.readOnly=a,this.fire("readOnly"))},insertHtml:function(a){this.fire("insertHtml",a)},insertText:function(a){this.fire("insertText",a)},insertElement:function(a){this.fire("insertElement",a)},checkDirty:function(){return this.mayBeDirty&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this.mayBeDirty&&(this._.previousValue=this.getSnapshot())},updateElement:function(){var a=this,b=a.element;if(b&&a.elementMode==1){var c=a.getData();a.config.htmlEncodeOutput&&(c=e.htmlEncode(c)),b.is("textarea")?b.setValue(c):b.setHtml(c)}}}),a.on("loaded",function(){var b=a.editor._pending;if(b){delete a.editor._pending;for(var c=0;c<b.length;c++)b[c]._init()}}),a.htmlParser=function(){this._={htmlPartsRegex:new RegExp("<(?:(?:\\/([^>]+)>)|(?:!--([\\S|\\s]*?)-->)|(?:([^\\s>]+)\\s*((?:(?:\"[^\"]*\")|(?:'[^']*')|[^\"'>])*)\\/?>))","g")}},function(){var b=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,c={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};a.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(a){var d=this,e,g,h=0,i;while(e=d._.htmlPartsRegex.exec(a)){var j=e.index;if(j>h){var k=a.substring(h,j);i?i.push(k):d.onText(k)}h=d._.htmlPartsRegex.lastIndex;if(g=e[1]){g=g.toLowerCase(),i&&f.$cdata[g]&&(d.onCDATA(i.join("")),i=null);if(!i){d.onTagClose(g);continue}}if(i){i.push(e[0]);continue}if(g=e[3]){g=g.toLowerCase();if(/="/.test(g))continue;var l={},n,o=e[4],p=!!o&&o.charAt(o.length-1)=="/";if(o)while(n=b.exec(o)){var q=n[1].toLowerCase(),r=n[2]||n[3]||n[4]||"";!r&&c[q]?l[q]=q:l[q]=r}d.onTagOpen(g,l,p),!i&&f.$cdata[g]&&(i=[]);continue}(g=e[2])&&d.onComment(g)}a.length>h&&d.onText(a.substring(h,a.length))}}}(),a.htmlParser.comment=function(a){this.value=a,this._={isBlockLike:!1}},a.htmlParser.comment.prototype={type:8,writeHtml:function(a,b){var c=this.value;if(b){if(!(c=b.onComment(c,this)))return;if(typeof c!="string"){c.parent=this.parent,c.writeHtml(a,b);return}}a.comment(c)}},function(){a.htmlParser.text=function(a){this.value=a,this._={isBlockLike:!1}},a.htmlParser.text.prototype={type:3,writeHtml:function(a,b){var c=this.value;if(b&&!(c=b.onText(c,this)))return;a.text(c)}}}(),function(){a.htmlParser.cdata=function(a){this.value=a},a.htmlParser.cdata.prototype={type:3,writeHtml:function(a){a.write(this.value)}}}(),a.htmlParser.fragment=function(){this.children=[],this.parent=null,this._={isBlockLike:!0,hasInlineStarted:!1}},function(){function j(a){return a.name=="a"&&a.attributes.href||f.$removeEmpty[a.name]}var d=e.extend({table:1,ul:1,ol:1,dl:1},f.table,f.ul,f.ol,f.dl),g=c&&b.version<8?{dd:1,dt:1}:{},h={ol:1,ul:1},i=e.extend({},{html:1},f.html,f.body,f.head,{style:1,script:1});a.htmlParser.fragment.fromHtml=function(b,k,l){function x(a){var b;if(s.length>0)for(var c=0;c<s.length;c++){var d=s[c],e=d.name,g=f[e],h=u.name&&f[u.name];(!h||h[e])&&(!a||!g||g[a]||!f[a])?(b||(y(),b=1),d=d.clone(),d.parent=u,u=d,s.splice(c,1),c--):e==u.name&&(z(u,u.parent,1),c--)}}function y(){while(t.length)u.add(t.shift())}function z(a,b,c){if(a.previous!==undefined)return;b=b||u||r;var d=u;if(k&&(!b.type||b.name=="body")){var g,h;a.attributes&&(h=a.attributes["data-cke-real-element-type"])?g=h:g=a.name,g&&!(g in f.$body||g=="body"||a.isOrphan)&&(u=b,q.onTagOpen(k,{}),a.returnPoint=b=u)}if(a._.isBlockLike&&a.name!="pre"&&a.name!="textarea"){var i=a.children.length,j=a.children[i-1],l;j&&j.type==3&&((l=e.rtrim(j.value))?j.value=l:a.children.length=i-1)}b.add(a),a.returnPoint?(u=a.returnPoint,delete a.returnPoint):u=c?b:d}var q=new a.htmlParser,r=l||new a.htmlParser.fragment,s=[],t=[],u=r,v=!1,w=!1;q.onTagOpen=function(b,c,e,k){var l=new a.htmlParser.element(b,c);l.isUnknown&&e&&(l.isEmpty=!0),l.isOptionalClose=b in g||k;if(j(l)){s.push(l);return}if(b=="pre")w=!0;else{if(b=="br"&&w){u.add(new a.htmlParser.text("\n"));return}b=="textarea"&&(v=!0)}if(b=="br"){t.push(l);return}for(;;){var r=u.name,D=r?f[r]||(u._.isBlockLike?f.div:f.span):i;if(!(!l.isUnknown&&!u.isUnknown&&!D[b]))break;if(u.isOptionalClose)q.onTagClose(r);else if(b in h&&r in h){var E=u.children,F=E[E.length-1];(!F||F.name!="li")&&z(F=new a.htmlParser.element("li"),u),!l.returnPoint&&(l.returnPoint=u),u=F}else if(b in f.$listItem&&r!=b)q.onTagOpen(b=="li"?"ul":"dl",{},0,1);else if(r in d&&r!=b)!l.returnPoint&&(l.returnPoint=u),u=u.parent;else{r in f.$inline&&s.unshift(u);if(!u.parent){l.isOrphan=1;break}z(u,u.parent,1)}}x(b),y(),l.parent=u,l.isEmpty?z(l):u=l},q.onTagClose=function(a){for(var b=s.length-1;b>=0;b--)if(a==s[b].name){s.splice(b,1);return}var c=[],d=[],e=u;while(e!=r&&e.name!=a)e._.isBlockLike||d.unshift(e),c.push(e),e=e.returnPoint||e.parent;if(e!=r){for(b=0;b<c.length;b++){var f=c[b];z(f,f.parent)}u=e,u.name=="pre"&&(w=!1),u.name=="textarea"&&(v=!1),e._.isBlockLike&&y(),z(e,e.parent),e==u&&(u=u.parent),s=s.concat(d)}a=="body"&&(k=!1)},q.onText=function(b){if((!u._.hasInlineStarted||t.length)&&!w&&!v){b=e.ltrim(b);if(b.length===0)return}y(),x(),k&&(!u.type||u.name=="body")&&e.trim(b)&&this.onTagOpen(k,{},0,1),!w&&!v&&(b=b.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," ")),u.add(new a.htmlParser.text(b))},q.onCDATA=function(b){u.add(new a.htmlParser.cdata(b))},q.onComment=function(b){y(),x(),u.add(new a.htmlParser.comment(b))},q.parse(b),y(!c&&1);while(u!=r)z(u,u.parent,1);return r},a.htmlParser.fragment.prototype={add:function(a,b){var c=this;isNaN(b)&&(b=c.children.length);var d=b>0?c.children[b-1]:null;if(d){if(a._.isBlockLike&&d.type==3){d.value=e.rtrim(d.value);if(d.value.length===0){c.children.pop(),c.add(a);return}}d.next=a}a.previous=d,a.parent=c,c.children.splice(b,0,a),c._.hasInlineStarted=a.type==3||a.type==1&&!a._.isBlockLike},writeHtml:function(b,c){var d;this.filterChildren=function(){var b=new a.htmlParser.basicWriter;this.writeChildrenHtml.call(this,b,c,!0);var e=b.getHtml();this.children=(new a.htmlParser.fragment.fromHtml(e)).children,d=1},!this.name&&c&&c.onFragment(this),this.writeChildrenHtml(b,d?null:c)},writeChildrenHtml:function(a,b){for(var c=0;c<this.children.length;c++)this.children[c].writeHtml(a,b)}}}(),a.htmlParser.element=function(a,b){var c=this;c.name=a,c.attributes=b||(b={}),c.children=[];var d=b["data-cke-real-element-type"]||a||"",e=d.match(/^cke:(.*)/);e&&(d=e[1]);var g=f,h=!!(g.$nonBodyContent[d]||g.$block[d]||g.$listItem[d]||g.$tableContent[d]||g.$nonEditable[d]||d=="br"),i=!!g.$empty[a];c.isEmpty=i,c.isUnknown=!g[a],c._={isBlockLike:h,hasInlineStarted:i||!h}},a.htmlParser.cssStyle=function(){var b,c=arguments[0],d={};return b=c instanceof a.htmlParser.element?c.attributes.style:c,(b||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(a,b,c){b=="font-family"&&(c=c.replace(/["']/g,"")),d[b.toLowerCase()]=c}),{rules:d,populate:function(b){var c=this.toString();c&&(b instanceof h?b.setAttribute("style",c):b instanceof a.htmlParser.element?b.attributes.style=c:b.style=c)},toString:function(){var a=[];for(var b in d)d[b]&&a.push(b,":",d[b],";");return a.join("")}}},function(){var b=function(a,b){return a=a[0],b=b[0],a<b?-1:a>b?1:0};a.htmlParser.element.prototype={type:1,add:a.htmlParser.fragment.prototype.add,clone:function(){return new a.htmlParser.element(this.name,this.attributes)},writeHtml:function(c,d){var e=this.attributes,f=this,g=f.name,h,i,j,k;f.filterChildren=function(){if(!k){var b=new a.htmlParser.basicWriter;a.htmlParser.fragment.prototype.writeChildrenHtml.call(f,b,d),f.children=(new a.htmlParser.fragment.fromHtml(b.getHtml(),0,f.clone())).children,k=1}};if(d){for(;;){if(!(g=d.onElementName(g)))return;f.name=g;if(!(f=d.onElement(f)))return;f.parent=this.parent;if(f.name==g)break;if(f.type!=1){f.writeHtml(c,d);return}g=f.name;if(!g){for(var l=0,m=this.children.length;l<m;l++)this.children[l].parent=f.parent;this.writeChildrenHtml.call(f,c,k?null:d);return}}e=f.attributes}c.openTag(g,e);var n=[];for(var o=0;o<2;o++)for(h in e){i=h,j=e[h];if(o==1)n.push([h,j]);else if(d){for(;;){if(!(i=d.onAttributeName(h))){delete e[h];break}if(i!=h){delete e[h],h=i;continue}break}i&&((j=d.onAttribute(f,i,j))===!1?delete e[i]:e[i]=j)}}c.sortAttributes&&n.sort(b);var p=n.length;for(o=0;o<p;o++){var q=n[o];c.attribute(q[0],q[1])}c.openTagClose(g,f.isEmpty),f.isEmpty||(this.writeChildrenHtml.call(f,c,k?null:d),c.closeTag(g))},writeChildrenHtml:function(b,c){a.htmlParser.fragment.prototype.writeChildrenHtml.apply(this,arguments)}}}(),function(){function b(a,b){for(var c=0;a&&c<b.length;c++){var d=b[c];a=a.replace(d[0],d[1])}return a}function c(a,b,c){typeof b=="function"&&(b=[b]);var d,e,f=a.length,g=b&&b.length;if(g){for(d=0;d<f&&a[d].pri<c;d++);for(e=g-1;e>=0;e--){var h=b[e];h&&(h.pri=c,a.splice(d,0,h))}}}function d(a,b,c){if(b)for(var d in b){var e=a[d];a[d]=f(e,b[d],c),e||a.$length++}}function f(a,b,d){if(b)return b.pri=d,a?(a.splice?c(a,b,d):(a.pri>d?a=[b,a]:a=[a,b],a.filter=g),a):(b.filter=b,b)}function g(b){var c=b.type||b instanceof a.htmlParser.fragment;for(var d=0;d<this.length;d++){if(c)var e=b.type,f=b.name;var g=this[d],h=g.apply(window,arguments);if(h===!1)return h;if(c){if(h&&(h.name!=f||h.type!=e))return h}else if(typeof h!="string")return h;h!=undefined&&(b=h)}return b}a.htmlParser.filter=e.createClass({$:function(a){this._={elementNames:[],attributeNames:[],elements:{$length:0},attributes:{$length:0}},a&&this.addRules(a,10)},proto:{addRules:function(a,b){var e=this;typeof b!="number"&&(b=10),c(e._.elementNames,a.elementNames,b),c(e._.attributeNames,a.attributeNames,b),d(e._.elements,a.elements,b),d(e._.attributes,a.attributes,b),e._.text=f(e._.text,a.text,b)||e._.text,e._.comment=f(e._.comment,a.comment,b)||e._.comment,e._.root=f(e._.root,a.root,b)||e._.root},onElementName:function(a){return b(a,this._.elementNames)},onAttributeName:function(a){return b(a,this._.attributeNames)},onText:function(a){var b=this._.text;return b?b.filter(a):a},onComment:function(a,b){var c=this._.comment;return c?c.filter(a,b):a},onFragment:function(a){var b=this._.root;return b?b.filter(a):a},onElement:function(a){var b=this,c=[b._.elements["^"],b._.elements[a.name],b._.elements.$],d,e;for(var f=0;f<3;f++){d=c[f];if(d){e=d.filter(a,b);if(e===!1)return null;if(e&&e!=a)return b.onNode(e);if(a.parent&&!a.name)break}}return a},onNode:function(b){var c=b.type;return c==1?this.onElement(b):c==3?new a.htmlParser.text(this.onText(b.value)):c==8?new a.htmlParser.comment(this.onComment(b.value)):null},onAttribute:function(a,b,c){var d=this._.attributes[b];if(d){var e=d.filter(c,a,this);if(e===!1)return!1;if(typeof e!="undefined")return e}return c}}})}(),a.htmlParser.basicWriter=e.createClass({$:function(){this._={output:[]}},proto:{openTag:function(a,b){this._.output.push("<",a)},openTagClose:function(a,b){b?this._.output.push(" />"):this._.output.push(">")},attribute:function(a,b){typeof b=="string"&&(b=e.htmlEncodeAttr(b)),this._.output.push(" ",a,'="',b,'"')},closeTag:function(a){this._.output.push("</",a,">")},text:function(a){this._.output.push(a)},comment:function(a){this._.output.push("<!--",a,"-->")},write:function(a){this._.output.push(a)},reset:function(){this._.output=[],this._.indent=!1},getHtml:function(a){var b=this._.output.join("");return a&&this.reset(),b}}}),delete a.loadFullCore,a.instances={},a.document=new g(document),a.add=function(b){a.instances[b.name]=b,b.on("focus",function(){a.currentInstance!=b&&(a.currentInstance=b,a.fire("currentInstance"))}),b.on("blur",function(){a.currentInstance==b&&(a.currentInstance=null,a.fire("currentInstance"))})},a.remove=function(b){delete a.instances[b.name]},a.on("instanceDestroyed",function(){e.isEmpty(this.instances)&&a.fire("reset")}),a.TRISTATE_ON=1,a.TRISTATE_OFF=2,a.TRISTATE_DISABLED=0,d.comment=e.createClass({base:d.node,$:function(a,b){typeof a=="string"&&(a=(b?b.$:document).createComment(a)),this.base(a)},proto:{type:8,getOuterHtml:function(){return"<!--"+this.$.nodeValue+"-->"}}}),function(){var a={address:1,blockquote:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,li:1,dt:1,dd:1,legend:1,caption:1},b={body:1,div:1,table:1,tbody:1,tr:1,td:1,th:1,form:1,fieldset:1},e=function(a){var b=a.getChildren();for(var c=0,d=b.count();c<d;c++){var e=b.getItem(c);if(e.type==1&&f.$block[e.getName()])return!0}return!1};d.elementPath=function(d){var f=this,g=null,h=null,i=[],j=d;while(j){if(j.type==1){f.lastElement||(f.lastElement=j);var k=j.getName();c&&j.$.scopeName!="HTML"&&(k=j.$.scopeName.toLowerCase()+":"+k),h||(!g&&a[k]&&(g=j),b[k]&&(!g&&k=="div"&&!e(j)?g=j:h=j)),i.push(j);if(k=="body")break}j=j.getParent()}f.block=g,f.blockLimit=h,f.elements=i}}(),d.elementPath.prototype={compare:function(a){var b=this.elements,c=a&&a.elements;if(!c||b.length!=c.length)return!1;for(var d=0;d<b.length;d++)if(!b[d].equals(c[d]))return!1;return!0},contains:function(a){var b=this.elements;for(var c=0;c<b.length;c++)if(b[c].getName()in a)return b[c];return null}},d.text=function(a,b){typeof a=="string"&&(a=(b?b.$:document).createTextNode(a)),this.$=a},d.text.prototype=new d.node,e.extend(d.text.prototype,{type:3,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},setText:function(a){this.$.nodeValue=a},split:function(a){var e=this;if(c&&a==e.getLength()){var f=e.getDocument().createText("");return f.insertAfter(e),f}var g=e.getDocument(),h=new d.text(e.$.splitText(a),g);if(b.ie8){var i=new d.text("",g);i.insertAfter(h),i.remove()}return h},substring:function(a,b){return typeof b!="number"?this.$.nodeValue.substr(a):this.$.nodeValue.substring(a,b)}}),d.documentFragment=function(b){b=b||a.document,this.$=b.$.createDocumentFragment()},e.extend(d.documentFragment.prototype,h.prototype,{type:11,insertAfterNode:function(a){a=a.$,a.parentNode.insertBefore(this.$,a.nextSibling)}},!0,{append:1,appendBogus:1,getFirst:1,getLast:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1}),function(){function a(a,b){if(this._.end)return null;var c,d=this.range,e,f=this.guard,g=this.type,h=a?"getPreviousSourceNode":"getNextSourceNode";if(!this._.start){this._.start=1,d.trim();if(d.collapsed)return this.end(),null}if(!a&&!this._.guardLTR){var i=d.endContainer,j=i.getChild(d.endOffset);this._.guardLTR=function(a,b){return(!b||!i.equals(a))&&(!j||!a.equals(j))&&(a.type!=1||!b||a.getName()!="body")}}if(a&&!this._.guardRTL){var k=d.startContainer,l=d.startOffset>0&&k.getChild(d.startOffset-1);this._.guardRTL=function(a,b){return(!b||!k.equals(a))&&(!l||!a.equals(l))&&(a.type!=1||!b||a.getName()!="body")}}var m=a?this._.guardRTL:this._.guardLTR;f?e=function(a,b){return m(a,b)===!1?!1:f(a,b)}:e=m,this.current?c=this.current[h](!1,g,e):a?(c=d.endContainer,d.endOffset>0?(c=c.getChild(d.endOffset-1),e(c)===!1&&(c=null)):c=e(c,!0)===!1?null:c.getPreviousSourceNode(!0,g,e)):(c=d.startContainer,c=c.getChild(d.startOffset),c?e(c)===!1&&(c=null):c=e(d.startContainer,!0)===!1?null:d.startContainer.getNextSourceNode(!0,g,e));while(c&&!this._.end){this.current=c;if(!this.evaluator||this.evaluator(c)!==!1){if(!b)return c}else if(b&&this.evaluator)return!1;c=c[h](!1,g,e)}return this.end(),this.current=null}function b(b){var c,d=null;while(c=a.call(this,b))d=c;return d}d.walker=e.createClass({$:function(a){this.range=a,this._={}},proto:{end:function(){this._.end=1},next:function(){return a.call(this)},previous:function(){return a.call(this,1)},checkForward:function(){return a.call(this,0,1)!==!1},checkBackward:function(){return a.call(this,1,1)!==!1},lastForward:function(){return b.call(this)},lastBackward:function(){return b.call(this,1)},reset:function(){delete this.current,this._={}}}});var g={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1};h.prototype.isBlockBoundary=function(a){var b=a?e.extend({},f.$block,a||{}):f.$block;return this.getComputedStyle("float")=="none"&&g[this.getComputedStyle("display")]||b[this.getName()]},d.walker.blockBoundary=function(a){return function(b,c){return b.type!=1||!b.isBlockBoundary(a)}},d.walker.listItemBoundary=function(){return this.blockBoundary({br:1})},d.walker.bookmark=function(a,b){function c(a){return a&&a.getName&&a.getName()=="span"&&a.data("cke-bookmark")}return function(d){var e,f;return e=d&&!d.getName&&(f=d.getParent())&&c(f),e=a?e:e||c(d),!!(b^e)}},d.walker.whitespaces=function(a){return function(b){var c=b&&b.type==3&&!e.trim(b.getText());return!!(a^c)}},d.walker.invisible=function(a){var b=d.walker.whitespaces();return function(c){var d=b(c)||c.is&&!c.$.offsetHeight;return!!(a^d)}},d.walker.nodeType=function(a,b){return function(c){return!!(b^c.type==a)}};var i=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,j=d.walker.whitespaces(),k=d.walker.bookmark(),l=function(a){return k(a)||j(a)||a.type==1&&a.getName()in f.$inline&&!(a.getName()in f.$empty)};h.prototype.getBogus=function(){var a=this;do a=a.getPreviousSourceNode();while(l(a));return a&&(c?a.getText&&i.test(a.getText()):a.is&&a.is("br"))?a:!1}}(),d.range=function(a){var b=this;b.startContainer=null,b.startOffset=null,b.endContainer=null,b.endOffset=null,b.collapsed=!0,b.document=a},function(){function i(a){var b=!1,f=d.walker.bookmark(!0);return function(d){if(f(d))return!0;if(d.type==3){if(d.hasAscendant("pre")||e.trim(d.getText()).length)return!1}else if(d.type==1&&!g[d.getName()]){if(!(!a&&!c&&d.getName()=="br"&&!b))return!1;b=!0}return!0}}function j(a){return a.type!=3&&a.getName()in f.$removeEmpty||!e.trim(a.getText())||!!a.getParent().data("cke-bookmark")}function m(a){return!k(a)&&!l(a)}var a=function(a){a.collapsed=a.startContainer&&a.endContainer&&a.startContainer.equals(a.endContainer)&&a.startOffset==a.endOffset},b=function(a,b,c,d){a.optimizeBookmark();var e=a.startContainer,f=a.endContainer,g=a.startOffset,i=a.endOffset,j,k;f.type==3?f=f.split(i):f.getChildCount()>0&&(i>=f.getChildCount()?(f=f.append(a.document.createText("")),k=!0):f=f.getChild(i)),e.type==3?(e.split(g),e.equals(f)&&(f=e.getNext())):g?g>=e.getChildCount()?(e=e.append(a.document.createText("")),j=!0):e=e.getChild(g).getPrevious():(e=e.getFirst().insertBeforeMe(a.document.createText("")),j=!0);var l=e.getParents(),m=f.getParents(),n,o,p;for(n=0;n<l.length;n++){o=l[n],p=m[n];if(!o.equals(p))break}var q=c,r,s,t,u;for(var v=n;v<l.length;v++){r=l[v],q&&!r.equals(e)&&(s=q.append(r.clone())),t=r.getNext();while(t){if(t.equals(m[v])||t.equals(f))break;u=t.getNext(),b==2?q.append(t.clone(!0)):(t.remove(),b==1&&q.append(t)),t=u}q&&(q=s)}q=c;for(var w=n;w<m.length;w++){r=m[w],b>0&&!r.equals(f)&&(s=q.append(r.clone()));if(!l[w]||r.$.parentNode!=l[w].$.parentNode){t=r.getPrevious();while(t){if(t.equals(l[w])||t.equals(e))break;u=t.getPrevious(),b==2?q.$.insertBefore(t.$.cloneNode(!0),q.$.firstChild):(t.remove(),b==1&&q.$.insertBefore(t.$,q.$.firstChild)),t=u}}q&&(q=s)}if(b==2){var x=a.startContainer;x.type==3&&(x.$.data+=x.$.nextSibling.data,x.$.parentNode.removeChild(x.$.nextSibling));var y=a.endContainer;y.type==3&&y.$.nextSibling&&(y.$.data+=y.$.nextSibling.data,y.$.parentNode.removeChild(y.$.nextSibling))}else{if(o&&p&&(e.$.parentNode!=o.$.parentNode||f.$.parentNode!=p.$.parentNode)){var z=p.getIndex();j&&p.$.parentNode==e.$.parentNode&&z--;if(d&&o.type==1){var A=h.createFromHtml('<span data-cke-bookmark="1" style="display:none">&nbsp;</span>',a.document);A.insertAfter(o),o.mergeSiblings(!1),a.moveToBookmark({startNode:A})}else a.setStart(p.getParent(),z)}a.collapse(!0)}j&&e.remove(),k&&f.$.parentNode&&f.remove()},g={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1},k=new d.walker.whitespaces,l=new d.walker.bookmark;d.range.prototype={clone:function(){var a=this,b=new d.range(a.document);return b.startContainer=a.startContainer,b.startOffset=a.startOffset,b.endContainer=a.endContainer,b.endOffset=a.endOffset,b.collapsed=a.collapsed,b},collapse:function(a){var b=this;a?(b.endContainer=b.startContainer,b.endOffset=b.startOffset):(b.startContainer=b.endContainer,b.startOffset=b.endOffset),b.collapsed=!0},cloneContents:function(){var a=new d.documentFragment(this.document);return this.collapsed||b(this,2,a),a},deleteContents:function(a){if(this.collapsed)return;b(this,0,null,a)},extractContents:function(a){var c=new d.documentFragment(this.document);return this.collapsed||b(this,1,c,a),c},createBookmark:function(a){var b=this,c,d,f,g,h=b.collapsed;return c=b.document.createElement("span"),c.data("cke-bookmark",1),c.setStyle("display","none"),c.setHtml("&nbsp;"),a&&(f="cke_bm_"+e.getNextNumber(),c.setAttribute("id",f+"S")),h||(d=c.clone(),d.setHtml("&nbsp;"),a&&d.setAttribute("id",f+"E"),g=b.clone(),g.collapse(),g.insertNode(d)),g=b.clone(),g.collapse(!0),g.insertNode(c),d?(b.setStartAfter(c),b.setEndBefore(d)):b.moveToPosition(c,4),{startNode:a?f+"S":c,endNode:a?f+"E":d,serializable:a,collapsed:h}},createBookmark2:function(a){var b=this,c=b.startContainer,d=b.endContainer,e=b.startOffset,f=b.endOffset,g=b.collapsed,h,i;if(!c||!d)return{start:0,end:0};if(a){c.type==1&&
(h=c.getChild(e),h&&h.type==3&&e>0&&h.getPrevious().type==3&&(c=h,e=0),h&&h.type==1&&(e=h.getIndex(1)));while(c.type==3&&(i=c.getPrevious())&&i.type==3)c=i,e+=i.getLength();if(!g){d.type==1&&(h=d.getChild(f),h&&h.type==3&&f>0&&h.getPrevious().type==3&&(d=h,f=0),h&&h.type==1&&(f=h.getIndex(1)));while(d.type==3&&(i=d.getPrevious())&&i.type==3)d=i,f+=i.getLength()}}return{start:c.getAddress(a),end:g?null:d.getAddress(a),startOffset:e,endOffset:f,normalized:a,collapsed:g,is2:!0}},moveToBookmark:function(a){var b=this;if(a.is2){var c=b.document.getByAddress(a.start,a.normalized),d=a.startOffset,e=a.end&&b.document.getByAddress(a.end,a.normalized),f=a.endOffset;b.setStart(c,d),e?b.setEnd(e,f):b.collapse(!0)}else{var g=a.serializable,h=g?b.document.getById(a.startNode):a.startNode,i=g?b.document.getById(a.endNode):a.endNode;b.setStartBefore(h),h.remove(),i?(b.setEndBefore(i),i.remove()):b.collapse(!0)}},getBoundaryNodes:function(){var a=this,b=a.startContainer,c=a.endContainer,e=a.startOffset,f=a.endOffset,g;if(b.type==1){g=b.getChildCount();if(g>e)b=b.getChild(e);else if(g<1)b=b.getPreviousSourceNode();else{b=b.$;while(b.lastChild)b=b.lastChild;b=new d.node(b),b=b.getNextSourceNode()||b}}if(c.type==1){g=c.getChildCount();if(g>f)c=c.getChild(f).getPreviousSourceNode(!0);else if(g<1)c=c.getPreviousSourceNode();else{c=c.$;while(c.lastChild)c=c.lastChild;c=new d.node(c)}}return b.getPosition(c)&2&&(b=c),{startNode:b,endNode:c}},getCommonAncestor:function(a,b){var c=this,d=c.startContainer,e=c.endContainer,f;return d.equals(e)?a&&d.type==1&&c.startOffset==c.endOffset-1?f=d.getChild(c.startOffset):f=d:f=d.getCommonAncestor(e),b&&!f.is?f.getParent():f},optimize:function(){var a=this,b=a.startContainer,c=a.startOffset;b.type!=1&&(c?c>=b.getLength()&&a.setStartAfter(b):a.setStartBefore(b)),b=a.endContainer,c=a.endOffset,b.type!=1&&(c?c>=b.getLength()&&a.setEndAfter(b):a.setEndBefore(b))},optimizeBookmark:function(){var a=this,b=a.startContainer,c=a.endContainer;b.is&&b.is("span")&&b.data("cke-bookmark")&&a.setStartAt(b,3),c&&c.is&&c.is("span")&&c.data("cke-bookmark")&&a.setEndAt(c,4)},trim:function(a,b){var c=this,d=c.startContainer,e=c.startOffset,f=c.collapsed;if((!a||f)&&d&&d.type==3){if(!e)e=d.getIndex(),d=d.getParent();else if(e>=d.getLength())e=d.getIndex()+1,d=d.getParent();else{var g=d.split(e);e=d.getIndex()+1,d=d.getParent(),c.startContainer.equals(c.endContainer)?c.setEnd(g,c.endOffset-c.startOffset):d.equals(c.endContainer)&&(c.endOffset+=1)}c.setStart(d,e);if(f){c.collapse(!0);return}}var h=c.endContainer,i=c.endOffset;!b&&!f&&h&&h.type==3&&(i?i>=h.getLength()?(i=h.getIndex()+1,h=h.getParent()):(h.split(i),i=h.getIndex()+1,h=h.getParent()):(i=h.getIndex(),h=h.getParent()),c.setEnd(h,i))},enlarge:function(a,b){switch(a){case 1:if(this.collapsed)return;var c=this.getCommonAncestor(),g=this.document.getBody(),h,i,j,k,l,m=!1,n,o,p=this.startContainer,q=this.startOffset;p.type==3?(q&&(p=!e.trim(p.substring(0,q)).length&&p,m=!!p),p&&((k=p.getPrevious())||(j=p.getParent()))):(q&&(k=p.getChild(q-1)||p.getLast()),k||(j=p));while(j||k){if(j&&!k){!l&&j.equals(c)&&(l=!0);if(!g.contains(j))break;if(!m||j.getComputedStyle("display")!="inline")m=!1,l?h=j:this.setStartBefore(j);k=j.getPrevious()}while(k){n=!1;if(k.type==3)o=k.getText(),/[^\s\ufeff]/.test(o)&&(k=null),n=/[\s\ufeff]$/.test(o);else if((k.$.offsetWidth>0||b&&k.is("br"))&&!k.data("cke-bookmark"))if(m&&f.$removeEmpty[k.getName()]){o=k.getText();if(/[^\s\ufeff]/.test(o))k=null;else{var r=k.$.all||k.$.getElementsByTagName("*");for(var s=0,t;t=r[s++];)if(!f.$removeEmpty[t.nodeName.toLowerCase()]){k=null;break}}k&&(n=!!o.length)}else k=null;n&&(m?l?h=j:j&&this.setStartBefore(j):m=!0);if(k){var u=k.getPrevious();if(!j&&!u){j=k,k=null;break}k=u}else j=null}j&&(j=j.getParent())}p=this.endContainer,q=this.endOffset,j=k=null,l=m=!1,p.type==3?(p=!e.trim(p.substring(q)).length&&p,m=!p||!p.getLength(),p&&((k=p.getNext())||(j=p.getParent()))):(k=p.getChild(q),k||(j=p));while(j||k){if(j&&!k){!l&&j.equals(c)&&(l=!0);if(!g.contains(j))break;if(!m||j.getComputedStyle("display")!="inline")m=!1,l?i=j:j&&this.setEndAfter(j);k=j.getNext()}while(k){n=!1;if(k.type==3)o=k.getText(),/[^\s\ufeff]/.test(o)&&(k=null),n=/^[\s\ufeff]/.test(o);else if((k.$.offsetWidth>0||b&&k.is("br"))&&!k.data("cke-bookmark"))if(m&&f.$removeEmpty[k.getName()]){o=k.getText();if(/[^\s\ufeff]/.test(o))k=null;else{r=k.$.all||k.$.getElementsByTagName("*");for(s=0;t=r[s++];)if(!f.$removeEmpty[t.nodeName.toLowerCase()]){k=null;break}}k&&(n=!!o.length)}else k=null;n&&m&&(l?i=j:this.setEndAfter(j));if(k){u=k.getNext();if(!j&&!u){j=k,k=null;break}k=u}else j=null}j&&(j=j.getParent())}h&&i&&(c=h.contains(i)?i:h,this.setStartBefore(c),this.setEndAfter(c));break;case 2:case 3:var v=new d.range(this.document);g=this.document.getBody(),v.setStartAt(g,1),v.setEnd(this.startContainer,this.startOffset);var w=new d.walker(v),x,y,z=d.walker.blockBoundary(a==3?{br:1}:null),A=function(a){var b=z(a);return b||(x=a),b},B=function(a){var b=A(a);return!b&&a.is&&a.is("br")&&(y=a),b};w.guard=A,j=w.lastBackward(),x=x||g,this.setStartAt(x,!x.is("br")&&(!j&&this.checkStartOfBlock()||j&&x.contains(j))?1:4);if(a==3){var C=this.clone();w=new d.walker(C);var D=d.walker.whitespaces(),E=d.walker.bookmark();w.evaluator=function(a){return!D(a)&&!E(a)};var F=w.previous();if(F&&F.type==1&&F.is("br"))return}v=this.clone(),v.collapse(),v.setEndAt(g,2),w=new d.walker(v),w.guard=a==3?B:A,x=null,j=w.lastForward(),x=x||g,this.setEndAt(x,!j&&this.checkEndOfBlock()||j&&x.contains(j)?2:3),y&&this.setEndAfter(y)}},shrink:function(a,b){if(!this.collapsed){a=a||2;var c=this.clone(),e=this.startContainer,f=this.endContainer,g=this.startOffset,h=this.endOffset,i=this.collapsed,j=1,k=1;e&&e.type==3&&(g?g>=e.getLength()?c.setStartAfter(e):(c.setStartBefore(e),j=0):c.setStartBefore(e)),f&&f.type==3&&(h?h>=f.getLength()?c.setEndAfter(f):(c.setEndAfter(f),k=0):c.setEndBefore(f));var l=new d.walker(c),m=d.walker.bookmark();l.evaluator=function(b){return b.type==(a==1?1:3)};var n;l.guard=function(b,c){return m(b)?!0:a==1&&b.type==3?!1:c&&b.equals(n)?!1:(!c&&b.type==1&&(n=b),!0)};if(j){var o=l[a==1?"lastForward":"next"]();o&&this.setStartAt(o,b?1:3)}if(k){l.reset();var p=l[a==1?"lastBackward":"previous"]();p&&this.setEndAt(p,b?2:4)}return!!j||!!k}},insertNode:function(a){var b=this;b.optimizeBookmark(),b.trim(!1,!0);var c=b.startContainer,d=b.startOffset,e=c.getChild(d);e?a.insertBefore(e):c.append(a),a.getParent().equals(b.endContainer)&&b.endOffset++,b.setStartBefore(a)},moveToPosition:function(a,b){this.setStartAt(a,b),this.collapse(!0)},selectNodeContents:function(a){this.setStart(a,0),this.setEnd(a,a.type==3?a.getLength():a.getChildCount())},setStart:function(b,c){var d=this;b.type==1&&f.$empty[b.getName()]&&(c=b.getIndex(),b=b.getParent()),d.startContainer=b,d.startOffset=c,d.endContainer||(d.endContainer=b,d.endOffset=c),a(d)},setEnd:function(b,c){var d=this;b.type==1&&f.$empty[b.getName()]&&(c=b.getIndex()+1,b=b.getParent()),d.endContainer=b,d.endOffset=c,d.startContainer||(d.startContainer=b,d.startOffset=c),a(d)},setStartAfter:function(a){this.setStart(a.getParent(),a.getIndex()+1)},setStartBefore:function(a){this.setStart(a.getParent(),a.getIndex())},setEndAfter:function(a){this.setEnd(a.getParent(),a.getIndex()+1)},setEndBefore:function(a){this.setEnd(a.getParent(),a.getIndex())},setStartAt:function(b,c){var d=this;switch(c){case 1:d.setStart(b,0);break;case 2:b.type==3?d.setStart(b,b.getLength()):d.setStart(b,b.getChildCount());break;case 3:d.setStartBefore(b);break;case 4:d.setStartAfter(b)}a(d)},setEndAt:function(b,c){var d=this;switch(c){case 1:d.setEnd(b,0);break;case 2:b.type==3?d.setEnd(b,b.getLength()):d.setEnd(b,b.getChildCount());break;case 3:d.setEndBefore(b);break;case 4:d.setEndAfter(b)}a(d)},fixBlock:function(a,b){var d=this,e=d.createBookmark(),f=d.document.createElement(b);return d.collapse(a),d.enlarge(2),d.extractContents().appendTo(f),f.trim(),c||f.appendBogus(),d.insertNode(f),d.moveToBookmark(e),f},splitBlock:function(a){var b=this,e=new d.elementPath(b.startContainer),f=new d.elementPath(b.endContainer),g=e.blockLimit,h=f.blockLimit,i=e.block,j=f.block,k=null;if(!g.equals(h))return null;a!="br"&&(i||(i=b.fixBlock(!0,a),j=(new d.elementPath(b.endContainer)).block),j||(j=b.fixBlock(!1,a)));var l=i&&b.checkStartOfBlock(),m=j&&b.checkEndOfBlock();return b.deleteContents(),i&&i.equals(j)&&(m?(k=new d.elementPath(b.startContainer),b.moveToPosition(j,4),j=null):l?(k=new d.elementPath(b.startContainer),b.moveToPosition(i,3),i=null):(j=b.splitElement(i),!c&&!i.is("ul","ol")&&i.appendBogus())),{previousBlock:i,nextBlock:j,wasStartOfBlock:l,wasEndOfBlock:m,elementPath:k}},splitElement:function(a){var b=this;if(!b.collapsed)return null;b.setEndAt(a,2);var c=b.extractContents(),d=a.clone(!1);return c.appendTo(d),d.insertAfter(a),b.moveToPosition(a,4),d},checkBoundaryOfElement:function(a,b){var c=b==1,e=this.clone();e.collapse(c),e[c?"setStartAt":"setEndAt"](a,c?1:2);var f=new d.walker(e);return f.evaluator=j,f[c?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var a=this,b=a.startContainer,c=a.startOffset;if(c&&b.type==3){var f=e.ltrim(b.substring(0,c));if(f.length)return!1}a.trim();var g=new d.elementPath(a.startContainer),h=a.clone();h.collapse(!0),h.setStartAt(g.block||g.blockLimit,1);var j=new d.walker(h);return j.evaluator=i(!0),j.checkBackward()},checkEndOfBlock:function(){var a=this,b=a.endContainer,c=a.endOffset;if(b.type==3){var f=e.rtrim(b.substring(c));if(f.length)return!1}a.trim();var g=new d.elementPath(a.endContainer),h=a.clone();h.collapse(!1),h.setEndAt(g.block||g.blockLimit,2);var j=new d.walker(h);return j.evaluator=i(!1),j.checkForward()},checkReadOnly:function(){function a(a,b){while(a){if(a.type==1){if(a.getAttribute("contentEditable")=="false"&&!a.data("cke-editable"))return 0;if(a.is("html")||a.getAttribute("contentEditable")=="true"&&(a.contains(b)||a.equals(b)))break}a=a.getParent()}return 1}return function(){var b=this.startContainer,c=this.endContainer;return!a(b,c)||!a(c,b)}}(),moveToElementEditablePosition:function(a,b){function c(a,c){var d;return a.type==1&&a.isEditable(!1)&&!f.$nonEditable[a.getName()]&&(d=a[b?"getLast":"getFirst"](m)),!c&&!d&&(d=a[b?"getPrevious":"getNext"](m)),d}var d=0;while(a){if(a.type==3){this.moveToPosition(a,b?4:3),d=1;break}a.type==1&&a.isEditable()&&(this.moveToPosition(a,b?2:1),d=1),a=c(a,d)}return!!d},moveToElementEditStart:function(a){return this.moveToElementEditablePosition(a)},moveToElementEditEnd:function(a){return this.moveToElementEditablePosition(a,!0)},getEnclosedNode:function(){var a=this.clone();a.optimize();if(a.startContainer.type!=1||a.endContainer.type!=1)return null;var b=new d.walker(a),c=d.walker.bookmark(!0),e=d.walker.whitespaces(!0),f=function(a){return e(a)&&c(a)};a.evaluator=f;var g=b.next();return b.reset(),g&&g.equals(b.previous())?g:null},getTouchedStartNode:function(){var a=this.startContainer;return this.collapsed||a.type!=1?a:a.getChild(this.startOffset)||a},getTouchedEndNode:function(){var a=this.endContainer;return this.collapsed||a.type!=1?a:a.getChild(this.endOffset-1)||a}}}(),a.POSITION_AFTER_START=1,a.POSITION_BEFORE_END=2,a.POSITION_BEFORE_START=3,a.POSITION_AFTER_END=4,a.ENLARGE_ELEMENT=1,a.ENLARGE_BLOCK_CONTENTS=2,a.ENLARGE_LIST_ITEM_CONTENTS=3,a.START=1,a.END=2,a.STARTEND=3,a.SHRINK_ELEMENT=1,a.SHRINK_TEXT=2,function(){function b(a,b,c){var d=a.serializable,e=b[c?"endContainer":"startContainer"],f=c?"endOffset":"startOffset",g=d?b.document.getById(a.startNode):a.startNode,h=d?b.document.getById(a.endNode):a.endNode;return e.equals(g.getPrevious())?(b.startOffset=b.startOffset-e.getLength()-h.getPrevious().getLength(),e=h.getNext()):e.equals(h.getPrevious())&&(b.startOffset=b.startOffset-e.getLength(),e=h.getNext()),e.equals(g.getParent())&&b[f]++,e.equals(h.getParent())&&b[f]++,b[c?"endContainer":"startContainer"]=e,b}d.rangeList=function(b){return b instanceof d.rangeList?b:(b?b instanceof d.range&&(b=[b]):b=[],e.extend(b,a))};var a={createIterator:function(){var a=this,b=d.walker.bookmark(),c=function(a){return!a.is||!a.is("tr")},e=[],f;return{getNextRange:function(c){f=f==undefined?0:f+1;var d=a[f];if(d&&a.length>1){if(!f)for(var g=a.length-1;g>=0;g--)e.unshift(a[g].createBookmark(!0));if(c){var h=0;while(a[f+h+1]){var i=d.document,j=0,k=i.getById(e[h].endNode),l=i.getById(e[h+1].startNode),m;for(;;){m=k.getNextSourceNode(!1);if(!l.equals(m)){if(b(m)||m.type==1&&m.isBlockBoundary()){k=m;continue}}else j=1;break}if(!j)break;h++}}d.moveToBookmark(e.shift());while(h--)m=a[++f],m.moveToBookmark(e.shift()),d.setEnd(m.endContainer,m.endOffset)}return d}}},createBookmarks:function(a){var c=this,d=[],e;for(var f=0;f<c.length;f++){d.push(e=c[f].createBookmark(a,!0));for(var g=f+1;g<c.length;g++)c[g]=b(e,c[g]),c[g]=b(e,c[g],!0)}return d},createBookmarks2:function(a){var b=[];for(var c=0;c<this.length;c++)b.push(this[c].createBookmark2(a));return b},moveToBookmarks:function(a){for(var b=0;b<this.length;b++)this[b].moveToBookmark(a[b])}}}(),function(){if(b.webkit){b.hc=!1;return}var c=h.createFromHtml('<div style="width:0px;height:0px;position:absolute;left:-10000px;border: 1px solid;border-color: red blue;"></div>',a.document);c.appendTo(a.document.getHead());try{b.hc=c.getComputedStyle("border-top-color")==c.getComputedStyle("border-right-color")}catch(d){b.hc=!1}b.hc&&(b.cssClass+=" cke_hc"),c.remove()}(),j.load(i.corePlugins.split(","),function(){a.status="loaded",a.fire("loaded");var b=a._.pending;if(b){delete a._.pending;for(var c=0;c<b.length;c++)a.add(b[c])}});if(c)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(l){}a.skins.add("kama",function(){var d="cke_ui_color";return{editor:{css:["editor.css"]},dialog:{css:["dialog.css"]},richcombo:{canGroup:!1},templates:{css:["templates.css"]},margins:[0,0,0,0],init:function(f){function k(a){var b=a.getById(d);return b||(b=a.getHead().append("style"),b.setAttribute("id",d),b.setAttribute("type","text/css")),b}function l(a,d,e){var f,g,h;for(var i=0;i<a.length;i++)if(b.webkit)for(g=0;g<d.length;g++){h=d[g][1];for(f=0;f<e.length;f++)h=h.replace(e[f][0],e[f][1]);a[i].$.sheet.addRule(d[g][0],h)}else{h=d;for(f=0;f<e.length;f++)h=h.replace(e[f][0],e[f][1]);c?a[i].$.styleSheet.cssText+=h:a[i].$.innerHTML+=h}}f.config.width&&!isNaN(f.config.width)&&(f.config.width-=12);var g=[],h=/\$color/g,i="/* UI Color Support */.cke_skin_kama .cke_menuitem .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a:focus .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a:active .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover .cke_label,.cke_skin_kama .cke_menuitem a:focus .cke_label,.cke_skin_kama .cke_menuitem a:active .cke_label{\tbackground-color: $color !important;}.cke_skin_kama .cke_menuitem a.cke_disabled:hover .cke_label,.cke_skin_kama .cke_menuitem a.cke_disabled:focus .cke_label,.cke_skin_kama .cke_menuitem a.cke_disabled:active .cke_label{\tbackground-color: transparent !important;}.cke_skin_kama .cke_menuitem a.cke_disabled:hover .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a.cke_disabled:focus .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a.cke_disabled:active .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a.cke_disabled .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuseparator{\tbackground-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover,.cke_skin_kama .cke_menuitem a:focus,.cke_skin_kama .cke_menuitem a:active{\tbackground-color: $color !important;}";if(b.webkit){i=i.split("}").slice(0,-1);for(var j=0;j<i.length;j++)i[j]=i[j].split("{")}var n=/\$color/g;e.extend(f,{uiColor:null,getUiColor:function(){return this.uiColor},setUiColor:function(c){var d,e=k(a.document),h="."+f.id,j=[h+" .cke_wrapper",h+"_dialog .cke_dialog_contents",h+"_dialog a.cke_dialog_tab",h+"_dialog .cke_dialog_footer"].join(","),m="background-color: $color !important;";return b.webkit?d=[[j,m]]:d=j+"{"+m+"}",(this.setUiColor=function(a){var b=[[n,a]];f.uiColor=a,l([e],d,b),l(g,i,b)})(c)}}),f.on("menuShow",function(a){var b=a.data[0],c=b.element.getElementsByTag("iframe").getItem(0).getFrameDocument();if(!c.getById("cke_ui_color")){var d=k(c);g.push(d);var e=f.getUiColor();e&&l([d],i,[[n,e]])}}),f.config.uiColor&&f.setUiColor(f.config.uiColor)}}}()),function(){function b(){a.dialog.on("resize",function(a){var b=a.data,c=b.width,d=b.height,e=b.dialog,f=e.parts.contents;if(b.skin!="kama")return;f.setStyles({width:c+"px",height:d+"px"})})}a.dialog?b():a.on("dialogPluginReady",b)}(),j.add("about",{requires:["dialog"],init:function(b){var c=b.addCommand("about",new a.dialogCommand("about"));c.modes={wysiwyg:1,source:1},c.canUndo=!1,c.readOnly=1,b.ui.addButton("About",{label:b.lang.about.title,command:"about"}),a.dialog.add("about",this.path+"dialogs/about.js")}}),function(){var b="a11yhelp",c="a11yHelp";j.add(b,{availableLangs:{en:1,he:1},init:function(b){var d=this;b.addCommand(c,{exec:function(){var f=b.langCode;f=d.availableLangs[f]?f:"en",a.scriptLoader.load(a.getUrl(d.path+"lang/"+f+".js"),function(){e.extend(b.lang,d.langEntries[f]),b.openDialog(c)})},modes:{wysiwyg:1,source:1},readOnly:1,canUndo:!1}),a.dialog.add(c,this.path+"dialogs/a11yhelp.js")}})}(),j.add("basicstyles",{requires:["styles","button"],init:function(b){var c=function(c,d,e,f){var g=new a.style(f);b.attachStyleStateChange(g,function(a){!b.readOnly&&b.getCommand(e).setState(a)}),b.addCommand(e,new a.styleCommand(g)),b.ui.addButton(c,{label:d,command:e})},d=b.config,e=b.lang;c("Bold",e.bold,"bold",d.coreStyles_bold),c("Italic",e.italic,"italic",d.coreStyles_italic),c("Underline",e.underline,"underline",d.coreStyles_underline),c("Strike",e.strike,"strike",d.coreStyles_strike),c("Subscript",e.subscript,"subscript",d.coreStyles_subscript),c("Superscript",e.superscript,"superscript",d.coreStyles_superscript)}}),i.coreStyles_bold={element:"strong",overrides:"b"},i.coreStyles_italic={element:"em",overrides:"i"},i.coreStyles_underline={element:"u"},i.coreStyles_strike={element:"strike"},i.coreStyles_subscript={element:"sub"},i.coreStyles_superscript={element:"sup"},function(){function g(a){i(a),k(a)}function i(a){var b=a.editor,c=a.data.path;if(b.readOnly)return;var d=b.config.useComputedState,e;d=d===undefined||d,d||(e=l(c.lastElement)),e=e||c.block||c.blockLimit;if(e.is("body")){var f=b.getSelection().getRanges()[0].getEnclosedNode();f&&f.type==1&&(e=f)}if(!e)return;var g=d?e.getComputedStyle("direction"):e.getStyle("direction")||e.getAttribute("dir");b.getCommand("bidirtl").setState(g=="rtl"?1:2),b.getCommand("bidiltr").setState(g=="ltr"?1:2)}function k(a){var b=a.editor,c=a.data.path.block||a.data.path.blockLimit;b.fire("contentDirChanged",c?c.getComputedStyle("direction"):b.lang.dir)}function l(a){while(a&&!(a.getName()in f||a.is("body"))){var b=a.getParent();if(!b)break;a=b}return a}function m(a,b,c,d){if(a.isReadOnly())return;h.setMarker(d,a,"bidi_processed",1);var e=a;while((e=e.getParent())&&!e.is("body"))if(e.getCustomData("bidi_processed")){a.removeStyle("direction"),a.removeAttribute("dir");return}var f="useComputedState"in c.config?c.config.useComputedState:1,g=f?a.getComputedStyle("direction"):a.getStyle("direction")||a.hasAttribute("dir");if(g==b)return;a.removeStyle("direction"),f?(a.removeAttribute("dir"),b!=a.getComputedStyle("direction")&&a.setAttribute("dir",b)):a.setAttribute("dir",b),c.forceNextSelectionCheck()}function n(a,b,c){var d=a.getCommonAncestor(!1,!0);a=a.clone(),a.enlarge(c==2?3:2);if(a.checkBoundaryOfElement(d,1)&&a.checkBoundaryOfElement(d,2)){var e;while(d&&d.type==1&&(e=d.getParent())&&e.getChildCount()==1&&!(d.getName()in b))d=e;return d.type==1&&d.getName()in b&&d}}function o(a){return function(e){var f=e.getSelection(),g=e.config.enterMode,i=f.getRanges();if(i&&i.length){var j={},k=f.createBookmarks(),l=i.createIterator(),o,p=0;while(o=l.getNextRange(1)){var q=o.getEnclosedNode();if(!q||q&&!(q.type==1&&q.getName()in c))q=n(o,b,g);q&&m(q,a,e,j);var r,s,t=new d.walker(o),v=k[p].startNode,w=k[p++].endNode;t.evaluator=function(a){return!!(a.type==1&&a.getName()in b&&(a.getName()!=(g==1?"p":"div")||a.getParent().type!=1||a.getParent().getName()!="blockquote")&&a.getPosition(v)&2&&(a.getPosition(w)&4+16)==4)};while(s=t.next())m(s,a,e,j);r=o.createIterator(),r.enlargeBr=g!=2;while(s=r.getNextParagraph(g==1?"p":"div"))m(s,a,e,j)}h.clearAllMarkers(j),e.forceNextSelectionCheck(),f.selectBookmarks(k),e.focus()}}}function p(a){var b=a.getDocument().getBody().getParent();while(a){if(a.equals(b))return!1;a=a.getParent()}return!0}function q(b){var c=b==r.setAttribute,d=b==r.removeAttribute,e=/\bdirection\s*:\s*(.*?)\s*(:?$|;)/;return function(f,g){var h=this;if(!h.getDocument().equals(a.document)){var i;if((f==(c||d?"dir":"direction")||f=="style"&&(d||e.test(g)))&&!p(h)){i=h.getDirection(1);var j=b.apply(h,arguments);if(i!=h.getDirection(1))return h.getDocument().fire("dirChanged",h),j}}return b.apply(h,arguments)}}var b={table:1,ul:1,ol:1,blockquote:1,div:1},c={},f={};e.extend(c,b,{tr:1,p:1,div:1,li:1}),e.extend(f,c,{td:1}),j.add("bidi",{requires:["styles","button"],init:function(b){var c=function(c,d,e,f){b.addCommand(e,new a.command(b,{exec:f})),b.ui.addButton(c,{label:d,command:e})},d=b.lang.bidi;c("BidiLtr",d.ltr,"bidiltr",o("ltr")),c("BidiRtl",d.rtl,"bidirtl",o("rtl")),b.on("selectionChange",g),b.on("contentDom",function(){b.document.on("dirChanged",function(a){b.fire("dirChanged",{node:a.data,dir:a.data.getDirection(1)})})})}});var r=h.prototype,s=["setStyle","removeStyle","setAttribute","removeAttribute"];for(var t=0;t<s.length;t++)r[s[t]]=e.override(r[s[t]],q)}(),function(){function a(a,b){var c=b.block||b.blockLimit;return!c||c.getName()=="body"?2:c.getAscendant("blockquote",!0)?1:2}function b(b){var c=b.editor;if(c.readOnly)return;var d=c.getCommand("blockquote");d.state=a(c,b.data.path),d.fire("state")}function e(a){for(var b=0,c=a.getChildCount(),d;b<c&&(d=a.getChild(b));b++)if(d.type==1&&d.isBlockBoundary())return!1;return!0}var f={exec:function(a){var b=a.getCommand("blockquote").state,f=a.getSelection(),g=f&&f.getRanges(!0)[0];if(!g)return;var i=f.createBookmarks();if(c){var j=i[0].startNode,k=i[0].endNode,l;if(j&&j.getParent().getName()=="blockquote"){l=j;while(l=l.getNext())if(l.type==1&&l.isBlockBoundary()){j.move(l,!0);break}}if(k&&k.getParent().getName()=="blockquote"){l=k;while(l=l.getPrevious())if(l.type==1&&l.isBlockBoundary()){k.move(l);break}}}var m=g.createIterator(),n;m.enlargeBr=a.config.enterMode!=2;if(b==2){var p=[];while(n=m.getNextParagraph())p.push(n);if(p.length<1){var q=a.document.createElement(a.config.enterMode==1?"p":"div"),r=i.shift();g.insertNode(q),q.append(new d.text("﻿",a.document)),g.moveToBookmark(r),g.selectNodeContents(q),g.collapse(!0),r=g.createBookmark(),p.push(q),i.unshift(r)}var s=p[0].getParent(),t=[];for(var u=0;u<p.length;u++)n=p[u],s=s.getCommonAncestor(n.getParent());var v={table:1,tbody:1,tr:1,ol:1,ul:1};while(v[s.getName()])s=s.getParent();var w=null;while(p.length>0){n=p.shift();while(!n.getParent().equals(s))n=n.getParent();n.equals(w)||t.push(n),w=n}while(t.length>0){n=t.shift();if(n.getName()=="blockquote"){var x=new d.documentFragment(a.document);while(n.getFirst())x.append(n.getFirst().remove()),p.push(x.getLast());x.replace(n)}else p.push(n)}var y=a.document.createElement("blockquote");y.insertBefore(p[0]);while(p.length>0)n=p.shift(),y.append(n)}else if(b==1){var z=[],A={};while(n=m.getNextParagraph()){var B=null,C=null;while(n.getParent()){if(n.getParent().getName()=="blockquote"){B=n.getParent(),C=n;break}n=n.getParent()}B&&C&&!C.getCustomData("blockquote_moveout")&&(z.push(C),h.setMarker(A,C,"blockquote_moveout",!0))}h.clearAllMarkers(A);var D=[],E=[];A={};while(z.length>0){var F=z.shift();y=F.getParent(),F.getPrevious()?F.getNext()?(F.breakParent(F.getParent()),E.push(F.getNext())):F.remove().insertAfter(y):F.remove().insertBefore(y),y.getCustomData("blockquote_processed")||(E.push(y),h.setMarker(A,y,"blockquote_processed",!0)),D.push(F)}h.clearAllMarkers(A);for(u=E.length-1;u>=0;u--)y=E[u],e(y)&&y.remove();if(a.config.enterMode==2){var G=!0;while(D.length){F=D.shift();if(F.getName()=="div"){x=new d.documentFragment(a.document);var H=G&&F.getPrevious()&&(F.getPrevious().type!=1||!F.getPrevious().isBlockBoundary());H&&x.append(a.document.createElement("br"));var I=F.getNext()&&(F.getNext().type!=1||!F.getNext().isBlockBoundary());while(F.getFirst())F.getFirst().remove().appendTo(x);I&&x.append(a.document.createElement("br")),x.replace(F),G=!1}}}}f.selectBookmarks(i),a.focus()}};j.add("blockquote",{init:function(a){a.addCommand("blockquote",f),a.ui.addButton("Blockquote",{label:a.lang.blockquote,command:"blockquote"}),a.on("selectionChange",b)},requires:["domiterator"]})}(),j.add("button",{beforeInit:function(a){a.ui.addHandler("button",k.button.handler)}}),a.UI_BUTTON="button",k.button=function(a){e.extend(this,a,{title:a.label,className:a.className||a.command&&"cke_button_"+a.command||"",click:a.click||function(b){b.execCommand(a.command)}}),this._={}},k.button.handler={create:function(a){return new k.button(a)}},function(){k.button.prototype={render:function(f,g){var h=b,i=this._.id=e.getNextId(),j="",k=this.command,l;this._.editor=f;var m={id:i,button:this,editor:f,focus:function(){var b=a.document.getById(i);b.focus()},execute:function(){c&&b.version<7?e.setTimeout(function(){this.button.click(f)},0,this):this.button.click(f)}},n=e.addFunction(function(a){if(m.onkey)return a=new d.event(a),m.onkey(m,a.getKeystroke())!==!1}),o=e.addFunction(function(a){var c;return m.onfocus&&(c=m.onfocus(m,new d.event(a))!==!1),b.gecko&&b.version<10900&&a.preventBubble(),c});m.clickFn=l=e.addFunction(m.execute,m);if(this.modes){var p={};function q(){var a=f.mode;if(a){var b=this.modes[a]?p[a]!=undefined?p[a]:2:0;this.setState(f.readOnly&&!this.readOnly?0:b)}}f.on("beforeModeUnload",function(){f.mode&&this._.state!=0&&(p[f.mode]=this._.state)},this),f.on("mode",q,this),!this.readOnly&&f.on("readOnly",q,this)}else k&&(k=f.getCommand(k),k&&(k.on("state",function(){this.setState(k.state)},this),j+="cke_"+(k.state==1?"on":k.state==0?"disabled":"off")));k||(j+="cke_off"),this.className&&(j+=" "+this.className),g.push('<span class="cke_button'+(this.icon&&this.icon.indexOf(".png")==-1?" cke_noalphafix":"")+'">','<a id="',i,'" class="',j,'"',h.gecko&&h.version>=10900&&!h.hc?"":'" href="javascript:void(\''+(this.title||"").replace("'","")+"')\"",' title="',this.title,'" tabindex="-1" hidefocus="true" role="button" aria-labelledby="'+i+'_label"'+(this.hasArrow?' aria-haspopup="true"':"")),(h.opera||h.gecko&&h.mac)&&g.push(' onkeypress="return false;"'),h.gecko&&g.push(' onblur="this.style.cssText = this.style.cssText;"'),g.push(' onkeydown="return CKEDITOR.tools.callFunction(',n,', event);" onfocus="return CKEDITOR.tools.callFunction(',o,', event);" '+(c?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction(',l,', this); return false;"><span class="cke_icon"');if(this.icon){var r=(this.iconOffset||0)*-16;g.push(' style="background-image:url(',a.getUrl(this.icon),");background-position:0 "+r+'px;"')}return g.push('>&nbsp;</span><span id="',i,'_label" class="cke_label">',this.label,"</span>"),this.hasArrow&&g.push('<span class="cke_buttonarrow">'+(b.hc?"&#9660;":"&nbsp;")+"</span>"),g.push("</a>","</span>"),this.onRender&&this.onRender(),m},setState:function(b){if(this._.state==b)return!1;this._.state=b;var c=a.document.getById(this._.id);return c?(c.setState(b),b==0?c.setAttribute("aria-disabled",!0):c.removeAttribute("aria-disabled"),b==1?c.setAttribute("aria-pressed",!0):c.removeAttribute("aria-pressed"),!0):!1}}}(),k.prototype.addButton=function(a,b){this.add(a,"button",b)},function(){function m(a){a.cancel()}function n(a,c,e){var f=this.document;if(f.getById("cke_pastebin"))return;if(c=="text"&&a.data&&a.data.$.clipboardData){var g=a.data.$.clipboardData.getData("text/plain");if(g){a.data.preventDefault(),e(g);return}}var i=this.getSelection(),j=new d.range(f),k=new h(c=="text"?"textarea":b.webkit?"body":"div",f);k.setAttribute("id","cke_pastebin"),b.webkit&&k.append(f.createText(" ")),f.getBody().append(k),k.setStyles({position:"absolute",top:i.getStartElement().getDocumentPosition().y+"px",width:"1px",height:"1px",overflow:"hidden"}),k.setStyle(this.config.contentsLangDirection=="ltr"?"left":"right","-1000px");var l=i.createBookmarks();this.on("selectionChange",m,null,null,0),c=="text"?k.$.focus():(j.setStartAt(k,1),j.setEndAt(k,2),j.select(!0));var n=this;window.setTimeout(function(){c=="text"&&b.gecko&&n.focusGrabber.focus(),k.remove(),n.removeListener("selectionChange",m);var a;k=b.webkit&&(a=k.getFirst())&&a.is&&a.hasClass("Apple-style-span")?a:k,i.selectBookmarks(l),e(k["get"+(c=="text"?"Value":"Html")]())},0)}function o(a){if(!c||b.quirks)return;var d=a.getSelection(),e;if(d.getType()==3&&(e=d.getSelectedElement())){var f=d.getRanges()[0],g=a.document.createText("");g.insertBefore(e),f.setStartBefore(g),f.setEndAfter(e),d.selectRanges([f]),setTimeout(function(){e.getParent()&&(g.remove(),d.selectElement(e))},0)}}function q(a,b){c&&(p=1);var d=2;try{d=b.document.$.queryCommandEnabled(a)?2:0}catch(e){}return p=0,d}function s(){var a=this;if(a.mode!="wysiwyg")return;a.getCommand("cut").setState(r?0:q("Cut",a)),a.getCommand("copy").setState(q("Copy",a));var c=r?0:b.webkit?2:q("Paste",a);a.fire("pasteState",c)}var f=function(a,c){var d=a.document,e=d.getBody(),f=0,g=function(){f=1};return e.on(c,g),(b.version>7?d.$:d.$.selection.createRange()).execCommand(c),e.removeListener(c,g),f},g=c?function(a,b){return f(a,b)}:function(a,b){try{return a.document.$.execCommand(b,!1,null)}catch(c){return!1}},i=function(a){var b=this;b.type=a,b.canUndo=b.type=="cut",b.startDisabled=!0};i.prototype={exec:function(a,b){this.type=="cut"&&o(a);var c=g(a,this.type);return c||alert(a.lang.clipboard[this.type+"Error"]),c}};var k={canUndo:!1,exec:c?function(a){a.focus();if(!a.document.getBody().fire("beforepaste")&&!f(a,"paste"))return a.fire("pasteDialog"),!1}:function(a){try{if(!a.document.getBody().fire("beforepaste")&&!a.document.$.execCommand("Paste",!1,null))throw 0}catch(b){return setTimeout(function(){a.fire("pasteDialog")},0),!1}}},l=function(a){if(this.mode!="wysiwyg")return;switch(a.data.keyCode){case 1114198:case 2228269:var d=this.document.getBody();!c&&d.fire("beforepaste")?a.cancel():(b.opera||b.gecko&&b.version<10900)&&d.fire("paste");return;case 1114200:case 2228270:var e=this;this.fire("saveSnapshot"),setTimeout(function(){e.fire("saveSnapshot")},0)}},p,r;j.add("clipboard",{requires:["dialog","htmldataprocessor"],init:function(c){function d(a,b,d,e){var f=c.lang[b];c.addCommand(b,d),c.ui.addButton(a,{label:f,command:b}),c.addMenuItems&&c.addMenuItem(b,{label:f,command:b,group:"clipboard",order:e})}c.on("paste",function(a){var b=a.data;b.html?c.insertHtml(b.html):b.text&&c.insertText(b.text),setTimeout(function(){c.fire("afterPaste")},0)},null,null,1e3),c.on("pasteDialog",function(a){setTimeout(function(){c.openDialog("paste")},0)}),c.on("pasteState",function(a){c.getCommand("paste").setState(a.data)}),d("Cut","cut",new i("cut"),1),d("Copy","copy",new i("copy"),4),d("Paste","paste",k,8),a.dialog.add("paste",a.getUrl(this.path+"dialogs/paste.js")),c.on("key",l,c),c.on("contentDom",function(){var a=c.document.getBody();a.on(b.webkit?"paste":"beforepaste",function(a){if(p)return;var b={mode:"html"};c.fire("beforePaste",b),n.call(c,a,b.mode,function(a){if(!(a=e.trim(a.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/ig,""))))return;var d={};d[b.mode]=a,c.fire("paste",d)})}),a.on("contextmenu",function(){p=1,setTimeout(function(){p=0},10)}),a.on("beforecut",function(){!p&&o(c)}),a.on("mouseup",function(){setTimeout(function(){s.call(c)},0)},c),a.on("keyup",s,c)}),c.on("selectionChange",function(a){r=a.data.selection.getRanges()[0].checkReadOnly(),s.call(c)}),c.contextMenu&&c.contextMenu.addListener(function(a,d){var e=d.getRanges()[0].checkReadOnly();return{cut:!e&&q("Cut",c),copy:q("Copy",c),paste:!e&&(b.webkit?2:q("Paste",c))}})}})}(),j.add("colorbutton",{requires:["panelbutton","floatpanel","styles"],init:function(c){function i(a,b,f){var h=e.getNextId()+"_colorBox";c.ui.add(a,"panelbutton",{label:f,title:f,className:"cke_button_"+a.toLowerCase(),modes:{wysiwyg:1},panel:{css:c.skin.editor.css,attributes:{role:"listbox","aria-label":g.panelTitle}},onBlock:function(a,d){d.autoSize=!0,d.element.addClass("cke_colorblock"),d.element.setHtml(j(a,b,h)),d.element
.getDocument().getBody().setStyle("overflow","hidden"),k.fire("ready",this);var e=d.keys,f=c.lang.dir=="rtl";e[f?37:39]="next",e[40]="next",e[9]="next",e[f?39:37]="prev",e[38]="prev",e[2228233]="prev",e[32]="click"},onOpen:function(){var a=c.getSelection(),e=a&&a.getStartElement(),f=new d.elementPath(e),g;e=f.block||f.blockLimit||c.document.getBody();do g=e&&e.getComputedStyle(b=="back"?"background-color":"color")||"transparent";while(b=="back"&&g=="transparent"&&e&&(e=e.getParent()));if(!g||g=="transparent")g="#ffffff";this._.panel._.iframe.getFrameDocument().getById(h).setStyle("background-color",g)}})}function j(b,d,h){var i=[],j=f.colorButton_colors.split(","),k=j.length+(f.colorButton_enableMore?2:1),p=e.addFunction(function(d,e){if(d=="?"){var g=arguments.callee;function h(a){this.removeListener("ok",h),this.removeListener("cancel",h),a.name=="ok"&&g(this.getContentElement("picker","selectedColor").getValue(),e)}c.openDialog("colordialog",function(){this.on("ok",h),this.on("cancel",h)});return}c.focus(),b.hide(!1),c.fire("saveSnapshot"),(new a.style(f["colorButton_"+e+"Style"],{color:"inherit"})).remove(c.document);if(d){var i=f["colorButton_"+e+"Style"];i.childRule=e=="back"?function(a){return l(a)}:function(a){return!a.is("a")&&!a.getElementsByTag("a").count()||l(a)},(new a.style(i,{color:d})).apply(c.document)}c.fire("saveSnapshot")});i.push('<a class="cke_colorauto" _cke_focus=1 hidefocus=true title="',g.auto,'" onclick="CKEDITOR.tools.callFunction(',p,",null,'",d,"');return false;\" href=\"javascript:void('",g.auto,'\')" role="option" aria-posinset="1" aria-setsize="',k,'"><table role="presentation" cellspacing=0 cellpadding=0 width="100%"><tr><td><span class="cke_colorbox" id="',h,'"></span></td><td colspan=7 align=center>',g.auto,'</td></tr></table></a><table role="presentation" cellspacing=0 cellpadding=0 width="100%">');for(var q=0;q<j.length;q++){q%8===0&&i.push("</tr><tr>");var r=j[q].split("/"),t=r[0],u=r[1]||t;r[1]||(t="#"+t.replace(/^(.)(.)(.)$/,"$1$1$2$2$3$3"));var v=c.lang.colors[u]||u;i.push('<td><a class="cke_colorbox" _cke_focus=1 hidefocus=true title="',v,'" onclick="CKEDITOR.tools.callFunction(',p,",'",t,"','",d,"'); return false;\" href=\"javascript:void('",v,'\')" role="option" aria-posinset="',q+2,'" aria-setsize="',k,'"><span class="cke_colorbox" style="background-color:#',u,'"></span></a></td>')}return(f.colorButton_enableMore===undefined||f.colorButton_enableMore)&&i.push('</tr><tr><td colspan=8 align=center><a class="cke_colormore" _cke_focus=1 hidefocus=true title="',g.more,'" onclick="CKEDITOR.tools.callFunction(',p,",'?','",d,"');return false;\" href=\"javascript:void('",g.more,"')\"",' role="option" aria-posinset="',k,'" aria-setsize="',k,'">',g.more,"</a></td>"),i.push("</tr></table>"),i.join("")}function l(a){return a.getAttribute("contentEditable")=="false"||a.getAttribute("data-nostyle")}var f=c.config,g=c.lang.colorButton,h;b.hc||(i("TextColor","fore",g.textColorTitle),i("BGColor","back",g.bgColorTitle))}}),i.colorButton_colors="000,800000,8B4513,2F4F4F,008080,000080,4B0082,696969,B22222,A52A2A,DAA520,006400,40E0D0,0000CD,800080,808080,F00,FF8C00,FFD700,008000,0FF,00F,EE82EE,A9A9A9,FFA07A,FFA500,FFFF00,00FF00,AFEEEE,ADD8E6,DDA0DD,D3D3D3,FFF0F5,FAEBD7,FFFFE0,F0FFF0,F0FFFF,F0F8FF,E6E6FA,FFF",i.colorButton_foreStyle={element:"span",styles:{color:"#(color)"},overrides:[{element:"font",attributes:{color:null}}]},i.colorButton_backStyle={element:"span",styles:{"background-color":"#(color)"}},j.colordialog={init:function(b){b.addCommand("colordialog",new a.dialogCommand("colordialog")),a.dialog.add("colordialog",this.path+"dialogs/colordialog.js")}},j.add("colordialog",j.colordialog),j.add("contextmenu",{requires:["menu"],onLoad:function(){j.contextMenu=e.createClass({base:a.menu,$:function(a){this.base.call(this,a,{panel:{className:a.skinClass+" cke_contextmenu",attributes:{"aria-label":a.lang.contextmenu.options}}})},proto:{addTarget:function(a,d){if(b.opera&&!("oncontextmenu"in document.body)){var f;a.on("mousedown",function(c){c=c.data;if(c.$.button!=2){c.getKeystroke()==1114112+1&&a.fire("contextmenu",c);return}if(d&&(b.mac?c.$.metaKey:c.$.ctrlKey))return;var e=c.getTarget();if(!f){var g=e.getDocument();f=g.createElement("input"),f.$.type="button",g.getBody().append(f)}f.setAttribute("style","position:absolute;top:"+(c.$.clientY-2)+"px;left:"+(c.$.clientX-2)+"px;width:5px;height:5px;opacity:0.01")}),a.on("mouseup",function(b){f&&(f.remove(),f=undefined,a.fire("contextmenu",b.data))})}a.on("contextmenu",function(a){var f=a.data;if(d&&(b.webkit?g:b.mac?f.$.metaKey:f.$.ctrlKey))return;f.preventDefault();var h=f.getTarget().getDocument().getDocumentElement(),i=f.$.clientX,j=f.$.clientY;e.setTimeout(function(){this.open(h,null,i,j)},c?200:0,this)},this),b.opera&&a.on("keypress",function(a){var b=a.data;b.$.keyCode===0&&b.preventDefault()});if(b.webkit){var g,h=function(a){g=b.mac?a.data.$.metaKey:a.data.$.ctrlKey},i=function(){g=0};a.on("keydown",h),a.on("keyup",i),a.on("contextmenu",i)}},open:function(b,c,d,e){this.editor.focus(),b=b||a.document.getDocumentElement(),this.show(b,c,d,e)}}})},beforeInit:function(a){a.contextMenu=new j.contextMenu(a),a.addCommand("contextMenu",{exec:function(){a.contextMenu.open(a.document.getBody())}})}}),function(){function b(a){var b=this.att,c=a&&a.hasAttribute(b)&&a.getAttribute(b)||"";c!==undefined&&this.setValue(c)}function c(){var a;for(var b=0;b<arguments.length;b++)if(arguments[b]instanceof h){a=arguments[b];break}if(a){var c=this.att,d=this.getValue();d?a.setAttribute(c,d):a.removeAttribute(c,d)}}j.add("dialogadvtab",{createAdvancedTab:function(d,e){e||(e={id:1,dir:1,classes:1,styles:1});var f=d.lang.common,g={id:"advanced",label:f.advancedTab,title:f.advancedTab,elements:[{type:"vbox",padding:1,children:[]}]},h=[];if(e.id||e.dir)e.id&&h.push({id:"advId",att:"id",type:"text",label:f.id,setup:b,commit:c}),e.dir&&h.push({id:"advLangDir",att:"dir",type:"select",label:f.langDir,"default":"",style:"width:100%",items:[[f.notSet,""],[f.langDirLTR,"ltr"],[f.langDirRTL,"rtl"]],setup:b,commit:c}),g.elements[0].children.push({type:"hbox",widths:["50%","50%"],children:[].concat(h)});if(e.styles||e.classes)h=[],e.styles&&h.push({id:"advStyles",att:"style",type:"text",label:f.styles,"default":"",validate:a.dialog.validate.inlineStyle(f.invalidInlineStyle),onChange:function(){},getStyle:function(a,b){var c=this.getValue().match(new RegExp(a+"\\s*:\\s*([^;]*)","i"));return c?c[1]:b},updateStyle:function(a,b){var c=this.getValue();c&&(c=c.replace(new RegExp("\\s*"+a+"s*:[^;]*(?:$|;s*)","i"),"").replace(/^[;\s]+/,"").replace(/\s+$/,"")),b&&(c&&!/;\s*$/.test(c)&&(c+="; "),c+=a+": "+b),this.setValue(c,1)},setup:b,commit:c}),e.classes&&h.push({type:"hbox",widths:["45%","55%"],children:[{id:"advCSSClasses",att:"class",type:"text",label:f.cssClasses,"default":"",setup:b,commit:c}]}),g.elements[0].children.push({type:"hbox",widths:["50%","50%"],children:[].concat(h)});return g}})}(),function(){j.add("div",{requires:["editingblock","domiterator","styles"],init:function(b){var c=b.lang.div;b.addCommand("creatediv",new a.dialogCommand("creatediv")),b.addCommand("editdiv",new a.dialogCommand("editdiv")),b.addCommand("removediv",{exec:function(a){function i(a){var b=new d.elementPath(a),c=b.blockLimit,e=c.is("div")&&c;e&&!e.data("cke-div-added")&&(h.push(e),e.data("cke-div-added"))}var b=a.getSelection(),c=b&&b.getRanges(),e,f=b.createBookmarks(),g,h=[];for(var j=0;j<c.length;j++)e=c[j],e.collapsed?i(b.getStartElement()):(g=new d.walker(e),g.evaluator=i,g.lastForward());for(j=0;j<h.length;j++)h[j].remove(!0);b.selectBookmarks(f)}}),b.ui.addButton("CreateDiv",{label:c.toolbar,command:"creatediv"}),b.addMenuItems&&(b.addMenuItems({editdiv:{label:c.edit,command:"editdiv",group:"div",order:1},removediv:{label:c.remove,command:"removediv",group:"div",order:5}}),b.contextMenu&&b.contextMenu.addListener(function(a,b){if(!a||a.isReadOnly())return null;var c=new d.elementPath(a),e=c.blockLimit;return e&&e.getAscendant("div",!0)?{editdiv:2,removediv:2}:null})),a.dialog.add("creatediv",this.path+"dialogs/div.js"),a.dialog.add("editdiv",this.path+"dialogs/div.js")}})}(),function(){var f={toolbarFocus:{editorFocus:!1,readOnly:1,exec:function(d){var e=d._.elementsPath.idBase,f=a.document.getById(e+"0");f&&f.focus(c||b.air)}}},g='<span class="cke_empty">&nbsp;</span>';j.add("elementspath",{requires:["selection"],init:function(c){function l(a){c.focus();var b=c._.elementsPath.list[a];if(b.is("body")){var e=new d.range(c.document);e.selectNodeContents(b),e.select()}else c.getSelection().selectElement(b)}function q(){i&&i.setHtml(g),delete c._.elementsPath.list}var h="cke_path_"+c.name,i,j=function(){return i||(i=a.document.getById(h)),i},k="cke_elementspath_"+e.getNextNumber()+"_";c._.elementsPath={idBase:k,filters:[]},c.on("themeSpace",function(a){a.data.space=="bottom"&&(a.data.html+='<span id="'+h+'_label" class="cke_voice_label">'+c.lang.elementsPath.eleLabel+"</span>"+'<div id="'+h+'" class="cke_path" role="group" aria-labelledby="'+h+'_label">'+g+"</div>")});var o=e.addFunction(l),p=e.addFunction(function(b,e){var f=c._.elementsPath.idBase,g;e=new d.event(e);var h=c.lang.dir=="rtl";switch(e.getKeystroke()){case h?39:37:case 9:return g=a.document.getById(f+(b+1)),g||(g=a.document.getById(f+"0")),g.focus(),!1;case h?37:39:case 2228233:return g=a.document.getById(f+(b-1)),g||(g=a.document.getById(f+(c._.elementsPath.list.length-1))),g.focus(),!1;case 27:return c.focus(),!1;case 13:case 32:return l(b),!1}return!0});c.on("selectionChange",function(a){var c=b,d=a.data.selection,e=d.getStartElement(),f=[],h=a.editor,i=h._.elementsPath.list=[],l=h._.elementsPath.filters;while(e){var m=0,q;e.data("cke-display-name")?q=e.data("cke-display-name"):e.data("cke-real-element-type")?q=e.data("cke-real-element-type"):q=e.getName();for(var t=0;t<l.length;t++){var w=l[t](e,q);if(w===!1){m=1;break}q=w||q}if(!m){var x=i.push(e)-1,y="";if(c.opera||c.gecko&&c.mac)y+=' onkeypress="return false;"';c.gecko&&(y+=' onblur="this.style.cssText = this.style.cssText;"');var z=h.lang.elementsPath.eleTitle.replace(/%1/,q);f.unshift('<a id="',k,x,'" href="javascript:void(\'',q,'\')" tabindex="-1" title="',z,'"'+(b.gecko&&b.version<10900?' onfocus="event.preventBubble();"':"")+' hidefocus="true" '+' onkeydown="return CKEDITOR.tools.callFunction(',p,",",x,', event );"'+y,' onclick="CKEDITOR.tools.callFunction('+o,",",x,'); return false;"',' role="button" aria-labelledby="'+k+x+'_label">',q,'<span id="',k,x,'_label" class="cke_label">'+z+"</span>","</a>")}if(q=="body")break;e=e.getParent()}var A=j();A.setHtml(f.join("")+g),h.fire("elementsPathUpdate",{space:A})}),c.on("readOnly",q),c.on("contentDomUnload",q),c.addCommand("elementsPathFocus",f.toolbarFocus)}})}(),function(){function i(a){return a.mode!="wysiwyg"?!1:k(a,a.config.shiftEnterMode,1)}function k(a,b,c){return c=a.config.forceEnterMode||c,a.mode!="wysiwyg"?!1:(b||(b=a.config.enterMode),setTimeout(function(){a.fire("saveSnapshot"),b==2?e(a,b,null,c):g(a,b,null,c),a.fire("saveSnapshot")},0),!0)}function l(a){var b=a.getSelection().getRanges(!0);for(var c=b.length-1;c>0;c--)b[c].deleteContents();return b[0]}j.add("enterkey",{requires:["keystrokes","indent"],init:function(a){a.addCommand("enter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(a){k(a)}}),a.addCommand("shiftEnter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(a){i(a)}});var b=a.keystrokeHandler.keystrokes;b[13]="enter",b[2228237]="shiftEnter"}}),j.enterkey={enterBlock:function(a,b,g,i){g=g||l(a);if(!g)return;var j=g.document,k=g.checkStartOfBlock(),m=g.checkEndOfBlock(),o=new d.elementPath(g.startContainer),q=o.block;if(k&&m){if(q&&(q.is("li")||q.getParent().is("li"))){a.execCommand("outdent");return}if(q&&q.getParent().is("blockquote")){q.breakParent(q.getParent()),q.getPrevious().getFirst(d.walker.invisible(1))||q.getPrevious().remove(),q.getNext().getFirst(d.walker.invisible(1))||q.getNext().remove(),g.moveToElementEditStart(q),g.select();return}}else if(q&&q.is("pre")){if(!m){e(a,b,g,i);return}}else if(q&&f.$captionBlock[q.getName()]){e(a,b,g,i);return}var r=b==3?"div":"p",t=g.splitBlock(r);if(!t)return;var u=t.previousBlock,v=t.nextBlock,w=t.wasStartOfBlock,x=t.wasEndOfBlock,y;v?(y=v.getParent(),y.is("li")&&(v.breakParent(y),v.move(v.getNext(),1))):u&&(y=u.getParent())&&y.is("li")&&(u.breakParent(y),y=u.getNext(),g.moveToElementEditStart(y),u.move(u.getPrevious()));if(!w&&!x)v.is("li")&&(y=v.getFirst(d.walker.invisible(!0)))&&y.is&&y.is("ul","ol")&&(c?j.createText(" "):j.createElement("br")).insertBefore(y),v&&g.moveToElementEditStart(v);else{var z,A;if(u){if(u.is("li")||!h.test(u.getName())&&!u.is("pre"))z=u.clone()}else v&&(z=v.clone());z?i&&!z.is("li")&&z.renameNode(r):y&&y.is("li")?z=y:(z=j.createElement(r),u&&(A=u.getDirection())&&z.setAttribute("dir",A));var B=t.elementPath;if(B)for(var C=0,D=B.elements.length;C<D;C++){var E=B.elements[C];if(E.equals(B.block)||E.equals(B.blockLimit))break;f.$removeEmpty[E.getName()]&&(E=E.clone(),z.moveChildren(E),z.append(E))}c||z.appendBogus(),z.getParent()||g.insertNode(z),z.is("li")&&z.removeAttribute("value"),c&&w&&(!x||!u.getChildCount())&&(g.moveToElementEditStart(x?u:z),g.select()),g.moveToElementEditStart(w&&!x?v:z)}if(!c)if(v){var F=j.createElement("span");F.setHtml("&nbsp;"),g.insertNode(F),F.scrollIntoView(),g.deleteContents()}else z.scrollIntoView();g.select()},enterBr:function(a,e,f,i){f=f||l(a);if(!f)return;var j=f.document,k=e==3?"div":"p",m=f.checkEndOfBlock(),n=new d.elementPath(a.getSelection().getStartElement()),q=n.block,r=q&&n.block.getName(),t=!1;if(!i&&r=="li"){g(a,e,f,i);return}if(!i&&m&&h.test(r)){var u,v;(v=q.getDirection())?(u=j.createElement("div"),u.setAttribute("dir",v),u.insertAfter(q),f.setStart(u,0)):(j.createElement("br").insertAfter(q),b.gecko&&j.createText("").insertAfter(q),f.setStartAt(q.getNext(),c?3:1))}else{var w;t=r=="pre",t&&!b.gecko?w=j.createText(c?"\r":"\n"):w=j.createElement("br"),f.deleteContents(),f.insertNode(w);if(c)f.setStartAt(w,4);else{j.createText("﻿").insertAfter(w),m&&w.getParent().appendBogus(),w.getNext().$.nodeValue="",f.setStartAt(w.getNext(),1);var x=null;b.gecko?x=j.createElement("br"):(x=j.createElement("span"),x.setHtml("&nbsp;")),x.insertBefore(w.getNext()),x.scrollIntoView(),x.remove()}}f.collapse(!0),f.select(t)}};var a=j.enterkey,e=a.enterBr,g=a.enterBlock,h=/^h[1-6]$/}(),function(){function e(a,b){var c={},d=[],e={nbsp:" ",shy:"­",gt:">",lt:"<",amp:"&"};a=a.replace(/\b(nbsp|shy|gt|lt|amp)(?:,|$)/g,function(a,f){var g=b?"&"+f+";":e[f],h=b?e[f]:"&"+f+";";return c[g]=h,d.push(g),""});if(!b&&a){a=a.split(",");var f=document.createElement("div"),g;f.innerHTML="&"+a.join(";&")+";",g=f.innerHTML,f=null;for(var h=0;h<g.length;h++){var i=g.charAt(h);c[i]="&"+a[h]+";",d.push(i)}}return c.regex=d.join(b?"|":""),c}var a="nbsp,gt,lt,amp",b="quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro",c="Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml",d="Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv";j.add("entities",{afterInit:function(f){var g=f.config,h=f.dataProcessor,i=h&&h.htmlFilter;if(i){var j="";g.basicEntities!==!1&&(j+=a),g.entities&&(j+=","+b,g.entities_latin&&(j+=","+c),g.entities_greek&&(j+=","+d),g.entities_additional&&(j+=","+g.entities_additional));var k=e(j),l=k.regex?"["+k.regex+"]":"a^";delete k.regex,g.entities&&g.entities_processNumerical&&(l="[^ -~]|"+l),l=new RegExp(l,"g");function r(a){return g.entities_processNumerical=="force"||!k[a]?"&#"+a.charCodeAt(0)+";":k[a]}var s=e([a,"shy"].join(","),!0),t=new RegExp(s.regex,"g");function u(a){return s[a]}i.addRules({text:function(a){return a.replace(t,u).replace(l,r)}})}}})}(),i.basicEntities=!0,i.entities=!0,i.entities_latin=!0,i.entities_greek=!0,i.entities_additional="#39",function(){function b(a,b){var c=[];if(!b)return a;for(var d in b)c.push(d+"="+encodeURIComponent(b[d]));return a+(a.indexOf("?")!=-1?"&":"?")+c.join("&")}function c(a){a+="";var b=a.charAt(0).toUpperCase();return b+a.substr(1)}function d(a){var d=this,e=d.getDialog(),f=e.getParentEditor();f._.filebrowserSe=d;var g=f.config["filebrowser"+c(e.getName())+"WindowWidth"]||f.config.filebrowserWindowWidth||"80%",h=f.config["filebrowser"+c(e.getName())+"WindowHeight"]||f.config.filebrowserWindowHeight||"70%",i=d.filebrowser.params||{};i.CKEditor=f.name,i.CKEditorFuncNum=f._.filebrowserFn,i.langCode||(i.langCode=f.langCode);var j=b(d.filebrowser.url,i);f.popup(j,g,h,f.config.filebrowserWindowFeatures||f.config.fileBrowserWindowFeatures)}function f(a){var b=this,c=b.getDialog(),d=c.getParentEditor();return d._.filebrowserSe=b,c.getContentElement(b["for"][0],b["for"][1]).getInputElement().$.value?c.getContentElement(b["for"][0],b["for"][1]).getAction()?!0:!1:!1}function g(a,c,d){var e=d.params||{};e.CKEditor=a.name,e.CKEditorFuncNum=a._.filebrowserFn,e.langCode||(e.langCode=a.langCode),c.action=b(d.url,e),c.filebrowser=d}function h(a,b,e,i){var j,k;for(var l in i){j=i[l],(j.type=="hbox"||j.type=="vbox")&&h(a,b,e,j.children);if(!j.filebrowser)continue;if(typeof j.filebrowser=="string"){var m={action:j.type=="fileButton"?"QuickUpload":"Browse",target:j.filebrowser};j.filebrowser=m}if(j.filebrowser.action=="Browse"){var s=j.filebrowser.url;s===undefined&&(s=a.config["filebrowser"+c(b)+"BrowseUrl"],s===undefined&&(s=a.config.filebrowserBrowseUrl)),s&&(j.onClick=d,j.filebrowser.url=s,j.hidden=!1)}else if(j.filebrowser.action=="QuickUpload"&&j["for"]){s=j.filebrowser.url,s===undefined&&(s=a.config["filebrowser"+c(b)+"UploadUrl"],s===undefined&&(s=a.config.filebrowserUploadUrl));if(s){var t=j.onClick;j.onClick=function(a){var b=a.sender;return t&&t.call(b,a)===!1?!1:f.call(b,a)},j.filebrowser.url=s,j.hidden=!1,g(a,e.getContents(j["for"][0]).get(j["for"][1]),j.filebrowser)}}}}function i(a,b){var c=b.getDialog(),d=b.filebrowser.target||null;a=a.replace(/#/g,"%23");if(d){var e=d.split(":"),f=c.getContentElement(e[0],e[1]);f&&(f.setValue(a),c.selectPage(e[0]))}}function k(a,b,c){if(c.indexOf(";")!==-1){var d=c.split(";");for(var e=0;e<d.length;e++)if(k(a,b,d[e]))return!0;return!1}var f=a.getContents(b).get(c).filebrowser;return f&&f.url}function l(a,b){var c=this,d=c._.filebrowserSe.getDialog(),e=c._.filebrowserSe["for"],f=c._.filebrowserSe.filebrowser.onSelect;e&&d.getContentElement(e[0],e[1]).reset();if(typeof b=="function"&&b.call(c._.filebrowserSe)===!1)return;if(f&&f.call(c._.filebrowserSe,a,b)===!1)return;typeof b=="string"&&b&&alert(b),a&&i(a,c._.filebrowserSe)}j.add("filebrowser",{init:function(a,b){a._.filebrowserFn=e.addFunction(l,a),a.on("destroy",function(){e.removeFunction(this._.filebrowserFn)})}}),a.on("dialogDefinition",function(a){var b=a.data.definition,c;for(var d in b.contents)if(c=b.contents[d])h(a.editor,a.data.name,b,c.elements),c.hidden&&c.filebrowser&&(c.hidden=!k(b,c.id,c.filebrowser))})}(),j.add("find",{init:function(b){var c=j.find;b.ui.addButton("Find",{label:b.lang.findAndReplace.find,command:"find"});var d=b.addCommand("find",new a.dialogCommand("find"));d.canUndo=!1,d.readOnly=1,b.ui.addButton("Replace",{label:b.lang.findAndReplace.replace,command:"replace"});var e=b.addCommand("replace",new a.dialogCommand("replace"));e.canUndo=!1,a.dialog.add("find",this.path+"dialogs/find.js"),a.dialog.add("replace",this.path+"dialogs/find.js")},requires:["styles"]}),i.find_highlight={element:"span",styles:{"background-color":"#004",color:"#fff"}},function(){function c(a){var c=a.attributes;return c.type=="application/x-shockwave-flash"||b.test(c.src||"")}function d(a,b){return a.createFakeParserElement(b,"cke_flash","flash",!0)}var b=/\.swf(?:$|\?)/i;j.add("flash",{init:function(b){b.addCommand("flash",new a.dialogCommand("flash")),b.ui.addButton("Flash",{label:b.lang.common.flash,command:"flash"}),a.dialog.add("flash",this.path+"dialogs/flash.js"),b.addCss("img.cke_flash{background-image: url("+a.getUrl(this.path+"images/placeholder.png")+");"+"background-position: center center;"+"background-repeat: no-repeat;"+"border: 1px solid #a9a9a9;"+"width: 80px;"+"height: 80px;"+"}"),b.addMenuItems&&b.addMenuItems({flash:{label:b.lang.flash.properties,command:"flash",group:"flash"}}),b.on("doubleclick",function(a){var b=a.data.element;b.is("img")&&b.data("cke-real-element-type")=="flash"&&(a.data.dialog="flash")}),b.contextMenu&&b.contextMenu.addListener(function(a,b){if(a&&a.is("img")&&!a.isReadOnly()&&a.data("cke-real-element-type")=="flash")return{flash:2}})},afterInit:function(a){var b=a.dataProcessor,e=b&&b.dataFilter;e&&e.addRules({elements:{"cke:object":function(b){var e=b.attributes,f=e.classid&&String(e.classid).toLowerCase();if(!f&&!c(b)){for(var g=0;g<b.children.length;g++)if(b.children[g].name=="cke:embed")return c(b.children[g])?d(a,b):null;return null}return d(a,b)},"cke:embed":function(b){return c(b)?d(a,b):null}}},5)},requires:["fakeobjects"]})}(),e.extend(i,{flashEmbedTagOnly:!1,flashAddEmbedTag:!0,flashConvertOnEdit:!1}),function(){function b(b,c,d,e,f,g,h){var i=b.config,j=f.split(";"),k=[],l={};for(var m=0;m<j.length;m++){var n=j[m];if(n){n=n.split("/");var o={},p=j[m]=n[0];o[d]=k[m]=n[1]||p,l[p]=new a.style(h,o),l[p]._.definition.name=p}else j.splice(m--,1)}b.ui.addRichCombo(c,{label:e.label,title:e.panelTitle,className:"cke_"+(d=="size"?"fontSize":"font"),panel:{css:b.skin.editor.css.concat(i.contentsCss),multiSelect:!1,attributes:{"aria-label":e.panelTitle}},init:function(){this.startGroup(e.panelTitle);for(var a=0;a<j.length;a++){var b=j[a];this.add(b,l[b].buildPreview(),b)}},onClick:function(a){b.focus(),b.fire("saveSnapshot");var c=l[a];this.getValue()==a?c.remove(b.document):c.apply(b.document),b.fire("saveSnapshot")},onRender:function(){b.on("selectionChange",function(a){var b=this.getValue(),c=a.data.path,d=c.elements;for(var e=0,f;e<d.length;e++){f=d[e];for(var h in l)if(l[h].checkElementRemovable(f,!0)){h!=b&&this.setValue(h);return}}this.setValue("",g)},this)}})}j.add("font",{requires:["richcombo","styles"],init:function(a){var c=a.config;b(a,"Font","family",a.lang.font,c.font_names,c.font_defaultLabel,c.font_style),b(a,"FontSize","size",a.lang.fontSize,c.fontSize_sizes,c.fontSize_defaultLabel,c.fontSize_style)}})}(),i.font_names="Arial/Arial, Helvetica, sans-serif;Comic Sans MS/Comic Sans MS, cursive;Courier New/Courier New, Courier, monospace;Georgia/Georgia, serif;Lucida Sans Unicode/Lucida Sans Unicode, Lucida Grande, sans-serif;Tahoma/Tahoma, Geneva, sans-serif;Times New Roman/Times New Roman, Times, serif;Trebuchet MS/Trebuchet MS, Helvetica, sans-serif;Verdana/Verdana, Geneva, sans-serif",i.font_defaultLabel="",i.font_style={element:"span",styles:{"font-family":"#(family)"},overrides:[{element:"font",attributes:{face:null}}]},i.fontSize_sizes="8/8px;9/9px;10/10px;11/11px;12/12px;14/14px;16/16px;18/18px;20/20px;22/22px;24/24px;26/26px;28/28px;36/36px;48/48px;72/72px",i.fontSize_defaultLabel="",i.fontSize_style={element:"span",styles:{"font-size":"#(size)"},overrides:[{element:"font",attributes:{size:null}}]},j.add("format",{requires:["richcombo","styles"],init:function(b){var c=b.config,e=b.lang.format,f=c.format_tags.split(";"),g={};for(var h=0;h<f.length;h++){var i=f[h];g[i]=new a.style(c["format_"+i]),g[i]._.enterMode=b.config.enterMode}b.ui.addRichCombo("Format",{label:e.label,title:e.panelTitle,className:"cke_format",panel:{css:b.skin.editor.css.concat(c.contentsCss),multiSelect:!1,attributes:{"aria-label":e.panelTitle}},init:function(){this.startGroup(e.panelTitle);for(var a in g){var b=e["tag_"+a];this.add(a,g[a].buildPreview(b),b)}},onClick:function(a){b.focus(),b.fire("saveSnapshot");var c=g[a],e=new d.elementPath(b.getSelection().getStartElement());c[c.checkActive(e)?"remove":"apply"](b.document),setTimeout(function(){b.fire("saveSnapshot")},0)},onRender:function(){b.on("selectionChange",function(a){var c=this.getValue(),d=a.data.path;for(var e in g)if(g[e].checkActive(d)){e!=c&&this.setValue(e,b.lang.format["tag_"+e]);return}this.setValue("")},this)}})}}),i.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div",i.format_p={element:"p"},i.format_div={element:"div"},i.format_pre={element:"pre"},i.format_address={element:"address"},i.format_h1={element:"h1"},i.format_h2={element:"h2"},i.format_h3={element:"h3"},i.format_h4={element:"h4"},i.format_h5={element:"h5"},i.format_h6={element:"h6"},j.add("forms",{init:function(b){var c=b.lang;b.addCss("form{border: 1px dotted #FF0000;padding: 2px;}\n"),b.addCss("img.cke_hidden{background-image: url("+a.getUrl(this.path+"images/hiddenfield.gif")+");"+"background-position: center center;"+"background-repeat: no-repeat;"+"border: 1px solid #a9a9a9;"+"width: 16px !important;"+"height: 16px !important;"+"}");var d=function(d,e,f){b.addCommand(e,new a.dialogCommand(e)),b.ui.addButton(d,{label:c.common[d.charAt(0).toLowerCase()+d.slice(1)],command:e}),a.dialog.add(e,f)},e=this.path+"dialogs/";d("Form","form",e+"form.js"),d("Checkbox","checkbox",e+"checkbox.js"),d("Radio","radio",e+"radio.js"),d("TextField","textfield",e+"textfield.js"),d("Textarea","textarea",e+"textarea.js"),d("Select","select",e+"select.js"),d("Button","button",e+"button.js"),d("ImageButton","imagebutton",j.getPath("image")+"dialogs/image.js"),d("HiddenField","hiddenfield",e+"hiddenfield.js"),b.addMenuItems&&b.addMenuItems({form:{label:c.form.menu,command:"form",group:"form"},checkbox:{label:c.checkboxAndRadio.checkboxTitle,command:"checkbox",group:"checkbox"},radio:{label:c.checkboxAndRadio.radioTitle,command:"radio",group:"radio"},textfield:{label:c.textfield.title,command:"textfield",group:"textfield"},hiddenfield:{label:c.hidden.title,command:"hiddenfield",group:"hiddenfield"},imagebutton:{label:c.image.titleButton,command:"imagebutton",group:"imagebutton"},button:{label:c.button.title,command:"button",group:"button"},select:{label:c.select.title,command:"select",group:"select"},textarea:{label:c.textarea.title,command:"textarea",group:"textarea"}}),b.contextMenu&&(b.contextMenu.addListener(function(a){if(a&&a.hasAscendant("form",!0)&&!a.isReadOnly())return{form:2}}),b.contextMenu.addListener(function(a){if(a&&!a.isReadOnly()){var b=a.getName();if(b=="select")return{select:2};if(b=="textarea")return{textarea:2};if(b=="input")switch(a.getAttribute("type")){case"button":case"submit":case"reset":return{button:2};case"checkbox":return{checkbox:2};case"radio":return{radio:2};case"image":return{imagebutton:2};default:return{textfield:2}}if(b=="img"&&a.data("cke-real-element-type")=="hiddenfield")return{hiddenfield:2}}})),b.on("doubleclick",function(a){var b=a.data.element;if(b.is("form"))a.data.dialog="form";else if(b.is("select"))a.data.dialog="select";else if(b.is("textarea"))a.data.dialog="textarea";else if(b.is("img")&&b.data("cke-real-element-type")=="hiddenfield")a.data.dialog="hiddenfield";else if(b.is("input"))switch(b.getAttribute("type")){case"button":case"submit":case"reset":a.data.dialog="button";break;case"checkbox":a.data.dialog="checkbox";break;case"radio":a.data.dialog="radio";break;case"image":a.data.dialog="imagebutton";break;default:a.data.dialog="textfield"}})},afterInit:function(a){var b=a.dataProcessor,d=b&&b.htmlFilter,e=b&&b.dataFilter;c&&d&&d.addRules({elements:{input:function(a){var b=a.attributes,c=b.type;c||(b.type="text"),(c=="checkbox"||c=="radio")&&b.value=="on"&&delete b.value}}}),e&&e.addRules({elements:{input:function(b){if(b.attributes.type=="hidden")return a.createFakeParserElement(b,"cke_hidden","hiddenfield")}}})},requires:["image","fakeobjects"]}),c&&(h.prototype.hasAttribute=e.override(h.prototype.hasAttribute,function(a){return function(b){var c=this,d=c.$.attributes.getNamedItem(b);if(c.getName()=="input")switch(b){case"class":return c.$.className.length>0;case"checked":return!!c.$.checked;case"value":var e=c.getAttribute("type");return e=="checkbox"||e=="radio"?c.$.value!="on":c.$.value}return a.apply(c,arguments)}})),function(){var a={canUndo:!1,exec:function(a){var b=a.document.createElement("hr"),c=new d.range(a.document);a.insertElement(b),c.moveToPosition(b,4);var e=b.getNext();(!e||e.type==1&&!e.isEditable())&&c.fixBlock(!0,a.config.enterMode==3?"div":"p"),c.select()}},b="horizontalrule";j.add(b,{init:function(c){c.addCommand(b,a),c.ui.addButton("HorizontalRule",{label:c.lang.horizontalrule,command:b})}})}(),function(){function g(a){var b=a.children.length,c=a.children[b-1];while(c&&c.type==3&&!e.trim(c.value))c=a.children[--b];return c}function k(a,d){var e=a.children,f=g(a);f&&((d||!c)&&f.type==1&&f.name=="br"&&e.pop(),f.type==3&&b.test(f.value)&&e.pop())}function l(a,b,d){if(!b&&(!d||typeof d=="function"&&d(a)===!1))return!1;if(b&&c&&(document.documentMode>7||a.name in f.tr||a.name in f.$listItem))return!1;var e=g(a);return!e||e&&(e.type==1&&e.name=="br"||a.name=="form"&&e.name=="input")}function m(b,d){return function(e){k(e,!b),l(e,!b,d)&&(b||c?e.add(new a.htmlParser.text(" ")):e.add(new a.htmlParser.element("br",{})))}}function u(a){var b=a.attributes;b.contenteditable!="false"&&(b["data-cke-editable"]=b.contenteditable?"true":1),b.contenteditable="false"}function v(a){var b=a.attributes;switch(b["data-cke-editable"]){case"true":b.contenteditable="true";break;case"1":delete b.contenteditable}}function D(a){return a.replace(w,function(a,b,c){return"<"+b+c.replace(x,function(a,b){return!/^on/.test(b)&&c.indexOf("data-cke-saved-"+b)==-1?" data-cke-saved-"+a+" "+a:a})+">"})}function E(a){return a.replace(y,function(a){return"<cke:encoded>"+encodeURIComponent(a)+"</cke:encoded>"})}function F(a){return a.replace(z,function(a,b){return decodeURIComponent(b)})}function G(a){return a.replace(A,"$1cke:$2")}function H(a){return a.replace(B,"$1$2")}function I(a){return a.replace(C,"<cke:$1$2></cke:$1>")}function J(a){return a.replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2")}function K(a){return a.replace(/<!--(?!{cke_protected})[\s\S]+?-->/g,function(a){return"<!--"+d+"{C}"+encodeURIComponent(a).replace(/--/g,"%2D%2D")+"-->"})}function L(a){return a.replace(/<!--\{cke_protected\}\{C\}([\s\S]+?)-->/g,function(a,b){return decodeURIComponent(b)})}function M(a,b){var c=b._.dataStore;return a.replace(/<!--\{cke_protected\}([\s\S]+?)-->/g,function(a,b){return decodeURIComponent(b)}).replace(/\{cke_protected_(\d+)\}/g,function(a,b){return c&&c[b]||""})}function N(a,b){var c=[],e=b.config.protectedSource,f=b._.dataStore||(b._.dataStore={id:1}),g=/<\!--\{cke_temp(comment)?\}(\d*?)-->/g,h=[/<script[\s\S]*?<\/script>/gi,/<noscript[\s\S]*?<\/noscript>/gi].concat(e);a=a.replace(/<!--[\s\S]*?-->/g,function(a){return"<!--{cke_tempcomment}"+(c.push(a)-1)+"-->"});for(var i=0;i<h.length;i++)a=a.replace(h[i],function(a){return a=a.replace(g,function(a,b,d){return c[d]}),/cke_temp(comment)?/.test(a)?a:"<!--{cke_temp}"+(c.push(a)-1)+"-->"});return a=a.replace(g,function(a,b,e){return"<!--"+d+(b?"{C}":"")+encodeURIComponent(c[e]).replace(/--/g,"%2D%2D")+"-->"}),a.replace(/(['"]).*?\1/g,function(a){return a.replace(/<!--\{cke_protected\}([\s\S]+?)-->/g,function(a,b){return f[f.id]=decodeURIComponent(b),"{cke_protected_"+f.id++ +"}"})})}var b=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,d="{cke_protected}",n=f,o=["caption","colgroup","col","thead","tfoot","tbody"],p=e.extend({},n.$block,n.$listItem,n.$tableContent);for(var q in p)"br"in n[q]||delete p[q];delete p.pre;var r={elements:{},attributeNames:[[/^on/,"data-cke-pa-on"]]},s={elements:{}};for(q in p)s.elements[q]=m();var t={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(a){var b=a.attributes;if(b){if(b["data-cke-temp"])return!1;var c=["name","href","src"
],d;for(var e=0;e<c.length;e++)d="data-cke-saved-"+c[e],d in b&&delete b[c[e]]}return a},table:function(a){var b=a.children;b.sort(function(a,b){return a.type==1&&b.type==a.type?e.indexOf(o,a.name)>e.indexOf(o,b.name)?1:-1:0})},embed:function(a){var b=a.parent;if(b&&b.name=="object"){var c=b.attributes.width,d=b.attributes.height;c&&(a.attributes.width=c),d&&(a.attributes.height=d)}},param:function(a){return a.children=[],a.isEmpty=!0,a},a:function(a){if(!(a.children.length||a.attributes.name||a.attributes["data-cke-saved-name"]))return!1},span:function(a){a.attributes["class"]=="Apple-style-span"&&delete a.name},pre:function(a){c&&k(a)},html:function(a){delete a.attributes.contenteditable,delete a.attributes["class"]},body:function(a){delete a.attributes.spellcheck,delete a.attributes.contenteditable},style:function(a){var b=a.children[0];b&&b.value&&(b.value=e.trim(b.value)),a.attributes.type||(a.attributes.type="text/css")},title:function(a){var b=a.children[0];b&&(b.value=a.attributes["data-cke-title"]||"")}},attributes:{"class":function(a,b){return e.ltrim(a.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1}}};c&&(t.attributes.style=function(a,b){return a.replace(/(^|;)([^\:]+)/g,function(a){return a.toLowerCase()})});for(q in{input:1,textarea:1})r.elements[q]=u,t.elements[q]=v;var w=/<(a|area|img|input)\b([^>]*)>/gi,x=/\b(on\w+|href|src|name)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,y=/(?:<style(?=[ >])[^>]*>[\s\S]*<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,z=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,A=/(<\/?)((?:object|embed|param|html|body|head|title)[^>]*>)/gi,B=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,C=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi;j.add("htmldataprocessor",{requires:["htmlwriter"],init:function(b){var c=b.dataProcessor=new a.htmlDataProcessor(b);c.writer.forceSimpleAmpersand=b.config.forceSimpleAmpersand,c.dataFilter.addRules(r),c.dataFilter.addRules(s),c.htmlFilter.addRules(t);var d={elements:{}};for(q in p)d.elements[q]=m(!0,b.config.fillEmptyBlocks);c.htmlFilter.addRules(d)},onLoad:function(){!("fillEmptyBlocks"in i)&&(i.fillEmptyBlocks=1)}}),a.htmlDataProcessor=function(b){var c=this;c.editor=b,c.writer=new a.htmlWriter,c.dataFilter=new a.htmlParser.filter,c.htmlFilter=new a.htmlParser.filter},a.htmlDataProcessor.prototype={toHtml:function(b,c){b=N(b,this.editor),b=D(b),b=E(b),b=G(b),b=I(b),b=J(b);var d=new h("div");d.setHtml("a"+b),b=d.getHtml().substr(1),b=H(b),b=F(b),b=L(b);var e=a.htmlParser.fragment.fromHtml(b,c),f=new a.htmlParser.basicWriter;return e.writeHtml(f,this.dataFilter),b=f.getHtml(!0),b=K(b),b},toDataFormat:function(b,c){var d=this.writer,e=a.htmlParser.fragment.fromHtml(b,c);d.reset(),e.writeHtml(d,this.htmlFilter);var f=d.getHtml(!0);return f=L(f),f=M(f,this.editor),f}}}(),function(){j.add("iframe",{requires:["dialog","fakeobjects"],init:function(b){var c="iframe",d=b.lang.iframe;a.dialog.add(c,this.path+"dialogs/iframe.js"),b.addCommand(c,new a.dialogCommand(c)),b.addCss("img.cke_iframe{background-image: url("+a.getUrl(this.path+"images/placeholder.png")+");"+"background-position: center center;"+"background-repeat: no-repeat;"+"border: 1px solid #a9a9a9;"+"width: 80px;"+"height: 80px;"+"}"),b.ui.addButton("Iframe",{label:d.toolbar,command:c}),b.on("doubleclick",function(a){var b=a.data.element;b.is("img")&&b.data("cke-real-element-type")=="iframe"&&(a.data.dialog="iframe")}),b.addMenuItems&&b.addMenuItems({iframe:{label:d.title,command:"iframe",group:"image"}}),b.contextMenu&&b.contextMenu.addListener(function(a,b){if(a&&a.is("img")&&a.data("cke-real-element-type")=="iframe")return{iframe:2}})},afterInit:function(a){var b=a.dataProcessor,c=b&&b.dataFilter;c&&c.addRules({elements:{iframe:function(b){return a.createFakeParserElement(b,"cke_iframe","iframe",!0)}}})}})}(),j.add("image",{init:function(b){var c="image";a.dialog.add(c,this.path+"dialogs/image.js"),b.addCommand(c,new a.dialogCommand(c)),b.ui.addButton("Image",{label:b.lang.common.image,command:c}),b.on("doubleclick",function(a){var b=a.data.element;b.is("img")&&!b.data("cke-realelement")&&!b.isReadOnly()&&(a.data.dialog="image")}),b.addMenuItems&&b.addMenuItems({image:{label:b.lang.image.menu,command:"image",group:"image"}}),b.contextMenu&&b.contextMenu.addListener(function(a,b){return!a||!a.is("img")||a.data("cke-realelement")||a.isReadOnly()?null:{image:2}})}}),i.image_removeLinkByEmptyURL=!0,function(){function i(b){var c=this;if(b.editor.readOnly)return null;var d=b.editor,e=b.data.path,f=e&&e.contains(a),g=e.block||e.blockLimit;if(f)return c.setState(2);if(!c.useIndentClasses&&c.name=="indent")return c.setState(2);if(!g)return c.setState(0);if(c.useIndentClasses){var h=g.$.className.match(c.classNameRegex),i=0;return h&&(h=h[1],i=c.indentClassMap[h]),c.name=="outdent"&&!i||c.name=="indent"&&i==d.config.indentClasses.length?c.setState(0):c.setState(2)}var j=parseInt(g.getStyle(l(g)),10);return isNaN(j)&&(j=0),j<=0?c.setState(0):c.setState(2)}function k(a,b){var c=this;c.name=b,c.useIndentClasses=a.config.indentClasses&&a.config.indentClasses.length>0;if(c.useIndentClasses){c.classNameRegex=new RegExp("(?:^|\\s+)("+a.config.indentClasses.join("|")+")(?=$|\\s)"),c.indentClassMap={};for(var d=0;d<a.config.indentClasses.length;d++)c.indentClassMap[a.config.indentClasses[d]]=d+1}c.startDisabled=b=="outdent"}function l(a,b){return(b||a.getComputedStyle("direction"))=="ltr"?"margin-left":"margin-right"}function m(a){return a.type==1&&a.is("li")}var a={ol:1,ul:1},f=d.walker.whitespaces(!0),g=d.walker.bookmark(!1,!0);k.prototype={exec:function(b){function p(d){var e=x.startContainer,l=x.endContainer;while(e&&!e.getParent().equals(d))e=e.getParent();while(l&&!l.getParent().equals(d))l=l.getParent();if(!e||!l)return;var m=e,p=[],q=!1;while(!q)m.equals(l)&&(q=!0),p.push(m),m=m.getNext();if(p.length<1)return;var r=d.getParents(!0);for(var s=0;s<r.length;s++)if(r[s].getName&&a[r[s].getName()]){d=r[s];break}var t=i.name=="indent"?1:-1,u=p[0],v=p[p.length-1],w=j.list.listToArray(d,k),y=w[v.getCustomData("listarray_index")].indent;for(s=u.getCustomData("listarray_index");s<=v.getCustomData("listarray_index");s++){w[s].indent+=t;var z=w[s].parent;w[s].parent=new h(z.getName(),z.getDocument())}for(s=v.getCustomData("listarray_index")+1;s<w.length&&w[s].indent>y;s++)w[s].indent+=t;var A=j.list.arrayToList(w,k,null,b.config.enterMode,d.getDirection());if(i.name=="outdent"){var B;if((B=d.getParent())&&B.is("li")){var C=A.listNode.getChildren(),D=[],E=C.count(),F;for(s=E-1;s>=0;s--)(F=C.getItem(s))&&F.is&&F.is("li")&&D.push(F)}}A&&A.listNode.replace(d);if(D&&D.length)for(s=0;s<D.length;s++){var G=D[s],H=G;while((H=H.getNext())&&H.is&&H.getName()in a)c&&!G.getFirst(function(a){return f(a)&&g(a)})&&G.append(x.document.createText(" ")),G.append(H);G.insertAfter(B)}}function q(){var a=x.createIterator(),c=b.config.enterMode;a.enforceRealBlocks=!0,a.enlargeBr=c!=2;var d;while(d=a.getNextParagraph(c==1?"p":"div"))t(d)}function t(a,c){if(a.getCustomData("indent_processed"))return!1;if(i.useIndentClasses){var d=a.$.className.match(i.classNameRegex),f=0;d&&(d=d[1],f=i.indentClassMap[d]),i.name=="outdent"?f--:f++;if(f<0)return!1;f=Math.min(f,b.config.indentClasses.length),f=Math.max(f,0),a.$.className=e.ltrim(a.$.className.replace(i.classNameRegex,"")),f>0&&a.addClass(b.config.indentClasses[f-1])}else{var g=l(a,c),j=parseInt(a.getStyle(g),10);isNaN(j)&&(j=0);var m=b.config.indentOffset||40;j+=(i.name=="indent"?1:-1)*m;if(j<0)return!1;j=Math.max(j,0),j=Math.ceil(j/m)*m,a.setStyle(g,j?j+(b.config.indentUnit||"px"):""),a.getAttribute("style")===""&&a.removeAttribute("style")}return h.setMarker(k,a,"indent_processed",1),!0}var i=this,k={},u=b.getSelection(),v=u.createBookmarks(1),w=u&&u.getRanges(1),x,y=w.createIterator();while(x=y.getNextRange()){var z=x.getCommonAncestor(),A=z;while(A&&(A.type!=1||!a[A.getName()]))A=A.getParent();if(!A){var B=x.getEnclosedNode();B&&B.type==1&&B.getName()in a&&(x.setStartAt(B,1),x.setEndAt(B,2),A=B)}if(A&&x.startContainer.type==1&&x.startContainer.getName()in a){var C=new d.walker(x);C.evaluator=m,x.startContainer=C.next()}A&&x.endContainer.type==1&&x.endContainer.getName()in a&&(C=new d.walker(x),C.evaluator=m,x.endContainer=C.previous());if(A){var D=A.getFirst(m),E=!!D.getNext(m),F=x.startContainer,G=D.equals(F)||D.contains(F);(!G||i.name!="indent"&&!i.useIndentClasses&&!parseInt(A.getStyle(l(A)),10)||!t(A,!E&&D.getDirection()))&&p(A)}else q()}h.clearAllMarkers(k),b.forceNextSelectionCheck(),u.selectBookmarks(v)}},j.add("indent",{init:function(a){var c=a.addCommand("indent",new k(a,"indent")),f=a.addCommand("outdent",new k(a,"outdent"));a.ui.addButton("Indent",{label:a.lang.indent,command:"indent"}),a.ui.addButton("Outdent",{label:a.lang.outdent,command:"outdent"}),a.on("selectionChange",e.bind(i,c)),a.on("selectionChange",e.bind(i,f)),(b.ie6Compat||b.ie7Compat)&&a.addCss("ul,ol{\tmargin-left: 0px;\tpadding-left: 40px;}"),a.on("dirChanged",function(b){var c=new d.range(a.document);c.setStartBefore(b.data.node),c.setEndAfter(b.data.node);var e=new d.walker(c),f;while(f=e.next())if(f.type==1){if(!f.equals(b.data.node)&&f.getDirection()){c.setStartAfter(f),e=new d.walker(c);continue}var g=a.config.indentClasses;if(g){var h=b.data.dir=="ltr"?["_rtl",""]:["","_rtl"];for(var i=0;i<g.length;i++)f.hasClass(g[i]+h[0])&&(f.removeClass(g[i]+h[0]),f.addClass(g[i]+h[1]))}var j=f.getStyle("margin-right"),k=f.getStyle("margin-left");j?f.setStyle("margin-left",j):f.removeStyle("margin-left"),k?f.setStyle("margin-right",k):f.removeStyle("margin-right")}})},requires:["domiterator","list"]})}(),function(){function a(a,c){var d=c.block||c.blockLimit;return!d||d.getName()=="body"?2:b(d,a.config.useComputedState)==this.value?1:2}function b(a,b){b=b===undefined||b;var c;if(b)c=a.getComputedStyle("text-align");else{while(!a.hasAttribute||!a.hasAttribute("align")&&!a.getStyle("text-align")){var d=a.getParent();if(!d)break;a=d}c=a.getStyle("text-align")||a.getAttribute("align")||""}return c&&(c=c.replace(/-moz-|-webkit-|start|auto/i,"")),!c&&b&&(c=a.getComputedStyle("direction")=="rtl"?"right":"left"),c}function c(b){if(b.editor.readOnly)return;var c=b.editor.getCommand(this.name);c.state=a.call(this,b.editor,b.data.path),c.fire("state")}function f(a,b,c){var d=this;d.name=b,d.value=c;var e=a.config.justifyClasses;if(e){switch(c){case"left":d.cssClassName=e[0];break;case"center":d.cssClassName=e[1];break;case"right":d.cssClassName=e[2];break;case"justify":d.cssClassName=e[3]}d.cssClassRegex=new RegExp("(?:^|\\s+)(?:"+e.join("|")+")(?=$|\\s)")}}function g(a){var b=a.editor,c=new d.range(b.document);c.setStartBefore(a.data.node),c.setEndAfter(a.data.node);var e=new d.walker(c),f;while(f=e.next())if(f.type==1){if(!f.equals(a.data.node)&&f.getDirection()){c.setStartAfter(f),e=new d.walker(c);continue}var g=b.config.justifyClasses;g&&(f.hasClass(g[0])?(f.removeClass(g[0]),f.addClass(g[2])):f.hasClass(g[2])&&(f.removeClass(g[2]),f.addClass(g[0])));var h="text-align",i=f.getStyle(h);i=="left"?f.setStyle(h,"right"):i=="right"&&f.setStyle(h,"left")}}f.prototype={exec:function(a){var c=this,d=a.getSelection(),f=a.config.enterMode;if(!d)return;var g=d.createBookmarks(),h=d.getRanges(!0),i=c.cssClassName,j,k,l=a.config.useComputedState;l=l===undefined||l;for(var m=h.length-1;m>=0;m--){j=h[m].createIterator(),j.enlargeBr=f!=2;while(k=j.getNextParagraph(f==1?"p":"div")){k.removeAttribute("align"),k.removeStyle("text-align");var o=i&&(k.$.className=e.ltrim(k.$.className.replace(c.cssClassRegex,""))),p=c.state==2&&(!l||b(k,true)!=c.value);i?p?k.addClass(i):o||k.removeAttribute("class"):p&&k.setStyle("text-align",c.value)}}a.focus(),a.forceNextSelectionCheck(),d.selectBookmarks(g)}},j.add("justify",{init:function(a){var b=new f(a,"justifyleft","left"),d=new f(a,"justifycenter","center"),h=new f(a,"justifyright","right"),i=new f(a,"justifyblock","justify");a.addCommand("justifyleft",b),a.addCommand("justifycenter",d),a.addCommand("justifyright",h),a.addCommand("justifyblock",i),a.ui.addButton("JustifyLeft",{label:a.lang.justify.left,command:"justifyleft"}),a.ui.addButton("JustifyCenter",{label:a.lang.justify.center,command:"justifycenter"}),a.ui.addButton("JustifyRight",{label:a.lang.justify.right,command:"justifyright"}),a.ui.addButton("JustifyBlock",{label:a.lang.justify.block,command:"justifyblock"}),a.on("selectionChange",e.bind(c,b)),a.on("selectionChange",e.bind(c,h)),a.on("selectionChange",e.bind(c,d)),a.on("selectionChange",e.bind(c,i)),a.on("dirChanged",g)},requires:["domiterator"]})}(),j.add("keystrokes",{beforeInit:function(b){b.keystrokeHandler=new a.keystrokeHandler(b),b.specialKeys={}},init:function(a){var b=a.config.keystrokes,c=a.config.blockedKeystrokes,d=a.keystrokeHandler.keystrokes,e=a.keystrokeHandler.blockedKeystrokes;for(var f=0;f<b.length;f++)d[b[f][0]]=b[f][1];for(f=0;f<c.length;f++)e[c[f]]=1}}),a.keystrokeHandler=function(a){var b=this;return a.keystrokeHandler?a.keystrokeHandler:(b.keystrokes={},b.blockedKeystrokes={},b._={editor:a},b)},function(){var c,d=function(a){a=a.data;var b=a.getKeystroke(),d=this.keystrokes[b],e=this._.editor;c=e.fire("key",{keyCode:b})===!0;if(!c){if(d){var f={from:"keystrokeHandler"};c=e.execCommand(d,f)!==!1}if(!c){var g=e.specialKeys[b];c=g&&g(e)===!0,c||(c=!!this.blockedKeystrokes[b])}}return c&&a.preventDefault(!0),!c},e=function(a){c&&(c=!1,a.data.preventDefault(!0))};a.keystrokeHandler.prototype={attach:function(a){a.on("keydown",d,this),(b.opera||b.gecko&&b.mac)&&a.on("keypress",e,this)}}}(),i.blockedKeystrokes=[1114178,1114185,1114197],i.keystrokes=[[4456569,"toolbarFocus"],[4456570,"elementsPathFocus"],[2228345,"contextMenu"],[3342457,"contextMenu"],[1114202,"undo"],[1114201,"redo"],[3342426,"redo"],[1114188,"link"],[1114178,"bold"],[1114185,"italic"],[1114197,"underline"],[4456448+(c||b.webkit?189:109),"toolbarCollapse"],[4456496,"a11yHelp"]],j.add("link",{init:function(d){d.addCommand("link",new a.dialogCommand("link")),d.addCommand("anchor",new a.dialogCommand("anchor")),d.addCommand("unlink",new a.unlinkCommand),d.addCommand("removeAnchor",new a.removeAnchorCommand),d.ui.addButton("Link",{label:d.lang.link.toolbar,command:"link"}),d.ui.addButton("Unlink",{label:d.lang.unlink,command:"unlink"}),d.ui.addButton("Anchor",{label:d.lang.anchor.toolbar,command:"anchor"}),a.dialog.add("link",this.path+"dialogs/link.js"),a.dialog.add("anchor",this.path+"dialogs/anchor.js");var e=d.lang.dir=="rtl"?"right":"left",f="background:url("+a.getUrl(this.path+"images/anchor.gif")+") no-repeat "+e+" center;"+"border:1px dotted #00f;";d.addCss("a.cke_anchor,a.cke_anchor_empty"+(c&&b.version<7?"":",a[name],a[data-cke-saved-name]")+"{"+f+"padding-"+e+":18px;"+"cursor:auto;"+"}"+(c?"a.cke_anchor_empty{display:inline-block;}":"")+"img.cke_anchor"+"{"+f+"width:16px;"+"min-height:15px;"+"height:1.15em;"+"vertical-align:"+(b.opera?"middle":"text-bottom")+";"+"}"),d.on("selectionChange",function(a){if(d.readOnly)return;var b=d.getCommand("unlink"),c=a.data.path.lastElement&&a.data.path.lastElement.getAscendant("a",!0);c&&c.getName()=="a"&&c.getAttribute("href")&&c.getChildCount()?b.setState(2):b.setState(0)}),d.on("doubleclick",function(a){var b=j.link.getSelectedLink(d)||a.data.element;b.isReadOnly()||(b.is("a")?(a.data.dialog=b.getAttribute("name")&&(!b.getAttribute("href")||!b.getChildCount())?"anchor":"link",d.getSelection().selectElement(b)):j.link.tryRestoreFakeAnchor(d,b)&&(a.data.dialog="anchor"))}),d.addMenuItems&&d.addMenuItems({anchor:{label:d.lang.anchor.menu,command:"anchor",group:"anchor",order:1},removeAnchor:{label:d.lang.anchor.remove,command:"removeAnchor",group:"anchor",order:5},link:{label:d.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:d.lang.unlink,command:"unlink",group:"link",order:5}}),d.contextMenu&&d.contextMenu.addListener(function(a,b){if(!a||a.isReadOnly())return null;var c=j.link.tryRestoreFakeAnchor(d,a);if(!c&&!(c=j.link.getSelectedLink(d)))return null;var e={};return c.getAttribute("href")&&c.getChildCount()&&(e={link:2,unlink:2}),c&&c.hasAttribute("name")&&(e.anchor=e.removeAnchor=2),e})},afterInit:function(a){var b=a.dataProcessor,c=b&&b.dataFilter,d=b&&b.htmlFilter,e=a._.elementsPath&&a._.elementsPath.filters;c&&c.addRules({elements:{a:function(b){var c=b.attributes;if(!c.name)return null;var d=!b.children.length;if(j.link.synAnchorSelector){var e=d?"cke_anchor_empty":"cke_anchor",f=c["class"];c.name&&(!f||f.indexOf(e)<0)&&(c["class"]=(f||"")+" "+e),d&&j.link.emptyAnchorFix&&(c.contenteditable="false",c["data-cke-editable"]=1)}else if(j.link.fakeAnchor&&d)return a.createFakeParserElement(b,"cke_anchor","anchor");return null}}}),j.link.emptyAnchorFix&&d&&d.addRules({elements:{a:function(a){delete a.attributes.contenteditable}}}),e&&e.push(function(b,c){if(c=="a")if(j.link.tryRestoreFakeAnchor(a,b)||b.getAttribute("name")&&(!b.getAttribute("href")||!b.getChildCount()))return"anchor"})},requires:["fakeobjects"]}),j.link={getSelectedLink:function(a){try{var b=a.getSelection();if(b.getType()==3){var c=b.getSelectedElement();if(c.is("a"))return c}var d=b.getRanges(!0)[0];d.shrink(2);var e=d.getCommonAncestor();return e.getAscendant("a",!0)}catch(f){return null}},fakeAnchor:b.opera||b.webkit,synAnchorSelector:c,emptyAnchorFix:c&&b.version<8,tryRestoreFakeAnchor:function(a,b){if(b&&b.data("cke-real-element-type")&&b.data("cke-real-element-type")=="anchor"){var c=a.restoreRealElement(b);if(c.data("cke-saved-name"))return c}}},a.unlinkCommand=function(){},a.unlinkCommand.prototype={exec:function(a){var b=a.getSelection(),c=b.createBookmarks(),d=b.getRanges(),e,f;for(var g=0;g<d.length;g++){e=d[g].getCommonAncestor(!0),f=e.getAscendant("a",!0);if(!f)continue;d[g].selectNodeContents(f)}b.selectRanges(d),a.document.$.execCommand("unlink",!1,null),b.selectBookmarks(c)},startDisabled:!0},a.removeAnchorCommand=function(){},a.removeAnchorCommand.prototype={exec:function(a){var b=a.getSelection(),c=b.createBookmarks(),d;if(b&&(d=b.getSelectedElement())&&(j.link.fakeAnchor&&!d.getChildCount()?j.link.tryRestoreFakeAnchor(a,d):d.is("a")))d.remove(1);else if(d=j.link.getSelectedLink(a))d.hasAttribute("href")?(d.removeAttributes({name:1,"data-cke-saved-name":1}),d.removeClass("cke_anchor")):d.remove(1);b.selectBookmarks(c)}},e.extend(i,{linkShowAdvancedTab:!0,linkShowTargetTab:!0}),function(){function m(a){var b,c,d;if(b=a.getDirection()){c=a.getParent();while(c&&!(d=c.getDirection()))c=c.getParent();b==d&&a.removeAttribute("dir")}}function n(a){if(a.editor.readOnly)return null;var c=a.data.path,d=c.blockLimit,e=c.elements,f,g;for(g=0;g<e.length&&(f=e[g])&&!f.equals(d);g++)if(b[e[g].getName()])return this.setState(this.type==e[g].getName()?1:2);return this.setState(2)}function o(a,b,c,d){var e=j.list.listToArray(b.root,c),f=[];for(var g=0;g<b.contents.length;g++){var i=b.contents[g];i=i.getAscendant("li",!0);if(!i||i.getCustomData("list_item_processed"))continue;f.push(i),h.setMarker(c,i,"list_item_processed",!0)}var k=b.root,l=k.getDocument().createElement(this.type);k.copyAttributes(l,{start:1,type:1}),l.removeStyle("list-style-type");for(g=0;g<f.length;g++){var m=f[g].getCustomData("listarray_index");e[m].parent=l}var n=j.list.arrayToList(e,c,null,a.config.enterMode),o,p=n.listNode.getChildCount();for(g=0;g<p&&(o=n.listNode.getChild(g));g++)o.getName()==this.type&&d.push(o);n.listNode.replace(b.root)}function q(a,b,c){var d=b.contents,e=b.root.getDocument(),f=[];if(d.length==1&&d[0].equals(b.root)){var g=e.createElement("div");d[0].moveChildren&&d[0].moveChildren(g),d[0].append(g),d[0]=g}var h=b.contents[0].getParent();for(var i=0;i<d.length;i++)h=h.getCommonAncestor(d[i].getParent());var j=a.config.useComputedState,k,l;j=j===undefined||j;for(i=0;i<d.length;i++){var m=d[i],n;while(n=m.getParent()){if(n.equals(h)){f.push(m),!l&&m.getDirection()&&(l=1);var o=m.getDirection(j);k!==null&&(k&&k!=o?k=null:k=o);break}m=n}}if(f.length<1)return;var q=f[f.length-1].getNext(),r=e.createElement(this.type);c.push(r);var s,t;while(f.length)s=f.shift(),t=e.createElement("li"),s.is("pre")||p.test(s.getName())?s.appendTo(t):(s.copyAttributes(t),k&&s.getDirection()&&(t.removeStyle("direction"),t.removeAttribute("dir")),s.moveChildren(t),s.remove()),t.appendTo(r);k&&l&&r.setAttribute("dir",k),q?r.insertBefore(q):r.appendTo(h)}function r(a,b,c){function s(c){(q=p[c?"getFirst":"getLast"]())&&(!q.is||!q.isBlockBoundary())&&(r=b.root[c?"getPrevious":"getNext"](d.walker.whitespaces(!0)))&&(!r.is||!r.isBlockBoundary({br:1}))&&a.document.createElement("br")[c?"insertBefore":"insertAfter"](q)}var e=j.list.listToArray(b.root,c),f=[];for(var g=0;g<b.contents.length;g++){var i=b.contents[g];i=i.getAscendant("li",!0);if(!i||i.getCustomData("list_item_processed"))continue;f.push(i),h.setMarker(c,i,"list_item_processed",!0)}var k=null;for(g=0;g<f.length;g++){var l=f[g].getCustomData("listarray_index");e[l].indent=-1,k=l}for(g=k+1;g<e.length;g++)if(e[g].indent>e[g-1].indent+1){var m=e[g-1].indent+1-e[g].indent,n=e[g].indent;while(e[g]&&e[g].indent>=n)e[g].indent+=m,g++;g--}var o=j.list.arrayToList(e,c,null,a.config.enterMode,b.root.getAttribute("dir")),p=o.listNode,q,r;s(!0),s(),p.replace(b.root)}function s(a,b){this.name=a,this.type=b}function t(a){var b=a.getDirection();if(b){for(var c=0,d=a.getChildren(),e;e=d.getItem(c),c<d.count();c++)e.type==1&&e.is("li")&&!e.getDirection()&&e.setAttribute("dir",b);a.removeAttribute("dir")}}function w(a,b){var c,d=a.children,e=d.length;for(var f=0;f<e;f++){c=d[f];if(c.name&&c.name in b)return f}return e}function x(b){return function(d){var e=d.children,f=w(d,u.$list),g=e[f],h=g&&g.previous,i;if(h&&(h.name&&h.name=="br"||h.value&&(i=h.value.match(v)))){var j=h;(!i||!i.index)&&j==e[0]?e[0]=b||c?new a.htmlParser.text(" "):new a.htmlParser.element("br",{}):j.name=="br"?e.splice(f-1,1):j.value=j.value.replace(v,"")}}}var b={ol:1,ul:1},g=/^[\n\r\t ]*$/,i=d.walker.whitespaces(),k=d.walker.bookmark(),l=function(a){return!i(a)&&!k(a)};j.list={listToArray:function(a,c,d,e,g){if(!b[a.getName()])return[];e||(e=0),d||(d=[]);for(var i=0,k=a.getChildCount();i<k;i++){var l=a.getChild(i);l.type==1&&l.getName()in f.$list&&j.list.listToArray(l,c,d,e+1);if(l.$.nodeName.toLowerCase()!="li")continue;var m={parent:a,indent:e,element:l,contents:[]};g?m.grandparent=g:(m.grandparent=a.getParent(),m.grandparent&&m.grandparent.$.nodeName.toLowerCase()=="li"&&(m.grandparent=m.grandparent.getParent())),c&&h.setMarker(c,l,"listarray_index",d.length),d.push(m);for(var n=0,o=l.getChildCount(),p;n<o;n++)p=l.getChild(n),p.type==1&&b[p.getName()]?j.list.listToArray(p,c,d,e+1,m.grandparent):m.contents.push(p)}return d},arrayToList:function(a,e,g,i,k){g||(g=0);if(!a||a.length<g+1)return null;var n=a[g].parent.getDocument(),o=new d.documentFragment(n),p=null,q=g,r=Math.max(a[g].indent,0),s=null,t,u=i==1?"p":"div";for(;;){var v=a[q];t=v.element.getDirection(1);if(v.indent==r){if(!p||a[q].parent.getName()!=p.getName())p=a[q].parent.clone(!1,1),k&&p.setAttribute("dir",k),o.append(p);s=p.append(v.element.clone(0,1)),t!=p.getDirection(1)&&s.setAttribute("dir",t);for(var w=0;w<v.contents.length;w++)s.append(v.contents[w].clone(1,1));q++}else if(v.indent==Math.max(r,0)+1){var x=a[q-1].element.getDirection(1),y=j.list.arrayToList(a,null,q,i,x!=t?t:null);!s.getChildCount()&&c&&!(n.$.documentMode>7)&&s.append(n.createText(" ")),s.append(y.listNode),q=y.nextIndex}else{if(v.indent!=-1||!!g||!v.grandparent)return null;b[v.grandparent.getName()]?s=v.element.clone(!1,!0):k||v.element.hasAttributes()||i!=2?(s=n.createElement(u),v.element.copyAttributes(s,{type:1,value:1}),!k&&i==2&&!s.hasAttributes()&&(s=new d.documentFragment(n))):s=new d.documentFragment(n),s.type==1&&v.grandparent.getDirection(1)!=t&&s.setAttribute("dir",t);for(w=0;w<v.contents.length;w++)s.append(v.contents[w].clone(1,1));if(s.type==11&&q!=a.length-1){var z=s.getLast();z&&z.type==1&&z.getAttribute("type")=="_moz"&&z.remove(),(z=s.getLast(l)&&z.type==1&&z.getName()in f.$block)||s.append(n.createElement("br"))}if(s.type==1&&s.getName()==u&&s.$.firstChild){s.trim();var A=s.getFirst();if(A.type==1&&A.isBlockBoundary()){var B=new d.documentFragment(n);s.moveChildren(B),s=B}}var C=s.$.nodeName.toLowerCase();!c&&(C=="div"||C=="p")&&s.appendBogus(),o.append(s),p=null,q++}if(a.length<=q||Math.max(a[q].indent,0)<r)break}if(e){var D=o.getFirst(),E=a[0].parent;while(D)D.type==1&&(h.clearMarkers(e,D),D.getName()in f.$listItem&&m(D)),D=D.getNextSourceNode()}return{listNode:o,nextIndex:q}}};var p=/^h[1-6]$/;s.prototype={exec:function(a){var c=a.document,e=a.config,f=a.getSelection(),g=f&&f.getRanges(!0);if(!g||g.length<1)return;if(this.state==2){var i=c.getBody();if(!i.getFirst(l))e.enterMode==2?i.appendBogus():g[0].fixBlock(1,e.enterMode==1?"p":"div"),f.selectRanges(g);else{var j=g.length==1&&g[0],k=j&&j.getEnclosedNode();k&&k.is&&this.type==k.getName()&&this.setState(1)}}var m=f.createBookmarks(!0),n=[],p={},s=g.createIterator(),u=0;while((j=s.getNextRange())&&++u){var v=j.getBoundaryNodes(),w=v.startNode,x=v.endNode;w.type==1&&w.getName()=="td"&&j.setStartAt(v.startNode,1),x.type==1&&x.getName()=="td"&&j.setEndAt(v.endNode,2);var y=j.createIterator(),z;y.forceBrBreak=this.state==2;while(z=y.getNextParagraph()){if(z.getCustomData("list_block"))continue;h.setMarker(p,z,"list_block",1);var A=new d.elementPath(z),B=A.elements,C=B.length,D=null,E=0,F=A.blockLimit,G;for(var H=C-1;H>=0&&(G=B[H]);H--)if(b[G.getName()]&&F.contains(G)){F.removeCustomData("list_group_object_"+u);var I=G.getCustomData("list_group_object");I?I.contents.push(z):(I={root:G,contents:[z]},n.push(I),h.setMarker(p,G,"list_group_object",I)),E=1;break}if(E)continue;var J=F;J.getCustomData("list_group_object_"+u)?J.getCustomData("list_group_object_"+u).contents.push(z):(I={root:J,contents:[z]},h.setMarker(p,J,"list_group_object_"+u,I),n.push(I))}}var K=[];while(n.length>0)I=n.shift(),this.state==2?b[I.root.getName()]?o.call(this,a,I,p,K):q.call(this,a,I,K):this.state==1&&b[I.root.getName()]&&r.call(this,a,I,p);for(H=0;H<K.length;H++){D=K[H];var L,M=this;(L=function(a){var b=D[a?"getPrevious":"getNext"](d.walker.whitespaces(!0));b&&b.getName&&b.getName()==M.type&&(b.getDirection(1)!=D.getDirection(1)&&t(D.getDirection()?D:b),b.remove(),b.moveChildren(D,a))})(),L(1)}h.clearAllMarkers(p),f.selectBookmarks(m),a.focus()}};var u=f,v=/[\t\r\n ]*(?:&nbsp;|\xa0)$/,y={elements:{}};for(var z in u.$listItem)y.elements[z]=x();var A={elements:{}};for(z in u.$listItem)A.elements[z]=x(!0);j.add("list",{init:function(a){var b=a.addCommand("numberedlist",new s("numberedlist","ol")),c=a.addCommand("bulletedlist",new s("bulletedlist","ul"));a.ui.addButton("NumberedList",{label:a.lang.numberedlist,command:"numberedlist"}),a.ui.addButton("BulletedList",{label:a.lang.bulletedlist,command:"bulletedlist"}),a.on("selectionChange",e.bind(n,b)),a.on("selectionChange",e.bind(n,c))},afterInit:function(a){var b=a.dataProcessor;b&&(b.dataFilter.addRules(y),b.htmlFilter.addRules(A))},requires:["domiterator"]})}(),function(){j.liststyle={requires:["dialog"],init:function(b){b.addCommand("numberedListStyle",new a.dialogCommand("numberedListStyle")),a.dialog.add("numberedListStyle",this.path+"dialogs/liststyle.js"),b.addCommand("bulletedListStyle",new a.dialogCommand("bulletedListStyle")),a.dialog.add("bulletedListStyle",this.path+"dialogs/liststyle.js"),b.addMenuItems&&(b.addMenuGroup("list",108),b.addMenuItems({numberedlist:{label:b.lang.list.numberedTitle,group:"list",command:"numberedListStyle"},bulletedlist:{label:b.lang.list.bulletedTitle,group:"list",command:"bulletedListStyle"}})),b.contextMenu&&b.contextMenu.addListener(function(a,b){if(!a||a.isReadOnly())return null;while(a){var c=a.getName();if(c=="ol")return{numberedlist:2};if(c=="ul")return{bulletedlist:2};a=a.getParent()}return null})}},j.add("liststyle",j.liststyle)}(),function(){function d(a){if(!a||a.type!=1||a.getName()!="form")return[];var b=[],c=["style","className"];for(var d=0;d<c.length;d++){var e=c[d],f=a.$.elements.namedItem(e);if(f){var g=new h(f);b.push([g,g.nextSibling]),g.remove()}}return b}function e(a,b){if(!a||a.type!=1||a.getName()!="form")return;if(b.length>0)for(var c=b.length-1;c>=0;c--){var d=b[c][0],e=b[c][1];e?d.insertBefore(e):d.appendTo(a)}}function f(a,b){var c=d(a),f={},g=a.$;return b||(f["class"]=g.className||"",g.className=""),f.inline=g.style.cssText||"",b||(g.style.cssText="position: static; overflow: visible"),e(c),f}function g(a,b){var c=d(a),f=a.$;"class"in b&&(f.className=b["class"]),"inline"in b&&(f.style.cssText=b.inline),e(c)}function i(b){var c=a.instances;for(var d in c){var e=c[d];if(e.mode=="wysiwyg"&&!e.readOnly){var f=e.document.getBody();f.setAttribute("contentEditable",!1),f.setAttribute("contentEditable",!0)}}b.focusManager.hasFocus&&(b.toolbox.focus(),b.focus())}function k(a){if(!c||b.version>6)return null;var d=h.createFromHtml('<iframe frameborder="0" tabindex="-1" src="javascript:void((function(){document.open();'+(b.isCustomDomain()?"document.domain='"+this.getDocument().$.domain+"';":"")+"document.close();"+'})())"'+' style="display:block;position:absolute;z-index:-1;'+"progid:DXImageTransform.Microsoft.Alpha(opacity=0);"+'"></iframe>');return a.append(d,!0)}j.add("maximize",{init:function(d){function t(){var a=j.getViewPaneSize();s&&s.setStyles({width:a.width+"px",height:a.height+"px"}),d.resize(a.width,a.height,null,!0)}var e=d.lang,h=a.document,j=h.getWindow(),l,m,n,s,u=2;d.addCommand("maximize",{modes:{wysiwyg:!b.iOS,source:!b.iOS},readOnly:1,editorFocus:!1,exec:function(){var a=d.container.getChild(1),C=d.getThemeSpace("contents");if(d.mode=="wysiwyg"){var D=d.getSelection();l=D&&D.getRanges(),m=j.getScrollPosition()}else{var E=d.textarea.$;l=!c&&[E.selectionStart,E.selectionEnd],m=[E.scrollLeft,E.scrollTop]}if(this.state==2){j.on("resize",t),n=j.getScrollPosition();var F=d.container;while(F=F.getParent())F.setCustomData("maximize_saved_styles",f(F)),F.setStyle("z-index",d.config.baseFloatZIndex-1);C.setCustomData("maximize_saved_styles",f(C,!0)),a.setCustomData("maximize_saved_styles",f(a,!0));var G={overflow:b.webkit?"":"hidden",width:0,height:0};h.getDocumentElement().setStyles(G),!b.gecko&&h.getDocumentElement().setStyle("position","fixed"),(!b.gecko||!b.quirks)&&h.getBody().setStyles(G),c?setTimeout(function(){j.$.scrollTo(0,0)},0):j.$.scrollTo(0,0),a.setStyle("position",b.gecko&&b.quirks?"fixed":"absolute"),a.$.offsetLeft,a.setStyles({"z-index":d.config.baseFloatZIndex-1,left:"0px",top:"0px"}),s=k(a),a.addClass("cke_maximized"),t();var H=a.getDocumentPosition();a.setStyles({left:-1*H.x+"px",top:-1*H.y+"px"}),b.gecko&&i(d)}else if(this.state==1){j.removeListener("resize",t);var I=[C,a];for(var J=0;J<I.length;J++)g(I[J],I[J].getCustomData("maximize_saved_styles")),I[J].removeCustomData("maximize_saved_styles");F=d.container;while(F=F.getParent())g(F,F.getCustomData("maximize_saved_styles")),F.removeCustomData("maximize_saved_styles");c?setTimeout(function(){j.$.scrollTo(n.x,n.y)},0):j.$.scrollTo(n.x,n.y),a.removeClass("cke_maximized"),b.webkit&&(a.setStyle("display","inline"),setTimeout(function(){a.setStyle("display","block")},0)),s&&(s.remove(),s=null),d.fire("resize")}this.toggleState();var K=this.uiItems[0];if(K){var L=this.state==2?e.maximize:e.minimize,M=d.element.getDocument().getById(K._.id);M.getChild(1).setHtml(L),M.setAttribute("title",L),M.setAttribute("href",'javascript:void("'+L+'");')}if(d.mode=="wysiwyg")if(l){b.gecko&&i(d),d.getSelection().selectRanges(l);var N=d.getSelection().getStartElement();N&&N.scrollIntoView(!0)}else j.$.scrollTo(m.x,m.y);else l&&(E.selectionStart=l[0],E.selectionEnd=l[1]),E.scrollLeft=m[0],E.scrollTop=m[1];l=m=null,u=this.state},canUndo:!1}),d.ui.addButton("Maximize",{label:e.maximize,command:"maximize"}),d.on("mode",function(){var a=d.getCommand("maximize");a.setState(a.state==0?0:u)},null,null,100)}})}(),j.add("newpage",{init:function(a){a.addCommand("newpage",{modes:{wysiwyg:1,source:1},exec:function(a){var b=this;a.setData(a.config.newpage_html||"",function(){setTimeout(function(){a.fire("afterCommandExec",{name:b.name,command:b}),a.selectionChange()},200)}),a.focus()},async:!0}),a.ui.addButton("NewPage",{label:a.lang.newPage,command:"newpage"})}}),j.add("pagebreak",{init:function(c){c.addCommand("pagebreak",j.pagebreakCmd),c.ui.addButton("PageBreak",{label:c.lang.pagebreak,command:"pagebreak"});var d=["{","background: url("+a.getUrl(this.path+"images/pagebreak.gif")+") no-repeat center center;","clear: both;","width:100%; _width:99.9%;","border-top: #999999 1px dotted;","border-bottom: #999999 1px dotted;","padding:0;","height: 5px;","cursor: default;","}"].join("").replace(/;/g," !important;");c.addCss("div.cke_pagebreak"+d),b.opera&&c.on("contentDom",function(){c.document.on("click",function(a){var b=a.data.getTarget();b.is("div")&&b.hasClass("cke_pagebreak")&&c.getSelection
().selectElement(b)})})},afterInit:function(b){var c=b.lang.pagebreakAlt,d=b.dataProcessor,e=d&&d.dataFilter,f=d&&d.htmlFilter;f&&f.addRules({attributes:{"class":function(b,c){var d=b.replace("cke_pagebreak","");if(d!=b){var e=a.htmlParser.fragment.fromHtml('<span style="display: none;">&nbsp;</span>');c.children.length=0,c.add(e);var f=c.attributes;delete f["aria-label"],delete f.contenteditable,delete f.title}return d}}},5),e&&e.addRules({elements:{div:function(a){var b=a.attributes,d=b&&b.style,e=d&&a.children.length==1&&a.children[0],f=e&&e.name=="span"&&e.attributes.style;f&&/page-break-after\s*:\s*always/i.test(d)&&/display\s*:\s*none/i.test(f)&&(b.contenteditable="false",b["class"]="cke_pagebreak",b["data-cke-display-name"]="pagebreak",b["aria-label"]=c,b.title=c,a.children.length=0)}}})},requires:["fakeobjects"]}),j.pagebreakCmd={exec:function(a){var b=a.lang.pagebreakAlt,c=h.createFromHtml('<div style="page-break-after: always;"contenteditable="false" title="'+b+'" '+'aria-label="'+b+'" '+'data-cke-display-name="pagebreak" '+'class="cke_pagebreak">'+"</div>",a.document),d=a.getSelection().getRanges(!0);a.fire("saveSnapshot");for(var e,f=d.length-1;f>=0;f--){e=d[f],f<d.length-1&&(c=c.clone(!0)),e.splitBlock("p"),e.insertNode(c);if(f==d.length-1){var g=c.getNext();e.moveToPosition(c,4),(!g||g.type==1&&!g.isEditable())&&e.fixBlock(!0,a.config.enterMode==3?"div":"p"),e.select()}}a.fire("saveSnapshot")}},function(){function b(a){a.data.mode="html"}j.add("pastefromword",{init:function(c){var d=0,e=function(a){a&&a.removeListener(),c.removeListener("beforePaste",b),d&&setTimeout(function(){d=0},0)};c.addCommand("pastefromword",{canUndo:!1,exec:function(){d=1,c.on("beforePaste",b),c.execCommand("paste","html")===!1&&(c.on("dialogShow",function(a){a.removeListener(),a.data.on("cancel",e)}),c.on("dialogHide",function(a){a.data.removeListener("cancel",e)})),c.on("afterPaste",e)}}),c.ui.addButton("PasteFromWord",{label:c.lang.pastefromword.toolbar,command:"pastefromword"}),c.on("pasteState",function(a){c.getCommand("pastefromword").setState(a.data)}),c.on("paste",function(b){var e=b.data,f;if((f=e.html)&&(d||/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/.test(f))){var g=this.loadFilterRules(function(){if(g)c.fire("paste",e);else if(!c.config.pasteFromWordPromptCleanup||d||confirm(c.lang.pastefromword.confirmCleanup))e.html=a.cleanWord(f,c)});g&&b.cancel()}},this)},loadFilterRules:function(b){var c=a.cleanWord;if(c)b();else{var d=a.getUrl(i.pasteFromWordCleanupFile||this.path+"filter/default.js");a.scriptLoader.load(d,b,null,!0)}return!c},requires:["clipboard"]})}(),function(){var b={exec:function(a){var b=e.tryThese(function(){var a=window.clipboardData.getData("Text");if(!a)throw 0;return a});return b?(a.fire("paste",{text:b}),!0):(a.openDialog("pastetext"),!1)}};j.add("pastetext",{init:function(c){var d="pastetext",e=c.addCommand(d,b);c.ui.addButton("PasteText",{label:c.lang.pasteText.button,command:d}),a.dialog.add(d,a.getUrl(this.path+"dialogs/pastetext.js")),c.config.forcePasteAsPlainText&&(c.on("beforeCommandExec",function(a){var b=a.data.commandData;a.data.name=="paste"&&b!="html"&&(c.execCommand("pastetext"),a.cancel())},null,null,0),c.on("beforePaste",function(a){a.data.mode="text"})),c.on("pasteState",function(a){c.getCommand("pastetext").setState(a.data)})},requires:["clipboard"]})}(),j.add("popup"),e.extend(a.editor.prototype,{popup:function(a,b,c,d){b=b||"80%",c=c||"70%",typeof b=="string"&&b.length>1&&b.substr(b.length-1,1)=="%"&&(b=parseInt(window.screen.width*parseInt(b,10)/100,10)),typeof c=="string"&&c.length>1&&c.substr(c.length-1,1)=="%"&&(c=parseInt(window.screen.height*parseInt(c,10)/100,10)),b<640&&(b=640),c<420&&(c=420);var e=parseInt((window.screen.height-c)/2,10),f=parseInt((window.screen.width-b)/2,10);d=(d||"location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes")+",width="+b+",height="+c+",top="+e+",left="+f;var g=window.open("",null,d,!0);if(!g)return!1;try{g.moveTo(f,e),g.resizeTo(b,c),g.focus(),g.location.href=a}catch(h){g=window.open(a,null,d,!0)}return!0}}),function(){var a={modes:{wysiwyg:1,source:1},canUndo:!1,readOnly:1,exec:function(a){var c,d=a.config,f=d.baseHref?'<base href="'+d.baseHref+'"/>':"",g=b.isCustomDomain();if(d.fullPage)c=a.getData().replace(/<head>/,"$&"+f).replace(/[^>]*(?=<\/title>)/,"$& &mdash; "+a.lang.preview);else{var h="<body ",i=a.document&&a.document.getBody();i&&(i.getAttribute("id")&&(h+='id="'+i.getAttribute("id")+'" '),i.getAttribute("class")&&(h+='class="'+i.getAttribute("class")+'" ')),h+=">",c=a.config.docType+'<html dir="'+a.config.contentsLangDirection+'">'+"<head>"+f+"<title>"+a.lang.preview+"</title>"+e.buildStyleHtml(a.config.contentsCss)+"</head>"+h+a.getData()+"</body></html>"}var j=640,k=420,l=80;try{var m=window.screen;j=Math.round(m.width*.8),k=Math.round(m.height*.7),l=Math.round(m.width*.1)}catch(n){}var o="";g&&(window._cke_htmlToLoad=c,o='javascript:void( (function(){document.open();document.domain="'+document.domain+'";'+"document.write( window.opener._cke_htmlToLoad );"+"document.close();"+"window.opener._cke_htmlToLoad = null;"+"})() )");var p=window.open(o,null,"toolbar=yes,location=no,status=yes,menubar=yes,scrollbars=yes,resizable=yes,width="+j+",height="+k+",left="+l);if(!g){var q=p.document;q.open(),q.write(c),q.close(),b.webkit&&setTimeout(function(){q.body.innerHTML+=""},0)}}},c="preview";j.add(c,{init:function(b){b.addCommand(c,a),b.ui.addButton("Preview",{label:b.lang.preview,command:c})}})}(),j.add("print",{init:function(a){var b="print",c=a.addCommand(b,j.print);a.ui.addButton("Print",{label:a.lang.print,command:b})}}),j.print={exec:function(a){if(b.opera)return;b.gecko?a.window.$.print():a.document.$.execCommand("Print")},canUndo:!1,readOnly:1,modes:{wysiwyg:!b.opera}},j.add("removeformat",{requires:["selection"],init:function(a){a.addCommand("removeFormat",j.removeformat.commands.removeformat),a.ui.addButton("RemoveFormat",{label:a.lang.removeFormat,command:"removeFormat"}),a._.removeFormat={filters:[]}}}),j.removeformat={commands:{removeformat:{exec:function(a){var b=a._.removeFormatRegex||(a._.removeFormatRegex=new RegExp("^(?:"+a.config.removeFormatTags.replace(/,/g,"|")+")$","i")),c=a._.removeAttributes||(a._.removeAttributes=a.config.removeFormatAttributes.split(",")),e=j.removeformat.filter,f=a.getSelection().getRanges(1),g=f.createIterator(),h;while(h=g.getNextRange()){h.collapsed||h.enlarge(1);var i=h.createBookmark(),k=i.startNode,l=i.endNode,m,n=function(c){var f=new d.elementPath(c),g=f.elements;for(var h=1,i;i=g[h];h++){if(i.equals(f.block)||i.equals(f.blockLimit))break;b.test(i.getName())&&e(a,i)&&c.breakParent(i)}};n(k);if(l){n(l),m=k.getNextSourceNode(!0,1);while(m){if(m.equals(l))break;var o=m.getNextSourceNode(!1,1);(m.getName()!="img"||!m.data("cke-realelement"))&&e(a,m)&&(b.test(m.getName())?m.remove(1):(m.removeAttributes(c),a.fire("removeFormatCleanup",m))),m=o}}h.moveToBookmark(i)}a.getSelection().selectRanges(f)}}},filter:function(a,b){var c=a._.removeFormat.filters;for(var d=0;d<c.length;d++)if(c[d](b)===!1)return!1;return!0}},a.editor.prototype.addRemoveFormatFilter=function(a){this._.removeFormat.filters.push(a)},i.removeFormatTags="b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var",i.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign",j.add("resize",{init:function(b){var c=b.config,d=b.element.getDirection(1);!c.resize_dir&&(c.resize_dir="both"),c.resize_maxWidth==undefined&&(c.resize_maxWidth=3e3),c.resize_maxHeight==undefined&&(c.resize_maxHeight=3e3),c.resize_minWidth==undefined&&(c.resize_minWidth=750),c.resize_minHeight==undefined&&(c.resize_minHeight=250);if(c.resize_enabled!==!1){var f=null,g,h,i=(c.resize_dir=="both"||c.resize_dir=="horizontal")&&c.resize_minWidth!=c.resize_maxWidth,j=(c.resize_dir=="both"||c.resize_dir=="vertical")&&c.resize_minHeight!=c.resize_maxHeight;function k(a){var e=a.data.$.screenX-g.x,f=a.data.$.screenY-g.y,k=h.width,l=h.height,m=k+e*(d=="rtl"?-1:1),p=l+f;i&&(k=Math.max(c.resize_minWidth,Math.min(m,c.resize_maxWidth))),j&&(l=Math.max(c.resize_minHeight,Math.min(p,c.resize_maxHeight))),b.resize(k,l)}function l(c){a.document.removeListener("mousemove",k),a.document.removeListener("mouseup",l),b.document&&(b.document.removeListener("mousemove",k),b.document.removeListener("mouseup",l))}var m=e.addFunction(function(d){f||(f=b.getResizable()),h={width:f.$.offsetWidth||0,height:f.$.offsetHeight||0},g={x:d.screenX,y:d.screenY},c.resize_minWidth>h.width&&(c.resize_minWidth=h.width),c.resize_minHeight>h.height&&(c.resize_minHeight=h.height),a.document.on("mousemove",k),a.document.on("mouseup",l),b.document&&(b.document.on("mousemove",k),b.document.on("mouseup",l))});b.on("destroy",function(){e.removeFunction(m)}),b.on("themeSpace",function(a){if(a.data.space=="bottom"){var c="";i&&!j&&(c=" cke_resizer_horizontal"),!i&&j&&(c=" cke_resizer_vertical");var f='<div class="cke_resizer'+c+" cke_resizer_"+d+'"'+' title="'+e.htmlEncode(b.lang.resize)+'"'+' onmousedown="CKEDITOR.tools.callFunction('+m+', event)"'+"></div>";d=="ltr"&&c=="ltr"?a.data.html+=f:a.data.html=f+a.data.html}},b,null,100)}}}),function(){var a={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(a){var b=a.element.$.form;if(b)try{b.submit()}catch(c){b.submit.click&&b.submit.click()}}},b="save";j.add(b,{init:function(c){var d=c.addCommand(b,a);d.modes={wysiwyg:!!c.element.$.form},c.ui.addButton("Save",{label:c.lang.save,command:b})}})}(),function(){function g(a,b){var c=0,d;for(d in b)if(b[d]==a){c=1;break}return c}var d="scaytcheck",f="",i=function(){var d=this,g=function(){var e=d.config,f={};f.srcNodeRef=d.document.getWindow().$.frameElement,f.assocApp="CKEDITOR."+a.version+"@"+a.revision,f.customerid=e.scayt_customerid||"1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2",f.customDictionaryIds=e.scayt_customDictionaryIds||"",f.userDictionaryName=e.scayt_userDictionaryName||"",f.sLang=e.scayt_sLang||"en_US",f.onLoad=function(){c&&b.version<8||this.addStyle(this.selectorCss(),"padding-bottom: 2px !important;"),d.focusManager.hasFocus&&!k.isControlRestored(d)&&this.focus()},f.onBeforeChange=function(){k.getScayt(d)&&!d.checkDirty()&&setTimeout(function(){d.resetDirty()},0)};var g=window.scayt_custom_params;if(typeof g=="object")for(var i in g)f[i]=g[i];k.getControlId(d)&&(f.id=k.getControlId(d));var j=new window.scayt(f);j.afterMarkupRemove.push(function(a){(new h(a,j.document)).mergeSiblings()});var l=k.instances[d.name];l&&(j.sLang=l.sLang,j.option(l.option()),j.paused=l.paused),k.instances[d.name]=j;try{j.setDisabled(k.isPaused(d)===!1)}catch(m){}d.fire("showScaytState")};d.on("contentDom",g),d.on("contentDomUnload",function(){var b=a.document.getElementsByTag("script"),c=/^dojoIoScript(\d+)$/i,d=/^https?:\/\/svc\.webspellchecker\.net\/spellcheck\/script\/ssrv\.cgi/i;for(var e=0;e<b.count();e++){var f=b.getItem(e),g=f.getId(),h=f.getAttribute("src");g&&h&&g.match(c)&&h.match(d)&&f.remove()}}),d.on("beforeCommandExec",function(a){if(a.data.name!="source"&&a.data.name!="newpage"||d.mode!="wysiwyg")a.data.name=="source"&&d.mode=="source"&&k.markControlRestore(d);else{var b=k.getScayt(d);b&&(k.setPaused(d,!b.disabled),k.setControlId(d,b.id),b.destroy(!0),delete k.instances[d.name])}}),d.on("afterCommandExec",function(a){if(!k.isScaytEnabled(d))return;d.mode=="wysiwyg"&&(a.data.name=="undo"||a.data.name=="redo")&&window.setTimeout(function(){k.getScayt(d).refresh()},10)}),d.on("destroy",function(a){var b=a.editor,c=k.getScayt(b);if(!c)return;delete k.instances[b.name],k.setControlId(b,c.id),c.destroy(!0)}),d.on("afterSetData",function(){k.isScaytEnabled(d)&&window.setTimeout(function(){var a=k.getScayt(d);a&&a.refresh()},10)}),d.on("insertElement",function(){var a=k.getScayt(d);k.isScaytEnabled(d)&&(c&&d.getSelection().unlock(!0),window.setTimeout(function(){a.focus(),a.refresh()},10))},this,null,50),d.on("insertHtml",function(){var a=k.getScayt(d);k.isScaytEnabled(d)&&(c&&d.getSelection().unlock(!0),window.setTimeout(function(){a.focus(),a.refresh()},10))},this,null,50),d.on("scaytDialog",function(a){a.data.djConfig=window.djConfig,a.data.scayt_control=k.getScayt(d),a.data.tab=f,a.data.scayt=window.scayt});var i=d.dataProcessor,l=i&&i.htmlFilter;l&&l.addRules({elements:{span:function(a){if(a.attributes["data-scayt_word"]&&a.attributes["data-scaytid"])return delete a.name,a}}});var m=j.undo.Image.prototype;m.equals=e.override(m.equals,function(a){return function(b){var c=this,d=c.contents,e=b.contents,f=k.getScayt(c.editor);f&&k.isScaytReady(c.editor)&&(c.contents=f.reset(d)||"",b.contents=f.reset(e)||"");var g=a.apply(c,arguments);return c.contents=d,b.contents=e,g}}),d.document&&g()};j.scayt={engineLoaded:!1,instances:{},controlInfo:{},setControlInfo:function(a,b){a&&a.name&&typeof this.controlInfo[a.name]!="object"&&(this.controlInfo[a.name]={});for(var c in b)this.controlInfo[a.name][c]=b[c]},isControlRestored:function(a){return a&&a.name&&this.controlInfo[a.name]?this.controlInfo[a.name].restored:!1},markControlRestore:function(a){this.setControlInfo(a,{restored:!0})},setControlId:function(a,b){this.setControlInfo(a,{id:b})},getControlId:function(a){return a&&a.name&&this.controlInfo[a.name]&&this.controlInfo[a.name].id?this.controlInfo[a.name].id:null},setPaused:function(a,b){this.setControlInfo(a,{paused:b})},isPaused:function(a){return a&&a.name&&this.controlInfo[a.name]?this.controlInfo[a.name].paused:undefined},getScayt:function(a){return this.instances[a.name]},isScaytReady:function(a){return this.engineLoaded===!0&&"undefined"!=typeof window.scayt&&this.getScayt(a)},isScaytEnabled:function(a){var b=this.getScayt(a);return b?b.disabled===!1:!1},getUiTabs:function(a){var b=[],c=a.config.scayt_uiTabs||"1,1,1";c=c.split(","),c[3]="1";for(var d=0;d<4;d++)b[d]=typeof window.scayt!="undefined"&&typeof window.scayt.uiTags!="undefined"?parseInt(c[d],10)&&window.scayt.uiTags[d]:parseInt(c[d],10);return b},loadEngine:function(c){if(b.gecko&&b.version<10900||b.opera||b.air)return c.fire("showScaytState");if(this.engineLoaded===!0)return i.apply(c);if(this.engineLoaded==-1)return a.on("scaytReady",function(){i.apply(c)});a.on("scaytReady",i,c),a.on("scaytReady",function(){this.engineLoaded=!0},this,null,0),this.engineLoaded=-1;var d=document.location.protocol;d=d.search(/https?:/)!=-1?d:"http:";var e="svc.webspellchecker.net/scayt26/loader__base.js",f=c.config.scayt_srcUrl||d+"//"+e,g=k.parseUrl(f).path+"/";return window.scayt==undefined?(a._djScaytConfig={baseUrl:g,addOnLoad:[function(){a.fireOnce("scaytReady")}],isDebug:!1},a.document.getHead().append(a.document.createElement("script",{attributes:{type:"text/javascript",async:"true",src:f}}))):a.fireOnce("scaytReady"),null},parseUrl:function(a){var b;return a.match&&(b=a.match(/(.*)[\/\\](.*?\.\w+)$/))?{path:b[1],file:b[2]}:a}};var k=j.scayt,l=function(a,b,c,d,e,f,g){a.addCommand(d,e),a.addMenuItem(d,{label:c,command:d,group:f,order:g})},m={preserveState:!0,editorFocus:!1,canUndo:!1,exec:function(a){if(k.isScaytReady(a)){var b=k.isScaytEnabled(a);this.setState(b?2:1);var c=k.getScayt(a);c.focus(),c.setDisabled(b)}else!a.config.scayt_autoStartup&&k.engineLoaded>=0&&(this.setState(0),k.loadEngine(a))}};j.add("scayt",{requires:["menubutton"],beforeInit:function(a){var b=a.config.scayt_contextMenuItemsOrder||"suggest|moresuggest|control",c="";b=b.split("|");if(b&&b.length)for(var d=0;d<b.length;d++)c+="scayt_"+b[d]+(b.length!=parseInt(d,10)+1?",":"");a.config.menu_groups=c+","+a.config.menu_groups},init:function(c){var e=c.dataProcessor&&c.dataProcessor.dataFilter,h={elements:{span:function(a){var b=a.attributes;b&&b["data-scaytid"]&&delete a.name}}};e&&e.addRules(h);var i={},j={},p=c.addCommand(d,m);a.dialog.add(d,a.getUrl(this.path+"dialogs/options.js"));var t=k.getUiTabs(c),u="scaytButton";c.addMenuGroup(u);var v={},w=c.lang.scayt;v.scaytToggle={label:w.enable,command:d,group:u},t[0]==1&&(v.scaytOptions={label:w.options,group:u,onClick:function(){f="options",c.openDialog(d)}}),t[1]==1&&(v.scaytLangs={label:w.langs,group:u,onClick:function(){f="langs",c.openDialog(d)}}),t[2]==1&&(v.scaytDict={label:w.dictionariesTab,group:u,onClick:function(){f="dictionaries",c.openDialog(d)}}),v.scaytAbout={label:c.lang.scayt.about,group:u,onClick:function(){f="about",c.openDialog(d)}},c.addMenuItems(v),c.ui.add("Scayt","menubutton",{label:w.title,title:b.opera?w.opera_title:w.title,className:"cke_button_scayt",modes:{wysiwyg:1},onRender:function(){p.on("state",function(){this.setState(p.state)},this)},onMenu:function(){var a=k.isScaytEnabled(c);c.getMenuItem("scaytToggle").label=w[a?"disable":"enable"];var b=k.getUiTabs(c);return{scaytToggle:2,scaytOptions:a&&b[0]?2:0,scaytLangs:a&&b[1]?2:0,scaytDict:a&&b[2]?2:0,scaytAbout:a&&b[3]?2:0}}}),c.contextMenu&&c.addMenuItems&&c.contextMenu.addListener(function(a,b){if(!k.isScaytEnabled(c)||b.getRanges()[0].checkReadOnly())return null;var d=k.getScayt(c),e=d.getScaytNode();if(!e)return null;var f=d.getWord(e);if(!f)return null;var h=d.getLang(),m={},n=window.scayt.getSuggestion(f,h);if(!n||!n.length)return null;for(var p in i)delete c._.menuItems[p],delete c._.commands[p];for(p in j)delete c._.menuItems[p],delete c._.commands[p];i={},j={};var s=c.config.scayt_moreSuggestions||"on",t=!1,u=c.config.scayt_maxSuggestions;typeof u!="number"&&(u=5),!u&&(u=n.length);var v=c.config.scayt_contextCommands||"all";v=v.split("|");for(var x=0,y=n.length;x<y;x+=1){var z="scayt_suggestion_"+n[x].replace(" ","_"),A=function(a,b){return{exec:function(){d.replace(a,b)}}}(e,n[x]);x<u?(l(c,"button_"+z,n[x],z,A,"scayt_suggest",x+1),m[z]=2,j[z]=2):s=="on"&&(l(c,"button_"+z,n[x],z,A,"scayt_moresuggest",x+1),i[z]=2,t=!0)}t&&(c.addMenuItem("scayt_moresuggest",{label:w.moreSuggestions,group:"scayt_moresuggest",order:10,getItems:function(){return i}}),j.scayt_moresuggest=2);if(g("all",v)||g("ignore",v)){var B={exec:function(){d.ignore(e)}};l(c,"ignore",w.ignore,"scayt_ignore",B,"scayt_control",1),j.scayt_ignore=2}if(g("all",v)||g("ignoreall",v)){var D={exec:function(){d.ignoreAll(e)}};l(c,"ignore_all",w.ignoreAll,"scayt_ignore_all",D,"scayt_control",2),j.scayt_ignore_all=2}if(g("all",v)||g("add",v)){var E={exec:function(){window.scayt.addWordToUserDictionary(e)}};l(c,"add_word",w.addWord,"scayt_add_word",E,"scayt_control",3),j.scayt_add_word=2}return d.fireOnContextMenu&&d.fireOnContextMenu(c),j});var x=function(){c.removeListener("showScaytState",x),!b.opera&&!b.air?p.setState(k.isScaytEnabled(c)?1:2):p.setState(0)};c.on("showScaytState",x),(b.opera||b.air)&&c.on("instanceReady",function(){x()}),c.config.scayt_autoStartup&&c.on("instanceReady",function(){k.loadEngine(c)})},afterInit:function(a){var b,c=function(a){if(a.hasAttribute("data-scaytid"))return!1};a._.elementsPath&&(b=a._.elementsPath.filters)&&b.push(c),a.addRemoveFormatFilter&&a.addRemoveFormatFilter(c)}})}(),j.add("smiley",{requires:["dialog"],init:function(b){b.config.smiley_path=b.config.smiley_path||this.path+"images/",b.addCommand("smiley",new a.dialogCommand("smiley")),b.ui.addButton("Smiley",{label:b.lang.smiley.toolbar,command:"smiley"}),a.dialog.add("smiley",this.path+"dialogs/smiley.js")}}),i.smiley_images=["regular_smile.gif","sad_smile.gif","wink_smile.gif","teeth_smile.gif","confused_smile.gif","tounge_smile.gif","embaressed_smile.gif","omg_smile.gif","whatchutalkingabout_smile.gif","angry_smile.gif","angel_smile.gif","shades_smile.gif","devil_smile.gif","cry_smile.gif","lightbulb.gif","thumbs_down.gif","thumbs_up.gif","heart.gif","broken_heart.gif","kiss.gif","envelope.gif"],i.smiley_descriptions=["smiley","sad","wink","laugh","frown","cheeky","blush","surprise","indecision","angry","angel","cool","devil","crying","enlightened","no","yes","heart","broken heart","kiss","mail"],function(){var b=".%2 p,.%2 div,.%2 pre,.%2 address,.%2 blockquote,.%2 h1,.%2 h2,.%2 h3,.%2 h4,.%2 h5,.%2 h6{background-repeat: no-repeat;background-position: top %3;border: 1px dotted gray;padding-top: 8px;padding-%3: 8px;}.%2 p{%1p.png);}.%2 div{%1div.png);}.%2 pre{%1pre.png);}.%2 address{%1address.png);}.%2 blockquote{%1blockquote.png);}.%2 h1{%1h1.png);}.%2 h2{%1h2.png);}.%2 h3{%1h3.png);}.%2 h4{%1h4.png);}.%2 h5{%1h5.png);}.%2 h6{%1h6.png);}",c=/%1/g,d=/%2/g,e=/%3/g,f={readOnly:1,preserveState:!0,editorFocus:!1,exec:function(a){this.toggleState(),this.refresh(a)},refresh:function(a){if(a.document){var b=this.state==1?"addClass":"removeClass";a.document.getBody()[b]("cke_show_blocks")}}};j.add("showblocks",{requires:["wysiwygarea"],init:function(g){var h=g.addCommand("showblocks",f);h.canUndo=!1,g.config.startupOutlineBlocks&&h.setState(1),g.addCss(b.replace(c,"background-image: url("+a.getUrl(this.path)+"images/block_").replace(d,"cke_show_blocks ").replace(e,g.lang.dir=="rtl"?"right":"left")),g.ui.addButton("ShowBlocks",{label:g.lang.showBlocks,command:"showblocks"}),g.on("mode",function(){h.state!=0&&h.refresh(g)}),g.on("contentDom",function(){h.state!=0&&h.refresh(g)})}})}(),function(){var c="cke_show_border",d,f=(b.ie6Compat?[".%1 table.%2,",".%1 table.%2 td, .%1 table.%2 th","{","border : #d3d3d3 1px dotted","}"]:[".%1 table.%2,",".%1 table.%2 > tr > td, .%1 table.%2 > tr > th,",".%1 table.%2 > tbody > tr > td, .%1 table.%2 > tbody > tr > th,",".%1 table.%2 > thead > tr > td, .%1 table.%2 > thead > tr > th,",".%1 table.%2 > tfoot > tr > td, .%1 table.%2 > tfoot > tr > th","{","border : #d3d3d3 1px dotted","}"]).join("");d=f.replace(/%2/g,c).replace(/%1/g,"cke_show_borders ");var g={preserveState:!0,editorFocus:!1,readOnly:1,exec:function(a){this.toggleState(),this.refresh(a)},refresh:function(a){if(a.document){var b=this.state==1?"addClass":"removeClass";a.document.getBody()[b]("cke_show_borders")}}};j.add("showborders",{requires:["wysiwygarea"],modes:{wysiwyg:1},init:function(a){var b=a.addCommand("showborders",g);b.canUndo=!1,a.config.startupShowBorders!==!1&&b.setState(1),a.addCss(d),a.on("mode",function(){b.state!=0&&b.refresh(a)},null,null,100),a.on("contentDom",function(){b.state!=0&&b.refresh(a)}),a.on("removeFormatCleanup",function(b){var d=b.data;a.getCommand("showborders").state==1&&d.is("table")&&(!d.hasAttribute("border")||parseInt(d.getAttribute("border"),10)<=0)&&d.addClass(c)})},afterInit:function(a){var b=a.dataProcessor,d=b&&b.dataFilter,e=b&&b.htmlFilter;d&&d.addRules({elements:{table:function(a){var b=a.attributes,d=b["class"],e=parseInt(b.border,10);(!e||e<=0)&&(!d||d.indexOf(c)==-1)&&(b["class"]=(d||"")+" "+c)}}}),e&&e.addRules({elements:{table:function(a){var b=a.attributes,d=b["class"];d&&(b["class"]=d.replace(c,"").replace(/\s{2}/," ").replace(/^\s+|\s+$/,""))}}})}}),a.on("dialogDefinition",function(a){var b=a.data.name;if(b=="table"||b=="tableProperties"){var d=a.data.definition,f=d.getContents("info"),g=f.get("txtBorder"),h=g.commit;g.commit=e.override(h,function(a){return function(b,d){a.apply(this,arguments);var e=parseInt(this.getValue(),10);d[!e||e<=0?"addClass":"removeClass"](c)}});var i=d.getContents("advanced"),j=i&&i.get("advCSSClasses");j&&(j.setup=e.override(j.setup,function(a){return function(){a.apply(this,arguments),this.setValue(this.getValue().replace(/cke_show_border/,""))}}),j.commit=e.override(j.commit,function(a){return function(b,c){a.apply(this,arguments),parseInt(c.getAttribute("border"),10)||c.addClass("cke_show_border")}}))}})}(),j.add("sourcearea",{requires:["editingblock"],init:function(d){var e=j.sourcearea,f=a.document.getWindow();d.on("editingBlockReady",function(){var a,e;d.addMode("source",{load:function(g,i){c&&b.version<8&&g.setStyle("position","relative"),d.textarea=a=new h("textarea"),a.setAttributes({dir:"ltr",tabIndex:b.webkit?-1:d.tabIndex,role:"textbox","aria-label":d.lang.editorTitle.replace("%1",d.name)}),a.addClass("cke_source"),a.addClass("cke_enable_context_menu"),d.readOnly&&a.setAttribute("readOnly","readonly");var j={width:b.ie7Compat?"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"};c&&(e=function(){a.hide(),a.setStyle("height",g.$.clientHeight+"px"),a.setStyle("width",g.$.clientWidth+"px"),a.show()},d.on("resize",e),f.on("resize",e),setTimeout(e,0)),g.setHtml(""),g.append(a),a.setStyles(j),d.fire("ariaWidget",a),a.on("blur",function(){d.focusManager.blur()}),a.on("focus",function(){d.focusManager.focus()}),d.mayBeDirty=!0,this.loadData(i);var k=d.keystrokeHandler;k&&k.attach(a),setTimeout(function(){d.mode="source",d.fire("mode",{previousMode:d._.previousMode})},b.gecko||b.webkit?100:0)},loadData:function(b){a.setValue(b),d.fire("dataReady")},getData:function(){return a.getValue()},getSnapshotData:function(){return a.getValue()},unload:function(g){a.clearCustomData(),d.textarea=a=null,e&&(d.removeListener("resize",e),f.removeListener("resize",e)),c&&b.version<8&&g.removeStyle("position")},focus:function(){a.focus()}})}),d.on("readOnly",function(){d.mode=="source"&&(d.readOnly?d.textarea.setAttribute("readOnly","readonly"):d.textarea.removeAttribute("readOnly"))}),d.addCommand("source",e.commands.source),d.ui.addButton&&d.ui.addButton("Source",{label:d.lang.source,command:"source"}),d.on("mode",function(){d.getCommand("source").setState(d.mode=="source"?1:2)})}}),j.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function(a){a.mode=="wysiwyg"&&a.fire("saveSnapshot"),a.getCommand("source").setState(0),a.setMode(a.mode=="source"?"wysiwyg":"source")},canUndo:!1}}},function(){function e(a,b){var c=a.type,d=b.type;return c==d?0:c==3?-1:d==3?1:d==1?1:-1}j.add("stylescombo",{requires:["richcombo","styles"],init:function(f){function l(b){f.getStylesSet(function(c){if(!j.length){var d,f;for(var h=0,k=c.length;h<k;h++){var l=c[h];f=l.name,d=i[f]=new a.style(l),d._name=f,d._.enterMode=g.enterMode,j.push(d)}j.sort(e)}b&&b()})}var g=f.config,h=f.lang.stylesCombo,i={},j=[],k;f.ui.addRichCombo("Styles",{label:h.label,title:h.panelTitle,className:"cke_styles",panel:{css:f.skin.editor.css.concat(g.contentsCss),multiSelect:!0,attributes:{"aria-label":h.panelTitle}},init:function(){k=this,l(function(){var a,b,c,d,e,f;for(e=0,f=j.length;e<f;e++)a=j[e],b=a._name,d=a.type,d!=c&&(k.startGroup(h["panelTitle"+String(d)]),c=d),k.add(b,a.type==3?b:a.buildPreview(),b);k.commit()})},onClick:function(a){f.focus(),f.fire("saveSnapshot");var b=i[a],c=f.getSelection(),e=new d.elementPath(c.getStartElement());b[b.checkActive(e)?"remove":"apply"](f.document),f.fire("saveSnapshot")},onRender:function(){f.on("selectionChange",function(a){var b=this.getValue(),c=a.data.path,d=c.elements;for(var e=0,f=d.length,g;e<f;e++){g=d[e];for(var h in i)if(i[h].checkElementRemovable(g,!0)){h!=b&&this.setValue(h);return}}this.setValue("")},this)},onOpen:function(){var a=this;(c||b.webkit)&&f.focus();var e=f.getSelection(),g=e.getSelectedElement(),j=new d.elementPath(g||e.getStartElement()),k=[0,0,0,0];a.showAll(),a.unmarkAll();for(var l in i){var m=i[l],o=m.type;m.checkActive(j)?a.mark(l):o==3&&!m.checkApplicable(j)&&(a.hideItem(l),k[o]--),k[o]++}k[1]||a.hideGroup(h["panelTitle"+String(1)]),k[2]||a.hideGroup(h["panelTitle"+String(2)]),k[3]||a.hideGroup(h["panelTitle"+String(3)])},reset:function(){k&&(delete k._.panel,delete k._.list,k._.committed=0,k._.items={},k._.state=2),i={},j=[],l()}}),f.on("instanceReady",function(){l()})}})}(),j.add("table",{init:function(b){var c=j.table,d=b.lang.table;b.addCommand("table",new a.dialogCommand("table")),b.addCommand("tableProperties",new a.dialogCommand("tableProperties")),b.ui.addButton("Table",{label:d.toolbar,command:"table"}),a.dialog.add("table",this.path+"dialogs/table.js"),a.dialog.add("tableProperties",this.path+"dialogs/table.js"),b.addMenuItems&&b.addMenuItems({table:{label:d.menu,command:"tableProperties",group:"table",order:5},tabledelete:{label:d.deleteTable,command:"tableDelete",group:"table",order:1}}),b.on("doubleclick",function(a){var b=a.data.element;b.is("table")&&(a.data.dialog="tableProperties")}),b.contextMenu&&b.contextMenu.addListener(function(a,b){if(!a||a.isReadOnly())return null;var c=a.hasAscendant("table",1);return c?{tabledelete:2,table:2}:null})}}),function(){function f(a){function i(a){if(f.length>0)return;a.type==1&&b.test(a.getName())&&!a.getCustomData("selected_cell")&&(h.setMarker(g,a,"selected_cell",!0),f.push(a))}var c=a.createBookmarks(),e=a.getRanges(),f=[],g={};for(var j=0;j<e.length;j++){var k=e[j];if(k.collapsed){var l=k.getCommonAncestor(),m=l.getAscendant("td",!0)||l.getAscendant("th",!0);m&&f.push(m)}else{var n=new d.walker(k),o;n.guard=i;while(o=n.next()){var p=o.getAscendant("td")||o.getAscendant("th");p&&!p.getCustomData("selected_cell")&&(h.setMarker(g,p,"selected_cell",!0),f.push(p))}}}return h.clearAllMarkers(g),a.selectBookmarks(c),f}function g(a){var b=0,c=a.length-1,d={},e,f,g;while(e=a[b++])h.setMarker(d,e,"delete_cell",!0);b=0;while(e=a[b++])if((f=e.getPrevious())&&!f.getCustomData("delete_cell")||(f=e.getNext())&&!f.getCustomData("delete_cell"))return h.clearAllMarkers(d),f;return h.clearAllMarkers(d),g=a[0].getParent(),(g=g.getPrevious())?g.getLast():(g=a[c].getParent(),(g=g.getNext())?g.getChild(0):null)}function i(a,b){var d=f(a),g=d[0],i=g.getAscendant("table"),j=g.getDocument(),k=d[0].getParent(),l=k.$.rowIndex,m=d[d.length-1],n=m.getParent().$.rowIndex+m.$.rowSpan-1,o=new h(i.$.rows[n]),p=b?l:n,q=b?k:o,r=e.buildTableMap(i),s=r[p],t=b?r[p-1]:r[p+1],u=r[0].length,v=j.createElement("tr");for(var w=0;s[w]&&w<u;w++){var x;s[w].rowSpan>1&&t&&s[w]==t[w]?(x=s[w],x.rowSpan+=1):(x=(new h(s[w])).clone(),x.removeAttribute("rowSpan"),!c&&x.appendBogus(),v.append(x),x=x.$),w+=x.colSpan-1}b?v.insertBefore(q):v.insertAfter(q)}function k(a){if(a instanceof d.selection){var b=f(a),c=b[0],g=c.getAscendant("table"),i=e.buildTableMap(g),j=b[0].getParent(),l=j.$.rowIndex,m=b[b.length-1],n=m.getParent().$.rowIndex+m.$.rowSpan-1,o=[];for(var p=l;p<=n;p++){var q=i[p],r=new h(g.$.rows[p]);for(var s=0;s<q.length;s++){var t=new h(q[s]),u=t.getParent().$.rowIndex;if(t.$.rowSpan==1)t.remove();else{t.$.rowSpan-=1;if(u==p){var v=i[p+1];v[s-1]?t.insertAfter(new h(v[s-1])):(new h(g.$.rows[p+1])).append(t,1)}}s+=t.$.colSpan-1}o.push(r)}var w=g.$.rows,x=new h(w[n+1]||(l>0?w[l-1]:null)||g.$.parentNode);for(p=o.length;p>=0;p--)k(o[p]);return x}return a instanceof h&&(g=a.getAscendant("table"),g.$.rows.length==1?g.remove():a.remove()),null}function l(a,b){var c=a.getParent(),d=c.$.cells,e=0;for(var f=0;f<d.length;f++){var g=d[f];e+=b?1:g.colSpan;if(g==a.$)break}return e-1}function m(a,b){var c=b?Infinity:0;for(var d=0;d<a.length;d++){var e=l(a[d],b);if(b?e<c:e>c)c=e}return c}function n(a,b){var d=f(a),g=d[0],i=g.getAscendant("table"),j=m(d,1),k=m(d),l=b?j:k,n=e.buildTableMap(i),o=[],p=[],q=n.length;for(var r=0;r<q;r++){o.push(n[r][l]);var s=b?n[r][l-1]:n[r][l+1];s&&p.push(s)}for(r=0;r<q;r++){var t;o[r].colSpan>1&&p.length&&p[r]==o[r]?(t=o[r],t.colSpan+=1):(t=(new h(o[r])).clone(),t.removeAttribute("colSpan"),!c&&t.appendBogus(),t[b?"insertBefore":"insertAfter"].call(t,new h(o[r])),t=t.$),r+=t.rowSpan-1}}function o(a){var b=f(a),c=b[0],d=b[b.length-1],g=c.getAscendant("table"),i=e.buildTableMap(g),j,k,l=[];for(var m=0,n=i.length;m<n;m++)for(var o=0,p=i[m].length;o<p;o++)i[m][o]==c.$&&(j=o),i[m][o]==d.$&&(k=o);for(m=j;m<=k;m++)for(o=0;o<i.length;o++){var q=i[o],r=new h(g.$.rows[o]),s=new h(q[m]);s.$&&(s.$.colSpan==1?s.remove():s.$.colSpan-=1,o+=s.$.rowSpan-1,r.$.cells.length||l.push(r))}var t=g.$.rows[0]&&g.$.rows[0].cells,u=new h(t[j]||(j?t[j-1]:g.$.parentNode));return l.length==n&&g.remove(),u}function p(a){var b=[],c=a[0]&&a[0].getAscendant("table"),d,e,f,g;for(d=0,e=a.length;d<e;d++)b.push(a[d].$.cellIndex);b.sort();for(d=1,e=b.length;d<e;d++)if(b[d]-b[d-1]>1){f=b[d-1]+1;break}f||(f=b[0]>0?b[0]-1:b[b.length-1]+1);var i=c.$.rows;for(d=0,e=i.length;d<e;d++){g=i[d].cells[f];if(g)break}return g?new h(g):c.getPrevious()}function q(a,b){var d=a.getStartElement(),e=d.getAscendant("td",1)||d.getAscendant("th",1);if(!e)return;var f=e.clone();c||f.appendBogus(),b?f.insertBefore(e):f.insertAfter(e)}function r(a){if(a instanceof d.selection){var b=f(a),c=b[0]&&b[0].getAscendant("table"),e=g(b);for(var i=b.length-1;i>=0;i--)r(b[i]);e?t(e,!0):c&&c.remove()}else if(a instanceof h){var j=a.getParent();j.getChildCount()==1?j.remove():a.remove()}}function s(a){var b=a.getBogus();b&&b.remove(),a.trim()}function t(a,b){var c=new d.range(a.getDocument());c["moveToElementEdit"+(b?"End":"Start")](a)||(c.selectNodeContents(a),c.collapse(b?!1:!0)),c.select(!0)}function u(a,b,c){var d=a[b];if(typeof c=="undefined")return d;for(var e=0;d&&e<d.length;e++){if(c.is&&d[e]==c.$)return e;if(e==c)return new h(d[e])}return c.is?-1:null}function v(a,b,c){var d=[];for(var e=0;e<a.length;e++){var f=a[e];if(typeof c=="undefined")d.push(f[b]);else{if(c.is&&
f[b]==c.$)return e;if(e==c)return new h(f[b])}}return typeof c=="undefined"?d:c.is?-1:null}function w(a,b,g){var i=f(a),j;if((b?i.length!=1:i.length<2)||(j=a.getCommonAncestor())&&j.type==1&&j.is("table"))return!1;var k,l=i[0],m=l.getAscendant("table"),n=e.buildTableMap(m),o=n.length,p=n[0].length,q=l.getParent().$.rowIndex,r=u(n,q,l);if(b){var t;try{var v=parseInt(l.getAttribute("rowspan"),10)||1,w=parseInt(l.getAttribute("colspan"),10)||1;t=n[b=="up"?q-v:b=="down"?q+v:q][b=="left"?r-w:b=="right"?r+w:r]}catch(x){return!1}if(!t||l.$==t)return!1;i[b=="up"||b=="left"?"unshift":"push"](new h(t))}var y=l.getDocument(),z=q,B=0,C=0,D=!g&&new d.documentFragment(y),E=0;for(var F=0;F<i.length;F++){k=i[F];var G=k.getParent(),H=k.getFirst(),I=k.$.colSpan,J=k.$.rowSpan,K=G.$.rowIndex,L=u(n,K,k);E+=I*J,C=Math.max(C,L-r+I),B=Math.max(B,K-q+J);if(!g){if(s(k),k.getChildren().count()){if(K!=z&&H&&(!H.isBlockBoundary||!H.isBlockBoundary({br:1}))){var M=D.getLast(d.walker.whitespaces(!0));M&&(!M.is||!M.is("br"))&&D.append("br")}k.moveChildren(D)}F?k.remove():k.setHtml("")}z=K}if(!g){D.moveChildren(l),c||l.appendBogus(),C>=p?l.removeAttribute("rowSpan"):l.$.rowSpan=B,B>=o?l.removeAttribute("colSpan"):l.$.colSpan=C;var N=new d.nodeList(m.$.rows),O=N.count();for(F=O-1;F>=0;F--){var P=N.getItem(F);if(!P.$.cells.length){P.remove(),O++;continue}}return l}return B*C==E}function x(a,b){var d=f(a);if(d.length>1)return!1;if(b)return!0;var g=d[0],i=g.getParent(),j=i.getAscendant("table"),k=e.buildTableMap(j),l=i.$.rowIndex,m=u(k,l,g),n=g.$.rowSpan,o,p,q,r;if(n>1){p=Math.ceil(n/2),q=Math.floor(n/2),r=l+p;var s=new h(j.$.rows[r]),t=u(k,r),v;o=g.clone();for(var w=0;w<t.length;w++){v=t[w];if(v.parentNode==s.$&&w>m){o.insertBefore(new h(v));break}v=null}v||s.append(o,!0)}else{q=p=1,s=i.clone(),s.insertAfter(i),s.append(o=g.clone());var x=u(k,l);for(var y=0;y<x.length;y++)x[y].rowSpan++}return c||o.appendBogus(),g.$.rowSpan=p,o.$.rowSpan=q,p==1&&g.removeAttribute("rowSpan"),q==1&&o.removeAttribute("rowSpan"),o}function y(a,b){var d=f(a);if(d.length>1)return!1;if(b)return!0;var g=d[0],h=g.getParent(),i=h.getAscendant("table"),j=e.buildTableMap(i),k=h.$.rowIndex,l=u(j,k,g),m=g.$.colSpan,n,o,p;if(m>1)o=Math.ceil(m/2),p=Math.floor(m/2);else{p=o=1;var q=v(j,l);for(var r=0;r<q.length;r++)q[r].colSpan++}return n=g.clone(),n.insertAfter(g),c||n.appendBogus(),g.$.colSpan=o,n.$.colSpan=p,o==1&&g.removeAttribute("colSpan"),p==1&&n.removeAttribute("colSpan"),n}var b=/^(?:td|th)$/,z={thead:1,tbody:1,tfoot:1,td:1,tr:1,th:1};j.tabletools={init:function(b){var c=b.lang.table;b.addCommand("cellProperties",new a.dialogCommand("cellProperties")),a.dialog.add("cellProperties",this.path+"dialogs/tableCell.js"),b.addCommand("tableDelete",{exec:function(a){var b=a.getSelection(),c=b&&b.getStartElement(),e=c&&c.getAscendant("table",1);if(!e)return;var f=e.getParent();f.getChildCount()==1&&!f.is("body","td","th")&&(e=f);var g=new d.range(a.document);g.moveToPosition(e,3),e.remove(),g.select()}}),b.addCommand("rowDelete",{exec:function(a){var b=a.getSelection();t(k(b))}}),b.addCommand("rowInsertBefore",{exec:function(a){var b=a.getSelection();i(b,!0)}}),b.addCommand("rowInsertAfter",{exec:function(a){var b=a.getSelection();i(b)}}),b.addCommand("columnDelete",{exec:function(a){var b=a.getSelection(),c=o(b);c&&t(c,!0)}}),b.addCommand("columnInsertBefore",{exec:function(a){var b=a.getSelection();n(b,!0)}}),b.addCommand("columnInsertAfter",{exec:function(a){var b=a.getSelection();n(b)}}),b.addCommand("cellDelete",{exec:function(a){var b=a.getSelection();r(b)}}),b.addCommand("cellMerge",{exec:function(a){t(w(a.getSelection()),!0)}}),b.addCommand("cellMergeRight",{exec:function(a){t(w(a.getSelection(),"right"),!0)}}),b.addCommand("cellMergeDown",{exec:function(a){t(w(a.getSelection(),"down"),!0)}}),b.addCommand("cellVerticalSplit",{exec:function(a){t(x(a.getSelection()))}}),b.addCommand("cellHorizontalSplit",{exec:function(a){t(y(a.getSelection()))}}),b.addCommand("cellInsertBefore",{exec:function(a){var b=a.getSelection();q(b,!0)}}),b.addCommand("cellInsertAfter",{exec:function(a){var b=a.getSelection();q(b)}}),b.addMenuItems&&b.addMenuItems({tablecell:{label:c.cell.menu,group:"tablecell",order:1,getItems:function(){var a=b.getSelection(),c=f(a);return{tablecell_insertBefore:2,tablecell_insertAfter:2,tablecell_delete:2,tablecell_merge:w(a,null,!0)?2:0,tablecell_merge_right:w(a,"right",!0)?2:0,tablecell_merge_down:w(a,"down",!0)?2:0,tablecell_split_vertical:x(a,!0)?2:0,tablecell_split_horizontal:y(a,!0)?2:0,tablecell_properties:c.length>0?2:0}}},tablecell_insertBefore:{label:c.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:c.cell.insertAfter,group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:c.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:c.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:c.cell.mergeRight,group:"tablecell",command:"cellMergeRight",order:17},tablecell_merge_down:{label:c.cell.mergeDown,group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:c.cell.splitHorizontal,group:"tablecell",command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:c.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:c.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:c.row.menu,group:"tablerow",order:1,getItems:function(){return{tablerow_insertBefore:2,tablerow_insertAfter:2,tablerow_delete:2}}},tablerow_insertBefore:{label:c.row.insertBefore,group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:c.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:c.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:c.column.menu,group:"tablecolumn",order:1,getItems:function(){return{tablecolumn_insertBefore:2,tablecolumn_insertAfter:2,tablecolumn_delete:2}}},tablecolumn_insertBefore:{label:c.column.insertBefore,group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{label:c.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:c.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}}),b.contextMenu&&b.contextMenu.addListener(function(a,b){if(!a||a.isReadOnly())return null;while(a){if(a.getName()in z)return{tablecell:2,tablerow:2,tablecolumn:2};a=a.getParent()}return null})},getSelectedCells:f},j.add("tabletools",j.tabletools)}(),e.buildTableMap=function(a){var b=a.$.rows,c=-1,d=[];for(var e=0;e<b.length;e++){c++,!d[c]&&(d[c]=[]);var f=-1;for(var g=0;g<b[e].cells.length;g++){var h=b[e].cells[g];f++;while(d[c][f])f++;var i=isNaN(h.colSpan)?1:h.colSpan,j=isNaN(h.rowSpan)?1:h.rowSpan;for(var k=0;k<j;k++){d[c+k]||(d[c+k]=[]);for(var l=0;l<i;l++)d[c+k][f+l]=b[e].cells[g]}f+=i-1}}return d},j.add("specialchar",{availableLangs:{en:1},init:function(b){var c="specialchar",d=this;a.dialog.add(c,this.path+"dialogs/specialchar.js"),b.addCommand(c,{exec:function(){var f=b.langCode;f=d.availableLangs[f]?f:"en",a.scriptLoader.load(a.getUrl(d.path+"lang/"+f+".js"),function(){e.extend(b.lang.specialChar,d.langEntries[f]),b.openDialog(c)})},modes:{wysiwyg:1},canUndo:!1}),b.ui.addButton("SpecialChar",{label:b.lang.specialChar.toolbar,command:c})}}),i.specialChars=["!","&quot;","#","$","%","&amp;","'","(",")","*","+","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","&lt;","=","&gt;","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","&euro;","&lsquo;","&rsquo;","&ldquo;","&rdquo;","&ndash;","&mdash;","&iexcl;","&cent;","&pound;","&curren;","&yen;","&brvbar;","&sect;","&uml;","&copy;","&ordf;","&laquo;","&not;","&reg;","&macr;","&deg;","&sup2;","&sup3;","&acute;","&micro;","&para;","&middot;","&cedil;","&sup1;","&ordm;","&raquo;","&frac14;","&frac12;","&frac34;","&iquest;","&Agrave;","&Aacute;","&Acirc;","&Atilde;","&Auml;","&Aring;","&AElig;","&Ccedil;","&Egrave;","&Eacute;","&Ecirc;","&Euml;","&Igrave;","&Iacute;","&Icirc;","&Iuml;","&ETH;","&Ntilde;","&Ograve;","&Oacute;","&Ocirc;","&Otilde;","&Ouml;","&times;","&Oslash;","&Ugrave;","&Uacute;","&Ucirc;","&Uuml;","&Yacute;","&THORN;","&szlig;","&agrave;","&aacute;","&acirc;","&atilde;","&auml;","&aring;","&aelig;","&ccedil;","&egrave;","&eacute;","&ecirc;","&euml;","&igrave;","&iacute;","&icirc;","&iuml;","&eth;","&ntilde;","&ograve;","&oacute;","&ocirc;","&otilde;","&ouml;","&divide;","&oslash;","&ugrave;","&uacute;","&ucirc;","&uuml;","&yacute;","&thorn;","&yuml;","&OElig;","&oelig;","&#372;","&#374","&#373","&#375;","&sbquo;","&#8219;","&bdquo;","&hellip;","&trade;","&#9658;","&bull;","&rarr;","&rArr;","&hArr;","&diams;","&asymp;"],function(){function i(a){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function(b){if(b.focusManager.hasFocus){var f=b.getSelection(),g=f.getCommonAncestor(),i;if(i=g.getAscendant("td",!0)||g.getAscendant("th",!0)){var j=new d.range(b.document),k=e.tryThese(function(){var b=i.getParent(),c=b.$.cells[i.$.cellIndex+(a?-1:1)];return c.parentNode.parentNode,c},function(){var b=i.getParent(),c=b.getAscendant("table"),d=c.$.rows[b.$.rowIndex+(a?-1:1)];return d.cells[a?d.cells.length-1:0]});if(!k&&!a){var l=i.getAscendant("table").$,m=i.getParent().$.cells,n=new h(l.insertRow(-1),b.document);for(var o=0,p=m.length;o<p;o++){var r=n.append((new h(m[o],b.document)).clone(!1,!1));!c&&r.appendBogus()}j.moveToElementEditStart(n)}else{if(!k)return!0;k=new h(k),j.moveToElementEditStart(k),(!j.checkStartOfBlock()||!j.checkEndOfBlock())&&j.selectNodeContents(k)}return j.select(!0),!0}}return!1}}}var a={editorFocus:!1,modes:{wysiwyg:1,source:1}},f={exec:function(a){a.container.focusNext(!0,a.tabIndex)}},g={exec:function(a){a.container.focusPrevious(!0,a.tabIndex)}};j.add("tab",{requires:["keystrokes"],init:function(c){var d=c.config.enableTabKeyTools!==!1,h=c.config.tabSpaces||0,j="";while(h--)j+=" ";j&&c.on("key",function(a){a.data.keyCode==9&&(c.insertHtml(j),a.cancel())}),d&&c.on("key",function(a){(a.data.keyCode==9&&c.execCommand("selectNextCell")||a.data.keyCode==2228224+9&&c.execCommand("selectPreviousCell"))&&a.cancel()}),(b.webkit||b.gecko)&&c.on("key",function(a){var b=a.data.keyCode;b==9&&!j&&(a.cancel(),c.execCommand("blur")),b==2228224+9&&(c.execCommand("blurBack"),a.cancel())}),c.addCommand("blur",e.extend(f,a)),c.addCommand("blurBack",e.extend(g,a)),c.addCommand("selectNextCell",i()),c.addCommand("selectPreviousCell",i(!0))}})}(),h.prototype.focusNext=function(a,b){var c=this,d=c.$,e=b===undefined?c.getTabIndex():b,f,g,h,i,j,k;if(e<=0){j=c.getNextSourceNode(a,1);while(j){if(j.isVisible()&&j.getTabIndex()===0){h=j;break}j=j.getNextSourceNode(!1,1)}}else{j=c.getDocument().getBody().getFirst();while(j=j.getNextSourceNode(!1,1)){if(!f)if(!g&&j.equals(c)){g=!0;if(a){if(!(j=j.getNextSourceNode(!0,1)))break;f=1}}else g&&!c.contains(j)&&(f=1);if(!j.isVisible()||(k=j.getTabIndex())<0)continue;if(f&&k==e){h=j;break}k>e&&(!h||!i||k<i)?(h=j,i=k):!h&&k===0&&(h=j,i=k)}}h&&h.focus()},h.prototype.focusPrevious=function(a,b){var c=this,d=c.$,e=b===undefined?c.getTabIndex():b,f,g,h,i=0,j,k=c.getDocument().getBody().getLast();while(k=k.getPreviousSourceNode(!1,1)){if(!f)if(!g&&k.equals(c)){g=!0;if(a){if(!(k=k.getPreviousSourceNode(!0,1)))break;f=1}}else g&&!c.contains(k)&&(f=1);if(!k.isVisible()||(j=k.getTabIndex())<0)continue;if(e<=0){if(f&&j===0){h=k;break}j>i&&(h=k,i=j)}else{if(f&&j==e){h=k;break}j<e&&(!h||j>i)&&(h=k,i=j)}}h&&h.focus()},function(){j.add("templates",{requires:["dialog"],init:function(b){a.dialog.add("templates",a.getUrl(this.path+"dialogs/templates.js")),b.addCommand("templates",new a.dialogCommand("templates")),b.ui.addButton("Templates",{label:b.lang.templates.button,command:"templates"})}});var b={},c={};a.addTemplates=function(a,c){b[a]=c},a.getTemplates=function(a){return b[a]},a.loadTemplates=function(b,d){var e=[];for(var f=0,g=b.length;f<g;f++)c[b[f]]||(e.push(b[f]),c[b[f]]=1);e.length?a.scriptLoader.load(e,d):setTimeout(d,0)}}(),i.templates_files=[a.getUrl("plugins/templates/templates/default.js")],i.templates_replaceContent=!0,function(){var d=function(){this.toolbars=[],this.focusCommandExecuted=!1};d.prototype.focus=function(){for(var a=0,b;b=this.toolbars[a++];)for(var c=0,d;d=b.items[c++];)if(d.focus){d.focus();return}};var f={toolbarFocus:{modes:{wysiwyg:1,source:1},readOnly:1,exec:function(a){a.toolbox&&(a.toolbox.focusCommandExecuted=!0,c||b.air?setTimeout(function(){a.toolbox.focus()},100):a.toolbox.focus())}}};j.add("toolbar",{init:function(b){var c,g=function(a,d){var e,f,h=b.lang.dir=="rtl",i=b.config.toolbarGroupCycling;i=i===undefined||i;switch(d){case 9:case 2228233:while(!f||!f.items.length){f=d==9?(f?f.next:a.toolbar.next)||b.toolbox.toolbars[0]:(f?f.previous:a.toolbar.previous)||b.toolbox.toolbars[b.toolbox.toolbars.length-1];if(f.items.length){a=f.items[c?f.items.length-1:0];while(a&&!a.focus)a=c?a.previous:a.next,a||(f=0)}}return a&&a.focus(),!1;case h?37:39:case 40:e=a;do e=e.next,!e&&i&&(e=a.toolbar.items[0]);while(e&&!e.focus);return e?e.focus():g(a,9),!1;case h?39:37:case 38:e=a;do e=e.previous,!e&&i&&(e=a.toolbar.items[a.toolbar.items.length-1]);while(e&&!e.focus);return e?e.focus():(c=1,g(a,2228233),c=0),!1;case 27:return b.focus(),!1;case 13:case 32:return a.execute(),!1}return!0};b.on("themeSpace",function(c){if(c.data.space==b.config.toolbarLocation){b.toolbox=new d;var f=e.getNextId(),h=['<div class="cke_toolbox" role="group" aria-labelledby="',f,'" onmousedown="return false;"'],i=b.config.toolbarStartupExpanded!==!1,j;h.push(i?">":' style="display:none">'),h.push('<span id="',f,'" class="cke_voice_label">',b.lang.toolbars,"</span>");var k=b.toolbox.toolbars,l=b.config.toolbar instanceof Array?b.config.toolbar:b.config["toolbar_"+b.config.toolbar];for(var n=0;n<l.length;n++){var p,r=0,s,t=l[n],u;if(!t)continue;j&&(h.push("</div>"),j=0);if(t==="/"){h.push('<div class="cke_break"></div>');continue}u=t.items||t;for(var v=0;v<u.length;v++){var w,x=u[v],y;w=b.ui.create(x);if(w){y=w.canGroup!==!1;if(!r){p=e.getNextId(),r={id:p,items:[]},s=t.name&&(b.lang.toolbarGroups[t.name]||t.name),h.push('<span id="',p,'" class="cke_toolbar"',s?' aria-labelledby="'+p+'_label"':"",' role="toolbar">'),s&&h.push('<span id="',p,'_label" class="cke_voice_label">',s,"</span>"),h.push('<span class="cke_toolbar_start"></span>');var z=k.push(r)-1;z>0&&(r.previous=k[z-1],r.previous.next=r)}y?j||(h.push('<span class="cke_toolgroup" role="presentation">'),j=1):j&&(h.push("</span>"),j=0);var A=w.render(b,h);z=r.items.push(A)-1,z>0&&(A.previous=r.items[z-1],A.previous.next=A),A.toolbar=r,A.onkey=g,A.onfocus=function(){b.toolbox.focusCommandExecuted||b.focus()}}}j&&(h.push("</span>"),j=0),r&&h.push('<span class="cke_toolbar_end"></span></span>')}h.push("</div>");if(b.config.toolbarCanCollapse){var B=e.addFunction(function(){b.execCommand("toolbarCollapse")});b.on("destroy",function(){e.removeFunction(B)});var C=e.getNextId();b.addCommand("toolbarCollapse",{readOnly:1,exec:function(b){var c=a.document.getById(C),d=c.getPrevious(),e=b.getThemeSpace("contents"),f=d.getParent(),g=parseInt(e.$.style.height,10),h=f.$.offsetHeight,i=!d.isVisible();i?(d.show(),c.removeClass("cke_toolbox_collapser_min"),c.setAttribute("title",b.lang.toolbarCollapse)):(d.hide(),c.addClass("cke_toolbox_collapser_min"),c.setAttribute("title",b.lang.toolbarExpand)),c.getFirst().setText(i?"▲":"◀");var j=f.$.offsetHeight-h;e.setStyle("height",g-j+"px"),b.fire("resize")},modes:{wysiwyg:1,source:1}}),h.push('<a title="'+(i?b.lang.toolbarCollapse:b.lang.toolbarExpand)+'" id="'+C+'" tabIndex="-1" class="cke_toolbox_collapser'),i||h.push(" cke_toolbox_collapser_min"),h.push('" onclick="CKEDITOR.tools.callFunction('+B+')">',"<span>&#9650;</span>","</a>")}c.data.html+=h.join("")}}),b.on("destroy",function(){var a,b=0,c,d,f;a=this.toolbox.toolbars;for(;b<a.length;b++){d=a[b].items;for(c=0;c<d.length;c++)f=d[c],f.clickFn&&e.removeFunction(f.clickFn),f.keyDownFn&&e.removeFunction(f.keyDownFn)}}),b.addCommand("toolbarFocus",f.toolbarFocus),b.ui.add("-",a.UI_SEPARATOR,{}),b.ui.addHandler(a.UI_SEPARATOR,{create:function(){return{render:function(a,b){return b.push('<span class="cke_separator" role="separator"></span>'),{}}}}})}})}(),a.UI_SEPARATOR="separator",i.toolbarLocation="top",i.toolbar_Basic=[["Bold","Italic","-","NumberedList","BulletedList","-","Link","Unlink","-","About"]],i.toolbar_Full=[{name:"document",items:["Source","-","Save","NewPage","DocProps","Preview","Print","-","Templates"]},{name:"clipboard",items:["Cut","Copy","Paste","PasteText","PasteFromWord","-","Undo","Redo"]},{name:"editing",items:["Find","Replace","-","SelectAll","-","SpellChecker","Scayt"]},{name:"forms",items:["Form","Checkbox","Radio","TextField","Textarea","Select","Button","ImageButton","HiddenField"]},"/",{name:"basicstyles",items:["Bold","Italic","Underline","Strike","Subscript","Superscript","-","RemoveFormat"]},{name:"paragraph",items:["NumberedList","BulletedList","-","Outdent","Indent","-","Blockquote","CreateDiv","-","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock","-","BidiLtr","BidiRtl"]},{name:"links",items:["Link","Unlink","Anchor"]},{name:"insert",items:["Image","Flash","Table","HorizontalRule","Smiley","SpecialChar","PageBreak","Iframe"]},"/",{name:"styles",items:["Styles","Format","Font","FontSize"]},{name:"colors",items:["TextColor","BGColor"]},{name:"tools",items:["Maximize","ShowBlocks","-","About"]}],i.toolbar="Full",i.toolbarCanCollapse=!0,function(){function f(a){this.editor=a,this.reset()}j.add("undo",{requires:["selection","wysiwygarea"],init:function(a){function e(a){b.enabled&&a.data.command.canUndo!==!1&&b.save()}var b=new f(a),c=a.addCommand("undo",{exec:function(){b.undo()&&(a.selectionChange(),this.fire("afterUndo"))},state:0,canUndo:!1}),d=a.addCommand("redo",{exec:function(){b.redo()&&(a.selectionChange(),this.fire("afterRedo"))},state:0,canUndo:!1});b.onChange=function(){c.setState(b.undoable()?2:0),d.setState(b.redoable()?2:0)},a.on("beforeCommandExec",e),a.on("afterCommandExec",e),a.on("saveSnapshot",function(a){b.save(a.data&&a.data.contentOnly)}),a.on("contentDom",function(){a.document.on("keydown",function(a){!a.data.$.ctrlKey&&!a.data.$.metaKey&&b.type(a)})}),a.on("beforeModeUnload",function(){a.mode=="wysiwyg"&&b.save(!0)}),a.on("mode",function(){b.enabled=a.readOnly?!1:a.mode=="wysiwyg",b.onChange()}),a.ui.addButton("Undo",{label:a.lang.undo,command:"undo"}),a.ui.addButton("Redo",{label:a.lang.redo,command:"redo"}),a.resetUndo=function(){b.reset(),a.fire("saveSnapshot")},a.on("updateSnapshot",function(){b.currentImage&&b.update()})}}),j.undo={};var a=j.undo.Image=function(a){this.editor=a,a.fire("beforeUndoImage");var b=a.getSnapshot(),d=b&&a.getSelection();c&&b&&(b=b.replace(/\s+data-cke-expando=".*?"/g,"")),this.contents=b,this.bookmarks=d&&d.createBookmarks2(!0),a.fire("afterUndoImage")},d=/\b(?:href|src|name)="[^"]*?"/gi;a.prototype={equals:function(a,f){var g=this.contents,h=a.contents;c&&(b.ie7Compat||b.ie6Compat)&&(g=g.replace(d,""),h=h.replace(d,""));if(g!=h)return!1;if(f)return!0;var i=this.bookmarks,j=a.bookmarks;if(i||j){if(!i||!j||i.length!=j.length)return!1;for(var k=0;k<i.length;k++){var l=i[k],m=j[k];if(l.startOffset!=m.startOffset||l.endOffset!=m.endOffset||!e.arrayCompare(l.start,m.start)||!e.arrayCompare(l.end,m.end))return!1}}return!0}};var g={8:1,46:1},h={16:1,17:1,18:1},i={37:1,38:1,39:1,40:1};f.prototype={type:function(b){var d=b&&b.data.getKey(),f=d in h,j=d in g,k=this.lastKeystroke in g,l=j&&d==this.lastKeystroke,n=d in i,o=this.lastKeystroke in i,s=!j&&!n,t=j&&!l,u=!f&&!this.typing||s&&(k||o);if(u||t){var v=new a(this.editor);e.setTimeout(function(){var a=this,b=a.editor.getSnapshot();c&&(b=b.replace(/\s+data-cke-expando=".*?"/g,"")),v.contents!=b&&(a.typing=!0,a.save(!1,v,!1)||a.snapshots.splice(a.index+1,a.snapshots.length-a.index-1),a.hasUndo=!0,a.hasRedo=!1,a.typesCount=1,a.modifiersCount=1,a.onChange())},0,this)}this.lastKeystroke=d,j?(this.typesCount=0,this.modifiersCount++,this.modifiersCount>25&&(this.save(!1,null,!1),this.modifiersCount=1)):n||(this.modifiersCount=0,this.typesCount++,this.typesCount>25&&(this.save(!1,null,!1),this.typesCount=1))},reset:function(){var a=this;a.lastKeystroke=0,a.snapshots=[],a.index=-1,a.limit=a.editor.config.undoStackSize||20,a.currentImage=null,a.hasUndo=!1,a.hasRedo=!1,a.resetType()},resetType:function(){var a=this;a.typing=!1,delete a.lastKeystroke,a.typesCount=0,a.modifiersCount=0},fireChange:function(){var a=this;a.hasUndo=!!a.getNextImage(!0),a.hasRedo=!!a.getNextImage(!1),a.resetType(),a.onChange()},save:function(b,c,d){var e=this,f=e.snapshots;return c||(c=new a(e.editor)),c.contents===!1?!1:e.currentImage&&c.equals(e.currentImage,b)?!1:(f.splice(e.index+1,f.length-e.index-1),f.length==e.limit&&f.shift(),e.index=f.push(c)-1,e.currentImage=c,d!==!1&&e.fireChange(),!0)},restoreImage:function(a){var b=this;b.editor.loadSnapshot(a.contents);if(a.bookmarks)b.editor.getSelection().selectBookmarks(a.bookmarks);else if(c){var d=b.editor.document.getBody().$.createTextRange();d.collapse(!0),d.select()}b.index=a.index,b.update(),b.fireChange()},getNextImage:function(a){var b=this,c=b.snapshots,d=b.currentImage,e,f;if(d)if(a)for(f=b.index-1;f>=0;f--){e=c[f];if(!d.equals(e,!0))return e.index=f,e}else for(f=b.index+1;f<c.length;f++){e=c[f];if(!d.equals(e,!0))return e.index=f,e}return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){var a=this;if(a.undoable()){a.save(!0);var b=a.getNextImage(!0);if(b)return a.restoreImage(b),!0}return!1},redo:function(){var a=this;if(a.redoable()){a.save(!0);if(a.redoable()){var b=a.getNextImage(!1);if(b)return a.restoreImage(b),!0}}return!1},update:function(){var b=this;b.snapshots.splice(b.index,1,b.currentImage=new a(b.editor))}}}(),function(){function l(a){return a.isBlockBoundary()&&f.$empty[a.getName()]}function m(a){return function(b){this.mode=="wysiwyg"&&(this.focus(),this.fire("saveSnapshot"),a.call(this,b.data),e.setTimeout(function(){this.fire("saveSnapshot")},0,this))}}function n(e){var f=this;f.dataProcessor&&(e=f.dataProcessor.toHtml(e));if(!e)return;var g=f.getSelection(),h=g.getRanges()[0];if(h.checkReadOnly())return;if(b.opera){var i=new d.elementPath(h.startContainer);if(i.block){var j=a.htmlParser.fragment.fromHtml(e,!1).children;for(var k=0,l=j.length;k<l;k++)if(j[k]._.isBlockLike){h.splitBlock(f.enterMode==3?"div":"p"),h.insertNode(h.document.createText("")),h.select();break}}}if(c){var m=g.isLocked;m&&g.unlock();var n=g.getNative();if(n.type=="Control")n.clear();else if(g.getType()==2){h=g.getRanges()[0];var o=h&&h.endContainer;o&&o.type==1&&o.getAttribute("contenteditable")=="false"&&h.checkBoundaryOfElement(o,2)&&(h.setEndAfter(h.endContainer),h.deleteContents())}n.createRange().pasteHTML(e),m&&f.getSelection().lock()}else f.document.$.execCommand("inserthtml",!1,e);b.webkit&&(g=f.getSelection(),g.scrollIntoView())}function o(a){var g=this.getSelection(),h=g.getStartElement().hasAscendant("pre",!0)?2:this.config.enterMode,i=h==2,j=e.htmlEncode(a.replace(/\r\n|\r/g,"\n"));j=j.replace(/^[ \t]+|[ \t]+$/g,function(a,b,c){return a.length==1?"&nbsp;":b?" "+e.repeat("&nbsp;",a.length-1):e.repeat("&nbsp;",a.length-1)+" "}),j=j.replace(/[ \t]{2,}/g,function(a){return e.repeat("&nbsp;",a.length-1)+" "});var k=h==1?"p":"div";i||(j=j.replace(/(\n{2})([\s\S]*?)(?:$|\1)/g,function(a,b,c){return"<"+k+">"+c+"</"+k+">"})),j=j.replace(/\n/g,"<br>"),!i&&!c&&(j=j.replace(new RegExp("<br>(?=</"+k+">)"),function(a){return e.repeat(a,2)}));if(b.gecko||b.webkit){var l=new d.elementPath(g.getStartElement()),m=[];for(var o=0;o<l.elements.length;o++){var p=l.elements[o].getName();if(p in f.$inline)m.unshift(l.elements[o].getOuterHtml().match(/^<.*?>/));else if(p in f.$block)break}j=m.join("")+j}n.call(this,j)}function p(a){var b=this.getSelection(),c=b.getRanges(),d=a.getName(),e=f.$block[d],g=b.isLocked;g&&b.unlock();var h,i,j,l;for(var m=c.length-1;m>=0;m--){h=c[m];if(!h.checkReadOnly()){h.deleteContents(1),i=!m&&a||a.clone(1);var n,o;if(e)while((n=h.getCommonAncestor(0,1))&&(o=f[n.getName()])&&(!o||!o[d]))n.getName()in f.span?h.splitElement(n):h.checkStartOfBlock()&&h.checkEndOfBlock()?(h.setStartBefore(n),h.collapse(!0),n.remove()):h.splitBlock();h.insertNode(i),j||(j=i)}}if(j){h.moveToPosition(j,4);if(e){var p=j.getNext(k),q=p&&p.type==1&&p.getName();q&&f.$block[q]&&f[q]["#"]&&h.moveToElementEditStart(p)}}b.selectRanges([h]),g&&this.getSelection().lock()}function q(a){a.checkDirty()||setTimeout(function(){a.resetDirty()},0)}function t(a){return r(a)&&s(a)}function u(a){return a.type==3&&e.trim(a.getText()).match(/^(?:&nbsp;|\xa0)$/)}function v(a){a.isLocked&&(a.unlock(),setTimeout(function(){a.lock()},0))}function w(a){return a.getOuterHtml().match(i)}function x(a){var b=a.window,c=a.document,e=a.document.getBody(),f=e.getFirst(),g=e.getChildren().count();if(!g||g==1&&f.type==1&&f.hasAttribute("_moz_editor_bogus_node")){q(a);var h=a.element.getDocument(),i=h.getDocumentElement(),j=i.$.scrollTop,k=i.$.scrollLeft,l=c.$.createEvent("KeyEvents");l.initKeyEvent("keypress",!0,!0,b.$,!1,!1,!1,!1,0,32),c.$.dispatchEvent(l),(j!=i.$.scrollTop||k!=i.$.scrollLeft)&&h.getWindow().$.scrollTo(k,j),g&&e.getFirst().remove(),c.getBody().appendBogus();var m=new d.range(c);m.setStartAt(e,1),m.select()}}function y(a){var e=a.editor,f=a.data.path,g=f.blockLimit,h=a.data.selection,i=h.getRanges()[0],j=e.document.getBody(),k=e.config.enterMode;if(b.gecko){x(e);var m=f.block||f.blockLimit,n=m&&m.getLast(t);m&&m.isBlockBoundary()&&(!n||n.type!=1||!n.isBlockBoundary())&&!m.is("pre")&&!m.getBogus()&&m.appendBogus()}if(e.config.autoParagraph!==!1&&k!=2&&i.collapsed&&g.getName()=="body"&&!f.block){var o=i.fixBlock(!0,e.config.enterMode==3?"div":"p");if(c){var p=o.getFirst(t);p&&u(p)&&p.remove()}if(w(o)){var q=o.getNext(r);q&&q.type==1&&!l(q)?(i.moveToElementEditStart(q),o.remove()):(q=o.getPrevious(r),q&&q.type==1&&!l(q)&&(i.moveToElementEditEnd(q),o.remove()))}i.select(),a.cancel()}var s=new d.range(e.document);s.moveToElementEditEnd(e.document.getBody());var v=new d.elementPath(s.startContainer);if(!v.blockLimit.is("body")){var y;k!=2?y=j.append(e.document.createElement(k==1?"p":"div")):y=j,c||y.appendBogus()}}var i=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,k=d.walker.whitespaces(!0),r=d.walker.whitespaces(!0),s=d.walker.bookmark(!1,!0);r=d.walker.whitespaces(!0),j.add("wysiwygarea",{requires:["editingblock"],init:function(j){function u(b){if(j.readOnly)return;e.tryThese(function(){j.document.$.designMode="on",setTimeout(function(){j.document.$.designMode="off",a.currentInstance==j&&j.document.getBody().focus()},50)},function(){j.document.$.designMode="off";var a=j.document.getBody();a.setAttribute("contentEditable",!1),a.setAttribute("contentEditable",!0),!b&&u(1)})}var k=j.config.enterMode!=2&&j.config.autoParagraph!==!1?j.config.enterMode==3?"div":"p":!1,l=j.lang.editorTitle.replace("%1",j.name),q;j.on("editingBlockReady",function(){function L(a){if(!w)return;w=0,j.fire("ariaWidget",r);var f=a.document,h=f.body,k=f.getElementById("cke_actscrpt");k&&k.parentNode.removeChild(k),h.spellcheck=!j.config.disableNativeSpellChecker;var l=!j.readOnly;c?(h.hideFocus=!0,h.disabled=!0,h.contentEditable=l,h.removeAttribute("disabled")):setTimeout(function(){b.gecko&&b.version>=10900||b.opera?f.$.body.contentEditable=l:b.webkit?f.$.body.parentNode.contentEditable=l:f.$.designMode=l?"off":"on"},0),l&&b.gecko&&e.setTimeout(x,0,null,j),a=j.window=new d.window(a),f=j.document=new g(f),l&&f.on("dblclick",function(a){var b=a.data.getTarget(),c={element:b,dialog:""};j.fire("doubleclick",c),c.dialog&&j.openDialog(c.dialog)}),c&&f.on("click",function(a){var b=a.data.getTarget();if(b.is("input")){var c=b.getAttribute("type");(c=="submit"||c=="reset")&&a.data.preventDefault()}}),!c&&!b.opera&&f.on("mousedown",function(a){var b=a.data.getTarget();b.is("img","hr","input","textarea","select")&&j.getSelection().selectElement(b)}),b.gecko&&f.on("mouseup",function(a){if(a.data.$.button==2){var b=a.data.getTarget();if(!b.getOuterHtml().replace(i,"")){var c=new d.range(f);c.moveToElementEditStart(b),c.select(!0)}}}),f.on("click",function(a){a=a.data,a.getTarget().is("a")&&a.$.button!=2&&a.preventDefault()}),b.webkit&&(f.on("mousedown",function(){o=1}),f.on("click",function(a){a.data.getTarget().is("input","select")&&a.data.preventDefault()}),f.on("mouseup",function(a){a.data.getTarget().is("input","textarea")&&a.data.preventDefault()}));if(l&&c&&f.$.compatMode=="CSS1Compat"||b.gecko||b.opera){var m=f.getDocumentElement();m.on("mousedown",function(a){a.data.getTarget().equals(m)&&(b.gecko&&b.version>=10900&&u(),v.focus())})}var n=c?r:a;n.on("blur",function(){j.focusManager.blur()});var o;n.on("focus",function(){var a=j.document;l&&b.gecko&&b.version>=10900?u():b.opera?a.getBody().focus():b.webkit&&(o||(j.document.getDocumentElement().focus(),o=1)),j.focusManager.focus()});var p=j.keystrokeHandler;p.blockedKeystrokes[8]=!l,p.attach(f),f.getDocumentElement().addClass(f.$.compatMode),l&&f.on("keydown",function(a){var b=a.data.getKeystroke();if(b in{8:1,46:1}){var c=j.getSelection(),d=c.getSelectedElement(),e=c.getRanges()[0];if(d){j.fire("saveSnapshot"),e.moveToPosition(d,3),d.remove(),e.select(),j.fire("saveSnapshot"),a.data.preventDefault();return}}});if(c&&f.$.compatMode=="CSS1Compat"){var q={33:1,34:1};f.on("keydown",function(a){a.data.getKeystroke()in q&&setTimeout(function(){j.getSelection().scrollIntoView()},0)})}c&&j.config.enterMode!=1&&f.on("selectionchange",function(){var a=f.getBody(),b=j.getSelection().getRanges()[0];a.getHtml().match(/^<p>&nbsp;<\/p>$/i)&&b.startContainer.equals(a)&&setTimeout(function(){b=j.getSelection().getRanges()[0],b.startContainer.equals("body")||(a.getFirst().remove(1),b.moveToElementEditEnd(a),b.select(1))},0)}),j.contextMenu&&j.contextMenu.addTarget(f,j.config.browserContextMenuOnCtrl!==!1),setTimeout(function(){j.fire("contentDom"),z&&(j.mode="wysiwyg",j.fire("mode",{previousMode:j._.previousMode}),z=!1),s=!1,t&&(j.focus(),t=!1),setTimeout(function(){j.fire("dataReady")},0);try{j.document.$.execCommand("enableInlineTableEditing",!1,!j.config.disableNativeTableHandles)}catch(a){}if(j.config.disableObjectResizing)try{j.document.$.execCommand("enableObjectResizing",!1,!1)}catch(b){j.document.getBody().on(c?"resizestart":"resize",function(a){a.data.preventDefault()})}c&&setTimeout(function(){if(j.document){var a=j.document.$.body;a.runtimeStyle.marginBottom="0px",a.runtimeStyle.marginBottom=""}},1e3)},0)}var f,r,s,t,w,z,G=b.isCustomDomain(),H=function(d){r&&r.remove();var e="document.open();"+(G?'document.domain="'+document.domain+'";':"")+"document.close();";e=b.air?"javascript:void(0)":c?"javascript:void(function(){"+encodeURIComponent(e)+"}())":"",r=h.createFromHtml('<iframe style="width:100%;height:100%" frameBorder="0" title="'+l+'"'+' src="'+e+'"'+' tabIndex="'+(b.webkit?-1:j.tabIndex)+'"'+' allowTransparency="true"'+"></iframe>"),document.location.protocol=="chrome:"&&(a.event.useCapture=!0),r.on("load",function(a){w=1,a.removeListener();var c=r.getFrameDocument();c.write(d),b.air&&L(c.getWindow().$)}),document.location.protocol=="chrome:"&&(a.event.useCapture=!1),f.append(r)};q=e.addFunction(L);var I='<script id="cke_actscrpt" type="text/javascript" data-cke-temp="1">'+(G?'document.domain="'+document.domain+'";':"")+"window.parent.CKEDITOR.tools.callFunction( "+q+", window );"+"</script>";j.addMode("wysiwyg",{load:function(a,d,e){f=a,c&&b.quirks&&a.setStyle("position","relative"),j.mayBeDirty=!0,z=!0,e?this.loadSnapshotData(d):this.loadData(d)},loadData:function(a){s=!0,j._.dataStore={id:1};var c=j.config,d=c.fullPage,f=c.docType,g='<style type="text/css" data-cke-temp="1">'+j._.styles.join("\n")+"</style>";!d&&(g=e.buildStyleHtml(j.config.contentsCss)+g);var h=c.baseHref?'<base href="'+c.baseHref+'" data-cke-temp="1" />':"";d&&(a=a.replace(/<!DOCTYPE[^>]*>/i,function(a){return j.docType=f=a,""}).replace(/<\?xml\s[^\?]*\?>/i,function(a){return j.xmlDeclaration=a,""})),j.dataProcessor&&(a=j.dataProcessor.toHtml(a,k)),d?(/<body[\s|>]/.test(a)||(a="<body>"+a),/<html[\s|>]/.test(a)||(a="<html>"+a+"</html>"),/<head[\s|>]/.test(a)?/<title[\s|>]/.test(a)||(a=a.replace(/<head[^>]*>/,"$&<title></title>")):a=a.replace(/<html[^>]*>/,"$&<head><title></title></head>"
),h&&(a=a.replace(/<head>/,"$&"+h)),a=a.replace(/<\/head\s*>/,g+"$&"),a=f+a):a=c.docType+'<html dir="'+c.contentsLangDirection+'"'+' lang="'+(c.contentsLanguage||j.langCode)+'">'+"<head>"+"<title>"+l+"</title>"+h+g+"</head>"+"<body"+(c.bodyId?' id="'+c.bodyId+'"':"")+(c.bodyClass?' class="'+c.bodyClass+'"':"")+">"+a+"</html>",b.gecko&&(a=a.replace(/<br \/>(?=\s*<\/(:?html|body)>)/,'$&<br type="_moz" />')),a+=I,this.onDispose(),H(a)},getData:function(){var a=j.config,c=a.fullPage,d=c&&j.docType,e=c&&j.xmlDeclaration,f=r.getFrameDocument(),g=c?f.getDocumentElement().getOuterHtml():f.getBody().getHtml();return b.gecko&&(g=g.replace(/<br>(?=\s*(:?$|<\/body>))/,"")),j.dataProcessor&&(g=j.dataProcessor.toDataFormat(g,k)),a.ignoreEmptyParagraph&&(g=g.replace(i,function(a,b){return b})),e&&(g=e+"\n"+g),d&&(g=d+"\n"+g),g},getSnapshotData:function(){return r.getFrameDocument().getBody().getHtml()},loadSnapshotData:function(a){r.getFrameDocument().getBody().setHtml(a)},onDispose:function(){if(!j.document)return;j.document.getDocumentElement().clearCustomData(),j.document.getBody().clearCustomData(),j.window.clearCustomData(),j.document.clearCustomData(),r.clearCustomData(),r.remove()},unload:function(a){this.onDispose(),j.window=j.document=r=f=t=null,j.fire("contentDomUnload")},focus:function(){var a=j.window;s?t=!0:a&&(b.air?setTimeout(function(){a.focus()},0):a.focus(),j.selectionChange())}}),j.on("insertHtml",m(n),null,null,20),j.on("insertElement",m(p),null,null,20),j.on("insertText",m(o),null,null,20),j.on("selectionChange",function(a){if(j.readOnly)return;var b=j.getSelection();if(b&&!b.isLocked){var c=j.checkDirty();j.fire("saveSnapshot",{contentOnly:1}),y.call(this,a),j.fire("updateSnapshot"),!c&&j.resetDirty()}},null,null,1)});var r;j.on("contentDom",function(){var a=j.document.getElementsByTag("title").getItem(0);a.data("cke-title",j.document.$.title),j.document.$.title=l}),j.on("readOnly",function(){if(j.mode=="wysiwyg"){var a=j.getMode();a.loadData(a.getData())}});if(a.document.$.documentMode>=8){j.addCss("html.CSS1Compat [contenteditable=false]{ min-height:0 !important;}");var s=[];for(var t in f.$removeEmpty)s.push("html.CSS1Compat "+t+"[contenteditable=false]");j.addCss(s.join(",")+"{ display:inline-block;}")}else b.gecko&&(j.addCss("html { height: 100% !important; }"),j.addCss("img:-moz-broken { -moz-force-broken-image-icon : 1;\twidth : 24px; height : 24px; }"));j.addCss("html {\t_overflow-y: scroll; cursor: text;\t*cursor:auto;}"),j.addCss("img, input, textarea { cursor: default;}");if(b.gecko||c||b.opera){var v;j.on("uiReady",function(){v=j.container.append(h.createFromHtml('<span tabindex="-1" style="position:absolute;" role="presentation"></span>')),v.on("focus",function(){j.focus()}),j.focusGrabber=v}),j.on("destroy",function(){e.removeFunction(q),v.clearCustomData(),delete j.focusGrabber})}j.on("insertElement",function(a){var b=a.data;if(b.type==1&&(b.is("input")||b.is("textarea"))){var c=b.getAttribute("contenteditable")=="false";c||(b.data("cke-editable",b.hasAttribute("contenteditable")?"true":"1"),b.setAttribute("contenteditable",!1))}})}}),b.gecko&&function(){var a=document.body;if(!a)window.addEventListener("load",arguments.callee,!1);else{var b=a.getAttribute("onpageshow");a.setAttribute("onpageshow",(b?b+";":"")+"event.persisted && (function(){"+"var allInstances = CKEDITOR.instances, editor, doc;"+"for ( var i in allInstances )"+"{"+"\teditor = allInstances[ i ];"+"\tdoc = editor.document;"+"\tif ( doc )"+"\t{"+'\t\tdoc.$.designMode = "off";'+'\t\tdoc.$.designMode = "on";'+"\t}"+"}"+"})();")}}()}(),i.disableObjectResizing=!1,i.disableNativeTableHandles=!0,i.disableNativeSpellChecker=!0,i.ignoreEmptyParagraph=!0,j.add("wsc",{requires:["dialog"],init:function(c){var d="checkspell",e=c.addCommand(d,new a.dialogCommand(d));e.modes={wysiwyg:!b.opera&&!b.air&&document.domain==window.location.hostname},c.ui.addButton("SpellChecker",{label:c.lang.spellCheck.toolbar,command:d}),a.dialog.add(d,this.path+"dialogs/wsc.js")}}),i.wsc_customerId=i.wsc_customerId||"1:ua3xw1-2XyGJ3-GWruD3-6OFNT1-oXcuB1-nR6Bp4-hgQHc-EcYng3-sdRXG3-NOfFk",i.wsc_customLoaderScript=i.wsc_customLoaderScript||null,a.DIALOG_RESIZE_NONE=0,a.DIALOG_RESIZE_WIDTH=1,a.DIALOG_RESIZE_HEIGHT=2,a.DIALOG_RESIZE_BOTH=3,function(){function j(a){return!!this._.tabs[a][0].$.offsetHeight}function l(){var a=this,b=a._.currentTabId,c=a._.tabIdList.length,d=e.indexOf(a._.tabIdList,b)+c;for(var f=d-1;f>d-c;f--)if(j.call(a,a._.tabIdList[f%c]))return a._.tabIdList[f%c];return null}function m(){var a=this,b=a._.currentTabId,c=a._.tabIdList.length,d=e.indexOf(a._.tabIdList,b);for(var f=d+1;f<d+c;f++)if(j.call(a,a._.tabIdList[f%c]))return a._.tabIdList[f%c];return null}function n(a,b){var c=a.$.getElementsByTagName("input");for(var d=0,e=c.length;d<e;d++){var f=new h(c[d]);f.getAttribute("type").toLowerCase()=="text"&&(b?(f.setAttribute("value",f.getCustomData("fake_value")||""),f.removeCustomData("fake_value")):(f.setCustomData("fake_value",f.getAttribute("value")),f.setAttribute("value","")))}}function o(a,b){var c=this,d=c.getInputElement();d&&(a?d.removeAttribute("aria-invalid"):d.setAttribute("aria-invalid",!0)),a||(c.select?c.select():c.focus()),b&&alert(b),c.fire("validated",{valid:a,msg:b})}function p(){var a=this.getInputElement();a&&a.removeAttribute("aria-invalid")}function q(a,b,c){this.element=b,this.focusIndex=c,this.tabIndex=0,this.isFocusable=function(){return!b.getAttribute("disabled")&&b.isVisible()},this.focus=function(){a._.currentFocusIndex=this.focusIndex,this.element.focus()},b.on("keydown",function(a){a.data.getKeystroke()in{32:1,13:1}&&this.fire("click")}),b.on("focus",function(){this.fire("mouseover")}),b.on("blur",function(){this.fire("mouseout")})}function w(a,b){this._={dialog:a},e.extend(this,b)}function x(c){function j(b){var f=c.getSize(),j=a.document.getWindow().getViewPaneSize(),k=b.data.$.screenX,l=b.data.$.screenY,m=k-d.x,n=l-d.y,o,p;d={x:k,y:l},e.x+=m,e.y+=n,e.x+i[3]<h?o=-i[3]:e.x-i[1]>j.width-f.width-h?o=j.width-f.width+(g.lang.dir=="rtl"?0:i[1]):o=e.x,e.y+i[0]<h?p=-i[0]:e.y-i[2]>j.height-f.height-h?p=j.height-f.height+i[2]:p=e.y,c.move(o,p,1),b.data.preventDefault()}function k(c){a.document.removeListener("mousemove",j),a.document.removeListener("mouseup",k);if(b.ie6Compat){var d=B.getChild(0).getFrameDocument();d.removeListener("mousemove",j),d.removeListener("mouseup",k)}}var d=null,e=null,f=c.getElement().getFirst(),g=c.getParentEditor(),h=g.config.dialog_magnetDistance,i=g.skin.margins||[0,0,0,0];typeof h=="undefined"&&(h=20),c.parts.title.on("mousedown",function(f){d={x:f.data.$.screenX,y:f.data.$.screenY},a.document.on("mousemove",j),a.document.on("mouseup",k),e=c.getPosition();if(b.ie6Compat){var g=B.getChild(0).getFrameDocument();g.on("mousemove",j),g.on("mouseup",k)}f.data.preventDefault()},c)}function y(d){function q(a){var b=i.lang.dir=="rtl",c=(a.data.$.screenX-m.x)*(b?-1:1),e=a.data.$.screenY-m.y,h=n.width,o=n.height,p=h+c*(d._.moved?1:2),q=o+e*(d._.moved?1:2),r=d._.element.getFirst(),s=b&&r.getComputedStyle("right"),t=d.getPosition();t.y+q>l.height&&(q=l.height-t.y),(b?s:t.x)+p>l.width&&(p=l.width-(b?s:t.x));if(g==1||g==3)h=Math.max(f.minWidth||0,p-j);if(g==2||g==3)o=Math.max(f.minHeight||0,q-k);d.resize(h,o),d._.moved||d.layout(),a.data.preventDefault()}function r(){a.document.removeListener("mouseup",r),a.document.removeListener("mousemove",q),o&&(o.remove(),o=null);if(b.ie6Compat){var c=B.getChild(0).getFrameDocument();c.removeListener("mouseup",r),c.removeListener("mousemove",q)}}var f=d.definition,g=f.resizable;if(g==0)return;var i=d.getParentEditor(),j,k,l,m,n,o,p=e.addFunction(function(e){n=d.getSize();var f=d.parts.contents,g=f.$.getElementsByTagName("iframe").length;g&&(o=h.createFromHtml('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>'),f.append(o)),k=n.height-d.parts.contents.getSize("height",!(b.gecko||b.opera||c&&b.quirks)),j=n.width-d.parts.contents.getSize("width",1),m={x:e.screenX,y:e.screenY},l=a.document.getWindow().getViewPaneSize(),a.document.on("mousemove",q),a.document.on("mouseup",r);if(b.ie6Compat){var i=B.getChild(0).getFrameDocument();i.on("mousemove",q),i.on("mouseup",r)}e.preventDefault&&e.preventDefault()});d.on("load",function(){var a="";g==1?a=" cke_resizer_horizontal":g==2&&(a=" cke_resizer_vertical");var b=h.createFromHtml('<div class="cke_resizer'+a+" cke_resizer_"+i.lang.dir+'"'+' title="'+e.htmlEncode(i.lang.resize)+'"'+' onmousedown="CKEDITOR.tools.callFunction('+p+', event )"></div>');d.parts.footer.append(b,1)}),i.on("destroy",function(){e.removeFunction(p)})}function C(a){a.data.preventDefault(1)}function D(c){var d=a.document.getWindow(),f=c.config,g=f.dialog_backgroundCoverColor||"white",i=f.dialog_backgroundCoverOpacity,j=f.baseFloatZIndex,k=e.genKey(g,i,j),l=A[k];if(!l){var m=['<div tabIndex="-1" style="position: ',b.ie6Compat?"absolute":"fixed","; z-index: ",j,"; top: 0px; left: 0px; ",b.ie6Compat?"":"background-color: "+g,'" class="cke_dialog_background_cover">'];if(b.ie6Compat){var n=b.isCustomDomain(),o="<html><body style=\\'background-color:"+g+";\\'></body></html>";m.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'),m.push("void((function(){document.open();"+(n?"document.domain='"+document.domain+"';":"")+"document.write( '"+o+"' );"+"document.close();"+"})())"),m.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')}m.push("</div>"),l=h.createFromHtml(m.join("")),l.setOpacity(i!=undefined?i:.5),l.on("keydown",C),l.on("keypress",C),l.on("keyup",C),l.appendTo(a.document.getBody()),A[k]=l}else l.show();B=l;var p=function(){var a=d.getViewPaneSize();l.setStyles({width:a.width+"px",height:a.height+"px"})},q=function(){var b=d.getScrollPosition(),c=a.dialog._.currentTop;l.setStyles({left:b.x+"px",top:b.y+"px"});if(c)do{var e=c.getPosition();c.move(e.x,e.y)}while(c=c._.parentDialog)};z=p,d.on("resize",p),p(),(!b.mac||!b.webkit)&&l.focus();if(b.ie6Compat){var r=function(){q(),arguments.callee.prevScrollHandler.apply(this,arguments)};d.$.setTimeout(function(){r.prevScrollHandler=window.onscroll||function(){},window.onscroll=r},0),q()}}function E(){if(!B)return;var c=a.document.getWindow();B.hide(),c.removeListener("resize",z),b.ie6Compat&&c.$.setTimeout(function(){var a=window.onscroll&&window.onscroll.prevScrollHandler;window.onscroll=a||null},0),z=null}function F(){for(var a in A)A[a].remove();A={}}var f=e.cssLength;a.dialog=function(f,h){function E(){var a=C._.focusList;a.sort(function(a,b){return a.tabIndex!=b.tabIndex?b.tabIndex-a.tabIndex:a.focusIndex-b.focusIndex});var b=a.length;for(var c=0;c<b;c++)a[c].focusIndex=c}function F(a){var b=C._.focusList,c=a?1:-1;if(b.length<1)return;var d=C._.currentFocusIndex;try{b[d].getInputElement().$.blur()}catch(e){}var f=(d+c+b.length)%b.length,g=f;while(!b[g].isFocusable()){g=(g+c+b.length)%b.length;if(g==f)break}b[g].focus(),b[g].type=="text"&&b[g].select()}function H(b){var c=this;if(C!=a.dialog._.currentTop)return;var d=b.data.getKeystroke(),e=f.lang.dir=="rtl";G=0;if(d==9||d==2228224+9){var g=d==2228224+9;if(C._.tabBarMode){var h=g?l.call(C):m.call(C);C.selectPage(h),C._.tabs[h][0].focus()}else F(!g);G=1}else d==4456448+121&&!C._.tabBarMode&&C.getPageCount()>1?(C._.tabBarMode=!0,C._.tabs[C._.currentTabId][0].focus(),G=1):d!=37&&d!=39||!C._.tabBarMode?(d==13||d==32)&&C._.tabBarMode&&(c.selectPage(c._.currentTabId),c._.tabBarMode=!1,c._.currentFocusIndex=-1,F(!0),G=1):(h=d==(e?39:37)?l.call(C):m.call(C),C.selectPage(h),C._.tabs[h][0].focus(),G=1);G&&(b.stop(),b.data.preventDefault())}function I(a){G&&a.data.preventDefault()}var j=a.dialog._.dialogDefinitions[h],k=e.clone(r),n=f.config.dialog_buttonsOrder||"OS",q=f.lang.dir;(n=="OS"&&b.mac||n=="rtl"&&q=="ltr"||n=="ltr"&&q=="rtl")&&k.buttons.reverse(),j=e.extend(j(f),k),j=e.clone(j),j=new v(this,j);var s=a.document,t=f.theme.buildDialog(f);this._={editor:f,element:t.element,name:h,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1},this.parts=t.parts,e.setTimeout(function(){f.fire("ariaWidget",this.parts.contents)},0,this);var u={position:b.ie6Compat?"absolute":"fixed",top:0,visibility:"hidden"};u[q=="rtl"?"right":"left"]=0,this.parts.dialog.setStyles(u),a.event.call(this),this.definition=j=a.fire("dialogDefinition",{name:h,definition:j},f).definition;var w={};if(!("removeDialogTabs"in f._)&&f.config.removeDialogTabs){var z=f.config.removeDialogTabs.split(";");for(i=0;i<z.length;i++){var A=z[i].split(":");if(A.length==2){var B=A[0];w[B]||(w[B]=[]),w[B].push(A[1])}}f._.removeDialogTabs=w}if(f._.removeDialogTabs&&(w=f._.removeDialogTabs[h]))for(i=0;i<w.length;i++)j.removeContents(w[i]);j.onLoad&&this.on("load",j.onLoad),j.onShow&&this.on("show",j.onShow),j.onHide&&this.on("hide",j.onHide),j.onOk&&this.on("ok",function(a){f.fire("saveSnapshot"),setTimeout(function(){f.fire("saveSnapshot")},0),j.onOk.call(this,a)===!1&&(a.data.hide=!1)}),j.onCancel&&this.on("cancel",function(a){j.onCancel.call(this,a)===!1&&(a.data.hide=!1)});var C=this,D=function(a){var b=C._.contents,c=!1;for(var d in b)for(var e in b[d]){c=a.call(this,b[d][e]);if(c)return}};this.on("ok",function(a){D(function(b){if(b.validate){var c=b.validate(this),d=typeof c=="string"||c===!1;return d&&(a.data.hide=!1,a.stop()),o.call(b,!d,typeof c=="string"?c:undefined),d}})},this,null,0),this.on("cancel",function(a){D(function(b){if(b.isChanged())return confirm(f.lang.common.confirmCancel)||(a.data.hide=!1),!0})},this,null,0),this.parts.close.on("click",function(a){this.fire("cancel",{hide:!0}).hide!==!1&&this.hide(),a.data.preventDefault()},this),this.changeFocus=F;var G,J=this._.element;this.on("show",function(){J.on("keydown",H,this,null,0),(b.opera||b.gecko&&b.mac)&&J.on("keypress",I,this)}),this.on("hide",function(){J.removeListener("keydown",H),(b.opera||b.gecko&&b.mac)&&J.removeListener("keypress",I),D(function(a){p.apply(a)})}),this.on("iframeAdded",function(a){var b=new g(a.data.iframe.$.contentWindow.document);b.on("keydown",H,this,null,0)}),this.on("show",function(){var a=this;E();if(f.config.dialog_startupFocusTab&&C._.pageCount>1)C._.tabBarMode=!0,C._.tabs[C._.currentTabId][0].focus();else if(!a._.hasFocus){a._.currentFocusIndex=-1;if(j.onFocus){var b=j.onFocus.call(a);b&&b.focus()}else F(!0);if(a._.editor.mode=="wysiwyg"&&c){var d=f.document.$.selection,e=d.createRange();if(e)if(e.parentElement&&e.parentElement().ownerDocument==f.document.$||e.item&&e.item(0).ownerDocument==f.document.$){var g=document.body.createTextRange();g.moveToElementText(a.getElement().getFirst().$),g.collapse(!0),g.select()}}}},this,null,4294967295),b.ie6Compat&&this.on("load",function(a){var b=this.getElement(),c=b.getFirst();c.remove(),c.appendTo(b)},this),x(this),y(this),(new d.text(j.title,a.document)).appendTo(this.parts.title);for(var K=0;K<j.contents.length;K++){var L=j.contents[K];L&&this.addPage(L)}this.parts.tabs.on("click",function(a){var b=this,c=a.data.getTarget();if(c.hasClass("cke_dialog_tab")){var d=c.$.id;b.selectPage(d.substring(4,d.lastIndexOf("_"))),b._.tabBarMode&&(b._.tabBarMode=!1,b._.currentFocusIndex=-1,F(!0)),a.data.preventDefault()}},this);var M=[],N=a.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:j.buttons},M).getChild();this.parts.footer.setHtml(M.join(""));for(K=0;K<N.length;K++)this._.buttons[N[K].id]=N[K]},a.dialog.prototype={destroy:function(){this.hide(),this._.element.remove()},resize:function(){return function(b,c){var d=this;if(d._.contentSize&&d._.contentSize.width==b&&d._.contentSize.height==c)return;a.dialog.fire("resize",{dialog:d,skin:d._.editor.skinName,width:b,height:c},d._.editor),d.fire("resize",{skin:d._.editor.skinName,width:b,height:c},d._.editor),d._.editor.lang.dir=="rtl"&&d._.position&&(d._.position.x=a.document.getWindow().getViewPaneSize().width-d._.contentSize.width-parseInt(d._.element.getFirst().getStyle("right"),10)),d._.contentSize={width:b,height:c}}}(),getSize:function(){var a=this._.element.getFirst();return{width:a.$.offsetWidth||0,height:a.$.offsetHeight||0}},move:function(){var b;return function(c,d,e){var f=this,g=f._.element.getFirst(),h=f._.editor.lang.dir=="rtl";b===undefined&&(b=g.getComputedStyle("position")=="fixed");if(b&&f._.position&&f._.position.x==c&&f._.position.y==d)return;f._.position={x:c,y:d};if(!b){var i=a.document.getWindow().getScrollPosition();c+=i.x,d+=i.y}if(h){var j=f.getSize(),k=a.document.getWindow().getViewPaneSize();c=k.width-j.width-c}var l={top:(d>0?d:0)+"px"};l[h?"right":"left"]=(c>0?c:0)+"px",g.setStyles(l),e&&(f._.moved=1)}}(),getPosition:function(){return e.extend({},this._.position)},show:function(){var c=this._.element,d=this.definition;!c.getParent()||!c.getParent().equals(a.document.getBody())?c.appendTo(a.document.getBody()):c.setStyle("display","block");if(b.gecko&&b.version<10900){var f=this.parts.dialog;f.setStyle("position","absolute"),setTimeout(function(){f.setStyle("position","fixed")},0)}this.resize(this._.contentSize&&this._.contentSize.width||d.width||d.minWidth,this._.contentSize&&this._.contentSize.height||d.height||d.minHeight),this.reset(),this.selectPage(this.definition.contents[0].id),a.dialog._.currentZIndex===null&&(a.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex),this._.element.getFirst().setStyle("z-index",a.dialog._.currentZIndex+=10);if(a.dialog._.currentTop===null){a.dialog._.currentTop=this,this._.parentDialog=null,D(this._.editor),c.on("keydown",H),c.on(b.opera?"keypress":"keyup",I);for(var g in{keyup:1,keydown:1,keypress:1})c.on(g,O)}else{this._.parentDialog=a.dialog._.currentTop;var h=this._.parentDialog.getElement().getFirst();h.$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2),a.dialog._.currentTop=this}J(this,this,"",null,function(){this.getButton("cancel")&&this.getButton("cancel").click()}),this._.hasFocus=!1,e.setTimeout(function(){this.layout(),this.parts.dialog.setStyle("visibility",""),this.fireOnce("load",{}),k.fire("ready",this),this.fire("show",{}),this._.editor.fire("dialogShow",this),this.foreach(function(a){a.setInitValue&&a.setInitValue()})},100,this)},layout:function(){var b=this,c=a.document.getWindow().getViewPaneSize(),d=b.getSize();b.move(b._.moved?b._.position.x:(c.width-d.width)/2,b._.moved?b._.position.y:(c.height-d.height)/2)},foreach:function(a){var b=this;for(var c in b._.contents)for(var d in b._.contents[c])a.call(b,b._.contents[c][d]);return b},reset:function(){var a=function(a){a.reset&&a.reset(1)};return function(){return this.foreach(a),this}}(),setupContent:function(){var a=arguments;this.foreach(function(b){b.setup&&b.setup.apply(b,a)})},commitContent:function(){var a=arguments;this.foreach(function(b){c&&this._.currentFocusIndex==b.focusIndex&&b.getInputElement().$.blur(),b.commit&&b.commit.apply(b,a)})},hide:function(){if(!this.parts.dialog.isVisible())return;this.fire("hide",{}),this._.editor.fire("dialogHide",this);var d=this._.element;d.setStyle("display","none"),this.parts.dialog.setStyle("visibility","hidden"),K(this);while(a.dialog._.currentTop!=this)a.dialog._.currentTop.hide();if(!this._.parentDialog)E();else{var e=this._.parentDialog.getElement().getFirst();e.setStyle("z-index",parseInt(e.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))}a.dialog._.currentTop=this._.parentDialog;if(!this._.parentDialog){a.dialog._.currentZIndex=null,d.removeListener("keydown",H),d.removeListener(b.opera?"keypress":"keyup",I);for(var f in{keyup:1,keydown:1,keypress:1})d.removeListener(f,O);var g=this._.editor;g.focus();if(g.mode=="wysiwyg"&&c){var h=g.getSelection();h&&h.unlock(!0)}}else a.dialog._.currentZIndex-=10;delete this._.parentDialog,this.foreach(function(a){a.resetInitValue&&a.resetInitValue()})},addPage:function(c){var d=this,f=[],g=c.label?' title="'+e.htmlEncode(c.label)+'"':"",i=c.elements,j=a.dialog._.uiElementBuilders.vbox.build(d,{type:"vbox",className:"cke_dialog_page_contents",children:c.elements,expand:!!c.expand,padding:c.padding,style:c.style||"width: 100%;height:100%"},f),k=h.createFromHtml(f.join(""));k.setAttribute("role","tabpanel");var l=b,m="cke_"+c.id+"_"+e.getNextNumber(),n=h.createFromHtml(['<a class="cke_dialog_tab"',d._.pageCount>0?" cke_last":"cke_first",g,c.hidden?' style="display:none"':"",' id="',m,'"',l.gecko&&l.version>=10900&&!l.hc?"":' href="javascript:void(0)"',' tabIndex="-1"',' hidefocus="true"',' role="tab">',c.label,"</a>"].join(""));k.setAttribute("aria-labelledby",m),d._.tabs[c.id]=[n,k],d._.tabIdList.push(c.id),!c.hidden&&d._.pageCount++,d._.lastTab=n,d.updateStyle();var o=d._.contents[c.id]={},p,q=j.getChild();while(p=q.shift())o[p.id]=p,typeof p.getChild=="function"&&q.push.apply(q,p.getChild());k.setAttribute("name",c.id),k.appendTo(d.parts.contents),n.unselectable(),d.parts.tabs.append(n),c.accessKey&&(J(d,d,"CTRL+"+c.accessKey,M,L),d._.accessKeyMap["CTRL+"+c.accessKey]=c.id)},selectPage:function(a){if(this._.currentTabId==a)return;if(this.fire("selectPage",{page:a,currentPage:this._.currentTabId})===!0)return;for(var c in this._.tabs){var d=this._.tabs[c][0],f=this._.tabs[c][1];c!=a&&(d.removeClass("cke_dialog_tab_selected"),f.hide()),f.setAttribute("aria-hidden",c!=a)}var g=this._.tabs[a];g[0].addClass("cke_dialog_tab_selected"),b.ie6Compat||b.ie7Compat?(n(g[1]),g[1].show(),setTimeout(function(){n(g[1],1)},0)):g[1].show(),this._.currentTabId=a,this._.currentTabIndex=e.indexOf(this._.tabIdList,a)},updateStyle:function(){this.parts.dialog[(this._.pageCount===1?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(a){var b=this,c=b._.tabs[a]&&b._.tabs[a][0];if(!c||b._.pageCount==1||!c.isVisible())return;a==b._.currentTabId&&b.selectPage(l.call(b)),c.hide(),b._.pageCount--,b.updateStyle()},showPage:function(a){var b=this,c=b._.tabs[a]&&b._.tabs[a][0];if(!c)return;c.show(),b._.pageCount++,b.updateStyle()},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(a,b){var c=this._.contents[a];return c&&c[b]},getValueOf:function(a,b){return this.getContentElement(a,b).getValue()},setValueOf:function(a,b,c){return this.getContentElement(a,b).setValue(c)},getButton:function(a){return this._.buttons[a]},click:function(a){return this._.buttons[a].click()},disableButton:function(a){return this._.buttons[a].disable()},enableButton:function(a){return this._.buttons[a].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(a,b){var c=this;if(typeof b=="undefined")b=c._.focusList.length,c._.focusList.push(new q(c,a,b));else{c._.focusList.splice(b,0,new q(c,a,b));for(var d=b+1;d<c._.focusList.length;d++)c._.focusList[d].focusIndex++}}},e.extend(a.dialog,{add:function(a,b){if(!this._.dialogDefinitions[a]||typeof b=="function")this._.dialogDefinitions[a]=b},exists:function(a){return!!this._.dialogDefinitions[a]},getCurrent:function(){return a.dialog._.currentTop},okButton:function(){var a=function(a,b){return b=b||{},e.extend({id:"ok",type:"button",label:a.lang.common.ok,"class":"cke_dialog_ui_button_ok",onClick:function(a){var b=a.data.dialog;b.fire("ok",{hide:!0}).hide!==!1&&b.hide()}},b,!0)};return a.type="button",a.override=function(b){return e.extend(function(c){return a(c,b)},{type:"button"},!0)},a}(),cancelButton:function(){var a=function(a,b){return b=b||{},e.extend({id:"cancel",type:"button",label:a.lang.common.cancel,"class":"cke_dialog_ui_button_cancel",onClick:function(a){var b=a.data.dialog;b.fire("cancel",{hide:!0}).hide!==!1&&b.hide()}},b,!0)};return a.type="button",a.override=function(b){return e.extend(function(c){return a(c,b)},{type:"button"},!0)},a}(),addUIElement:function(a,b){this._.uiElementBuilders[a]=b}}),a.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null},a.event.implementOn(a.dialog),a.event.implementOn(a.dialog.prototype,!0);var r={resizable:3,minWidth:600,minHeight:400,buttons:[a.dialog.okButton,a.dialog.cancelButton]},s=function(a,b,c){for(var d=0,e;e=a[d];d++){if(e.id==b)return e;if(c&&e[c]){var f=s(e[c],b,c);if(f)return f}}return null},t=function(a,b,c,d,e){if(c){for(var f=0,g;g=a[f];f++){if(g.id==c)return a.splice(f,0,b),b;if(d&&g[d]){var h=t(g[d],b,c,d,!0);if(h)return h}}if(e)return null}return a.push(b),b},u=function(a,b,c){for(var d=0,e;e=a[d];d++){if(e.id==b)return a.splice(d,1);if(c&&e[c]){var f=u(e[c],b,c);if(f)return f}}return null},v=function(a,b){this.dialog=a;var c=b.contents;for(var d=0,f;f=c[d];d++)c[d]=f&&new w(a,f);e.extend(this,b)};v.prototype={getContents:function(a){return s(this.contents,a)},getButton:function(a){return s(this.buttons,a)},addContents:function(a,b){return t(this.contents,a,b)},addButton:function(a,b){return t(this.buttons,a,b)},removeContents:function(a){u(this.contents,a)},removeButton:function(a){u(this.buttons,a)}},w.prototype={get:function(a){return s(this.elements,a,"children")},add:function(a,b){return t(this.elements,a,b,"children")},remove:function(a){u(this.elements,a,"children")}};var z,A={},B,G={},H=function(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,c=a.data.$.altKey,d=a.data.$.shiftKey,e=String.fromCharCode(a.data.$.keyCode),f=G[(b?"CTRL+":"")+(c?"ALT+":"")+(d?"SHIFT+":"")+e];if(!f||!f.length)return;f=f[f.length-1],f.keydown&&f.keydown.call(f.uiElement,f.dialog,f.key),a.data.preventDefault()},I=function(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,c=a.data.$.altKey,d=a.data.$.shiftKey,e=String.fromCharCode(a.data.$.keyCode),f=G[(b?"CTRL+":"")+(c?"ALT+":"")+(d?"SHIFT+":"")+e];if(!f||!f.length)return;f=f[f.length-1],f.keyup&&(f.keyup.call(f.uiElement,f.dialog,f.key),a.data.preventDefault())},J=function(a,b,c,d,e){var f=G[c]||(G[c]=[]);f.push({uiElement:a,dialog:b,key:c,keyup:e||a.accessKeyUp,keydown:d||a.accessKeyDown})},K=function(a){for(var b in G){var c=G[b];for(var d=c.length-1;d>=0;d--)(c[d].dialog==a||c[d].uiElement==a)&&c.splice(d,1);c.length===0&&delete G[b]}},L=function(a,b){a._.accessKeyMap[b]&&a.selectPage(a._.accessKeyMap[b])},M=function(a,b){},N={27:1,13:1},O=function(a){a.data.getKeystroke()in N&&a.data.stopPropagation()};(function(){k.dialog={uiElement:function(d,f,g,h,i,j,k){if(arguments.length<4)return;var l=(h.call?h(f):h)||"div",m=["<",l," "],n=(i&&i.call?i(f):i)||{},o=(j&&j.call?j(f):j)||{},p=(k&&k.call?k.call(this,d,f):k)||"",q=this.domId=o.id||e.getNextId()+"_uiElement",r=this.id=f.id,s;o.id=q;var t={};f.type&&(t["cke_dialog_ui_"+f.type]=1),f.className&&(t[f.className]=1),f.disabled&&(t.cke_disabled=1);var u=o["class"]&&o["class"].split?o["class"].split(" "):[];for(s=0;s<u.length;s++)u[s]&&(t[u[s]]=1);var v=[];for(s in t)v.push(s);o["class"]=v.join(" "),f.title&&(o.title=f.title);var w=(f.style||"").split(";");if(f.align){var x=f.align;n["margin-left"]=x=="left"?0:"auto",n["margin-right"]=x=="right"?0:"auto"}for(s in n)w.push(s+":"+n[s]);f.hidden&&w.push("display:none");for(s=w.length-1;s>=0;s--)w[s]===""&&w.splice(s,1);w.length>0&&(o.style=(o.style?o.style+"; ":"")+w.join("; "));for(s in o)m.push(s+'="'+e.htmlEncode(o[s])+'" ');m.push(">",p,"</",l,">"),g.push(m.join("")),(this._||(this._={})).dialog=d,typeof f.isChanged=="boolean"&&(this.isChanged=function(){return f.isChanged}),typeof f.isChanged=="function"&&(this.isChanged=f.isChanged),typeof f.setValue=="function"&&(this.setValue=e.override(this.setValue,function(a){return function(b){a.call(this,f.setValue.call(this,b))}})),typeof f.getValue=="function"&&(this.getValue=e.override(this.getValue,function(a){return function(){return f.getValue.call(this,a.call(this))}})),a.event.implementOn(this),this.registerEvents(f),this.accessKeyUp&&this.accessKeyDown&&f.accessKey&&J(this,d,"CTRL+"+f.accessKey);var y=this;d.on("load",function(){var a=y.getInputElement();if(a){var e=y.type in{checkbox:1,ratio:1}&&c&&b.version<8?"cke_dialog_ui_focused":"";a.on("focus",function(){d._.tabBarMode=!1,d._.hasFocus=!0,y.fire("focus"),e&&this.addClass(e)}),a.on("blur",function(){y.fire("blur"),e&&this.removeClass(e)})}}),this.keyboardFocusable&&(this.tabIndex=f.tabIndex||0,this.focusIndex=d._.focusList.push(this)-1,this.on("focus",function(){d._.currentFocusIndex=y.focusIndex})),e.extend(this,f)},hbox:function(a,d,e,g,h){if(arguments.length<4)return;this._||(this._={});var i=this._.children=d,j=h&&h.widths||null,l=h&&h.height||null,m={},n,o=function(){var a=['<tbody><tr class="cke_dialog_ui_hbox">'];for(n=0;n<e.length;n++){var d="cke_dialog_ui_hbox_child",g=[];n===0&&(d="cke_dialog_ui_hbox_first"),n==e.length-1&&(d="cke_dialog_ui_hbox_last"),a.push('<td class="',d,'" role="presentation" '),j?j[n]&&g.push("width:"+f(j[n])):g.push("width:"+Math.floor(100/e.length)+"%"),l&&g.push("height:"+f(l)),h&&h.padding!=undefined&&g.push("padding:"+f(h.padding)),c&&b.quirks&&i[n].align&&g.push("text-align:"+i[n].align),g.length>0&&a.push('style="'+g.join("; ")+'" '),a.push(">",e[n],"</td>")}return a.push("</tr></tbody>"),a.join("")},p={role:"presentation"};h&&h.align&&(p.align=h.align),k.dialog.uiElement.call(this,a,h||{type:"hbox"},g,"table",m,p,o)},vbox:function(a,d,g,h,i){if(arguments.length<3)return;this._||(this._={});var j=this._.children=d,l=i&&i.width||null,m=i&&i.heights||null,n=function(){var d=['<table role="presentation" cellspacing="0" border="0" '];d.push('style="'),i&&i.expand&&d.push("height:100%;"),d.push("width:"+f(l||"100%"),";"),d.push('"'),d.push('align="',e.htmlEncode(i&&i.align||(a.getParentEditor().lang.dir=="ltr"?"left":"right")),'" '),d.push("><tbody>");for(var h=0;h<g.length;h++){var k=[];d.push('<tr><td role="presentation" '),l&&k.push("width:"+f(l||"100%")),m?k.push("height:"+f(m[h])):i&&i.expand&&k.push("height:"+Math.floor(100/g.length)+"%"),i&&i.padding!=undefined&&k.push("padding:"+f(i.padding)),c&&b.quirks&&j[h].align&&k.push("text-align:"+j[h].align),k.length>0&&d.push('style="',k.join("; "),'" '),d.push(' class="cke_dialog_ui_vbox_child">',g[h],"</td></tr>")}return d.push("</tbody></table>"),d.join("")};k.dialog.uiElement.call(this,a,i||{type:"vbox"},h,"div",null,{role:"presentation"},n)}}})(),k.dialog.uiElement.prototype={getElement:function(){return a.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(a,b){return this.getInputElement().setValue(a),!b&&this.fire("change",{value:a}),this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){var a=this,b=a.getInputElement(),c=b,d;while((c=c.getParent())&&c.$.className.search("cke_dialog_page_contents")==-1);return c?(d=c.getAttribute("name"),a._.dialog._.currentTabId!=d&&a._.dialog.selectPage(d),a):a},focus:function(){return this.selectParentTab().getInputElement().focus(),this},registerEvents:function(a){var b=/^on([A-Z]\w+)/,c,d=function(a,b,c,d){b.on("load",function(){a.getInputElement().on(c,d,a)})};for(var e in a){if(!(c=e.match(b)))continue;this.eventProcessors[e]?this.eventProcessors[e].call(this,this._.dialog,a[e]):d(this,this._.dialog,c[1].toLowerCase(),a[e])}return this},eventProcessors:{onLoad:function(a,b){a.on("load",b,this)},onShow:function(a,b){a.on("show",b,this)},onHide:function(a,b){a.on("hide",b,this)}},accessKeyDown:function(a,b){this.focus()},accessKeyUp:function(a,b){},disable:function(){var a=this.getElement(),b=this.getInputElement();b.setAttribute("disabled","true"),a.addClass("cke_disabled")},enable:function(){var a=this.getElement(),b=this.getInputElement();b.removeAttribute("disabled"),a.removeClass("cke_disabled")},isEnabled:function(){return!this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return!this.isEnabled()||!this.isVisible()?!1:!0}},k.dialog.hbox.prototype=e.extend(new k.dialog.uiElement,{getChild:function(a){var b=this;return arguments.length<1?b._.children.concat():(a.splice||(a=[a]),a.length<2?b._.children[a[0]]:b._.children[a[0]]&&b._.children[a[0]].getChild?b._.children[a[0]].getChild(a.slice(1,a.length)):null)}},!0),k.dialog.vbox.prototype=new k.dialog.hbox,function(){var b={build:function(b,c,d){var e=c.children,f,g=[],h=[];for(var i=0;i<e.length&&(f=e[i]);i++){var j=[];g.push(j),h.push(a.dialog._.uiElementBuilders[f.type].build(b,f,j))}return new k.dialog[c.type](b,h,g,d,c)}};a.dialog.addUIElement("hbox",b),a.dialog.addUIElement("vbox",b)}(),a.dialogCommand=function(a){this.dialogName=a},a.dialogCommand.prototype={exec:function(
a){b.opera?e.setTimeout(function(){a.openDialog(this.dialogName)},0,this):a.openDialog(this.dialogName)},canUndo:!1,editorFocus:c||b.webkit},function(){var b=/^([a]|[^a])+$/,c=/^\d*$/,d=/^\d*(?:\.\d+)?$/,f=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,g=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,h=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;a.VALIDATE_OR=1,a.VALIDATE_AND=2,a.dialog.validate={functions:function(){var a=arguments;return function(){var b=this&&this.getValue?this.getValue():a[0],c=undefined,d=2,e=[],f;for(f=0;f<a.length;f++){if(typeof a[f]!="function")break;e.push(a[f])}f<a.length&&typeof a[f]=="string"&&(c=a[f],f++),f<a.length&&typeof a[f]=="number"&&(d=a[f]);var g=d==2?!0:!1;for(f=0;f<e.length;f++)d==2?g=g&&e[f](b):g=g||e[f](b);return g?!0:c}},regex:function(a,b){return function(){var c=this&&this.getValue?this.getValue():arguments[0];return a.test(c)?!0:b}},notEmpty:function(a){return this.regex(b,a)},integer:function(a){return this.regex(c,a)},number:function(a){return this.regex(d,a)},cssLength:function(a){return this.functions(function(a){return g.test(e.trim(a))},a)},htmlLength:function(a){return this.functions(function(a){return f.test(e.trim(a))},a)},inlineStyle:function(a){return this.functions(function(a){return h.test(e.trim(a))},a)},equals:function(a,b){return this.functions(function(b){return b==a},b)},notEqual:function(a,b){return this.functions(function(b){return b!=a},b)}},a.on("instanceDestroyed",function(b){if(e.isEmpty(a.instances)){var c;while(c=a.dialog._.currentTop)c.hide();F()}var d=b.editor._.storedDialogs;for(var f in d)d[f].destroy()})}(),e.extend(a.editor.prototype,{openDialog:function(b,d){function k(c){var e=a.dialog._.dialogDefinitions[b],f=j.skin.dialog;if(!f._isLoaded||l&&typeof c=="undefined")return;typeof e!="function"&&(a.dialog._.dialogDefinitions[b]="failed"),j.openDialog(b,d)}if(this.mode=="wysiwyg"&&c){var e=this.getSelection();e&&e.lock()}var f=a.dialog._.dialogDefinitions[b],g=this.skin.dialog;a.dialog._.currentTop===null&&D(this);if(typeof f=="function"&&g._isLoaded){var h=this._.storedDialogs||(this._.storedDialogs={}),i=h[b]||(h[b]=new a.dialog(this,b));return d&&d.call(i,i),i.show(),i}if(f=="failed")throw E(),new Error('[CKEDITOR.dialog.openDialog] Dialog "'+b+'" failed when loading definition.');var j=this;if(typeof f=="string"){var l=1;a.scriptLoader.load(a.getUrl(f),k,null,0,1)}return a.skins.load(this,"dialog",k),null}})}(),j.add("dialog",{requires:["dialogui"]}),j.add("styles",{requires:["selection"],init:function(a){a.on("contentDom",function(){a.document.setCustomData("cke_includeReadonly",!a.config.disableReadonlyStyling)})}}),a.editor.prototype.attachStyleStateChange=function(a,b){var c=this._.styleStateChangeCallbacks;c||(c=this._.styleStateChangeCallbacks=[],this.on("selectionChange",function(a){for(var b=0;b<c.length;b++){var d=c[b],e=d.style.checkActive(a.data.path)?1:2;d.fn.call(this,e)}})),c.push({style:a,fn:b})},a.STYLE_BLOCK=1,a.STYLE_INLINE=2,a.STYLE_OBJECT=3,function(){function m(a){var b,c;while(a=a.getParent()){if(a.getName()=="body")break;if(a.getAttribute("data-nostyle"))b=a;else if(!c){var d=a.getAttribute("contentEditable");d=="false"?b=a:d=="true"&&(c=1)}}return b}function n(a){var b=this,e=a.document;if(a.collapsed){var g=D(b,e);a.insertNode(g),a.moveToPosition(g,2);return}var i=b.element,j=b._.definition,l,n=j.ignoreReadonly,o=n||j.includeReadonly;o==undefined&&(o=e.getCustomData("cke_includeReadonly"));var p=f[i]||(l=!0,f.span);a.enlarge(1,1),a.trim();var q=a.createBookmark(),r=q.startNode,s=q.endNode,t=r,u;if(!n){var v=m(r),w=m(s);v&&(t=v.getNextSourceNode(!0)),w&&(s=w)}t.getPosition(s)==2&&(t=0);while(t){var x=!1;if(t.equals(s))t=null,x=!0;else{var y=t.type,z=y==1?t.getName():null,B=z&&t.getAttribute("contentEditable")=="false",C=z&&t.getAttribute("data-nostyle");if(z&&t.data("cke-bookmark")){t=t.getNextSourceNode(!0);continue}if(!z||p[z]&&!C&&(!B||o)&&(t.getPosition(s)|4|0|8)==4+0+8&&(!j.childRule||j.childRule(t))){var E=t.getParent();if(E&&((E.getDtd()||f.span)[i]||l)&&(!j.parentRule||j.parentRule(E))){!u&&(!z||!f.$removeEmpty[z]||(t.getPosition(s)|4|0|8)==4+0+8)&&(u=new d.range(e),u.setStartBefore(t));if(y==3||B||y==1&&!t.getChildCount()){var F=t,G;while((x=!F.getNext(k))&&(G=F.getParent(),p[G.getName()])&&(G.getPosition(r)|2|0|8)==2+0+8&&(!j.childRule||j.childRule(G)))F=G;u.setEndAfter(F)}}else x=!0}else x=!0;t=t.getNextSourceNode(C||B)}if(x&&u&&!u.collapsed){var H=D(b,e),I=H.hasAttributes(),J=u.getCommonAncestor(),K={styles:{},attrs:{},blockedStyles:{},blockedAttrs:{}},L,M,N;while(H&&J){if(J.getName()==i){for(L in j.attributes){if(K.blockedAttrs[L]||!(N=J.getAttribute(M)))continue;H.getAttribute(L)==N?K.attrs[L]=1:K.blockedAttrs[L]=1}for(M in j.styles){if(K.blockedStyles[M]||!(N=J.getStyle(M)))continue;H.getStyle(M)==N?K.styles[M]=1:K.blockedStyles[M]=1}}J=J.getParent()}for(L in K.attrs)H.removeAttribute(L);for(M in K.styles)H.removeStyle(M);I&&!H.hasAttributes()&&(H=null),H?(u.extractContents().appendTo(H),A(b,H),u.insertNode(H),H.mergeSiblings(),c||H.$.normalize()):(H=new h("span"),u.extractContents().appendTo(H),u.insertNode(H),A(b,H),H.remove(!0)),u=null}}a.moveToBookmark(q),a.shrink(2)}function o(a){a.enlarge(1,1);var b=a.createBookmark(),c=b.startNode;if(a.collapsed){var e=new d.elementPath(c.getParent()),f;for(var g=0,h;g<e.elements.length&&(h=e.elements[g]);g++){if(h==e.block||h==e.blockLimit)break;if(this.checkElementRemovable(h)){var i;a.collapsed&&(a.checkBoundaryOfElement(h,2)||(i=a.checkBoundaryOfElement(h,1)))?(f=h,f.match=i?"start":"end"):(h.mergeSiblings(),h.getName()==this.element?z(this,h):B(h,H(this)[h.getName()]))}}if(f){var j=c;for(g=0;!0;g++){var k=e.elements[g];if(k.equals(f))break;if(k.match)continue;k=k.clone(),k.append(j),j=k}j[f.match=="start"?"insertBefore":"insertAfter"](f)}}else{var l=b.endNode,m=this;function n(){var a=new d.elementPath(c.getParent()),b=new d.elementPath(l.getParent()),e=null,f=null;for(var g=0;g<a.elements.length;g++){var h=a.elements[g];if(h==a.block||h==a.blockLimit)break;m.checkElementRemovable(h)&&(e=h)}for(g=0;g<b.elements.length;g++){h=b.elements[g];if(h==b.block||h==b.blockLimit)break;m.checkElementRemovable(h)&&(f=h)}f&&l.breakParent(f),e&&c.breakParent(e)}n();var o=c;while(!o.equals(l)){var p=o.getNextSourceNode();o.type==1&&this.checkElementRemovable(o)&&(o.getName()==this.element?z(this,o):B(o,H(this)[o.getName()]),p.type==1&&p.contains(c)&&(n(),p=c.getNext())),o=p}}a.moveToBookmark(b)}function p(a){var b=a.getCommonAncestor(!0,!0),c=b.getAscendant(this.element,!0);c&&!c.isReadOnly()&&E(c,this)}function q(a){var b=a.getCommonAncestor(!0,!0),c=b.getAscendant(this.element,!0);if(!c)return;var d=this,e=d._.definition,f=e.attributes;if(f)for(var g in f)c.removeAttribute(g,f[g]);if(e.styles)for(var h in e.styles){if(!e.styles.hasOwnProperty(h))continue;c.removeStyle(h)}}function r(a){var b=a.createBookmark(!0),c=a.createIterator();c.enforceRealBlocks=!0,this._.enterMode&&(c.enlargeBr=this._.enterMode!=2);var d,e=a.document,f;while(d=c.getNextParagraph())if(!d.isReadOnly()){var g=D(this,e,d);t(d,g)}a.moveToBookmark(b)}function s(a){var b=this,c=a.createBookmark(1),d=a.createIterator();d.enforceRealBlocks=!0,d.enlargeBr=b._.enterMode!=2;var e;while(e=d.getNextParagraph())if(b.checkElementRemovable(e))if(e.is("pre")){var f=b._.enterMode==2?null:a.document.createElement(b._.enterMode==1?"p":"div");f&&e.copyAttributes(f),t(e,f)}else z(b,e,1);a.moveToBookmark(c)}function t(a,b){var c=!b;c&&(b=a.getDocument().createElement("div"),a.copyAttributes(b));var d=b&&b.is("pre"),e=a.is("pre"),f=d&&!e,g=!d&&e;f?b=y(a,b):g?b=x(c?[a.getHtml()]:v(a),b):a.moveChildren(b),b.replace(a),d?u(b):c&&C(b)}function u(a){var b;if(!((b=a.getPrevious(l))&&b.is&&b.is("pre")))return;var d=w(b.getHtml(),/\n$/,"")+"\n\n"+w(a.getHtml(),/^\n/,"");c?a.$.outerHTML="<pre>"+d+"</pre>":a.setHtml(d),b.remove()}function v(a){var b=/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,c=a.getName(),d=w(a.getOuterHtml(),b,function(a,b,c){return b+"</pre>"+c+"<pre>"}),e=[];return d.replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(a,b){e.push(b)}),e}function w(a,b,c){var d="",e="";return a=a.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,function(a,b,c){return b&&(d=b),c&&(e=c),""}),d+a.replace(b,c)+e}function x(a,b){var c;a.length>1&&(c=new d.documentFragment(b.getDocument()));for(var f=0;f<a.length;f++){var g=a[f];g=g.replace(/(\r\n|\r)/g,"\n"),g=w(g,/^[ \t]*\n/,""),g=w(g,/\n$/,""),g=w(g,/^[ \t]+|[ \t]+$/g,function(a,b,c){return a.length==1?"&nbsp;":b?" "+e.repeat("&nbsp;",a.length-1):e.repeat("&nbsp;",a.length-1)+" "}),g=g.replace(/\n/g,"<br>"),g=g.replace(/[ \t]{2,}/g,function(a){return e.repeat("&nbsp;",a.length-1)+" "});if(c){var h=b.clone();h.setHtml(g),c.append(h)}else b.setHtml(g)}return c||b}function y(a,b){var d=a.getBogus();d&&d.remove();var e=a.getHtml();e=w(e,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,""),e=e.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1"),e=e.replace(/([ \t\n\r]+|&nbsp;)/g," "),e=e.replace(/<br\b[^>]*>/gi,"\n");if(c){var f=a.getDocument().createElement("div");f.append(b),b.$.outerHTML="<pre>"+e+"</pre>",b.copyAttributes(f.getFirst()),b=f.getFirst().remove()}else b.setHtml(e);return b}function z(a,b){var c=a._.definition,d=e.extend({},c.attributes,H(a)[b.getName()]),g=c.styles,h=e.isEmpty(d)&&e.isEmpty(g);for(var i in d){if(!(i!="class"&&!a._.definition.fullMatch||b.getAttribute(i)==I(i,d[i])))continue;h=b.hasAttribute(i),b.removeAttribute(i)}for(var j in g){if(a._.definition.fullMatch&&b.getStyle(j)!=I(j,g[j],true))continue;h=h||!!b.getStyle(j),b.removeStyle(j)}h&&(!f.$block[b.getName()]||a._.enterMode==2&&!b.hasAttributes()?C(b):b.renameNode(a._.enterMode==1?"p":"div"))}function A(a,b){var c=a._.definition,d=c.attributes,e=c.styles,f=H(a),g=b.getElementsByTag(a.element);for(var h=g.count();--h>=0;)z(a,g.getItem(h));for(var i in f)if(i!=a.element){g=b.getElementsByTag(i);for(h=g.count()-1;h>=0;h--){var j=g.getItem(h);B(j,f[i])}}}function B(a,b){var c=b&&b.attributes;if(c)for(var d=0;d<c.length;d++){var e=c[d][0],f;if(f=a.getAttribute(e)){var g=c[d][1];(g===null||g.test&&g.test(f)||typeof g=="string"&&f==g)&&a.removeAttribute(e)}}C(a)}function C(a){if(!a.hasAttributes())if(f.$block[a.getName()]){var b=a.getPrevious(l),c=a.getNext(l);b&&(b.type==3||!b.isBlockBoundary({br:1}))&&a.append("br",1),c&&(c.type==3||!c.isBlockBoundary({br:1}))&&a.append("br"),a.remove(!0)}else{var d=a.getFirst(),e=a.getLast();a.remove(!0),d&&(d.type==1&&d.mergeSiblings(),e&&!d.equals(e)&&e.type==1&&e.mergeSiblings())}}function D(a,b,c){var d,e=a._.definition,f=a.element;return f=="*"&&(f="span"),d=new h(f,b),c&&c.copyAttributes(d),d=E(d,a),b.getCustomData("doc_processing_style")&&d.hasAttribute("id")?d.removeAttribute("id"):b.setCustomData("doc_processing_style",1),d}function E(b,c){var d=c._.definition,e=d.attributes,f=a.style.getStyleText(d);if(e)for(var g in e)b.setAttribute(g,e[g]);return f&&b.setAttribute("style",f),b}function F(a,b){for(var c in a)a[c]=a[c].replace(j,function(a,c){return b[c]})}function G(b){var c=b._AC;if(c)return c;c={};var d=0,e=b.attributes;if(e)for(var f in e)d++,c[f]=e[f];var g=a.style.getStyleText(b);return g&&(c.style||d++,c.style=g),c._length=d,b._AC=c}function H(a){if(a._.overrides)return a._.overrides;var b=a._.overrides={},c=a._.definition.overrides;if(c){e.isArray(c)||(c=[c]);for(var d=0;d<c.length;d++){var f=c[d],g,h,i;typeof f=="string"?g=f.toLowerCase():(g=f.element?f.element.toLowerCase():a.element,i=f.attributes),h=b[g]||(b[g]={});if(i){var j=h.attributes=h.attributes||[];for(var k in i)j.push([k.toLowerCase(),i[k]])}}}return b}function I(a,b,c){var d=new h("span");return d[c?"setStyle":"setAttribute"](a,b),d[c?"getStyle":"getAttribute"](a)}function J(a,b){var c;if(b!==!1){var d=new h("span");d.setAttribute("style",a),c=d.getAttribute("style")||""}else c=a;return c=c.replace(/(font-family:)(.*?)(?=;|$)/,function(a,b,c){var d=c.split(",");for(var f=0;f<d.length;f++)d[f]=e.trim(d[f].replace(/["']/g,""));return b+d.join(",")}),c.replace(/\s*([;:])\s*/,"$1").replace(/([^\s;])$/,"$1;").replace(/,\s+/g,",").replace(/\"/g,"").toLowerCase()}function K(a){var b={};return a.replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(a,c,d){b[c]=d}),b}function L(a,b){typeof a=="string"&&(a=K(a)),typeof b=="string"&&(b=K(b));for(var c in a)if(!(c in b)||b[c]!=a[c]&&a[c]!="inherit"&&b[c]!="inherit")return!1;return!0}function M(a,b){var c=a.getSelection(),d=c.createBookmarks(1),e=c.getRanges(),f=b?this.removeFromRange:this.applyToRange,g,h=e.createIterator();while(g=h.getNextRange())f.call(this,g);d.length==1&&d[0].collapsed?(c.selectRanges(e),a.getById(d[0].startNode).remove()):c.selectBookmarks(d),a.removeCustomData("doc_processing_style")}var b={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},g={a:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},i=/\s*(?:;\s*|$)/,j=/#\((.+?)\)/g,k=d.walker.bookmark(0,1),l=d.walker.whitespaces(1);a.style=function(a,c){var d=this;c&&(a=e.clone(a),F(a.attributes,c),F(a.styles,c));var f=d.element=a.element?typeof a.element=="string"?a.element.toLowerCase():a.element:"*";d.type=b[f]?1:g[f]?3:2,typeof d.element=="object"&&(d.type=3),d._={definition:a}},a.style.prototype={apply:function(a){M.call(this,a,!1)},remove:function(a){M.call(this,a,!0)},applyToRange:function(a){var b=this;return(b.applyToRange=b.type==2?n:b.type==1?r:b.type==3?p:null).call(b,a)},removeFromRange:function(a){var b=this;return(b.removeFromRange=b.type==2?o:b.type==1?s:b.type==3?q:null).call(b,a)},applyToObject:function(a){E(a,this)},checkActive:function(a){var b=this;switch(b.type){case 1:return b.checkElementRemovable(a.block||a.blockLimit,!0);case 3:case 2:var c=a.elements;for(var d=0,e;d<c.length;d++){e=c[d];if(b.type==2&&(e==a.block||e==a.blockLimit))continue;if(b.type==3){var f=e.getName();if(!(typeof b.element=="string"?f==b.element:f in b.element))continue}if(b.checkElementRemovable(e,!0))return!0}}return!1},checkApplicable:function(a){switch(this.type){case 2:case 1:break;case 3:return a.lastElement.getAscendant(this.element,!0)}return!0},checkElementRemovable:function(a,b){var c=this,d=c._.definition;if(!a||!d.ignoreReadonly&&a.isReadOnly())return!1;var e,f=a.getName();if(typeof c.element=="string"?f==c.element:f in c.element){if(!b&&!a.hasAttributes())return!0;e=G(d);if(!e._length)return!0;for(var g in e){if(g=="_length")continue;var h=a.getAttribute(g)||"";if(g=="style"?L(e[g],J(h,!1)):e[g]==h){if(!b)return!0}else if(b)return!1}if(b)return!0}var i=H(c)[a.getName()];if(i){if(!(e=i.attributes))return!0;for(var j=0;j<e.length;j++){g=e[j][0];var k=a.getAttribute(g);if(k){var l=e[j][1];if(l===null||typeof l=="string"&&k==l||l.test(k))return!0}}}return!1},buildPreview:function(b){var c=this._.definition,d=[],e=c.element;e=="bdo"&&(e="span"),d=["<",e];var f=c.attributes;if(f)for(var g in f)d.push(" ",g,'="',f[g],'"');var h=a.style.getStyleText(c);return h&&d.push(' style="',h,'"'),d.push(">",b||c.name,"</",e,">"),d.join("")}},a.style.getStyleText=function(a){var b=a._ST;if(b)return b;b=a.styles;var c=a.attributes&&a.attributes.style||"",d="";c.length&&(c=c.replace(i,";"));for(var e in b){var f=b[e],g=(e+":"+f).replace(i,";");f=="inherit"?d+=g:c+=g}return c.length&&(c=J(c)),c+=d,a._ST=c}}(),a.styleCommand=function(a){this.style=a},a.styleCommand.prototype.exec=function(a){var b=this;a.focus();var c=a.document;return c&&(b.state==2?b.style.apply(c):b.state==1&&b.style.remove(c)),!!c},a.stylesSet=new a.resourceManager("","stylesSet"),a.addStylesSet=e.bind(a.stylesSet.add,a.stylesSet),a.loadStylesSet=function(b,c,d){a.stylesSet.addExternal(b,c,""),a.stylesSet.load(b,d)},a.editor.prototype.getStylesSet=function(b){if(!this._.stylesDefinitions){var c=this,d=c.config.stylesCombo_stylesSet||c.config.stylesSet||"default";if(d instanceof Array){c._.stylesDefinitions=d,b(d);return}var e=d.split(":"),f=e[0],g=e[1],h=j.registered.styles.path;a.stylesSet.addExternal(f,g?e.slice(1).join(":"):h+"styles/"+f+".js",""),a.stylesSet.load(f,function(a){c._.stylesDefinitions=a[f],b(c._.stylesDefinitions)})}else b(this._.stylesDefinitions)},j.add("domiterator"),function(){function a(a){var b=this;if(arguments.length<1)return;b.range=a,b.forceBrBreak=0,b.enlargeBr=1,b.enforceRealBlocks=0,b._||(b._={})}function i(a,b,c){var d=a.getNextSourceNode(b,null,c);while(!f(d))d=d.getNextSourceNode(b,null,c);return d}var b=/^[\r\n\t ]+$/,f=d.walker.bookmark(!1,!0),g=d.walker.whitespaces(!0),h=function(a){return f(a)&&g(a)};a.prototype={getNextParagraph:function(a){var g=this,j,k,l,m,p,s;if(!g._.lastNode){k=g.range.clone(),k.shrink(1,!0),m=k.endContainer.hasAscendant("pre",!0)||k.startContainer.hasAscendant("pre",!0),k.enlarge(g.forceBrBreak&&!m||!g.enlargeBr?3:2);var t=new d.walker(k),u=d.walker.bookmark(!0,!0);t.evaluator=u,g._.nextNode=t.next(),t=new d.walker(k),t.evaluator=u;var v=t.previous();g._.lastNode=v.getNextSourceNode(!0);if(g._.lastNode&&g._.lastNode.type==3&&!e.trim(g._.lastNode.getText())&&g._.lastNode.getParent().isBlockBoundary()){var w=new d.range(k.document);w.moveToPosition(g._.lastNode,4);if(w.checkEndOfBlock()){var x=new d.elementPath(w.endContainer),y=x.block||x.blockLimit;g._.lastNode=y.getNextSourceNode(!0)}}g._.lastNode||(g._.lastNode=g._.docEndMarker=k.document.createText(""),g._.lastNode.insertAfter(v)),k=null}var z=g._.nextNode;v=g._.lastNode,g._.nextNode=null;while(z){var A=0,B=z.hasAscendant("pre"),C=z.type!=1,D=0;if(!C){var E=z.getName();if(z.isBlockBoundary(g.forceBrBreak&&!B&&{br:1})){if(E=="br")C=1;else if(!k&&!z.getChildCount()&&E!="hr"){j=z,l=z.equals(v);break}k&&(k.setEndAt(z,3),E!="br"&&(g._.nextNode=z)),A=1}else{if(z.getFirst()){k||(k=new d.range(g.range.document),k.setStartAt(z,3)),z=z.getFirst();continue}C=1}}else z.type==3&&b.test(z.getText())&&(C=0);C&&!k&&(k=new d.range(g.range.document),k.setStartAt(z,3)),l=(!A||C)&&z.equals(v);if(k&&!A)while(!z.getNext(h)&&!l){var F=z.getParent();if(F.isBlockBoundary(g.forceBrBreak&&!B&&{br:1})){A=1,C=0,l=l||F.equals(v),k.setEndAt(F,2);break}z=F,C=1,l=z.equals(v),D=1}C&&k.setEndAt(z,4),z=i(z,D,v),l=!z;if(l||A&&k)break}if(!j){if(!k)return g._.docEndMarker&&g._.docEndMarker.remove(),g._.nextNode=null,null;var G=new d.elementPath(k.startContainer),H=G.blockLimit,I={div:1,th:1,td:1};j=G.block;if(!j&&!g.enforceRealBlocks&&I[H.getName()]&&k.checkStartOfBlock()&&k.checkEndOfBlock())j=H;else if(!j||g.enforceRealBlocks&&j.getName()=="li")j=g.range.document.createElement(a||"p"),k.extractContents().appendTo(j),j.trim(),k.insertNode(j),p=s=!0;else if(j.getName()!="li"){if(!k.checkStartOfBlock()||!k.checkEndOfBlock()){j=j.clone(!1),k.extractContents().appendTo(j),j.trim();var J=k.splitBlock();p=!J.wasStartOfBlock,s=!J.wasEndOfBlock,k.insertNode(j)}}else l||(g._.nextNode=j.equals(v)?null:i(k.getBoundaryNodes().endNode,1,v))}if(p){var K=j.getPrevious();K&&K.type==1&&(K.getName()=="br"?K.remove():K.getLast()&&K.getLast().$.nodeName.toLowerCase()=="br"&&K.getLast().remove())}if(s){var L=j.getLast();L&&L.type==1&&L.getName()=="br"&&(c||L.getPrevious(f)||L.getNext(f))&&L.remove()}return g._.nextNode||(g._.nextNode=l||j.equals(v)?null:i(j,1,v)),j}},d.range.prototype.createIterator=function(){return new a(this)}}(),j.add("panelbutton",{requires:["button"],onLoad:function(){function b(a){var b=this,c=b._;if(c.state==0)return;b.createPanel(a);if(c.on){c.panel.hide();return}c.panel.showBlock(b._.id,b.document.getById(b._.id),4)}k.panelButton=e.createClass({base:k.button,$:function(c){var d=this,e=c.panel;delete c.panel,d.base(c),d.document=e&&e.parent&&e.parent.getDocument()||a.document,e.block={attributes:e.attributes},d.hasArrow=!0,d.click=b,d._={panelDefinition:e}},statics:{handler:{create:function(a){return new k.panelButton(a)}}},proto:{createPanel:function(b){var c=this._;if(c.panel)return;var d=this._.panelDefinition||{},e=this._.panelDefinition.block,f=d.parent||a.document.getBody(),g=this._.panel=new k.floatPanel(b,f,d),h=g.addBlock(c.id,e),i=this;g.onShow=function(){i.className&&this.element.getFirst().addClass(i.className+"_panel"),i.setState(1),c.on=1,i.onOpen&&i.onOpen()},g.onHide=function(a){i.className&&this.element.getFirst().removeClass(i.className+"_panel"),i.setState(i.modes&&i.modes[b.mode]?2:0),c.on=0,!a&&i.onClose&&i.onClose()},g.onEscape=function(){g.hide(),i.document.getById(c.id).focus()},this.onBlock&&this.onBlock(g,h),h.onHide=function(){c.on=0,i.setState(2)}}}})},beforeInit:function(a){a.ui.addHandler("panelbutton",k.panelButton.handler)}}),a.UI_PANELBUTTON="panelbutton",j.add("floatpanel",{requires:["panel"]}),function(){function i(a,b,c,d,g){var i=e.genKey(b.getUniqueId(),c.getUniqueId(),a.skinName,a.lang.dir,a.uiColor||"",d.css||"",g||""),j=f[i];return j||(j=f[i]=new k.panel(b,d),j.element=c.append(h.createFromHtml(j.renderHtml(a),b)),j.element.setStyles({display:"none",position:"absolute"})),j}var f={},g=!1;k.floatPanel=e.createClass({$:function(a,b,c,d){c.forceIFrame=1;var e=b.getDocument(),f=i(a,e,b,c,d||0),g=f.element,h=g.getFirst().getFirst();this.element=g,this._={editor:a,panel:f,parentElement:b,definition:c,document:e,iframe:h,children:[],dir:a.lang.dir},a.on("mode",function(){this.hide()},this)},proto:{addBlock:function(a,b){return this._.panel.addBlock(a,b)},addListBlock:function(a,b){return this._.panel.addListBlock(a,b)},getBlock:function(a){return this._.panel.getBlock(a)},showBlock:function(f,i,j,k,l){var m=this._.panel,o=m.showBlock(f);this.allowBlur(!1),g=1,this._.returnFocus=this._.editor.focusManager.hasFocus?this._.editor:new h(a.document.$.activeElement);var p=this.element,q=this._.iframe,r=this._.definition,s=i.getDocumentPosition(p.getDocument()),t=this._.dir=="rtl",u=s.x+(k||0),v=s.y+(l||0);!t||j!=1&&j!=4?!t&&(j==2||j==3)&&(u+=i.$.offsetWidth-1):u+=i.$.offsetWidth;if(j==3||j==4)v+=i.$.offsetHeight-1;this._.panel._.offsetParentId=i.getId(),p.setStyles({top:v+"px",left:0,display:""}),p.setOpacity(0),p.getFirst().removeStyle("width");if(!this._.blurSet){var w=c?q:new d.window(q.$.contentWindow);a.event.useCapture=!0,w.on("blur",function(a){var b=this;if(!b.allowBlur())return;var c=a.data.getTarget();if(c.getName&&c.getName()!="iframe")return;b.visible&&!b._.activeChild&&!g&&(delete b._.returnFocus,b.hide())},this),w.on("focus",function(){this._.focused=!0,this.hideChild(),this.allowBlur(!0)},this),a.event.useCapture=!1,this._.blurSet=1}m.onEscape=e.bind(function(a){if(this.onEscape&&this.onEscape(a)===!1)return!1},this),e.setTimeout(function(){t&&(u-=p.$.offsetWidth);var a=e.bind(function(){var a=p.getFirst();if(o.autoSize){var d=o.element.$;if(b.gecko||b.opera)d=d.parentNode;c&&(d=d.document.body);var e=d.scrollWidth;c&&b.quirks&&e>0&&(e+=(a.$.offsetWidth||0)-(a.$.clientWidth||0)+3),e+=4,a.setStyle("width",e+"px"),o.element.addClass("cke_frameLoaded");var f=o.element.$.scrollHeight;c&&b.quirks&&f>0&&(f+=(a.$.offsetHeight||0)-(a.$.clientHeight||0)+3),a.setStyle("height",f+"px"),m._.currentBlock.element.setStyle("display","none").removeStyle("display")}else a.removeStyle("height");var g=m.element,i=g.getWindow(),j=i.getScrollPosition(),k=i.getViewPaneSize(),l={height:g.$.offsetHeight,width:g.$.offsetWidth};if(t?u<0:u+l.width>k.width+j.x)u+=l.width*(t?1:-1);v+l.height>k.height+j.y&&(v-=l.height);if(c){var n=new h(p.$.offsetParent),q=n;q.getName()=="html"&&(q=q.getDocument().getBody()),q.getComputedStyle("direction")=="rtl"&&(b.ie8Compat?u-=p.getDocument().getDocumentElement().$.scrollLeft*2:u-=n.$.scrollWidth-n.$.clientWidth)}var r=p.getFirst(),s;(s=r.getCustomData("activePanel"))&&s.onHide&&s.onHide.call(this,1),r.setCustomData("activePanel",this),p.setStyles({top:v+"px",left:u+"px"}),p.setOpacity(1)},this);m.isLoaded?a():m.onLoad=a,e.setTimeout(function(){q.$.contentWindow.focus(),this.allowBlur(!0)},0,this)},b.air?200:0,this),this.visible=1,this.onShow&&this.onShow.call(this),g=0},hide:function(a){var c=this;if(c.visible&&(!c.onHide||c.onHide.call(c)!==!0)){c.hideChild(),b.gecko&&c._.iframe.getFrameDocument().$.activeElement.blur(),c.element.setStyle("display","none"),c.visible=0,c.element.getFirst().removeCustomData("activePanel");var d=a!==!1&&c._.returnFocus;d&&(b.webkit&&d.type&&d.getWindow().$.focus(),d.focus())}},allowBlur:function(a){var b=this._.panel;return a!=undefined&&(b.allowBlur=a),b.allowBlur},showAsChild:function(a,c,d,f,g,h){if(this._.activeChild==a&&a._.panel._.offsetParentId==d.getId())return;this.hideChild(),a.onHide=e.bind(function(){e.setTimeout(function(){this._.focused||this.hide()},0,this)},this),this._.activeChild=a,this._.focused=!1,a.showBlock(c,d,f,g,h),(b.ie7Compat||b.ie8&&b.ie6Compat)&&setTimeout(function(){a.element.getChild(0).$.style.cssText+=""},100)},hideChild:function(){var a=this._.activeChild;a&&(delete a.onHide,delete a._.returnFocus,delete this._.activeChild,a.hide())}}}),a.on("instanceDestroyed",function(){var b=e.isEmpty(a.instances);for(var c in f){var d=f[c];b?d.destroy():d.element.hide()}b&&(f={})})}(),j.add("menu",{beforeInit:function(b){var c=b.config.menu_groups.split(","),d=b._.menuGroups={},e=b._.menuItems={};for(var f=0;f<c.length;f++)d[c[f]]=f+1;b.addMenuGroup=function(a,b){d[a]=b||100},b.addMenuItem=function(b,c){d[c.group]&&(e[b]=new a.menuItem(this,b,c))},b.addMenuItems=function(a){for(var b in a)this.addMenuItem(b,a[b])},b.getMenuItem=function(a){return e[a]},b.removeMenuItem=function(a){delete e[a]}},requires:["floatpanel"]}),function(){function d(a){a.sort(function(a,b){return a.group<b.group?-1:a.group>b.group?1:a.order<b.order?-1:a.order>b.order?1:0})}a.menu=e.createClass({$:function(a,b){var c=this;b=c._.definition=b||{},c.id=e.getNextId(),c.editor=a,c.items=[],c._.listeners=[],c._.level=b.level||1;var d=e.extend({},b.panel,{css:a.skin.editor.css,level:c._.level-1,block:{}}),f=d.block.attributes=d.attributes||{};!f.role&&(f.role="menu"),c._.panelDefinition=d},_:{onShow:function(){var a=this,b=a.editor.getSelection();c&&b&&b.lock();var d=b&&b.getStartElement(),e=a._.listeners,f=[];a.removeAll();for(var g=0;g<e.length;g++){var h=e[g](d,b);if(h)for(var i in h){var j=a.editor.getMenuItem(i);j&&(!j.command||a.editor.getCommand(j.command).state)&&(j.state=h[i],a.add(j))}}},onClick:function(a){this.hide(!1),a.onClick?a.onClick():a.command&&this.editor.execCommand(a.command)},onEscape:function(a){var b=this.parent;if(b){b._.panel.hideChild();var c=b._.panel._.panel._.currentBlock,d=c._.focusIndex;c._.markItem(d)}else a==27&&this.hide();return!1},onHide:function(){if(c){var a=this.editor.getSelection();a&&a.unlock()}this.onHide&&this.onHide()},showSubMenu:function(b){var c=this,d=c._.subMenu,f=c.items[b],g=f.getItems&&f.getItems();if(!g){c._.panel.hideChild();return}var h=c._.panel.getBlock(c.id);h._.focusIndex=b,d?d.removeAll():(d=c._.subMenu=new a.menu(c.editor,e.extend({},c._.definition,{level:c._.level+1},!0)),d.parent=c,d._.onClick=e.bind(c._.onClick,c));for(var i in g){var j=c.editor.getMenuItem(i);j&&(j.state=g[i],d.add(j))}var k=c._.panel.getBlock(c.id).element.getDocument().getById(c.id+String(b));d.show(k,2)}},proto:{add:function(a){a.order||(a.order=this.items.length),this.items.push(a)},removeAll:function(){this.items=[]},show:function(b,f,g,h){if(!this.parent){this._.onShow();if(!this.items.length)return}f=f||(this.editor.lang.dir=="rtl"?2:1);var i=this.items,j=this.editor,l=this._.panel,n=this._.element;if(!l){l=this._.panel=new k.floatPanel(this.editor,a.document.getBody(),this._.panelDefinition,this._.level),l.onEscape=e.bind(function(a){if(this._.onEscape(a)===!1)return!1},this),l.onHide=e.bind(function(){this._.onHide&&this._.onHide()},this);var o=l.addBlock(this.id,this._.panelDefinition.block);o.autoSize=!0;var p=o.keys;p[40]="next",p[9]="next",p[38]="prev",p[2228233]="prev",p[j.lang.dir=="rtl"?37:39]=c?"mouseup":"click",p[32]=c?"mouseup":"click",c&&(p[13]="mouseup"),n=this._.element=o.element,n.addClass(j.skinClass);var q=n.getDocument();q.getBody().setStyle("overflow","hidden"),q.getElementsByTag("html").getItem(0).setStyle("overflow","hidden"),this._.itemOverFn=e.addFunction(function(a){var b=this;clearTimeout(b._.showSubTimeout),b._.showSubTimeout=e.setTimeout(b._.showSubMenu,j.config.menu_subMenuDelay||400,b,[a])},this),this._.itemOutFn=e.addFunction(function(a){clearTimeout(this._.showSubTimeout)},this),this._.itemClickFn=e.addFunction(function(a){var b=this,c=b.items[a];if(c.state==0){b.hide();return}c.getItems?b._.showSubMenu(a):b._.onClick(c)},this)}d(i);var r=j.container.getChild(1),s=r.hasClass("cke_mixed_dir_content")?" cke_mixed_dir_content":"",t=['<div class="cke_menu'+s+'" role="presentation">'],u=i.length,v=u&&i[0].group;for(var w=0;w<u;w++){var x=i[w];v!=x.group&&(t.push('<div class="cke_menuseparator" role="separator"></div>'),v=x.group),x.render(this,w,t)}t.push("</div>"),n.setHtml(t.join("")),k.fire("ready",this),this.parent?this.parent._.panel.showAsChild(l,this.id,b,f,g,h):l.showBlock(this.id,b,f,g,h),j.fire("menuShow",[l])},addListener:function(a){this._.listeners.push(a)},hide:function(a){var b=this;b._.onHide&&b._.onHide(),b._.panel&&b._.panel.hide(a)}}}),a.menuItem=e.createClass({$:function(a,b,c){var d=this;e.extend(d,c,{order:0,className:"cke_button_"+b}),d.group=a._.menuGroups[d.group],d.editor=a,d.name=b},proto:{render:function(d,e,f){var g=this,h=d.id+String(e),i=typeof g.state=="undefined"?2:g.state,j=" cke_"+(i==1?"on":i==0?"disabled":"off"),k=g.label;g.className&&(j+=" "+g.className);var l=g.getItems;f.push('<span class="cke_menuitem'+(g.icon&&g.icon.indexOf(".png")==-1?" cke_noalphafix":"")+'">'+'<a id="',h,'" class="',j,'" href="javascript:void(\'',(g.label||"").replace("'",""),'\')" title="',g.label,'" tabindex="-1"_cke_focus=1 hidefocus="true" role="menuitem"'+(l?'aria-haspopup="true"':"")+(i==0?'aria-disabled="true"':"")+(i==1?'aria-pressed="true"':"")),(b.opera||b.gecko&&b.mac)&&f.push(' onkeypress="return false;"'),b.gecko&&f.push(' onblur="this.style.cssText = this.style.cssText;"');var m=(g.iconOffset||0)*-16;f.push(' onmouseover="CKEDITOR.tools.callFunction(',d._.itemOverFn,",",e,');" onmouseout="CKEDITOR.tools.callFunction(',d._.itemOutFn,",",e,');" '+(c?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction(',d._.itemClickFn,",",e,'); return false;"><span class="cke_icon_wrapper"><span class="cke_icon"'+(g.icon?' style="background-image:url('+a.getUrl(g.icon)+");background-position:0 "+m+'px;"':"")+"></span></span>"+'<span class="cke_label">'),l&&f.push('<span class="cke_menuarrow">',"<span>&#",g.editor.lang.dir=="rtl"?"9668":"9658",";</span>","</span>"),f.push(k,"</span></a></span>")}}})}(),i.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div",function(){var c;j.add("editingblock",{init:function(d){if(!d.config.editingBlock)return;d.on("themeSpace",function(a){a.data.space=="contents"&&(a.data.html+="<br>")}),d.on("themeLoaded",function(){d.fireOnce("editingBlockReady")}),d.on("uiReady",function(){d.setMode(d.config.startupMode)}),d.on("afterSetData",function(){if(!c){function a(){c=!0,d.getMode().loadData(d.getData()),c=!1}d.mode?a():d.on("mode",function(){d.mode&&(a(),d.removeListener("mode",arguments.callee))})}}),d.on("beforeGetData",function(){!c&&d.mode&&(c=!0,d.setData(d.getMode().getData(),null,1),c=!1)}),d.on("getSnapshot",function(a){d.mode&&(a.data=d.getMode().getSnapshotData())}),d.on("loadSnapshot",function(a){d.mode&&d.getMode().loadSnapshotData(a.data)}),d.on("mode",function(c){c.removeListener(),b.webkit&&d.container.on("focus",function(){d.focus()}),d.config.startupFocus&&d.focus(),setTimeout(function(){d.fireOnce("instanceReady"),a.fire("instanceReady",null,d)},0)}),d.on("destroy",function(){var a=this;a.mode&&a._.modes[a.mode].unload(a.getThemeSpace("contents"))})}}),a.editor.prototype.mode="",a.editor.prototype.addMode=function(a,b){b.name=a,(this._.modes||(this._.modes={}))[a]=b},a.editor.prototype.setMode=function(a){this.fire("beforeSetMode",{newMode:a});var b,c=this.getThemeSpace("contents"),d=this.checkDirty();if(this.mode){if(a==this.mode)return;this._.previousMode=this.mode,this.fire("beforeModeUnload");var e=this.getMode();b=e.getData(),e.unload(c),this.mode=""}c.setHtml("");var f=this.getMode(a);if(!f)throw'[CKEDITOR.editor.setMode] Unknown mode "'+a+'".';d||this.on("mode",function(){this.resetDirty(),this.removeListener("mode",arguments.callee)}),f.load(c,typeof b!="string"?this.getData():b)},a.editor.prototype.getMode=function(a){return this._.modes&&this._.modes[a||this.mode]},a.editor.prototype.focus=function(){this
.forceNextSelectionCheck();var a=this.getMode();a&&a.focus()}}(),i.startupMode="wysiwyg",i.editingBlock=!0,function(){function i(){var a=this;try{var b=a.getSelection();if(!b||!b.document.getWindow().$)return;var c=b.getStartElement(),e=new d.elementPath(c);e.compare(a._.selectionPreviousPath)||(a._.selectionPreviousPath=e,a.fire("selectionChange",{selection:b,path:e,element:c}))}catch(f){}}function m(){l=!0;if(k)return;n.call(this),k=e.setTimeout(n,200,this)}function n(){k=null,l&&(e.setTimeout(i,0,this),l=!1)}function o(a){function b(a){return a&&a.type==1&&a.getName()in f.$removeEmpty}function c(b){var c=a.document.getBody();return!b.is("body")&&c.getChildCount()==1}var d=a.startContainer,g=a.startOffset;return d.type==3?!1:e.trim(d.getHtml())?b(d.getChild(g-1))||b(d.getChild(g)):b(d)||c(d)}function q(a){t(a);var b=a.createText("​");return a.setCustomData("cke-fillingChar",b),b}function r(a){return a&&a.getCustomData("cke-fillingChar")}function s(a){var b=a&&r(a);b&&(b.getCustomData("ready")?t(a):b.setCustomData("ready",1))}function t(a){var b=a&&a.removeCustomData("cke-fillingChar");b&&(b.setText(b.getText().replace(/\u200B/g,"")),b=0)}var k,l,p={modes:{wysiwyg:1,source:1},readOnly:c||b.webkit,exec:function(a){switch(a.mode){case"wysiwyg":a.document.$.execCommand("SelectAll",!1,null),a.forceNextSelectionCheck(),a.selectionChange();break;case"source":var b=a.textarea.$;c?b.createTextRange().execCommand("SelectAll"):(b.selectionStart=0,b.selectionEnd=b.value.length),b.focus()}},canUndo:!1};j.add("selection",{init:function(a){if(b.webkit){a.on("selectionChange",function(){s(a.document)}),a.on("beforeSetMode",function(){t(a.document)}),a.on("key",function(b){switch(b.data.keyCode){case 13:case 2228237:case 37:case 39:case 8:t(a.document)}},null,null,10);var d,f;function g(){var b=a.document,c=r(b);if(c){var e=b.$.defaultView.getSelection();e.type=="Caret"&&e.anchorNode==c.$&&(f=1),d=c.getText(),c.setText(d.replace(/\u200B/g,""))}}function h(){var b=a.document,c=r(b);c&&(c.setText(d),f&&(b.$.defaultView.getSelection().setPosition(c.$,c.getLength()),f=0))}a.on("beforeUndoImage",g),a.on("afterUndoImage",h),a.on("beforeGetData",g,null,null,0),a.on("getData",h)}a.on("contentDom",function(){var d=a.document,f=d.getBody(),g=d.getDocumentElement();if(c){var h,i,j=1;f.on("focusin",function(a){if(a.data.$.srcElement.nodeName!="BODY")return;if(h){if(j){try{h.select()}catch(b){}var c=d.getCustomData("cke_locked_selection");c&&(c.unlock(),c.lock())}h=null}}),f.on("focus",function(){i=1,n()}),f.on("beforedeactivate",function(a){if(a.data.$.toElement)return;i=0,j=1}),c&&b.version<8&&a.on("blur",function(b){try{a.document&&a.document.$.selection.empty()}catch(c){}}),g.on("mousedown",function(){j=0}),g.on("mouseup",function(){j=1}),c&&(b.ie7Compat||b.version<8||b.quirks)&&g.on("click",function(b){b.data.getTarget().getName()=="html"&&a.getSelection().getRanges()[0].select()});var k;f.on("mousedown",function(b){if(b.data.$.button==2){var c=a.document.$.selection;c.type=="None"&&(k=a.window.getScrollPosition())}l()}),f.on("mouseup",function(b){b.data.$.button==2&&k&&(a.document.$.documentElement.scrollLeft=k.x,a.document.$.documentElement.scrollTop=k.y),k=null,i=1,setTimeout(function(){n(!0)},0)}),f.on("keydown",l),f.on("keyup",function(){i=1,n()}),d.on("selectionchange",n);function l(){i=0}function n(b){if(i){var c=a.document,d=a.getSelection(),f=d&&d.getNative();if(b&&f&&f.type=="None"&&!c.$.queryCommandEnabled("InsertImage")){e.setTimeout(n,50,this,!0);return}var g;if(f&&f.type&&f.type!="Control"&&(g=f.createRange())&&(g=g.parentElement())&&(g=g.nodeName)&&g.toLowerCase()in{input:1,textarea:1})return;h=f&&d.getRanges()[0],m.call(a)}}}else d.on("mouseup",m,a),d.on("keyup",m,a),d.on("selectionchange",m,a)}),a.on("contentDomUnload",a.forceNextSelectionCheck,a),a.addCommand("selectAll",p),a.ui.addButton("SelectAll",{label:a.lang.selectAll,command:"selectAll"}),a.selectionChange=m,b.ie9Compat&&a.on("destroy",function(){var b=a.getSelection();b&&b.getNative().clear()},null,null,9)}}),a.editor.prototype.getSelection=function(){return this.document&&this.document.getSelection()},a.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath},g.prototype.getSelection=function(){var a=new d.selection(this);return!a||a.isInvalid?null:a},a.SELECTION_NONE=1,a.SELECTION_TEXT=2,a.SELECTION_ELEMENT=3,d.selection=function(a){var b=this,d=a.getCustomData("cke_locked_selection");if(d)return d;b.document=a,b.isLocked=0,b._={cache:{}};if(c){var e=b.getNative().createRange();if(!e||e.item&&e.item(0).ownerDocument!=b.document.$||e.parentElement&&e.parentElement().ownerDocument!=b.document.$)b.isInvalid=!0}return b};var u={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1};d.selection.prototype={getNative:c?function(){return this._.cache.nativeSel||(this._.cache.nativeSel=this.document.$.selection)}:function(){return this._.cache.nativeSel||(this._.cache.nativeSel=this.document.getWindow().$.getSelection())},getType:c?function(){var a=this._.cache;if(a.type)return a.type;var b=1;try{var c=this.getNative(),d=c.type;d=="Text"&&(b=2),d=="Control"&&(b=3),c.createRange().parentElement&&(b=2)}catch(e){}return a.type=b}:function(){var a=this._.cache;if(a.type)return a.type;var b=2,c=this.getNative();if(!c)b=1;else if(c.rangeCount==1){var d=c.getRangeAt(0),e=d.startContainer;e==d.endContainer&&e.nodeType==1&&d.endOffset-d.startOffset==1&&u[e.childNodes[d.startOffset].nodeName.toLowerCase()]&&(b=3)}return a.type=b},getRanges:function(){var a=c?function(){function a(a){return(new d.node(a)).getIndex()}var c=function(c,d){c=c.duplicate(),c.collapse(d);var e=c.parentElement(),f=e.ownerDocument;if(!e.hasChildNodes())return{container:e,offset:0};var g=e.children,h,i,j=c.duplicate(),k=0,l=g.length-1,m=-1,n,o;while(k<=l){m=Math.floor((k+l)/2),h=g[m],j.moveToElementText(h),n=j.compareEndPoints("StartToStart",c);if(n>0)l=m-1;else{if(!(n<0)){if(b.ie9Compat&&h.tagName=="BR"){var p="cke_range_marker";c.execCommand("CreateBookmark",!1,p),h=f.getElementsByName(p)[0];var q=a(h);return e.removeChild(h),{container:e,offset:q}}return{container:e,offset:a(h)}}k=m+1}}if(m==-1||m==g.length-1&&n<0){j.moveToElementText(e),j.setEndPoint("StartToStart",c),o=j.text.replace(/(\r\n|\r)/g,"\n").length,g=e.childNodes;if(!o)return h=g[g.length-1],h.nodeType==1?{container:e,offset:g.length}:{container:h,offset:h.nodeValue.length};var r=g.length;while(o>0)o-=g[--r].nodeValue.length;return{container:g[r],offset:-o}}j.collapse(n>0?!0:!1),j.setEndPoint(n>0?"StartToStart":"EndToStart",c),o=j.text.replace(/(\r\n|\r)/g,"\n").length;if(!o)return{container:e,offset:a(h)+(n>0?0:1)};while(o>0)try{i=h[n>0?"previousSibling":"nextSibling"],o-=i.nodeValue.length,h=i}catch(s){return{container:e,offset:a(h)}}return{container:h,offset:n>0?-o:h.nodeValue.length+o}};return function(){var a=this,b=a.getNative(),e=b&&b.createRange(),f=a.getType(),g;if(!b)return[];if(f==2){g=new d.range(a.document);var h=c(e,!0);return g.setStart(new d.node(h.container),h.offset),h=c(e),g.setEnd(new d.node(h.container),h.offset),g.endContainer.getPosition(g.startContainer)&4&&g.endOffset<=g.startContainer.getIndex()&&g.collapse(),[g]}if(f==3){var i=[];for(var j=0;j<e.length;j++){var k=e.item(j),l=k.parentNode,m=0;g=new d.range(a.document);for(;m<l.childNodes.length&&l.childNodes[m]!=k;m++);g.setStart(new d.node(l),m),g.setEnd(new d.node(l),m+1),i.push(g)}return i}return[]}}():function(){var a=[],b,c=this.document,e=this.getNative();if(!e)return a;e.rangeCount||(b=new d.range(c),b.moveToElementEditStart(c.getBody()),a.push(b));for(var f=0;f<e.rangeCount;f++){var g=e.getRangeAt(f);b=new d.range(c),b.setStart(new d.node(g.startContainer),g.startOffset),b.setEnd(new d.node(g.endContainer),g.endOffset),a.push(b)}return a};return function(b){var c=this._.cache;if(c.ranges&&!b)return c.ranges;c.ranges||(c.ranges=new d.rangeList(a.call(this)));if(b){var e=c.ranges;for(var f=0;f<e.length;f++){var g=e[f],h=g.getCommonAncestor();h.isReadOnly()&&e.splice(f,1);if(g.collapsed)continue;if(g.startContainer.isReadOnly()){var i=g.startContainer;while(i){if(i.is("body")||!i.isReadOnly())break;i.type==1&&i.getAttribute("contentEditable")=="false"&&g.setStartAfter(i),i=i.getParent()}}var j=g.startContainer,k=g.endContainer,l=g.startOffset,m=g.endOffset,n=g.clone();j&&j.type==3&&(l>=j.getLength()?n.setStartAfter(j):n.setStartBefore(j)),k&&k.type==3&&(m?n.setEndAfter(k):n.setEndBefore(k));var o=new d.walker(n);o.evaluator=function(a){if(a.type==1&&a.isReadOnly()){var b=g.clone();return g.setEndBefore(a),g.collapsed&&e.splice(f--,1),a.getPosition(n.endContainer)&16||(b.setStartAfter(a),b.collapsed||e.splice(f+1,0,b)),!0}return!1},o.next()}}return c.ranges}}(),getStartElement:function(){var a=this,b=a._.cache;if(b.startElement!==undefined)return b.startElement;var c,d=a.getNative();switch(a.getType()){case 3:return a.getSelectedElement();case 2:var e=a.getRanges()[0];if(e){if(!e.collapsed){e.optimize();for(;;){var f=e.startContainer,g=e.startOffset;if(g!=(f.getChildCount?f.getChildCount():f.getLength())||!!f.isBlockBoundary())break;e.setStartAfter(f)}c=e.startContainer;if(c.type!=1)return c.getParent();c=c.getChild(e.startOffset);if(!c||c.type!=1)c=e.startContainer;else{var i=c.getFirst();while(i&&i.type==1)c=i,i=i.getFirst()}}else c=e.startContainer,c.type!=1&&(c=c.getParent());c=c.$}}return b.startElement=c?new h(c):null},getSelectedElement:function(){var a=this._.cache;if(a.selectedElement!==undefined)return a.selectedElement;var b=this,c=e.tryThese(function(){return b.getNative().createRange().item(0)},function(){var a,c,g=b.getRanges()[0],h=g.getCommonAncestor(1,1),i={table:1,ul:1,ol:1,dl:1};for(var j in i)if(a=h.getAscendant(j,1))break;if(a){var k=new d.range(this.document);k.setStartAt(a,1),k.setEnd(g.startContainer,g.startOffset);var l=e.extend(i,f.$listItem,f.$tableContent),m=new d.walker(k),n=function(a,b){return function(c,d){if(c.type==3&&(!e.trim(c.getText())||c.getParent().data("cke-bookmark")))return!0;var g;if(c.type==1){g=c.getName();if(g=="br"&&b&&c.equals(c.getParent().getBogus()))return!0;if(d&&g in l||g in f.$removeEmpty)return!0}return a.halted=1,!1}};m.guard=n(m),m.checkBackward()&&!m.halted&&(m=new d.walker(k),k.setStart(g.endContainer,g.endOffset),k.setEndAt(a,2),m.guard=n(m,1),m.checkForward()&&!m.halted&&(c=a.$))}if(!c)throw 0;return c},function(){var a=b.getRanges()[0],c,d;for(var e=2;e&&!((c=a.getEnclosedNode())&&c.type==1&&u[c.getName()]&&(d=c));e--)a.shrink(1);return d.$});return a.selectedElement=c?new h(c):null},getSelectedText:function(){var a=this._.cache;if(a.selectedText!==undefined)return a.selectedText;var b="",d=this.getNative();return this.getType()==2&&(b=c?d.createRange().text:d.toString()),a.selectedText=b},lock:function(){var a=this;a.getRanges(),a.getStartElement(),a.getSelectedElement(),a.getSelectedText(),a._.cache.nativeSel={},a.isLocked=1,a.document.setCustomData("cke_locked_selection",a)},unlock:function(a){var b=this,c=b.document,d=c.getCustomData("cke_locked_selection");if(d){c.setCustomData("cke_locked_selection",null);if(a){var e=d.getSelectedElement(),f=!e&&d.getRanges();b.isLocked=0,b.reset(),c.getBody().focus(),e?b.selectElement(e):b.selectRanges(f)}}if(!d||!a)b.isLocked=0,b.reset()},reset:function(){this._.cache={}},selectElement:function(a){var b=this;if(b.isLocked){var c=new d.range(b.document);c.setStartBefore(a),c.setEndAfter(a),b._.cache.selectedElement=a,b._.cache.startElement=a,b._.cache.ranges=new d.rangeList(c),b._.cache.type=3;return}c=new d.range(a.getDocument()),c.setStartBefore(a),c.setEndAfter(a),c.select(),b.document.fire("selectionchange"),b.reset()},selectRanges:function(a){var e=this;if(e.isLocked){e._.cache.selectedElement=null,e._.cache.startElement=a[0]&&a[0].getTouchedStartNode(),e._.cache.ranges=new d.rangeList(a),e._.cache.type=2;return}if(c){if(a.length>1){var f=a[a.length-1];a[0].setEnd(f.endContainer,f.endOffset),a.length=1}a[0]&&a[0].select(),e.reset()}else{var g=e.getNative();if(!g)return;a.length&&(g.removeAllRanges(),b.webkit&&t(e.document));for(var h=0;h<a.length;h++){if(h<a.length-1){var i=a[h],j=a[h+1],k=i.clone();k.setStart(i.endContainer,i.endOffset),k.setEnd(j.startContainer,j.startOffset);if(!k.collapsed){k.shrink(1,!0);var l=k.getCommonAncestor(),m=k.getEnclosedNode();if(l.isReadOnly()||m&&m.isReadOnly()){j.setStart(i.startContainer,i.startOffset),a.splice(h--,1);continue}}}var n=a[h],p=e.document.$.createRange(),r=n.startContainer;n.collapsed&&(b.opera||b.gecko&&b.version<10900)&&r.type==1&&!r.getChildCount()&&r.appendText("");if(n.collapsed&&b.webkit&&o(n)){var s=q(e.document);n.insertNode(s);var u=s.getNext();u&&!s.getPrevious()&&u.type==1&&u.getName()=="br"?(t(e.document),n.moveToPosition(u,3)):n.moveToPosition(s,4)}p.setStart(n.startContainer.$,n.startOffset);try{p.setEnd(n.endContainer.$,n.endOffset)}catch(v){if(!(v.toString().indexOf("NS_ERROR_ILLEGAL_VALUE")>=0))throw v;n.collapse(1),p.setEnd(n.endContainer.$,n.endOffset)}g.addRange(p)}e.document.fire("selectionchange"),e.reset()}},createBookmarks:function(a){return this.getRanges().createBookmarks(a)},createBookmarks2:function(a){return this.getRanges().createBookmarks2(a)},selectBookmarks:function(a){var b=[];for(var c=0;c<a.length;c++){var e=new d.range(this.document);e.moveToBookmark(a[c]),b.push(e)}return this.selectRanges(b),this},getCommonAncestor:function(){var a=this.getRanges(),b=a[0].startContainer,c=a[a.length-1].endContainer;return b.getCommonAncestor(c)},scrollIntoView:function(){var a=this.getStartElement();a.scrollIntoView()}}}(),function(){var a=d.walker.whitespaces(!0),b=/\ufeff|\u00a0/,e={table:1,tbody:1,tr:1};d.range.prototype.select=c?function(c){var d=this,f=d.collapsed,g,h,i,j=d.getEnclosedNode();if(j)try{i=d.document.$.body.createControlRange(),i.addElement(j.$),i.select();return}catch(k){}(d.startContainer.type==1&&d.startContainer.getName()in e||d.endContainer.type==1&&d.endContainer.getName()in e)&&d.shrink(1,!0);var l=d.createBookmark(),p=l.startNode,q;f||(q=l.endNode),i=d.document.$.body.createTextRange(),i.moveToElementText(p.$),i.moveStart("character",1);if(q){var r=d.document.$.body.createTextRange();r.moveToElementText(q.$),i.setEndPoint("EndToEnd",r),i.moveEnd("character",-1)}else{var s=p.getNext(a);g=!(s&&s.getText&&s.getText().match(b))&&(c||!p.hasPrevious()||p.getPrevious().is&&p.getPrevious().is("br")),h=d.document.createElement("span"),h.setHtml("&#65279;"),h.insertBefore(p),g&&d.document.createText("﻿").insertBefore(p)}d.setStartBefore(p),p.remove(),f?(g?(i.moveStart("character",-1),i.select(),d.document.$.selection.clear()):i.select(),d.moveToPosition(h,3),h.remove()):(d.setEndBefore(q),q.remove(),i.select()),d.document.fire("selectionchange")}:function(){this.document.getSelection().selectRanges([this])}}(),function(){function f(a,b){var c=d.exec(a),e=d.exec(b);if(c){if(!c[2]&&e[2]=="px")return e[1];if(c[2]=="px"&&!e[2])return e[1]+"px"}return b}var b=a.htmlParser.cssStyle,c=e.cssLength,d=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i,g={elements:{$:function(c){var d=c.attributes,e=d&&d["data-cke-realelement"],g=e&&new a.htmlParser.fragment.fromHtml(decodeURIComponent(e)),h=g&&g.children[0];if(h&&c.attributes["data-cke-resizable"]){var i=(new b(c)).rules,j=h.attributes,k=i.width,l=i.height;k&&(j.width=f(j.width,k)),l&&(j.height=f(j.height,l))}return h}}};j.add("fakeobjects",{requires:["htmlwriter"],afterInit:function(a){var b=a.dataProcessor,c=b&&b.htmlFilter;c&&c.addRules(g)}}),a.editor.prototype.createFakeElement=function(d,e,f,g){var h=this.lang.fakeobjects,i=h[f]||h.unknown,j={"class":e,src:a.getUrl("images/spacer.gif"),"data-cke-realelement":encodeURIComponent(d.getOuterHtml()),"data-cke-real-node-type":d.type,alt:i,title:i,align:d.getAttribute("align")||""};f&&(j["data-cke-real-element-type"]=f);if(g){j["data-cke-resizable"]=g;var k=new b,l=d.getAttribute("width"),o=d.getAttribute("height");l&&(k.rules.width=c(l)),o&&(k.rules.height=c(o)),k.populate(j)}return this.document.createElement("img",{attributes:j})},a.editor.prototype.createFakeParserElement=function(d,e,f,g){var h=this.lang.fakeobjects,i=h[f]||h.unknown,j,k=new a.htmlParser.basicWriter;d.writeHtml(k),j=k.getHtml();var l={"class":e,src:a.getUrl("images/spacer.gif"),"data-cke-realelement":encodeURIComponent(j),"data-cke-real-node-type":d.type,alt:i,title:i,align:d.attributes.align||""};f&&(l["data-cke-real-element-type"]=f);if(g){l["data-cke-resizable"]=g;var o=d.attributes,p=new b,q=o.width,r=o.height;q!=undefined&&(p.rules.width=c(q)),r!=undefined&&(p.rules.height=c(r)),p.populate(l)}return new a.htmlParser.element("img",l)},a.editor.prototype.restoreRealElement=function(a){if(a.data("cke-real-node-type")!=1)return null;var b=h.createFromHtml(decodeURIComponent(a.data("cke-realelement")),this.document);if(a.data("cke-resizable")){var c=a.getStyle("width"),d=a.getStyle("height");c&&b.setAttribute("width",f(b.getAttribute("width"),c)),d&&b.setAttribute("height",f(b.getAttribute("height"),d))}return b}}(),j.add("richcombo",{requires:["floatpanel","listblock","button"],beforeInit:function(a){a.ui.addHandler("richcombo",k.richCombo.handler)}}),a.UI_RICHCOMBO="richcombo",k.richCombo=e.createClass({$:function(b){var c=this;e.extend(c,b,{title:b.label,modes:{wysiwyg:1}});var d=c.panel||{};delete c.panel,c.id=e.getNextNumber(),c.document=d&&d.parent&&d.parent.getDocument()||a.document,d.className=(d.className||"")+" cke_rcombopanel",d.block={multiSelect:d.multiSelect,attributes:d.attributes},c._={panelDefinition:d,items:{},state:2}},statics:{handler:{create:function(a){return new k.richCombo(a)}}},proto:{renderHtml:function(a){var b=[];return this.render(a,b),b.join("")},render:function(f,g){function m(){var a=this,b=a.modes[f.mode]?2:0;a.setState(f.readOnly&&!a.readOnly?0:b),a.setValue("")}var i=b,j="cke_"+this.id,k=e.addFunction(function(a){var b=this,c=b._;if(c.state==0)return;b.createPanel(f);if(c.on){c.panel.hide();return}b.commit();var d=b.getValue();d?c.list.mark(d):c.list.unmarkAll(),c.panel.showBlock(b.id,new h(a),4)},this),l={id:j,combo:this,focus:function(){var b=a.document.getById(j).getChild(1);b.focus()},clickFn:k};f.on("mode",m,this),!this.readOnly&&f.on("readOnly",m,this);var n=e.addFunction(function(a,b){a=new d.event(a);var c=a.getKeystroke();switch(c){case 13:case 32:case 40:e.callFunction(k,b);break;default:l.onkey(l,c)}a.preventDefault()}),o=e.addFunction(function(){l.onfocus&&l.onfocus()});return l.keyDownFn=n,g.push('<span class="cke_rcombo" role="presentation">',"<span id=",j),this.className&&g.push(' class="',this.className,' cke_off"'),g.push(' role="presentation">','<span id="'+j+'_label" class=cke_label>',this.label,"</span>",'<a hidefocus=true title="',this.title,'" tabindex="-1"',i.gecko&&i.version>=10900&&!i.hc?"":" href=\"javascript:void('"+this.label+"')\"",' role="button" aria-labelledby="',j,'_label" aria-describedby="',j,'_text" aria-haspopup="true"'),(b.opera||b.gecko&&b.mac)&&g.push(' onkeypress="return false;"'),b.gecko&&g.push(' onblur="this.style.cssText = this.style.cssText;"'),g.push(' onkeydown="CKEDITOR.tools.callFunction( ',n,', event, this );" onfocus="return CKEDITOR.tools.callFunction(',o,', event);" '+(c?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction(',k,', this); return false;"><span><span id="'+j+'_text" class="cke_text cke_inline_label">'+this.label+"</span>"+"</span>"+"<span class=cke_openbutton><span class=cke_icon>"+(b.hc?"&#9660;":b.air?"&nbsp;":"")+"</span></span>"+"</a>"+"</span>"+"</span>"),this.onRender&&this.onRender(),l},createPanel:function(b){if(this._.panel)return;var c=this._.panelDefinition,d=this._.panelDefinition.block,e=c.parent||a.document.getBody(),f=new k.floatPanel(b,e,c),g=f.addListBlock(this.id,d),h=this;f.onShow=function(){h.className&&this.element.getFirst().addClass(h.className+"_panel"),h.setState(1),g.focus(!h.multiSelect&&h.getValue()),h._.on=1,h.onOpen&&h.onOpen()},f.onHide=function(a){h.className&&this.element.getFirst().removeClass(h.className+"_panel"),h.setState(h.modes&&h.modes[b.mode]?2:0),h._.on=0,!a&&h.onClose&&h.onClose()},f.onEscape=function(){f.hide()},g.onClick=function(a,b){h.document.getWindow().focus(),h.onClick&&h.onClick.call(h,a,b),b?h.setValue(a,h._.items[a]):h.setValue(""),f.hide(!1)},this._.panel=f,this._.list=g,f.getBlock(this.id).onHide=function(){h._.on=0,h.setState(2)},this.init&&this.init()},setValue:function(a,b){var c=this;c._.value=a;var d=c.document.getById("cke_"+c.id+"_text");d&&(!a&&!b?(b=c.label,d.addClass("cke_inline_label")):d.removeClass("cke_inline_label"),d.setHtml(typeof b!="undefined"?b:a))},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(a){this._.list.mark(a)},hideItem:function(a){this._.list.hideItem(a)},hideGroup:function(a){this._.list.hideGroup(a)},showAll:function(){this._.list.showAll()},add:function(a,b,c){this._.items[a]=c||a,this._.list.add(a,b,c)},startGroup:function(a){this._.list.startGroup(a)},commit:function(){var a=this;a._.committed||(a._.list.commit(),a._.committed=1,k.fire("ready",a)),a._.committed=1},setState:function(a){var b=this;if(b._.state==a)return;b.document.getById("cke_"+b.id).setState(a),b._.state=a}}}),k.prototype.addRichCombo=function(a,b){this.add(a,"richcombo",b)},j.add("htmlwriter"),a.htmlWriter=e.createClass({base:a.htmlParser.basicWriter,$:function(){var a=this;a.base(),a.indentationChars="\t",a.selfClosingEnd=" />",a.lineBreakChars="\n",a.forceSimpleAmpersand=0,a.sortAttributes=1,a._.indent=0,a._.indentation="",a._.inPre=0,a._.rules={};var b=f;for(var c in e.extend({},b.$nonBodyContent,b.$block,b.$listItem,b.$tableContent))a.setRules(c,{indent:1,breakBeforeOpen:1,breakAfterOpen:1,breakBeforeClose:!b[c]["#"],breakAfterClose:1});a.setRules("br",{breakAfterOpen:1}),a.setRules("title",{indent:0,breakAfterOpen:0}),a.setRules("style",{indent:0,breakBeforeClose:1}),a.setRules("pre",{indent:0})},proto:{openTag:function(a,b){var c=this,d=c._.rules[a];c._.indent?c.indentation():d&&d.breakBeforeOpen&&(c.lineBreak(),c.indentation()),c._.output.push("<",a)},openTagClose:function(a,b){var c=this,d=c._.rules[a];b?c._.output.push(c.selfClosingEnd):(c._.output.push(">"),d&&d.indent&&(c._.indentation+=c.indentationChars)),d&&d.breakAfterOpen&&c.lineBreak(),a=="pre"&&(c._.inPre=1)},attribute:function(a,b){typeof b=="string"&&(this.forceSimpleAmpersand&&(b=b.replace(/&amp;/g,"&")),b=e.htmlEncodeAttr(b)),this._.output.push(" ",a,'="',b,'"')},closeTag:function(a){var b=this,c=b._.rules[a];c&&c.indent&&(b._.indentation=b._.indentation.substr(b.indentationChars.length)),b._.indent?b.indentation():c&&c.breakBeforeClose&&(b.lineBreak(),b.indentation()),b._.output.push("</",a,">"),a=="pre"&&(b._.inPre=0),c&&c.breakAfterClose&&b.lineBreak()},text:function(a){var b=this;b._.indent&&(b.indentation(),!b._.inPre&&(a=e.ltrim(a))),b._.output.push(a)},comment:function(a){this._.indent&&this.indentation(),this._.output.push("<!--",a,"-->")},lineBreak:function(){var a=this;!a._.inPre&&a._.output.length>0&&a._.output.push(a.lineBreakChars),a._.indent=1},indentation:function(){var a=this;a._.inPre||a._.output.push(a._.indentation),a._.indent=0},setRules:function(a,b){var c=this._.rules[a];c?e.extend(c,b,!0):this._.rules[a]=b}}}),j.add("menubutton",{requires:["button","menu"],beforeInit:function(a){a.ui.addHandler("menubutton",k.menuButton.handler)}}),a.UI_MENUBUTTON="menubutton",function(){var b=function(b){var c=this._;if(c.state===0)return;c.previousState=c.state;var d=c.menu;d||(d=c.menu=new a.menu(b,{panel:{className:b.skinClass+" cke_contextmenu",attributes:{"aria-label":b.lang.common.options}}}),d.onHide=e.bind(function(){this.setState(this.modes&&this.modes[b.mode]?c.previousState:0)},this),this.onMenu&&d.addListener(this.onMenu));if(c.on){d.hide();return}this.setState(1),d.show(a.document.getById(this._.id),4)};k.menuButton=e.createClass({base:k.button,$:function(a){var c=a.panel;delete a.panel,this.base(a),this.hasArrow=!0,this.click=b},statics:{handler:{create:function(a){return new k.menuButton(a)}}}})}(),j.add("dialogui"),function(){var f=function(a){var b=this;b._||(b._={}),b._["default"]=b._.initValue=a["default"]||"",b._.required=a.required||!1;var c=[b._];for(var d=1;d<arguments.length;d++)c.push(arguments[d]);return c.push(!0),e.extend.apply(e,c),b._},g={build:function(a,b,c){return new k.dialog.textInput(a,b,c)}},i={build:function(a,b,c){return new k.dialog[b.type](a,b,c)}},j={build:function(b,c,d){var e=c.children,f,g=[],h=[];for(var i=0;i<e.length&&(f=e[i]);i++){var j=[];g.push(j),h.push(a.dialog._.uiElementBuilders[f.type].build(b,f,j))}return new k.dialog[c.type](b,h,g,d,c)}},l={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(a){this.setValue(this.getInitValue(),a)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._["default"]},getInitValue:function(){return this._.initValue}},m=e.extend({},k.dialog.uiElement.prototype.eventProcessors,{onChange:function(a,b){this._.domOnChangeRegistered||(a.on("load",function(){this.getInputElement().on("change",function(){if(!a.parts.dialog.isVisible())return;this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",b)}},!0),n=/^on([A-Z]\w+)/,o=function(a){for(var b in a)(n.test(b)||b=="title"||b=="type")&&delete a[b];return a};e.extend(k.dialog,{labeledElement:function(b,c,d,g){if(arguments.length<4)return;var h=f.call(this,c);h.labelId=e.getNextId()+"_label";var i=this._.children=[],j=function(){var d=[],f=c.required?" cke_required":"";if(c.labelLayout!="horizontal")d.push('<label class="cke_dialog_ui_labeled_label'+f+'" ',' id="'+h.labelId+'"',' for="'+h.inputId+'"',(c.labelStyle?' style="'+c.labelStyle+'"':"")+">",c.label,"</label>",'<div class="cke_dialog_ui_labeled_content"'+(c.controlStyle?' style="'+c.controlStyle+'"':"")+' role="presentation">',g.call(this,b,c),"</div>");else{var i={type:"hbox",widths:c.widths,padding:0,children:[{type:"html",html:'<label class="cke_dialog_ui_labeled_label'+f+'"'+' id="'+h.labelId+'"'+' for="'+h.inputId+'"'+(c.labelStyle?' style="'+c.labelStyle+'"':"")+">"+e.htmlEncode(c.label)+"</span>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content"'+(c.controlStyle?' style="'+c.controlStyle+'"':"")+">"+g.call(this,b,c)+"</span>"}]};a.dialog._.uiElementBuilders.hbox.build(b,i,d)}return d.join("")};k.dialog.uiElement.call(this,b,c,d,"div",null,{role:"presentation"},j)},textInput:function(a,b,c){if(arguments.length<3)return;f.call(this,b);var d=this._.inputId=e.getNextId()+"_textInput",g={"class":"cke_dialog_ui_input_"+b.type,id:d,type:"text"},h;b.validate&&(this.validate=b.validate),b.maxLength&&(g.maxlength=b.maxLength),b.size&&(g.size=b.size),b.inputStyle&&(g.style=b.inputStyle);var i=this,j=!1;a.on("load",function(){i.getInputElement().on("keydown",function(a){a.data.getKeystroke()==13&&(j=!0)}),i.getInputElement().on("keyup",function(b){b.data.getKeystroke()==13&&j&&(a.getButton("ok")&&setTimeout(function(){a.getButton("ok").click()},0),j=!1)},null,null,1e3)});var l=function(){var a=['<div class="cke_dialog_ui_input_',b.type,'" role="presentation"'];b.width&&a.push('style="width:'+b.width+'" '),a.push("><input "),g["aria-labelledby"]=this._.labelId,this._.required&&(g["aria-required"]=this._.required);for(var c in g)a.push(c+'="'+g[c]+'" ');return a.push(" /></div>"),a.join("")};k.dialog.labeledElement.call(this,a,b,c,l)},textarea:function(a,b,c){if(arguments.length<3)return;f.call(this,b);var d=this,g=this._.inputId=e.getNextId()+"_textarea",h={};b.validate&&(this.validate=b.validate),h.rows=b.rows||5,h.cols=b.cols||20,typeof b.inputStyle!="undefined"&&(h.style=b.inputStyle);var i=function(){h["aria-labelledby"]=this._.labelId,this._.required&&(h["aria-required"]=this._.required);var a=['<div class="cke_dialog_ui_input_textarea" role="presentation"><textarea class="cke_dialog_ui_input_textarea" id="',g,'" '];for(var b in h)a.push(b+'="'+e.htmlEncode(h[b])+'" ');return a.push(">",e.htmlEncode(d._["default"]),"</textarea></div>"),a.join("")};k.dialog.labeledElement.call(this,a,b,c,i)},checkbox:function(a,b,c){if(arguments.length<3)return;var d=f.call(this,b,{"default":!!b["default"]});b.validate&&(this.validate=b.validate);var g=function(){var c=e.extend({},b,{id:b.id?b.id+"_checkbox":e.getNextId()+"_checkbox"},!0),f=[],g=e.getNextId()+"_label",h={"class":"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":g};return o(c),b["default"]&&(h.checked="checked"),typeof c.inputStyle!="undefined"&&(c.style=c.inputStyle),d.checkbox=new k.dialog.uiElement(a,c,f,"input",null,h),f.push(' <label id="',g,'" for="',h.id,'"'+(b.labelStyle?' style="'+b.labelStyle+'"':"")+">",e.htmlEncode(b.label),"</label>"),f.join("")};k.dialog.uiElement.call(this,a,b,c,"span",null,null,g)},radio:function(a,b,c){if(arguments.length<3)return;f.call(this,b),this._["default"]||(this._["default"]=this._.initValue=b.items[0][1]),b.validate&&(this.validate=b.valdiate);var d=[],g=this,h=function(){var c=[],f=[],h={"class":"cke_dialog_ui_radio_item","aria-labelledby":this._.labelId},i=b.id?b.id+"_radio":e.getNextId()+"_radio";for(var j=0;j<b.items.length;j++){var l=b.items[j],m=l[2]!==undefined?l[2]:l[0],n=l[1]!==undefined?l[1]:l[0],p=e.getNextId()+"_radio_input",q=p+"_label",r=e.extend({},b,{id:p,title:null,type:null},!0),s=e.extend({},r,{title:m},!0),w={type:"radio","class":"cke_dialog_ui_radio_input",name:i,value:n,"aria-labelledby":q},z=[];g._["default"]==n&&(w.checked="checked"),o(r),o(s),typeof r.inputStyle!="undefined"&&(r.style=r.inputStyle),d.push(new k.dialog.uiElement(a,r,z,"input",null,w)),z.push(" "),new k.dialog.uiElement(a,s,z,"label",null,{id:q,"for":w.id},l[0]),c.push(z.join(""))}return new k.dialog.hbox(a,d,c,f),f.join("")};k.dialog.labeledElement.call(this,a,b,c,h),this._.children=d},button:function(b,c,d){if(!arguments.length)return;typeof c=="function"&&(c=c(b.getParentEditor())),f.call(this,c,{disabled:c.disabled||!1}),a.event.implementOn(this);var g=this;b.on("load",function(a){var b=this.getElement();(function(){b.on("click",function(a){g.fire("click",{dialog:g.getDialog()}),a.data.preventDefault()}),b.on("keydown",function(a){a.data.getKeystroke()in{32:1}&&(g.click(),a.data.preventDefault())})})(),b.unselectable()},this);var h=e.extend({},c);delete h.style;var i=e.getNextId()+"_label";k.dialog.uiElement.call(this,b,h,d,"a",null,{style:c.style,href:"javascript:void(0)",title:c.label,hidefocus:"true","class":c["class"],role:"button","aria-labelledby":i},'<span id="'+i+'" class="cke_dialog_ui_button">'+e.htmlEncode(c.label)+"</span>")},select:function(a,b,c){if(arguments.length<3)return;var d=f.call(this,b);b.validate&&(this.validate=b.validate),d.inputId=e.getNextId()+"_select";var g=function(){var c=e.extend({},b,{id:b.id?b.id+"_select":e.getNextId()+"_select"},!0),f=[],g=[],h={id:d.inputId,"class":"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};b.size!=undefined&&(h.size=b.size),b.multiple!=undefined&&(h.multiple=b.multiple),o(c);for(var i=0,j;i<b.items.length&&(j=b.items[i]);i++)g.push('<option value="',e.htmlEncode(j[1]!==undefined?j[1]:j[0]).replace(/"/g,"&quot;"),'" /> ',e.htmlEncode(j[0]));return typeof c.inputStyle!="undefined"&&(c.style=c.inputStyle),d.select=new k.dialog.uiElement(a,c,f,"select",null,h,g.join("")),f.join("")};k.dialog.labeledElement.call(this,a,b,c,g)},file:function(c,d,g){if(arguments.length<3)return;d["default"]===undefined&&(d["default"]="");var h=e.extend(f.call(this,d),{definition:d,buttons:[]});d.validate&&(this.validate=d.validate);var i=function(){h.frameId=e.getNextId()+"_fileInput";var a=b.isCustomDomain(),c=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" id="',h.frameId,'" title="',d.label,'" src="javascript:void('];return c.push(a?"(function(){document.open();document.domain='"+document.domain+"';"+"document.close();"+"})()":"0"),c.push(')"></iframe>'),c.join("")};c.on("load",function(){var b=a.document.getById(h.frameId),c=b.getParent();c.addClass("cke_dialog_ui_input_file")}),k.dialog.labeledElement.call(this,c,d,g,i)},fileButton:function(a,b,c){if(arguments.length<3)return;var d=f.call(this,b),g=this;b.validate&&(this.validate=b.validate);var h=e.extend({},b),i=h.onClick;h.className=(h.className?h.className+" ":"")+"cke_dialog_ui_button",h.onClick=function(c){var d=b["for"];if(!i||i.call(this,c)!==!1)a.getContentElement(d[0],d[1]).submit(),this.disable()},a.on("load",function(){a.getContentElement(b["for"][0],b["for"][1])._.buttons.push(g)}),k.dialog.button.call(this,a,h,c)},html:function(){var a=/^\s*<[\w:]+\s+([^>]*)?>/,b=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,c=/\/$/;return function(
d,e,f){if(arguments.length<3)return;var g=[],h,i=e.html,j,l;i.charAt(0)!="<"&&(i="<span>"+i+"</span>");var m=e.focus;if(m){var n=this.focus;this.focus=function(){n.call(this),typeof m=="function"&&m.call(this),this.fire("focus")};if(e.isFocusable){var o=this.isFocusable;this.isFocusable=o}this.keyboardFocusable=!0}k.dialog.uiElement.call(this,d,e,g,"span",null,null,""),h=g.join(""),j=h.match(a),l=i.match(b)||["","",""],c.test(l[1])&&(l[1]=l[1].slice(0,-1),l[2]="/"+l[2]),f.push([l[1]," ",j[1]||"",l[2]].join(""))}}(),fieldset:function(a,b,c,d,e){var f=e.label,g=function(){var a=[];f&&a.push("<legend>"+f+"</legend>");for(var b=0;b<c.length;b++)a.push(c[b]);return a.join("")};this._={children:b},k.dialog.uiElement.call(this,a,e,d,"fieldset",null,null,g)}},!0),k.dialog.html.prototype=new k.dialog.uiElement,k.dialog.labeledElement.prototype=e.extend(new k.dialog.uiElement,{setLabel:function(b){var c=a.document.getById(this._.labelId);return c.getChildCount()<1?(new d.text(b,a.document)).appendTo(c):c.getChild(0).$.nodeValue=b,this},getLabel:function(){var b=a.document.getById(this._.labelId);return!b||b.getChildCount()<1?"":b.getChild(0).getText()},eventProcessors:m},!0),k.dialog.button.prototype=e.extend(new k.dialog.uiElement,{click:function(){var a=this;return a._.disabled?(a.getElement().$.blur(),!1):a.fire("click",{dialog:a._.dialog})},enable:function(){this._.disabled=!1;var a=this.getElement();a&&a.removeClass("cke_disabled")},disable:function(){this._.disabled=!0,this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!this._.disabled},eventProcessors:e.extend({},k.dialog.uiElement.prototype.eventProcessors,{onClick:function(a,b){this.on("click",b)}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0),k.dialog.textInput.prototype=e.extend(new k.dialog.labeledElement,{getInputElement:function(){return a.document.getById(this._.inputId)},focus:function(){var a=this.selectParentTab();setTimeout(function(){var b=a.getInputElement();b&&b.$.focus()},0)},select:function(){var a=this.selectParentTab();setTimeout(function(){var b=a.getInputElement();b&&(b.$.focus(),b.$.select())},0)},accessKeyUp:function(){this.select()},setValue:function(a){return!a&&(a=""),k.dialog.uiElement.prototype.setValue.apply(this,arguments)},keyboardFocusable:!0},l,!0),k.dialog.textarea.prototype=new k.dialog.textInput,k.dialog.select.prototype=e.extend(new k.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(a,b,d){var e=new h("option",this.getDialog().getParentEditor().document),f=this.getInputElement().$;return e.$.text=a,e.$.value=b===undefined||b===null?a:b,d===undefined||d===null?c?f.add(e.$):f.add(e.$,null):f.add(e.$,d),this},remove:function(a){var b=this.getInputElement().$;return b.remove(a),this},clear:function(){var a=this.getInputElement().$;while(a.length>0)a.remove(0);return this},keyboardFocusable:!0},l,!0),k.dialog.checkbox.prototype=e.extend(new k.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(a,b){this.getInputElement().$.checked=a,!b&&this.fire("change",{value:a})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(a,b){return c?(a.on("load",function(){var a=this._.checkbox.getElement();a.on("propertychange",function(b){b=b.data.$,b.propertyName=="checked"&&this.fire("change",{value:a.$.checked})},this)},this),this.on("change",b),null):m.onChange.apply(this,arguments)}},keyboardFocusable:!0},l,!0),k.dialog.radio.prototype=e.extend(new k.dialog.uiElement,{setValue:function(a,b){var c=this._.children,d;for(var e=0;e<c.length&&(d=c[e]);e++)d.getElement().$.checked=d.getValue()==a;!b&&this.fire("change",{value:a})},getValue:function(){var a=this._.children;for(var b=0;b<a.length;b++)if(a[b].getElement().$.checked)return a[b].getValue();return null},accessKeyUp:function(){var a=this._.children,b;for(b=0;b<a.length;b++)if(a[b].getElement().$.checked){a[b].getElement().focus();return}a[0].getElement().focus()},eventProcessors:{onChange:function(a,b){return c?(a.on("load",function(){var a=this._.children,b=this;for(var c=0;c<a.length;c++){var d=a[c].getElement();d.on("propertychange",function(a){a=a.data.$,a.propertyName=="checked"&&this.$.checked&&b.fire("change",{value:this.getAttribute("value")})})}},this),this.on("change",b),null):m.onChange.apply(this,arguments)}},keyboardFocusable:!0},l,!0),k.dialog.file.prototype=e.extend(new k.dialog.labeledElement,l,{getInputElement:function(){var b=a.document.getById(this._.frameId).getFrameDocument();return b.$.forms.length>0?new h(b.$.forms[0].elements[0]):this.getElement()},submit:function(){return this.getInputElement().getParent().$.submit(),this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(a){var b=/^on([A-Z]\w+)/,c,d=function(a,b,c,d){a.on("formLoaded",function(){a.getInputElement().on(c,d,a)})};for(var e in a){if(!(c=e.match(b)))continue;this.eventProcessors[e]?this.eventProcessors[e].call(this,this._.dialog,a[e]):d(this,this._.dialog,c[1].toLowerCase(),a[e])}return this},reset:function(){function n(){g.$.open(),b.isCustomDomain()&&(g.$.domain=document.domain);var a="";h.size&&(a=h.size-(c?7:0)),g.$.write(['<html dir="'+l+'" lang="'+m+'"><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" dir="'+l+'" lang="'+m+'" action="',e.htmlEncode(h.action),'">','<input type="file" name="',e.htmlEncode(h.id||"cke_upload"),'" size="',e.htmlEncode(a>0?a:""),'" />',"</form>","</body></html>","<script>window.parent.CKEDITOR.tools.callFunction("+j+");","window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction("+k+")}</script>"].join("")),g.$.close();for(var d=0;d<i.length;d++)i[d].enable()}var d=this._,f=a.document.getById(d.frameId),g=f.getFrameDocument(),h=d.definition,i=d.buttons,j=this.formLoadedNumber,k=this.formUnloadNumber,l=d.dialog._.editor.lang.dir,m=d.dialog._.editor.langCode;j||(j=this.formLoadedNumber=e.addFunction(function(){this.fire("formLoaded")},this),k=this.formUnloadNumber=e.addFunction(function(){this.getInputElement().clearCustomData()},this),this.getDialog()._.editor.on("destroy",function(){e.removeFunction(j),e.removeFunction(k)})),b.gecko?setTimeout(n,500):n()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=""},eventProcessors:{onChange:function(a,b){this._.domOnChangeRegistered||(this.on("formLoaded",function(){this.getInputElement().on("change",function(){this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",b)}},keyboardFocusable:!0},!0),k.dialog.fileButton.prototype=new k.dialog.button,k.dialog.fieldset.prototype=e.clone(k.dialog.hbox.prototype),a.dialog.addUIElement("text",g),a.dialog.addUIElement("password",g),a.dialog.addUIElement("textarea",i),a.dialog.addUIElement("checkbox",i),a.dialog.addUIElement("radio",i),a.dialog.addUIElement("button",i),a.dialog.addUIElement("select",i),a.dialog.addUIElement("file",i),a.dialog.addUIElement("fileButton",i),a.dialog.addUIElement("html",i),a.dialog.addUIElement("fieldset",j)}(),j.add("panel",{beforeInit:function(a){a.ui.addHandler("panel",k.panel.handler)}}),a.UI_PANEL="panel",k.panel=function(a,b){var c=this;b&&e.extend(c,b),e.extend(c,{className:"",css:[]}),c.id=e.getNextId(),c.document=a,c._={blocks:{}}},k.panel.handler={create:function(a){return new k.panel(a)}},k.panel.prototype={renderHtml:function(a){var b=[];return this.render(a,b),b.join("")},render:function(a,c){var d=this,e=d.id;c.push('<div class="',a.skinClass,'" lang="',a.langCode,'" role="presentation" style="display:none;z-index:'+(a.config.baseFloatZIndex+1)+'">'+"<div"+" id=",e," dir=",a.lang.dir,' role="presentation" class="cke_panel cke_',a.lang.dir),d.className&&c.push(" ",d.className),c.push('">');if(d.forceIFrame||d.css.length)c.push('<iframe id="',e,'_frame" frameborder="0" role="application" src="javascript:void('),c.push(b.isCustomDomain()?"(function(){document.open();document.domain='"+document.domain+"';"+"document.close();"+"})()":"0"),c.push(')"></iframe>');return c.push("</div></div>"),e},getHolderElement:function(){var c=this._.holder;if(!c){if(this.forceIFrame||this.css.length){var d=this.document.getById(this.id+"_frame"),f=d.getParent(),g=f.getAttribute("dir"),h=f.getParent().getAttribute("class"),i=f.getParent().getAttribute("lang"),j=d.getFrameDocument();b.iOS&&f.setStyles({overflow:"scroll","-webkit-overflow-scrolling":"touch"});var k=e.addFunction(e.bind(function(a){this.isLoaded=!0,this.onLoad&&this.onLoad()},this)),l='<!DOCTYPE html><html dir="'+g+'" class="'+h+'_container" lang="'+i+'">'+"<head>"+"<style>."+h+"_container{visibility:hidden}</style>"+"</head>"+'<body class="cke_'+g+" cke_panel_frame "+b.cssClass+'" style="margin:0;padding:0"'+' onload="( window.CKEDITOR || window.parent.CKEDITOR ).tools.callFunction('+k+');"></body>'+e.buildStyleHtml(this.css)+"</html>";j.write(l);var m=j.getWindow();m.$.CKEDITOR=a,j.on("key"+(b.opera?"press":"down"),function(a){var b=this,c=a.data.getKeystroke(),d=b.document.getById(b.id).getAttribute("dir");if(b._.onKeyDown&&b._.onKeyDown(c)===!1){a.data.preventDefault();return}(c==27||c==(d=="rtl"?39:37))&&b.onEscape&&b.onEscape(c)===!1&&a.data.preventDefault()},this),c=j.getBody(),c.unselectable(),b.air&&e.callFunction(k)}else c=this.document.getById(this.id);this._.holder=c}return c},addBlock:function(a,b){var c=this;return b=c._.blocks[a]=b instanceof k.panel.block?b:new k.panel.block(c.getHolderElement(),b),c._.currentBlock||c.showBlock(a),b},getBlock:function(a){return this._.blocks[a]},showBlock:function(b){var c=this,d=c._.blocks,f=d[b],g=c._.currentBlock,h=c.forceIFrame?c.document.getById(c.id+"_frame"):c._.holder;return h.getParent().getParent().disableContextMenu(),g&&(h.removeAttributes(g.attributes),g.hide()),c._.currentBlock=f,h.setAttributes(f.attributes),a.fire("ariaWidget",h),f._.focusIndex=-1,c._.onKeyDown=f.onKeyDown&&e.bind(f.onKeyDown,f),f.show(),f},destroy:function(){this.element&&this.element.remove()}},k.panel.block=e.createClass({$:function(a,b){var c=this;c.element=a.append(a.getDocument().createElement("div",{attributes:{tabIndex:-1,"class":"cke_panel_block",role:"presentation"},styles:{display:"none"}})),b&&e.extend(c,b),c.attributes.title||(c.attributes.title=c.attributes["aria-label"]),c.keys={},c._.focusIndex=-1,c.element.disableContextMenu()},_:{markItem:function(a){var c=this;if(a==-1)return;var d=c.element.getElementsByTag("a"),e=d.getItem(c._.focusIndex=a);(b.webkit||b.opera)&&e.getDocument().getWindow().focus(),e.focus(),c.onMark&&c.onMark(e)}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){var a=this;(!a.onHide||a.onHide.call(a)!==!0)&&a.element.setStyle("display","none")},onKeyDown:function(a){var b=this,c=b.keys[a];switch(c){case"next":var d=b._.focusIndex,e=b.element.getElementsByTag("a"),f;while(f=e.getItem(++d))if(f.getAttribute("_cke_focus")&&f.$.offsetWidth){b._.focusIndex=d,f.focus();break}return!1;case"prev":d=b._.focusIndex,e=b.element.getElementsByTag("a");while(d>0&&(f=e.getItem(--d)))if(f.getAttribute("_cke_focus")&&f.$.offsetWidth){b._.focusIndex=d,f.focus();break}return!1;case"click":case"mouseup":return d=b._.focusIndex,f=d>=0&&b.element.getElementsByTag("a").getItem(d),f&&(f.$[c]?f.$[c]():f.$["on"+c]()),!1}return!0}}}),j.add("listblock",{requires:["panel"],onLoad:function(){k.panel.prototype.addListBlock=function(a,b){return this.addBlock(a,new k.listBlock(this.getHolderElement(),b))},k.listBlock=e.createClass({base:k.panel.block,$:function(a,b){var d=this;b=b||{};var e=b.attributes||(b.attributes={});(d.multiSelect=!!b.multiSelect)&&(e["aria-multiselectable"]=!0),!e.role&&(e.role="listbox"),d.base.apply(d,arguments);var f=d.keys;f[40]="next",f[9]="next",f[38]="prev",f[2228233]="prev",f[32]=c?"mouseup":"click",c&&(f[13]="mouseup"),d._.pendingHtml=[],d._.items={},d._.groups={}},_:{close:function(){this._.started&&(this._.pendingHtml.push("</ul>"),delete this._.started)},getClick:function(){return this._.click||(this._.click=e.addFunction(function(a){var b=this,c=!0;b.multiSelect?c=b.toggle(a):b.mark(a),b.onClick&&b.onClick(a,c)},this)),this._.click}},proto:{add:function(a,b,d){var f=this,g=f._.pendingHtml,h=e.getNextId();f._.started||(g.push('<ul role="presentation" class=cke_panel_list>'),f._.started=1,f._.size=f._.size||0),f._.items[a]=h,g.push("<li id=",h,' class=cke_panel_listItem role=presentation><a id="',h,'_option" _cke_focus=1 hidefocus=true title="',d||a,'" href="javascript:void(\'',a,"')\" "+(c?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction(',f._.getClick(),",'",a,"'); return false;\"",' role="option" aria-posinset="'+ ++f._.size+'">',b||a,"</a></li>")},startGroup:function(a){this._.close();var b=e.getNextId();this._.groups[a]=b,this._.pendingHtml.push('<h1 role="presentation" id=',b," class=cke_panel_grouptitle>",a,"</h1>")},commit:function(){var a=this;a._.close(),a.element.appendHtml(a._.pendingHtml.join(""));var b=a._.items,c=a.element.getDocument();for(var d in b)c.getById(b[d]+"_option").setAttribute("aria-setsize",a._.size);delete a._.size,a._.pendingHtml=[]},toggle:function(a){var b=this.isMarked(a);return b?this.unmark(a):this.mark(a),!b},hideGroup:function(a){var b=this.element.getDocument().getById(this._.groups[a]),c=b&&b.getNext();b&&(b.setStyle("display","none"),c&&c.getName()=="ul"&&c.setStyle("display","none"))},hideItem:function(a){this.element.getDocument().getById(this._.items[a]).setStyle("display","none")},showAll:function(){var a=this._.items,b=this._.groups,c=this.element.getDocument();for(var d in a)c.getById(a[d]).setStyle("display","");for(var e in b){var f=c.getById(b[e]),g=f.getNext();f.setStyle("display",""),g&&g.getName()=="ul"&&g.setStyle("display","")}},mark:function(a){var b=this;b.multiSelect||b.unmarkAll();var c=b._.items[a],d=b.element.getDocument().getById(c);d.addClass("cke_selected"),b.element.getDocument().getById(c+"_option").setAttribute("aria-selected",!0),b.onMark&&b.onMark(d)},unmark:function(a){var b=this,c=b.element.getDocument(),d=b._.items[a],e=c.getById(d);e.removeClass("cke_selected"),c.getById(d+"_option").removeAttribute("aria-selected"),b.onUnmark&&b.onUnmark(e)},unmarkAll:function(){var a=this,b=a._.items,c=a.element.getDocument();for(var d in b){var e=b[d];c.getById(e).removeClass("cke_selected"),c.getById(e+"_option").removeAttribute("aria-selected")}a.onUnmark&&a.onUnmark()},isMarked:function(a){return this.element.getDocument().getById(this._.items[a]).hasClass("cke_selected")},focus:function(a){this._.focusIndex=-1;if(a){var b=this.element.getDocument().getById(this._.items[a]).getFirst(),c=this.element.getElementsByTag("a"),d,e=-1;while(d=c.getItem(++e))if(d.equals(b)){this._.focusIndex=e;break}setTimeout(function(){b.focus()},0)}}}})}}),a.themes.add("default",function(){function f(c,d){var e,f;f=c.config.sharedSpaces,f=f&&f[d],f=f&&a.document.getById(f);if(f){var g='<span class="cke_shared " dir="'+c.lang.dir+'"'+">"+'<span class="'+c.skinClass+" "+c.id+" cke_editor_"+c.name+'">'+'<span class="'+b.cssClass+'">'+'<span class="cke_wrapper cke_'+c.lang.dir+'">'+'<span class="cke_editor">'+'<div class="cke_'+d+'">'+"</div></span></span></span></span></span>",i=f.append(h.createFromHtml(g,f.getDocument()));f.getCustomData("cke_hasshared")?i.hide():f.setCustomData("cke_hasshared",1),e=i.getChild([0,0,0,0]),!c.sharedSpaces&&(c.sharedSpaces={}),c.sharedSpaces[d]=e,c.on("focus",function(){for(var a=0,b,c=f.getChildren();b=c.getItem(a);a++)b.type==1&&!b.equals(i)&&b.hasClass("cke_shared")&&b.hide();i.show()}),c.on("destroy",function(){i.remove()})}return e}var d={};return{build:function(a,c){var e=a.name,g=a.element,i=a.elementMode;if(!g||i==0)return;i==1&&g.hide();var j=a.fire("themeSpace",{space:"top",html:""}).html,k=a.fire("themeSpace",{space:"contents",html:""}).html,l=a.fireOnce("themeSpace",{space:"bottom",html:""}).html,o=k&&a.config.height,p=a.config.tabIndex||a.element.getAttribute("tabindex")||0;k?isNaN(o)||(o+="px"):o="auto";var q="",r=a.config.width;r&&(isNaN(r)||(r+="px"),q+="width: "+r+";");var s=j&&f(a,"top"),t=f(a,"bottom");s&&(s.setHtml(j),j=""),t&&(t.setHtml(l),l="");var u="<style>."+a.skinClass+"{visibility:hidden;}</style>";d[a.skinClass]?u="":d[a.skinClass]=1;var v=h.createFromHtml(['<span id="cke_',e,'" class="',a.skinClass," ",a.id," cke_editor_",e,'" dir="',a.lang.dir,'" title="',b.gecko?" ":"",'" lang="',a.langCode,'"'+(b.webkit?' tabindex="'+p+'"':"")+' role="application"'+' aria-labelledby="cke_',e,'_arialbl"'+(q?' style="'+q+'"':"")+">"+'<span id="cke_',e,'_arialbl" class="cke_voice_label">'+a.lang.editor+"</span>"+'<span class="',b.cssClass,'" role="presentation"><span class="cke_wrapper cke_',a.lang.dir,'" role="presentation"><table class="cke_editor" border="0" cellspacing="0" cellpadding="0" role="presentation"><tbody><tr',j?"":' style="display:none"',' role="presentation"><td id="cke_top_',e,'" class="cke_top" role="presentation">',j,"</td></tr><tr",k?"":' style="display:none"',' role="presentation"><td id="cke_contents_',e,'" class="cke_contents" style="height:',o,'" role="presentation">',k,"</td></tr><tr",l?"":' style="display:none"',' role="presentation"><td id="cke_bottom_',e,'" class="cke_bottom" role="presentation">',l,"</td></tr></tbody></table>"+u+"</span>"+"</span>"+"</span>"].join(""));v.getChild([1,0,0,0,0]).unselectable(),v.getChild([1,0,0,0,2]).unselectable(),i==1?v.insertAfter(g):g.append(v),a.container=v,v.disableContextMenu(),a.on("contentDirChanged",function(b){var c=(a.lang.dir!=b.data?"add":"remove")+"Class";v.getChild(1)[c]("cke_mixed_dir_content");var d=this.sharedSpaces&&this.sharedSpaces[this.config.toolbarLocation];d&&d.getParent().getParent()[c]("cke_mixed_dir_content")}),a.fireOnce("themeLoaded"),a.fireOnce("uiReady")},buildDialog:function(a){var d=e.getNextNumber(),f=h.createFromHtml(['<div class="',a.id,"_dialog cke_editor_",a.name.replace(".","\\."),"_dialog cke_skin_",a.skinName,'" dir="',a.lang.dir,'" lang="',a.langCode,'" role="dialog" aria-labelledby="%title#"><table class="cke_dialog'," "+b.cssClass," cke_",a.lang.dir,'" style="position:absolute" role="presentation"><tr><td role="presentation"><div class="%body" role="presentation"><div id="%title#" class="%title" role="presentation"></div><a id="%close_button#" class="%close_button" href="javascript:void(0)" title="'+a.lang.common.close+'" role="button"><span class="cke_label">X</span></a>'+'<div id="%tabs#" class="%tabs" role="tablist"></div>'+'<table class="%contents" role="presentation">'+"<tr>"+'<td id="%contents#" class="%contents" role="presentation"></td>'+"</tr>"+"<tr>"+'<td id="%footer#" class="%footer" role="presentation"></td>'+"</tr>"+"</table>"+"</div>"+'<div id="%tl#" class="%tl"></div>'+'<div id="%tc#" class="%tc"></div>'+'<div id="%tr#" class="%tr"></div>'+'<div id="%ml#" class="%ml"></div>'+'<div id="%mr#" class="%mr"></div>'+'<div id="%bl#" class="%bl"></div>'+'<div id="%bc#" class="%bc"></div>'+'<div id="%br#" class="%br"></div>'+"</td></tr>"+"</table>",c?"":"<style>.cke_dialog{visibility:hidden;}</style>","</div>"].join("").replace(/#/g,"_"+d).replace(/%/g,"cke_dialog_")),g=f.getChild([0,0,0,0,0]),i=g.getChild(0),j=g.getChild(1);if(c&&!b.ie6Compat){var k=b.isCustomDomain(),l="javascript:void(function(){"+encodeURIComponent("document.open();"+(k?'document.domain="'+document.domain+'";':"")+"document.close();")+"}())",m=h.createFromHtml('<iframe frameBorder="0" class="cke_iframe_shim" src="'+l+'"'+' tabIndex="-1"'+"></iframe>");m.appendTo(g.getParent())}return i.unselectable(),j.unselectable(),{element:f,parts:{dialog:f.getChild(0),title:i,close:j,tabs:g.getChild(2),contents:g.getChild([3,0,0,0]),footer:g.getChild([3,0,1,0])}}},destroy:function(a){var b=a.container,c=a.element;b&&(b.clearCustomData(),b.remove()),c&&(c.clearCustomData(),a.elementMode==1&&c.show(),delete a.element)}}}()),a.editor.prototype.getThemeSpace=function(b){var c="cke_"+b,d=this._[c]||(this._[c]=a.document.getById(c+"_"+this.name));return d},a.editor.prototype.resize=function(c,d,e,f){var g=this,h=g.container,i=a.document.getById("cke_contents_"+g.name),j=b.webkit&&g.document&&g.document.getWindow().$.frameElement,k=f?h.getChild(1):h;k.setSize("width",c,!0),j&&(j.style.width="1%");var l=e?0:(k.$.offsetHeight||0)-(i.$.clientHeight||0);i.setStyle("height",Math.max(d-l,0)+"px"),j&&(j.style.width="100%"),g.fire("resize")},a.editor.prototype.getResizable=function(b){return b?a.document.getById("cke_contents_"+this.name):this.container}}(),$(document).ready(function(){$(".flag").click(function(){var a=$(this).closest("div.box-gripe"),b=a.attr("id");$.post("/flag-gripe",{id:b},function(c){a.html(c),setTimeout(function(){$("#popup-"+b).fadeOut("fast")},3e3)})})})